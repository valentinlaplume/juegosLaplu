"use strict";(self.webpackChunkjuegosLaplu=self.webpackChunkjuegosLaplu||[]).push([[179],{440:(Kt,qe,H)=>{H.d(qe,{nm:()=>fs});var _=H(5813);H(4650),H(5867);var mt=H(5861),st=H(9681),Ge=H(4859),Mt=H(2090),$e=H(1877);const P=new Map,ve={activated:!1,tokenObservers:[]},oe={initialized:!1,enabled:!1};function Te(Fe){return P.get(Fe)||ve}function Se(Fe,ke){P.set(Fe,ke)}function Be(){return oe}class Qt{constructor(ke,We,rt,vt,At){if(this.operation=ke,this.retryPolicy=We,this.getWaitDuration=rt,this.lowerBound=vt,this.upperBound=At,this.pending=null,this.nextErrorWaitInterval=vt,vt>At)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ke){var We=this;return(0,mt.Z)(function*(){We.stop();try{We.pending=new Mt.BH,yield function sn(Fe){return new Promise(ke=>{setTimeout(ke,Fe)})}(We.getNextRun(ke)),We.pending.resolve(),yield We.pending.promise,We.pending=new Mt.BH,yield We.operation(),We.pending.resolve(),yield We.pending.promise,We.process(!0).catch(()=>{})}catch(rt){We.retryPolicy(rt)?We.process(!1).catch(()=>{}):We.stop()}})()}getNextRun(ke){if(ke)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const We=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),We}}}const tn=new Mt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function yn(Fe){if(!Te(Fe).activated)throw tn.create("use-before-activation",{appName:Fe.name})}function Dr(Fe,ke){return wn.apply(this,arguments)}function wn(){return(wn=(0,mt.Z)(function*({url:Fe,body:ke},We){var rt,vt;const At={"Content-Type":"application/json"},xn=We.getImmediate({optional:!0});if(xn){const Sn=yield xn.getHeartbeatsHeader();Sn&&(At["X-Firebase-Client"]=Sn)}const Kn={method:"POST",body:JSON.stringify(ke),headers:At};let mr,ts;try{mr=yield fetch(Fe,Kn)}catch(Sn){throw tn.create("fetch-network-error",{originalErrorMessage:null===(rt=Sn)||void 0===rt?void 0:rt.message})}if(200!==mr.status)throw tn.create("fetch-status-error",{httpStatus:mr.status});try{ts=yield mr.json()}catch(Sn){throw tn.create("fetch-parse-error",{originalErrorMessage:null===(vt=Sn)||void 0===vt?void 0:vt.message})}const ps=ts.ttl.match(/^([\d.]+)(s)$/);if(!ps||!ps[2]||isNaN(Number(ps[1])))throw tn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${ts.ttl}`});const ro=1e3*Number(ps[1]),rr=Date.now();return{token:ts.token,expireTimeMillis:rr+ro,issuedAtTimeMillis:rr}})).apply(this,arguments)}function Ht(Fe,ke){const{projectId:We,appId:rt,apiKey:vt}=Fe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${We}/apps/${rt}:exchangeDebugToken?key=${vt}`,body:{debug_token:ke}}}const sr="firebase-app-check-store";let or=null;function Tn(){return or||(or=new Promise((Fe,ke)=>{var We;try{const rt=indexedDB.open("firebase-app-check-database",1);rt.onsuccess=vt=>{Fe(vt.target.result)},rt.onerror=vt=>{var At;ke(tn.create("storage-open",{originalErrorMessage:null===(At=vt.target.error)||void 0===At?void 0:At.message}))},rt.onupgradeneeded=vt=>{0===vt.oldVersion&&vt.target.result.createObjectStore(sr,{keyPath:"compositeKey"})}}catch(rt){ke(tn.create("storage-open",{originalErrorMessage:null===(We=rt)||void 0===We?void 0:We.message}))}}),or)}function Bn(){return(Bn=(0,mt.Z)(function*(Fe,ke){const rt=(yield Tn()).transaction(sr,"readwrite"),At=rt.objectStore(sr).put({compositeKey:Fe,value:ke});return new Promise((xn,Kn)=>{At.onsuccess=mr=>{xn()},rt.onerror=mr=>{var ts;Kn(tn.create("storage-set",{originalErrorMessage:null===(ts=mr.target.error)||void 0===ts?void 0:ts.message}))}})})).apply(this,arguments)}const vr=new $e.Yd("@firebase/app-check");function En(Fe,ke){return(0,Mt.hl)()?function _i(Fe,ke){return function zn(Fe,ke){return Bn.apply(this,arguments)}(function gr(Fe){return`${Fe.options.appId}-${Fe.name}`}(Fe),ke)}(Fe,ke).catch(We=>{vr.warn(`Failed to write token to IndexedDB. Error: ${We}`)}):Promise.resolve()}function Oi(){return Be().enabled}function jn(){return xe.apply(this,arguments)}function xe(){return(xe=(0,mt.Z)(function*(){const Fe=Be();if(Fe.enabled&&Fe.token)return Fe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ie={error:"UNKNOWN_ERROR"};function Ae(Fe){return Mt.US.encodeString(JSON.stringify(Fe),!1)}function De(Fe){return _t.apply(this,arguments)}function _t(){return(_t=(0,mt.Z)(function*(Fe,ke=!1){const We=Fe.app;yn(We);const rt=Te(We);let At,vt=rt.token;if(!vt){const mr=yield rt.cachedTokenPromise;mr&&ye(mr)&&(vt=mr)}if(!ke&&vt&&ye(vt))return{token:vt.token};let Kn,xn=!1;if(Oi()){rt.exchangeTokenPromise||(rt.exchangeTokenPromise=Dr(Ht(We,yield jn()),Fe.heartbeatServiceProvider).then(ts=>(rt.exchangeTokenPromise=void 0,ts)),xn=!0);const mr=yield rt.exchangeTokenPromise;return yield En(We,mr),Se(We,Object.assign(Object.assign({},rt),{token:mr})),{token:mr.token}}try{rt.exchangeTokenPromise||(rt.exchangeTokenPromise=rt.provider.getToken().then(mr=>(rt.exchangeTokenPromise=void 0,mr)),xn=!0),vt=yield rt.exchangeTokenPromise}catch(mr){"appCheck/throttled"===mr.code?vr.warn(mr.message):vr.error(mr),At=mr}return vt?(Kn={token:vt.token},Se(We,Object.assign(Object.assign({},rt),{token:vt})),yield En(We,vt)):Kn=_e(At),xn&&Ue(We,Kn),Kn})).apply(this,arguments)}function qt(Fe,ke){const We=Te(Fe),rt=We.tokenObservers.filter(vt=>vt.next!==ke);0===rt.length&&We.tokenRefresher&&We.tokenRefresher.isRunning()&&We.tokenRefresher.stop(),Se(Fe,Object.assign(Object.assign({},We),{tokenObservers:rt}))}function lr(Fe){const{app:ke}=Fe,We=Te(ke);let rt=We.tokenRefresher;rt||(rt=function Gn(Fe){const{app:ke}=Fe;return new Qt((0,mt.Z)(function*(){let rt;if(rt=Te(ke).token?yield De(Fe,!0):yield De(Fe),rt.error)throw rt.error}),()=>!0,()=>{const We=Te(ke);if(We.token){let rt=We.token.issuedAtTimeMillis+.5*(We.token.expireTimeMillis-We.token.issuedAtTimeMillis)+3e5;return rt=Math.min(rt,We.token.expireTimeMillis-3e5),Math.max(0,rt-Date.now())}return 0},3e4,96e4)}(Fe),Se(ke,Object.assign(Object.assign({},We),{tokenRefresher:rt}))),!rt.isRunning()&&We.isTokenAutoRefreshEnabled&&rt.start()}function Ue(Fe,ke){const We=Te(Fe).tokenObservers;for(const rt of We)try{"EXTERNAL"===rt.type&&null!=ke.error?rt.error(ke.error):rt.next(ke)}catch{}}function ye(Fe){return Fe.expireTimeMillis-Date.now()>0}function _e(Fe){return{token:Ae(Ie),error:Fe}}class yt{constructor(ke,We){this.app=ke,this.heartbeatServiceProvider=We}_delete(){const{tokenObservers:ke}=Te(this.app);for(const We of ke)qt(this.app,We.next);return Promise.resolve()}}const Es="app-check-internal";!function di(){(0,st._registerComponent)(new Ge.wA("app-check",Fe=>function gt(Fe,ke){return new yt(Fe,ke)}(Fe.getProvider("app").getImmediate(),Fe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Fe,ke,We)=>{Fe.getProvider(Es).initialize()})),(0,st._registerComponent)(new Ge.wA(Es,Fe=>function an(Fe){return{getToken:ke=>De(Fe,ke),addTokenListener:ke=>function Pt(Fe,ke,We,rt){const{app:vt}=Fe,At=Te(vt),xn={next:We,error:rt,type:ke};if(Se(vt,Object.assign(Object.assign({},At),{tokenObservers:[...At.tokenObservers,xn]})),At.token&&ye(At.token)){const Kn=At.token;Promise.resolve().then(()=>{We({token:Kn.token}),lr(Fe)}).catch(()=>{})}At.cachedTokenPromise.then(()=>lr(Fe))}(Fe,"INTERNAL",ke),removeTokenListener:ke=>qt(Fe.app,ke)}}(Fe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,st.registerVersion)("@firebase/app-check","0.5.12")}();class fs{constructor(){return(0,_.vb)("app-check")}}typeof window<"u"&&window},1205:(Kt,qe,H)=>{H.d(qe,{zQ:()=>Ct,rT:()=>oe,f7:()=>Se,L6:()=>P,_Q:()=>ve,lh:()=>Te,Qv:()=>$e,nw:()=>Be});var _=H(4650),Z=H(7579),q=H(9646),Re=H(9751),J=H(8996),Me=H(6451),Le=H(5363),Ve=H(3900),He=H(4004),ae=H(6063);class ie extends Z.x{constructor(Ut=1/0,Zt=1/0,lt=ae.l){super(),this._bufferSize=Ut,this._windowTime=Zt,this._timestampProvider=lt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Zt===1/0,this._bufferSize=Math.max(1,Ut),this._windowTime=Math.max(1,Zt)}next(Ut){const{isStopped:Zt,_buffer:lt,_infiniteTimeWindow:Qt,_timestampProvider:sn,_windowTime:en}=this;Zt||(lt.push(Ut),!Qt&&lt.push(sn.now()+en)),this._trimBuffer(),super.next(Ut)}_subscribe(Ut){this._throwIfClosed(),this._trimBuffer();const Zt=this._innerSubscribe(Ut),{_infiniteTimeWindow:lt,_buffer:Qt}=this,sn=Qt.slice();for(let en=0;en<sn.length&&!Ut.closed;en+=lt?1:2)Ut.next(sn[en]);return this._checkFinalizedStatuses(Ut),Zt}_trimBuffer(){const{_bufferSize:Ut,_timestampProvider:Zt,_buffer:lt,_infiniteTimeWindow:Qt}=this,sn=(Qt?1:2)*Ut;if(Ut<1/0&&sn<lt.length&&lt.splice(0,lt.length-sn),!Qt){const en=Zt.now();let tn=0;for(let Xn=1;Xn<lt.length&&lt[Xn]<=en;Xn+=2)tn=Xn;tn&&lt.splice(0,tn+1)}}}var me=H(3099);function it(kt,Ut,Zt){let lt,Qt=!1;return kt&&"object"==typeof kt?({bufferSize:lt=1/0,windowTime:Ut=1/0,refCount:Qt=!1,scheduler:Zt}=kt):lt=kt??1/0,(0,me.B)({connector:()=>new ie(lt,Ut,Zt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Qt})}var tt=H(590),Ke=H(576);function zt(kt,Ut){return(0,Ke.m)(Ut)?(0,Ve.w)(()=>kt,Ut):(0,Ve.w)(()=>kt)}var at=H(9468),nt=H(9300),Ne=H(5813),Bt=H(2011),mt=H(6895),st=H(440);H(127);const $e=new _.OlP("angularfire2.auth.use-emulator"),P=new _.OlP("angularfire2.auth.settings"),ve=new _.OlP("angularfire2.auth.tenant-id"),oe=new _.OlP("angularfire2.auth.langugage-code"),Te=new _.OlP("angularfire2.auth.use-device-language"),Se=new _.OlP("angularfire.auth.persistence"),Be=(kt,Ut,Zt,lt,Qt,sn,en,tn)=>(0,Bt.cc)(`${kt.name}.auth`,"AngularFireAuth",kt.name,()=>{const Xn=Ut.runOutsideAngular(()=>kt.auth());if(Zt&&Xn.useEmulator(...Zt),lt&&(Xn.tenantId=lt),Xn.languageCode=Qt,sn&&Xn.useDeviceLanguage(),en)for(const[yn,mn]of Object.entries(en))Xn.settings[yn]=mn;return tn&&Xn.setPersistence(tn),Xn},[Zt,lt,Qt,sn,en,tn]);let Ct=(()=>{class kt{constructor(Zt,lt,Qt,sn,en,tn,Xn,yn,mn,ci,Dr,wn){const Vn=new Z.x,Zr=(0,q.of)(void 0).pipe((0,Le.Q)(en.outsideAngular),(0,Ve.w)(()=>sn.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,2274)))),(0,He.U)(()=>(0,Bt.on)(Zt,sn,lt)),(0,He.U)(Ht=>Be(Ht,sn,tn,yn,mn,ci,Xn,Dr)),it({bufferSize:1,refCount:!1}));if((0,mt.PM)(Qt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,q.of)(null);else{Zr.pipe((0,tt.P)()).subscribe();const pr=Zr.pipe((0,Ve.w)(St=>St.getRedirectResult().then(or=>or,()=>null)),Ne.iC,it({bufferSize:1,refCount:!1})),Nn=Zr.pipe((0,Ve.w)(St=>new Re.y(or=>({unsubscribe:sn.runOutsideAngular(()=>St.onAuthStateChanged(Tn=>or.next(Tn),Tn=>or.error(Tn),()=>or.complete()))})))),sr=Zr.pipe((0,Ve.w)(St=>new Re.y(or=>({unsubscribe:sn.runOutsideAngular(()=>St.onIdTokenChanged(Tn=>or.next(Tn),Tn=>or.error(Tn),()=>or.complete()))}))));this.authState=pr.pipe(zt(Nn),(0,at.R)(en.outsideAngular),(0,Le.Q)(en.insideAngular)),this.user=pr.pipe(zt(sr),(0,at.R)(en.outsideAngular),(0,Le.Q)(en.insideAngular)),this.idToken=this.user.pipe((0,Ve.w)(St=>St?(0,J.D)(St.getIdToken()):(0,q.of)(null))),this.idTokenResult=this.user.pipe((0,Ve.w)(St=>St?(0,J.D)(St.getIdTokenResult()):(0,q.of)(null))),this.credential=(0,Me.T)(pr,Vn,this.authState.pipe((0,nt.h)(St=>!St))).pipe((0,He.U)(St=>St?.user?St:null),(0,at.R)(en.outsideAngular),(0,Le.Q)(en.insideAngular))}return(0,Bt.pX)(this,Zr,sn,{spy:{apply:(Ht,pr,Nn)=>{(Ht.startsWith("signIn")||Ht.startsWith("createUser"))&&Nn.then(sr=>Vn.next(sr))}}})}}return kt.\u0275fac=function(Zt){return new(Zt||kt)(_.LFG(Bt.Dh),_.LFG(Bt.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Ne.HU),_.LFG($e,8),_.LFG(P,8),_.LFG(ve,8),_.LFG(oe,8),_.LFG(Te,8),_.LFG(Se,8),_.LFG(st.nm,8))},kt.\u0275prov=_.Yz7({token:kt,factory:kt.\u0275fac,providedIn:"any"}),kt})()},7471:(Kt,qe,H)=>{H.d(qe,{KQ:()=>Tf,JS:()=>Vp});var _=H(4650),Z=H(4986),q=H(9751),Re=H(9646),J=H(6451),Me=H(4004),Le=H(3099),Ve=H(3900),He=H(5026),ae=H(1884),ie=H(4482),me=H(5403),it=H(8421),tt=H(4671),Ke=H(5032),zt=H(7669),Ne=H(5813),Bt=H(2011),st=(H(2274),H(3942)),Ge=H(4859),Mt=H(5861),$e=H(9681),P=H(2090),ve=H(1877);const oe="@firebase/database";let Se="";function Be(d){Se=d}class Ct{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,l){null==l?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,P.Pz)(l))}get(u){const l=this.domStorage_.getItem(this.prefixedName_(u));return null==l?null:(0,P.cI)(l)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class Rt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,l){null==l?delete this.cache_[u]:this.cache_[u]=l}get(u){return(0,P.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const kt=function(d){try{if(typeof window<"u"&&typeof window[d]<"u"){const u=window[d];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new Ct(u)}}catch{}return new Rt},Ut=kt("localStorage"),Zt=kt("sessionStorage"),lt=new ve.Yd("@firebase/database"),Qt=function(){let d=1;return function(){return d++}}(),sn=function(d){const u=(0,P.dS)(d),l=new P.gQ;l.update(u);const g=l.digest();return P.US.encodeByteArray(g)},en=function(...d){let u="";for(let l=0;l<d.length;l++){const g=d[l];Array.isArray(g)||g&&"object"==typeof g&&"number"==typeof g.length?u+=en.apply(null,g):u+="object"==typeof g?(0,P.Pz)(g):g,u+=" "}return u};let tn=null,Xn=!0;const yn=function(d,u){(0,P.hu)(!u||!0===d||!1===d,"Can't turn on custom loggers persistently."),!0===d?(lt.logLevel=ve.in.VERBOSE,tn=lt.log.bind(lt),u&&Zt.set("logging_enabled",!0)):"function"==typeof d?tn=d:(tn=null,Zt.remove("logging_enabled"))},mn=function(...d){if(!0===Xn&&(Xn=!1,null===tn&&!0===Zt.get("logging_enabled")&&yn(!0)),tn){const u=en.apply(null,d);tn(u)}},ci=function(d){return function(...u){mn(d,...u)}},Dr=function(...d){const u="FIREBASE INTERNAL ERROR: "+en(...d);lt.error(u)},wn=function(...d){const u=`FIREBASE FATAL ERROR: ${en(...d)}`;throw lt.error(u),new Error(u)},Vn=function(...d){const u="FIREBASE WARNING: "+en(...d);lt.warn(u)},Ht=function(d){return"number"==typeof d&&(d!=d||d===Number.POSITIVE_INFINITY||d===Number.NEGATIVE_INFINITY)},Nn="[MIN_NAME]",sr="[MAX_NAME]",St=function(d,u){if(d===u)return 0;if(d===Nn||u===sr)return-1;if(u===Nn||d===sr)return 1;{const l=dr(d),g=dr(u);return null!==l?null!==g?l-g==0?d.length-u.length:l-g:-1:null!==g?1:d<u?-1:1}},or=function(d,u){return d===u?0:d<u?-1:1},Tn=function(d,u){if(u&&d in u)return u[d];throw new Error("Missing required key ("+d+") in object: "+(0,P.Pz)(u))},cr=function(d){if("object"!=typeof d||null===d)return(0,P.Pz)(d);const u=[];for(const g in d)u.push(g);u.sort();let l="{";for(let g=0;g<u.length;g++)0!==g&&(l+=","),l+=(0,P.Pz)(u[g]),l+=":",l+=cr(d[u[g]]);return l+="}",l},_i=function(d,u){const l=d.length;if(l<=u)return[d];const g=[];for(let C=0;C<l;C+=u)g.push(d.substring(C,C+u>l?l:C+u));return g};function ur(d,u){for(const l in d)d.hasOwnProperty(l)&&u(l,d[l])}const Yr=function(d){(0,P.hu)(!Ht(d),"Invalid JSON number");const g=1023;let C,x,B,ee,ue;0===d?(x=0,B=0,C=1/d==-1/0?1:0):(C=d<0,(d=Math.abs(d))>=Math.pow(2,1-g)?(ee=Math.min(Math.floor(Math.log(d)/Math.LN2),g),x=ee+g,B=Math.round(d*Math.pow(2,52-ee)-Math.pow(2,52))):(x=0,B=Math.round(d/Math.pow(2,-1074))));const we=[];for(ue=52;ue;ue-=1)we.push(B%2?1:0),B=Math.floor(B/2);for(ue=11;ue;ue-=1)we.push(x%2?1:0),x=Math.floor(x/2);we.push(C?1:0),we.reverse();const dt=we.join("");let ft="";for(ue=0;ue<64;ue+=8){let wt=parseInt(dt.substr(ue,8),2).toString(16);1===wt.length&&(wt="0"+wt),ft+=wt}return ft.toLowerCase()},on=new RegExp("^-?(0*)\\d{1,10}$"),gr=-2147483648,vr=2147483647,dr=function(d){if(on.test(d)){const u=Number(d);if(u>=gr&&u<=vr)return u}return null},Mr=function(d){try{d()}catch(u){setTimeout(()=>{throw Vn("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},Qr=function(d,u){const l=setTimeout(d,u);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class Zn{constructor(u,l){this.appName_=u,this.appCheckProvider=l,this.appCheck=l?.getImmediate({optional:!0}),this.appCheck||l?.get().then(g=>this.appCheck=g)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((l,g)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(l,g):l(null)},0)})}addTokenChangeListener(u){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(g=>g.addTokenListener(u))}notifyForInvalidToken(){Vn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Oi{constructor(u,l,g){this.appName_=u,this.firebaseOptions_=l,this.authProvider_=g,this.auth_=null,this.auth_=g.getImmediate({optional:!0}),this.auth_||g.onInit(C=>this.auth_=C)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(l=>l&&"auth/token-not-initialized"===l.code?(mn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,g)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(l,g):l(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(l=>l.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(l=>l.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vn(u)}}let jn=(()=>{class d{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return d.OWNER="owner",d})();const _t=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gn="websocket",Ue="long_polling";class ye{constructor(u,l,g,C,x=!1,B="",ee=!1){this.secure=l,this.namespace=g,this.webSocketOnly=C,this.nodeAdmin=x,this.persistenceKey=B,this.includeNamespaceInQueryParams=ee,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ut.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&Ut.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function yt(d,u,l){let g;if((0,P.hu)("string"==typeof u,"typeof type must == string"),(0,P.hu)("object"==typeof l,"typeof params must == object"),u===Gn)g=(d.secure?"wss://":"ws://")+d.internalHost+"/.ws?";else{if(u!==Ue)throw new Error("Unknown connection type: "+u);g=(d.secure?"https://":"http://")+d.internalHost+"/.lp?"}(function _e(d){return d.host!==d.internalHost||d.isCustomHost()||d.includeNamespaceInQueryParams})(d)&&(l.ns=d.namespace);const C=[];return ur(l,(x,B)=>{C.push(x+"="+B)}),g+C.join("&")}class gt{constructor(){this.counters_={}}incrementCounter(u,l=1){(0,P.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=l}get(){return(0,P.p$)(this.counters_)}}const an={},On={};function Ln(d){const u=d.toString();return an[u]||(an[u]=new gt),an[u]}class pe{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,l){this.closeAfterResponse=u,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,l){for(this.pendingResponses[u]=l;this.pendingResponses[this.currentResponseNum];){const g=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let C=0;C<g.length;++C)g[C]&&Mr(()=>{this.onMessage_(g[C])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Tr{constructor(u,l,g,C,x,B,ee){this.connId=u,this.repoInfo=l,this.applicationId=g,this.appCheckToken=C,this.authToken=x,this.transportSessionId=B,this.lastSessionId=ee,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ci(u),this.stats_=Ln(l),this.urlFn=ue=>(this.appCheckToken&&(ue.ac=this.appCheckToken),yt(l,Ue,ue))}open(u,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new pe(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(d){if((0,P.Yr)()||"complete"===document.readyState)d();else{let u=!1;const l=function(){document.body?u||(u=!0,d()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zi((...x)=>{const[B,ee,ue,we,dt]=x;if(this.incrementIncomingBytes_(x),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===B)this.id=ee,this.password=ue;else{if("close"!==B)throw new Error("Unrecognized command received: "+B);ee?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ee,()=>{this.onClosed_()})):this.onClosed_()}},(...x)=>{const[B,ee]=x;this.incrementIncomingBytes_(x),this.myPacketOrderer.handleResponse(B,ee)},()=>{this.onClosed_()},this.urlFn);const g={start:"t"};g.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(g.cb=this.scriptTagHolder.uniqueCallbackIdentifier),g.v="5",this.transportSessionId&&(g.s=this.transportSessionId),this.lastSessionId&&(g.ls=this.lastSessionId),this.applicationId&&(g.p=this.applicationId),this.appCheckToken&&(g.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&_t.test(location.hostname)&&(g.r="f");const C=this.urlFn(g);this.log_("Connecting via long-poll to "+C),this.scriptTagHolder.addTag(C,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Tr.forceAllow_=!0}static forceDisallow(){Tr.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Tr.forceAllow_&&(Tr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const l=(0,P.Pz)(u);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const g=(0,P.h$)(l),C=_i(g,1840);for(let x=0;x<C.length;x++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,C.length,C[x]),this.curSegmentNum++}addDisconnectPingFrame(u,l){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const g={dframe:"t"};g.id=u,g.pw=l,this.myDisconnFrame.src=this.urlFn(g),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const l=(0,P.Pz)(u).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class zi{constructor(u,l,g,C){if(this.onDisconnect=g,this.urlFn=C,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=u,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Qt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=zi.createIFrame_();let x="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(x='<script>document.domain="'+document.domain+'";<\/script>');const B="<html><body>"+x+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(B),this.myIFrame.doc.close()}catch(ee){mn("frame writing exception"),ee.stack&&mn(ee.stack),mn(ee)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||mn("No IE domain setting required")}catch{const g=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+g+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,l){for(this.myID=u,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let l=this.urlFn(u),g="",C=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+g.length<=1870;){const B=this.pendingSegs.shift();g=g+"&seg"+C+"="+B.seg+"&ts"+C+"="+B.ts+"&d"+C+"="+B.d,C++}return l+=g,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(u,l,g){this.pendingSegs.push({seg:u,ts:l,d:g}),this.alive&&this.newRequest_()}addLongPollTag_(u,l){this.outstandingRequests.add(l);const g=()=>{this.outstandingRequests.delete(l),this.newRequest_()},C=setTimeout(g,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(C),g()})}addTag(u,l){(0,P.Yr)()?this.doNodeLongPoll(u,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const g=this.myIFrame.doc.createElement("script");g.type="text/javascript",g.async=!0,g.src=u,g.onload=g.onreadystatechange=function(){const C=g.readyState;(!C||"loaded"===C||"complete"===C)&&(g.onload=g.onreadystatechange=null,g.parentNode&&g.parentNode.removeChild(g),l())},g.onerror=()=>{mn("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(g)}catch{}},Math.floor(1))}}let Es=null;typeof MozWebSocket<"u"?Es=MozWebSocket:typeof WebSocket<"u"&&(Es=WebSocket);let di=(()=>{class d{constructor(l,g,C,x,B,ee,ue){this.connId=l,this.applicationId=C,this.appCheckToken=x,this.authToken=B,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ci(this.connId),this.stats_=Ln(g),this.connURL=d.connectionURL_(g,ee,ue,x,C),this.nodeAdmin=g.nodeAdmin}static connectionURL_(l,g,C,x,B){const ee={v:"5"};return!(0,P.Yr)()&&typeof location<"u"&&location.hostname&&_t.test(location.hostname)&&(ee.r="f"),g&&(ee.s=g),C&&(ee.ls=C),x&&(ee.ac=x),B&&(ee.p=B),yt(l,Gn,ee)}open(l,g){this.onDisconnect=g,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ut.set("previous_websocket_failure",!0);try{let C;if((0,P.Yr)()){C={headers:{"User-Agent":`Firebase/5/${Se}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(C.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(C.headers["X-Firebase-AppCheck"]=this.appCheckToken);const B=process.env,ee=0===this.connURL.indexOf("wss://")?B.HTTPS_PROXY||B.https_proxy:B.HTTP_PROXY||B.http_proxy;ee&&(C.proxy={origin:ee})}this.mySock=new Es(this.connURL,[],C)}catch(C){this.log_("Error instantiating WebSocket.");const x=C.message||C.data;return x&&this.log_(x),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=C=>{this.handleIncomingFrame(C)},this.mySock.onerror=C=>{this.log_("WebSocket error.  Closing connection.");const x=C.message||C.data;x&&this.log_(x),this.onClosed_()}}start(){}static forceDisallow(){d.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const C=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);C&&C.length>1&&parseFloat(C[1])<4.4&&(l=!0)}return!l&&null!==Es&&!d.forceDisallow_}static previouslyFailed(){return Ut.isInMemoryStorage||!0===Ut.get("previous_websocket_failure")}markConnectionHealthy(){Ut.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const g=this.frames.join("");this.frames=null;const C=(0,P.cI)(g);this.onMessage(C)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const g=Number(l);if(!isNaN(g))return this.handleNewFrameCount_(g),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const g=l.data;if(this.bytesReceived+=g.length,this.stats_.incrementCounter("bytes_received",g.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(g);else{const C=this.extractFrameCount_(g);null!==C&&this.appendFrame_(C)}}send(l){this.resetKeepAlive();const g=(0,P.Pz)(l);this.bytesSent+=g.length,this.stats_.incrementCounter("bytes_sent",g.length);const C=_i(g,16384);C.length>1&&this.sendString_(String(C.length));for(let x=0;x<C.length;x++)this.sendString_(C[x])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(g){this.log_("Exception thrown from WebSocket.send():",g.message||g.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return d.responsesRequiredToBeHealthy=2,d.healthyTimeout=3e4,d})(),Is=(()=>{class d{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Tr,di]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const g=di&&di.isAvailable();let C=g&&!di.previouslyFailed();if(l.webSocketOnly&&(g||Vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),C=!0),C)this.transports_=[di];else{const x=this.transports_=[];for(const B of d.ALL_TRANSPORTS)B&&B.isAvailable()&&x.push(B);d.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return d.globalTransportInitialized_=!1,d})();class Go{constructor(u,l,g,C,x,B,ee,ue,we,dt){this.id=u,this.repoInfo_=l,this.applicationId_=g,this.appCheckToken_=C,this.authToken_=x,this.onMessage_=B,this.onReady_=ee,this.onDisconnect_=ue,this.onKill_=we,this.lastSessionId=dt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ci("c:"+this.id+":"),this.transportManager_=new Is(l),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),g=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,g)},Math.floor(0));const C=u.healthyTimeout||0;C>0&&(this.healthyTimeout_=Qr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(C)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return l=>{u===this.conn_?this.onConnectionLost_(l):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return l=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(l):u===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const l=u.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const l=Tn("t",u),g=Tn("d",u);if("c"===l)this.onSecondaryControl_(g);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(g)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const l=Tn("t",u),g=Tn("d",u);"c"===l?this.onControl_(g):"d"===l&&this.onDataMessage_(g)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const l=Tn("t",u);if("d"in u){const g=u.d;if("h"===l)this.onHandshake_(g);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let C=0;C<this.pendingDataMessages.length;++C)this.onDataMessage_(this.pendingDataMessages[C]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(g):"r"===l?this.onReset_(g):"e"===l?Dr("Server Error: "+g):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dr("Unknown control packet command: "+l)}}onHandshake_(u){const l=u.ts,g=u.v,C=u.h;this.sessionId=u.s,this.repoInfo_.host=C,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==g&&Vn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),g=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,g),Qr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,l){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ut.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Mo{put(u,l,g,C){}merge(u,l,g,C){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,l,g){}onDisconnectMerge(u,l,g){}onDisconnectCancel(u,l){}reportStats(u){}}class vi{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,P.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...l){if(Array.isArray(this.listeners_[u])){const g=[...this.listeners_[u]];for(let C=0;C<g.length;C++)g[C].callback.apply(g[C].context,l)}}on(u,l,g){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:l,context:g});const C=this.getInitialEvent(u);C&&l.apply(g,C)}off(u,l,g){this.validateEventType_(u);const C=this.listeners_[u]||[];for(let x=0;x<C.length;x++)if(C[x].callback===l&&(!g||g===C[x].context))return void C.splice(x,1)}validateEventType_(u){(0,P.hu)(this.allowedEvents_.find(l=>l===u),"Unknown event: "+u)}}class Fe extends vi{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Fe}getInitialEvent(u){return(0,P.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class rt{constructor(u,l){if(void 0===l){this.pieces_=u.split("/");let g=0;for(let C=0;C<this.pieces_.length;C++)this.pieces_[C].length>0&&(this.pieces_[g]=this.pieces_[C],g++);this.pieces_.length=g,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=l}toString(){let u="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(u+="/"+this.pieces_[l]);return u||"/"}}function vt(){return new rt("")}function At(d){return d.pieceNum_>=d.pieces_.length?null:d.pieces_[d.pieceNum_]}function xn(d){return d.pieces_.length-d.pieceNum_}function Kn(d){let u=d.pieceNum_;return u<d.pieces_.length&&u++,new rt(d.pieces_,u)}function mr(d){return d.pieceNum_<d.pieces_.length?d.pieces_[d.pieces_.length-1]:null}function ps(d,u=0){return d.pieces_.slice(d.pieceNum_+u)}function ro(d){if(d.pieceNum_>=d.pieces_.length)return null;const u=[];for(let l=d.pieceNum_;l<d.pieces_.length-1;l++)u.push(d.pieces_[l]);return new rt(u,0)}function rr(d,u){const l=[];for(let g=d.pieceNum_;g<d.pieces_.length;g++)l.push(d.pieces_[g]);if(u instanceof rt)for(let g=u.pieceNum_;g<u.pieces_.length;g++)l.push(u.pieces_[g]);else{const g=u.split("/");for(let C=0;C<g.length;C++)g[C].length>0&&l.push(g[C])}return new rt(l,0)}function Sn(d){return d.pieceNum_>=d.pieces_.length}function Pr(d,u){const l=At(d),g=At(u);if(null===l)return u;if(l===g)return Pr(Kn(d),Kn(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+d+")")}function gs(d,u){const l=ps(d,0),g=ps(u,0);for(let C=0;C<l.length&&C<g.length;C++){const x=St(l[C],g[C]);if(0!==x)return x}return l.length===g.length?0:l.length<g.length?-1:1}function Wo(d,u){if(xn(d)!==xn(u))return!1;for(let l=d.pieceNum_,g=u.pieceNum_;l<=d.pieces_.length;l++,g++)if(d.pieces_[l]!==u.pieces_[g])return!1;return!0}function hi(d,u){let l=d.pieceNum_,g=u.pieceNum_;if(xn(d)>xn(u))return!1;for(;l<d.pieces_.length;){if(d.pieces_[l]!==u.pieces_[g])return!1;++l,++g}return!0}class ns{constructor(u,l){this.errorPrefix_=l,this.parts_=ps(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let g=0;g<this.parts_.length;g++)this.byteLength_+=(0,P.ug)(this.parts_[g]);Ro(this)}}function Ro(d){if(d.byteLength_>768)throw new Error(d.errorPrefix_+"has a key path longer than 768 bytes ("+d.byteLength_+").");if(d.parts_.length>32)throw new Error(d.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ji(d))}function ji(d){return 0===d.parts_.length?"":"in property '"+d.parts_.join(".")+"'"}class yo extends vi{constructor(){let u,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",u="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",u="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",u="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const g=!document[u];g!==this.visible_&&(this.visible_=g,this.trigger("visible",g))},!1)}static getInstance(){return new yo}getInitialEvent(u){return(0,P.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const No=1e3;let $r,wi=(()=>{class d extends Mo{constructor(l,g,C,x,B,ee,ue,we){if(super(),this.repoInfo_=l,this.applicationId_=g,this.onDataUpdate_=C,this.onConnectStatus_=x,this.onServerInfoUpdate_=B,this.authTokenProvider_=ee,this.appCheckTokenProvider_=ue,this.authOverride_=we,this.id=d.nextPersistentConnectionId_++,this.log_=ci("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=No,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,we&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yo.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&Fe.getInstance().on("online",this.onOnline_,this)}sendRequest(l,g,C){const x=++this.requestNumber_,B={r:x,a:l,b:g};this.log_((0,P.Pz)(B)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(B),C&&(this.requestCBHash_[x]=C)}get(l){this.initConnection_();const g=new P.BH,C={p:l._path.toString(),q:l._queryObject};return this.outstandingGets_.push({action:"g",request:C,onComplete:ee=>{const ue=ee.d;"ok"===ee.s?g.resolve(ue):g.reject(ue)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),g.promise}listen(l,g,C,x){this.initConnection_();const B=l._queryIdentifier,ee=l._path.toString();this.log_("Listen called for "+ee+" "+B),this.listens.has(ee)||this.listens.set(ee,new Map),(0,P.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(ee).has(B),"listen() called twice for same path/queryId.");const ue={onComplete:x,hashFn:g,query:l,tag:C};this.listens.get(ee).set(B,ue),this.connected_&&this.sendListen_(ue)}sendGet_(l){const g=this.outstandingGets_[l];this.sendRequest("g",g.request,C=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),g.onComplete&&g.onComplete(C)})}sendListen_(l){const g=l.query,C=g._path.toString(),x=g._queryIdentifier;this.log_("Listen on "+C+" for "+x);const B={p:C};l.tag&&(B.q=g._queryObject,B.t=l.tag),B.h=l.hashFn(),this.sendRequest("q",B,ue=>{const we=ue.d,dt=ue.s;d.warnOnListenWarnings_(we,g),(this.listens.get(C)&&this.listens.get(C).get(x))===l&&(this.log_("listen response",ue),"ok"!==dt&&this.removeListen_(C,x),l.onComplete&&l.onComplete(dt,we))})}static warnOnListenWarnings_(l,g){if(l&&"object"==typeof l&&(0,P.r3)(l,"w")){const C=(0,P.DV)(l,"w");if(Array.isArray(C)&&~C.indexOf("no_index")){const x='".indexOn": "'+g._queryParams.getIndex().toString()+'"',B=g._path.toString();Vn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${x} at ${B} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,P.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,g=(0,P.w9)(l)?"auth":"gauth",C={cred:l};null===this.authOverride_?C.noauth=!0:"object"==typeof this.authOverride_&&(C.authvar=this.authOverride_),this.sendRequest(g,C,x=>{const B=x.s,ee=x.d||"error";this.authToken_===l&&("ok"===B?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(B,ee))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const g=l.s,C=l.d||"error";"ok"===g?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(g,C)})}unlisten(l,g){const C=l._path.toString(),x=l._queryIdentifier;this.log_("Unlisten called for "+C+" "+x),(0,P.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(C,x)&&this.connected_&&this.sendUnlisten_(C,x,l._queryObject,g)}sendUnlisten_(l,g,C,x){this.log_("Unlisten on "+l+" for "+g);const B={p:l};x&&(B.q=C,B.t=x),this.sendRequest("n",B)}onDisconnectPut(l,g,C){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,g,C):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:g,onComplete:C})}onDisconnectMerge(l,g,C){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,g,C):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:g,onComplete:C})}onDisconnectCancel(l,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,g):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:g})}sendOnDisconnect_(l,g,C,x){const B={p:g,d:C};this.log_("onDisconnect "+l,B),this.sendRequest(l,B,ee=>{x&&setTimeout(()=>{x(ee.s,ee.d)},Math.floor(0))})}put(l,g,C,x){this.putInternal("p",l,g,C,x)}merge(l,g,C,x){this.putInternal("m",l,g,C,x)}putInternal(l,g,C,x,B){this.initConnection_();const ee={p:g,d:C};void 0!==B&&(ee.h=B),this.outstandingPuts_.push({action:l,request:ee,onComplete:x}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+g)}sendPut_(l){const g=this.outstandingPuts_[l].action,C=this.outstandingPuts_[l].request,x=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(g,C,B=>{this.log_(g+" response",B),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),x&&x(B.s,B.d)})}reportStats(l){if(this.connected_){const g={c:l};this.log_("reportStats",g),this.sendRequest("s",g,C=>{"ok"!==C.s&&this.log_("reportStats","Error sending stats: "+C.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,P.Pz)(l));const g=l.r,C=this.requestCBHash_[g];C&&(delete this.requestCBHash_[g],C(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,g){this.log_("handleServerMessage",l,g),"d"===l?this.onDataUpdate_(g.p,g.d,!1,g.t):"m"===l?this.onDataUpdate_(g.p,g.d,!0,g.t):"c"===l?this.onListenRevoked_(g.p,g.q):"ac"===l?this.onAuthRevoked_(g.s,g.d):"apc"===l?this.onAppCheckRevoked_(g.s,g.d):"sd"===l?this.onSecurityDebugPacket_(g):Dr("Unrecognized action received from server: "+(0,P.Pz)(l)+"\nAre you using the latest client?")}onReady_(l,g){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=g,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=No,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=No,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=No),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let g=Math.max(0,this.reconnectDelay_-l);g=Math.random()*g,this.log_("Trying to reconnect in "+g+"ms"),this.scheduleConnect_(g),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,Mt.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const g=l.onDataMessage_.bind(l),C=l.onReady_.bind(l),x=l.onRealtimeDisconnect_.bind(l),B=l.id+":"+d.nextConnectionId_++,ee=l.lastSessionId;let ue=!1,we=null;const dt=function(){we?we.close():(ue=!0,x())};l.realtime_={close:dt,sendRequest:function(dn){(0,P.hu)(we,"sendRequest call when we're not connected not allowed."),we.sendRequest(dn)}};const wt=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[dn,Dn]=yield Promise.all([l.authTokenProvider_.getToken(wt),l.appCheckTokenProvider_.getToken(wt)]);ue?mn("getToken() completed but was canceled"):(mn("getToken() completed. Creating connection."),l.authToken_=dn&&dn.accessToken,l.appCheckToken_=Dn&&Dn.token,we=new Go(B,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,g,C,x,Lr=>{Vn(Lr+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},ee))}catch(dn){l.log_("Failed to get token: "+dn),ue||(l.repoInfo_.nodeAdmin&&Vn(dn),dt())}}})()}interrupt(l){mn("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){mn("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=No,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const g=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:g})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const g=this.outstandingPuts_[l];g&&"h"in g.request&&g.queued&&(g.onComplete&&g.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,g){let C;C=g?g.map(B=>cr(B)).join("$"):"default";const x=this.removeListen_(l,C);x&&x.onComplete&&x.onComplete("permission_denied")}removeListen_(l,g){const C=new rt(l).toString();let x;if(this.listens.has(C)){const B=this.listens.get(C);x=B.get(g),B.delete(g),0===B.size&&this.listens.delete(C)}else x=void 0;return x}onAuthRevoked_(l,g){mn("Auth token revoked: "+l+"/"+g),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,g){mn("App check token revoked: "+l+"/"+g),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const g of l.values())this.sendListen_(g);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let g="js";(0,P.Yr)()&&(g=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+g+"."+Se.replace(/\./g,"-")]=1,(0,P.uI)()?l["framework.cordova"]=1:(0,P.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=Fe.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&l}}return d.nextPersistentConnectionId_=0,d.nextConnectionId_=0,d})();class qn{constructor(u,l){this.name=u,this.node=l}static Wrap(u,l){return new qn(u,l)}}class Zs{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,l){const g=new qn(Nn,u),C=new qn(Nn,l);return 0!==this.compare(g,C)}minPost(){return qn.MIN}}class rs extends Zs{static get __EMPTY_NODE(){return $r}static set __EMPTY_NODE(u){$r=u}compare(u,l){return St(u.name,l.name)}isDefinedOn(u){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,l){return!1}minPost(){return qn.MIN}maxPost(){return new qn(sr,$r)}makePost(u,l){return(0,P.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new qn(u,$r)}toString(){return".key"}}const bs=new rs;class Hi{constructor(u,l,g,C,x=null){this.isReverse_=C,this.resultGenerator_=x,this.nodeStack_=[];let B=1;for(;!u.isEmpty();)if(B=l?g(u.key,l):1,C&&(B*=-1),B<0)u=this.isReverse_?u.left:u.right;else{if(0===B){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,u=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let Ps,hr=(()=>{class d{constructor(l,g,C,x,B){this.key=l,this.value=g,this.color=C??d.RED,this.left=x??Xr.EMPTY_NODE,this.right=B??Xr.EMPTY_NODE}copy(l,g,C,x,B){return new d(l??this.key,g??this.value,C??this.color,x??this.left,B??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,g,C){let x=this;const B=C(l,x.key);return x=B<0?x.copy(null,null,null,x.left.insert(l,g,C),null):0===B?x.copy(null,g,null,null,null):x.copy(null,null,null,null,x.right.insert(l,g,C)),x.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xr.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,g){let C,x;if(C=this,g(l,C.key)<0)!C.left.isEmpty()&&!C.left.isRed_()&&!C.left.left.isRed_()&&(C=C.moveRedLeft_()),C=C.copy(null,null,null,C.left.remove(l,g),null);else{if(C.left.isRed_()&&(C=C.rotateRight_()),!C.right.isEmpty()&&!C.right.isRed_()&&!C.right.left.isRed_()&&(C=C.moveRedRight_()),0===g(l,C.key)){if(C.right.isEmpty())return Xr.EMPTY_NODE;x=C.right.min_(),C=C.copy(x.key,x.value,null,null,C.right.removeMin_())}C=C.copy(null,null,null,null,C.right.remove(l,g))}return C.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,d.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,d.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),g=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,g)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return d.RED=!0,d.BLACK=!1,d})();class Xr{constructor(u,l=Xr.EMPTY_NODE){this.comparator_=u,this.root_=l}insert(u,l){return new Xr(this.comparator_,this.root_.insert(u,l,this.comparator_).copy(null,null,hr.BLACK,null,null))}remove(u){return new Xr(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,hr.BLACK,null,null))}get(u){let l,g=this.root_;for(;!g.isEmpty();){if(l=this.comparator_(u,g.key),0===l)return g.value;l<0?g=g.left:l>0&&(g=g.right)}return null}getPredecessorKey(u){let l,g=this.root_,C=null;for(;!g.isEmpty();){if(l=this.comparator_(u,g.key),0===l){if(g.left.isEmpty())return C?C.key:null;for(g=g.left;!g.right.isEmpty();)g=g.right;return g.key}l<0?g=g.left:l>0&&(C=g,g=g.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new Hi(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,l){return new Hi(this.root_,u,this.comparator_,!1,l)}getReverseIteratorFrom(u,l){return new Hi(this.root_,u,this.comparator_,!0,l)}getReverseIterator(u){return new Hi(this.root_,null,this.comparator_,!0,u)}}function ys(d,u){return St(d.name,u.name)}function ir(d,u){return St(d,u)}Xr.EMPTY_NODE=new class Ei{copy(u,l,g,C,x){return this}insert(u,l,g){return new hr(u,l,null)}remove(u,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Oo=function(d){return"number"==typeof d?"number:"+Yr(d):"string:"+d},is=function(d){if(d.isLeafNode()){const u=d.val();(0,P.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,P.r3)(u,".sv"),"Priority must be a string or number.")}else(0,P.hu)(d===Ps||d.isEmpty(),"priority of unexpected type.");(0,P.hu)(d===Ps||d.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ha,Cn,fa,Nr=(()=>{class d{constructor(l,g=d.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=g,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),is(this.priorityNode_)}static set __childrenNodeConstructor(l){ha=l}static get __childrenNodeConstructor(){return ha}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new d(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Sn(l)?this:".priority"===At(l)?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,g){return null}updateImmediateChild(l,g){return".priority"===l?this.updatePriority(g):g.isEmpty()&&".priority"!==l?this:d.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,g).updatePriority(this.priorityNode_)}updateChild(l,g){const C=At(l);return null===C?g:g.isEmpty()&&".priority"!==C?this:((0,P.hu)(".priority"!==C||1===xn(l),".priority must be the last token in a path"),this.updateImmediateChild(C,d.__childrenNodeConstructor.EMPTY_NODE.updateChild(Kn(l),g)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,g){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Oo(this.priorityNode_.val())+":");const g=typeof this.value_;l+=g+":",l+="number"===g?Yr(this.value_):this.value_,this.lazyHash_=sn(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===d.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof d.__childrenNodeConstructor?-1:((0,P.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const g=typeof l.value_,C=typeof this.value_,x=d.VALUE_TYPE_ORDER.indexOf(g),B=d.VALUE_TYPE_ORDER.indexOf(C);return(0,P.hu)(x>=0,"Unknown leaf type: "+g),(0,P.hu)(B>=0,"Unknown leaf type: "+C),x===B?"object"===C?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:B-x}withIndex(){return this}isIndexed(){return!0}equals(l){if(l===this)return!0;if(l.isLeafNode()){const g=l;return this.value_===g.value_&&this.priorityNode_.equals(g.priorityNode_)}return!1}}return d.VALUE_TYPE_ORDER=["object","boolean","number","string"],d})();const tr=new class Po extends Zs{compare(u,l){const g=u.node.getPriority(),C=l.node.getPriority(),x=g.compareTo(C);return 0===x?St(u.name,l.name):x}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,l){return!u.getPriority().equals(l.getPriority())}minPost(){return qn.MIN}maxPost(){return new qn(sr,new Nr("[PRIORITY-POST]",fa))}makePost(u,l){const g=Cn(u);return new qn(l,new Nr("[PRIORITY-POST]",g))}toString(){return".priority"}},ks=Math.log(2);class Ys{constructor(u){this.count=parseInt(Math.log(u+1)/ks,10),this.current_=this.count-1;const C=(x=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&C}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const ss=function(d,u,l,g){d.sort(u);const C=function(ue,we){const dt=we-ue;let ft,wt;if(0===dt)return null;if(1===dt)return ft=d[ue],wt=l?l(ft):ft,new hr(wt,ft.node,hr.BLACK,null,null);{const dn=parseInt(dt/2,10)+ue,Dn=C(ue,dn),Lr=C(dn+1,we);return ft=d[dn],wt=l?l(ft):ft,new hr(wt,ft.node,hr.BLACK,Dn,Lr)}},ee=function(ue){let we=null,dt=null,ft=d.length;const wt=function(Dn,Lr){const Ws=ft-Dn,jo=ft;ft-=Dn;const bu=C(Ws+1,jo),Tu=d[Ws],Sf=l?l(Tu):Tu;dn(new hr(Sf,Tu.node,Lr,null,bu))},dn=function(Dn){we?(we.left=Dn,we=Dn):(dt=Dn,we=Dn)};for(let Dn=0;Dn<ue.count;++Dn){const Lr=ue.nextBitIsOne(),Ws=Math.pow(2,ue.count-(Dn+1));Lr?wt(Ws,hr.BLACK):(wt(Ws,hr.BLACK),wt(Ws,hr.RED))}return dt}(new Ys(d.length));return new Xr(g||u,ee)};let It;const Wn={};class $i{constructor(u,l){this.indexes_=u,this.indexSet_=l}static get Default(){return(0,P.hu)(Wn&&tr,"ChildrenNode.ts has not been loaded"),It=It||new $i({".priority":Wn},{".priority":tr}),It}get(u){const l=(0,P.DV)(this.indexes_,u);if(!l)throw new Error("No index defined for "+u);return l instanceof Xr?l:null}hasIndex(u){return(0,P.r3)(this.indexSet_,u.toString())}addIndex(u,l){(0,P.hu)(u!==bs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const g=[];let C=!1;const x=l.getIterator(qn.Wrap);let ee,B=x.getNext();for(;B;)C=C||u.isDefinedOn(B.node),g.push(B),B=x.getNext();ee=C?ss(g,u.getCompare()):Wn;const ue=u.toString(),we=Object.assign({},this.indexSet_);we[ue]=u;const dt=Object.assign({},this.indexes_);return dt[ue]=ee,new $i(dt,we)}addToIndexes(u,l){const g=(0,P.UI)(this.indexes_,(C,x)=>{const B=(0,P.DV)(this.indexSet_,x);if((0,P.hu)(B,"Missing index implementation for "+x),C===Wn){if(B.isDefinedOn(u.node)){const ee=[],ue=l.getIterator(qn.Wrap);let we=ue.getNext();for(;we;)we.name!==u.name&&ee.push(we),we=ue.getNext();return ee.push(u),ss(ee,B.getCompare())}return Wn}{const ee=l.get(u.name);let ue=C;return ee&&(ue=ue.remove(new qn(u.name,ee))),ue.insert(u,u.node)}});return new $i(g,this.indexSet_)}removeFromIndexes(u,l){const g=(0,P.UI)(this.indexes_,C=>{if(C===Wn)return C;{const x=l.get(u.name);return x?C.remove(new qn(u.name,x)):C}});return new $i(g,this.indexSet_)}}let _s,pn=(()=>{class d{constructor(l,g,C){this.children_=l,this.priorityNode_=g,this.indexMap_=C,this.lazyHash_=null,this.priorityNode_&&is(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _s||(_s=new d(new Xr(ir),null,$i.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_s}updatePriority(l){return this.children_.isEmpty()?this:new d(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const g=this.children_.get(l);return null===g?_s:g}}getChild(l){const g=At(l);return null===g?this:this.getImmediateChild(g).getChild(Kn(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,g){if((0,P.hu)(g,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(g);{const C=new qn(l,g);let x,B;g.isEmpty()?(x=this.children_.remove(l),B=this.indexMap_.removeFromIndexes(C,this.children_)):(x=this.children_.insert(l,g),B=this.indexMap_.addToIndexes(C,this.children_));const ee=x.isEmpty()?_s:this.priorityNode_;return new d(x,ee,B)}}updateChild(l,g){const C=At(l);if(null===C)return g;{(0,P.hu)(".priority"!==At(l)||1===xn(l),".priority must be the last token in a path");const x=this.getImmediateChild(C).updateChild(Kn(l),g);return this.updateImmediateChild(C,x)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const g={};let C=0,x=0,B=!0;if(this.forEachChild(tr,(ee,ue)=>{g[ee]=ue.val(l),C++,B&&d.INTEGER_REGEXP_.test(ee)?x=Math.max(x,Number(ee)):B=!1}),!l&&B&&x<2*C){const ee=[];for(const ue in g)ee[ue]=g[ue];return ee}return l&&!this.getPriority().isEmpty()&&(g[".priority"]=this.getPriority().val()),g}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Oo(this.getPriority().val())+":"),this.forEachChild(tr,(g,C)=>{const x=C.hash();""!==x&&(l+=":"+g+":"+x)}),this.lazyHash_=""===l?"":sn(l)}return this.lazyHash_}getPredecessorChildName(l,g,C){const x=this.resolveIndex_(C);if(x){const B=x.getPredecessorKey(new qn(l,g));return B?B.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const g=this.resolveIndex_(l);if(g){const C=g.minKey();return C&&C.name}return this.children_.minKey()}getFirstChild(l){const g=this.getFirstChildName(l);return g?new qn(g,this.children_.get(g)):null}getLastChildName(l){const g=this.resolveIndex_(l);if(g){const C=g.maxKey();return C&&C.name}return this.children_.maxKey()}getLastChild(l){const g=this.getLastChildName(l);return g?new qn(g,this.children_.get(g)):null}forEachChild(l,g){const C=this.resolveIndex_(l);return C?C.inorderTraversal(x=>g(x.name,x.node)):this.children_.inorderTraversal(g)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,g){const C=this.resolveIndex_(g);if(C)return C.getIteratorFrom(l,x=>x);{const x=this.children_.getIteratorFrom(l.name,qn.Wrap);let B=x.peek();for(;null!=B&&g.compare(B,l)<0;)x.getNext(),B=x.peek();return x}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,g){const C=this.resolveIndex_(g);if(C)return C.getReverseIteratorFrom(l,x=>x);{const x=this.children_.getReverseIteratorFrom(l.name,qn.Wrap);let B=x.peek();for(;null!=B&&g.compare(B,l)>0;)x.getNext(),B=x.peek();return x}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===os?-1:0}withIndex(l){if(l===bs||this.indexMap_.hasIndex(l))return this;{const g=this.indexMap_.addIndex(l,this.children_);return new d(this.children_,this.priorityNode_,g)}}isIndexed(l){return l===bs||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const g=l;if(this.getPriority().equals(g.getPriority())){if(this.children_.count()===g.children_.count()){const C=this.getIterator(tr),x=g.getIterator(tr);let B=C.getNext(),ee=x.getNext();for(;B&&ee;){if(B.name!==ee.name||!B.node.equals(ee.node))return!1;B=C.getNext(),ee=x.getNext()}return null===B&&null===ee}return!1}return!1}}resolveIndex_(l){return l===bs?null:this.indexMap_.get(l.toString())}}return d.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,d})();const os=new class _o extends pn{constructor(){super(new Xr(ir),pn.EMPTY_NODE,$i.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return pn.EMPTY_NODE}isEmpty(){return!1}};function Ur(d,u=null){if(null===d)return pn.EMPTY_NODE;if("object"==typeof d&&".priority"in d&&(u=d[".priority"]),(0,P.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof d&&".value"in d&&null!==d[".value"]&&(d=d[".value"]),"object"!=typeof d||".sv"in d)return new Nr(d,Ur(u));if(d instanceof Array){let l=pn.EMPTY_NODE;return ur(d,(g,C)=>{if((0,P.r3)(d,g)&&"."!==g.substring(0,1)){const x=Ur(C);(x.isLeafNode()||!x.isEmpty())&&(l=l.updateImmediateChild(g,x))}}),l.updatePriority(Ur(u))}{const l=[];let g=!1;if(ur(d,(B,ee)=>{if("."!==B.substring(0,1)){const ue=Ur(ee);ue.isEmpty()||(g=g||!ue.getPriority().isEmpty(),l.push(new qn(B,ue)))}}),0===l.length)return pn.EMPTY_NODE;const x=ss(l,ys,B=>B.name,ir);if(g){const B=ss(l,tr.getCompare());return new pn(x,Ur(u),new $i({".priority":B},{".priority":tr}))}return new pn(x,Ur(u),$i.Default)}}Object.defineProperties(qn,{MIN:{value:new qn(Nn,pn.EMPTY_NODE)},MAX:{value:new qn(sr,os)}}),rs.__EMPTY_NODE=pn.EMPTY_NODE,Nr.__childrenNodeConstructor=pn,function xr(d){Ps=d}(os),function Ta(d){fa=d}(os),function Ua(d){Cn=d}(Ur);class Ls extends Zs{constructor(u){super(),this.indexPath_=u,(0,P.hu)(!Sn(u)&&".priority"!==At(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,l){const g=this.extractChild(u.node),C=this.extractChild(l.node),x=g.compareTo(C);return 0===x?St(u.name,l.name):x}makePost(u,l){const g=Ur(u),C=pn.EMPTY_NODE.updateChild(this.indexPath_,g);return new qn(l,C)}maxPost(){const u=pn.EMPTY_NODE.updateChild(this.indexPath_,os);return new qn(sr,u)}toString(){return ps(this.indexPath_,0).join("/")}}const zo=new class vo extends Zs{compare(u,l){const g=u.node.compareTo(l.node);return 0===g?St(u.name,l.name):g}isDefinedOn(u){return!0}indexedValueChanged(u,l){return!u.equals(l)}minPost(){return qn.MIN}maxPost(){return qn.MAX}makePost(u,l){const g=Ur(u);return new qn(l,g)}toString(){return".value"}},j="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ct=function(){let d=0;const u=[];return function(l){const g=l===d;let C;d=l;const x=new Array(8);for(C=7;C>=0;C--)x[C]=j.charAt(l%64),l=Math.floor(l/64);(0,P.hu)(0===l,"Cannot push at time == 0");let B=x.join("");if(g){for(C=11;C>=0&&63===u[C];C--)u[C]=0;u[C]++}else for(C=0;C<12;C++)u[C]=Math.floor(64*Math.random());for(C=0;C<12;C++)B+=j.charAt(u[C]);return(0,P.hu)(20===B.length,"nextPushId: Length should be 20."),B}}(),hn=function(d){if(d===""+vr)return"-";const u=dr(d);if(null!=u)return""+(u+1);const l=new Array(d.length);for(let B=0;B<l.length;B++)l[B]=d.charAt(B);if(l.length<786)return l.push("-"),l.join("");let g=l.length-1;for(;g>=0&&"z"===l[g];)g--;if(-1===g)return sr;const x=j.charAt(j.indexOf(l[g])+1);return l[g]=x,l.slice(0,g+1).join("")},yr=function(d){if(d===""+gr)return Nn;const u=dr(d);if(null!=u)return""+(u-1);const l=new Array(d.length);for(let g=0;g<l.length;g++)l[g]=d.charAt(g);return"-"===l[l.length-1]?1===l.length?""+vr:(delete l[l.length-1],l.join("")):(l[l.length-1]=j.charAt(j.indexOf(l[l.length-1])-1),l.join("")+"z".repeat(786-l.length))};function ki(d){return{type:"value",snapshotNode:d}}function fi(d,u){return{type:"child_added",snapshotNode:u,childName:d}}function Gi(d,u){return{type:"child_removed",snapshotNode:u,childName:d}}function Vs(d,u,l){return{type:"child_changed",snapshotNode:u,childName:d,oldSnap:l}}class Us{constructor(u){this.index_=u}updateChild(u,l,g,C,x,B){(0,P.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ee=u.getImmediateChild(l);return ee.getChild(C).equals(g.getChild(C))&&ee.isEmpty()===g.isEmpty()||(null!=B&&(g.isEmpty()?u.hasChild(l)?B.trackChildChange(Gi(l,ee)):(0,P.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ee.isEmpty()?B.trackChildChange(fi(l,g)):B.trackChildChange(Vs(l,g,ee))),u.isLeafNode()&&g.isEmpty())?u:u.updateImmediateChild(l,g).withIndex(this.index_)}updateFullNode(u,l,g){return null!=g&&(u.isLeafNode()||u.forEachChild(tr,(C,x)=>{l.hasChild(C)||g.trackChildChange(Gi(C,x))}),l.isLeafNode()||l.forEachChild(tr,(C,x)=>{if(u.hasChild(C)){const B=u.getImmediateChild(C);B.equals(x)||g.trackChildChange(Vs(C,x,B))}else g.trackChildChange(fi(C,x))})),l.withIndex(this.index_)}updatePriority(u,l){return u.isEmpty()?pn.EMPTY_NODE:u.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class pa{constructor(u){this.indexedFilter_=new Us(u.getIndex()),this.index_=u.getIndex(),this.startPost_=pa.getStartPost_(u),this.endPost_=pa.getEndPost_(u)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){return this.index_.compare(this.getStartPost(),u)<=0&&this.index_.compare(u,this.getEndPost())<=0}updateChild(u,l,g,C,x,B){return this.matches(new qn(l,g))||(g=pn.EMPTY_NODE),this.indexedFilter_.updateChild(u,l,g,C,x,B)}updateFullNode(u,l,g){l.isLeafNode()&&(l=pn.EMPTY_NODE);let C=l.withIndex(this.index_);C=C.updatePriority(pn.EMPTY_NODE);const x=this;return l.forEachChild(tr,(B,ee)=>{x.matches(new qn(B,ee))||(C=C.updateImmediateChild(B,pn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,C,g)}updatePriority(u,l){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const l=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),l)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const l=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),l)}return u.getIndex().maxPost()}}class pi{constructor(u){this.rangedFilter_=new pa(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft()}updateChild(u,l,g,C,x,B){return this.rangedFilter_.matches(new qn(l,g))||(g=pn.EMPTY_NODE),u.getImmediateChild(l).equals(g)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,l,g,C,x,B):this.fullLimitUpdateChild_(u,l,g,x,B)}updateFullNode(u,l,g){let C;if(l.isLeafNode()||l.isEmpty())C=pn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let x;C=pn.EMPTY_NODE.withIndex(this.index_),x=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let B=0;for(;x.hasNext()&&B<this.limit_;){const ee=x.getNext();let ue;if(ue=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),ee)<=0:this.index_.compare(ee,this.rangedFilter_.getEndPost())<=0,!ue)break;C=C.updateImmediateChild(ee.name,ee.node),B++}}else{let x,B,ee,ue;if(C=l.withIndex(this.index_),C=C.updatePriority(pn.EMPTY_NODE),this.reverse_){ue=C.getReverseIterator(this.index_),x=this.rangedFilter_.getEndPost(),B=this.rangedFilter_.getStartPost();const ft=this.index_.getCompare();ee=(wt,dn)=>ft(dn,wt)}else ue=C.getIterator(this.index_),x=this.rangedFilter_.getStartPost(),B=this.rangedFilter_.getEndPost(),ee=this.index_.getCompare();let we=0,dt=!1;for(;ue.hasNext();){const ft=ue.getNext();!dt&&ee(x,ft)<=0&&(dt=!0),dt&&we<this.limit_&&ee(ft,B)<=0?we++:C=C.updateImmediateChild(ft.name,pn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,C,g)}updatePriority(u,l){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,l,g,C,x){let B;if(this.reverse_){const ft=this.index_.getCompare();B=(wt,dn)=>ft(dn,wt)}else B=this.index_.getCompare();const ee=u;(0,P.hu)(ee.numChildren()===this.limit_,"");const ue=new qn(l,g),we=this.reverse_?ee.getFirstChild(this.index_):ee.getLastChild(this.index_),dt=this.rangedFilter_.matches(ue);if(ee.hasChild(l)){const ft=ee.getImmediateChild(l);let wt=C.getChildAfterChild(this.index_,we,this.reverse_);for(;null!=wt&&(wt.name===l||ee.hasChild(wt.name));)wt=C.getChildAfterChild(this.index_,wt,this.reverse_);const dn=null==wt?1:B(wt,ue);if(dt&&!g.isEmpty()&&dn>=0)return x?.trackChildChange(Vs(l,g,ft)),ee.updateImmediateChild(l,g);{x?.trackChildChange(Gi(l,ft));const Lr=ee.updateImmediateChild(l,pn.EMPTY_NODE);return null!=wt&&this.rangedFilter_.matches(wt)?(x?.trackChildChange(fi(wt.name,wt.node)),Lr.updateImmediateChild(wt.name,wt.node)):Lr}}return g.isEmpty()?u:dt&&B(we,ue)>=0?(null!=x&&(x.trackChildChange(Gi(we.name,we.node)),x.trackChildChange(fi(l,g))),ee.updateImmediateChild(l,g).updateImmediateChild(we.name,pn.EMPTY_NODE)):u}}class ga{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nn}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:sr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tr}copy(){const u=new ga;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function Sa(d,u,l){const g=d.copy();return g.startSet_=!0,void 0===u&&(u=null),g.indexStartValue_=u,null!=l?(g.startNameSet_=!0,g.indexStartName_=l):(g.startNameSet_=!1,g.indexStartName_=""),g}function R(d,u,l){const g=d.copy();return g.endSet_=!0,void 0===u&&(u=null),g.indexEndValue_=u,void 0!==l?(g.endNameSet_=!0,g.indexEndName_=l):(g.endNameSet_=!1,g.indexEndName_=""),g}function F(d,u){const l=d.copy();return l.index_=u,l}function X(d){const u={};if(d.isDefault())return u;let l;return d.index_===tr?l="$priority":d.index_===zo?l="$value":d.index_===bs?l="$key":((0,P.hu)(d.index_ instanceof Ls,"Unrecognized index type!"),l=d.index_.toString()),u.orderBy=(0,P.Pz)(l),d.startSet_&&(u.startAt=(0,P.Pz)(d.indexStartValue_),d.startNameSet_&&(u.startAt+=","+(0,P.Pz)(d.indexStartName_))),d.endSet_&&(u.endAt=(0,P.Pz)(d.indexEndValue_),d.endNameSet_&&(u.endAt+=","+(0,P.Pz)(d.indexEndName_))),d.limitSet_&&(d.isViewFromLeft()?u.limitToFirst=d.limit_:u.limitToLast=d.limit_),u}function Ee(d){const u={};if(d.startSet_&&(u.sp=d.indexStartValue_,d.startNameSet_&&(u.sn=d.indexStartName_)),d.endSet_&&(u.ep=d.indexEndValue_,d.endNameSet_&&(u.en=d.indexEndName_)),d.limitSet_){u.l=d.limit_;let l=d.viewFrom_;""===l&&(l=d.isViewFromLeft()?"l":"r"),u.vf=l}return d.index_!==tr&&(u.i=d.index_.toString()),u}class Qe extends Mo{constructor(u,l,g,C){super(),this.repoInfo_=u,this.onDataUpdate_=l,this.authTokenProvider_=g,this.appCheckTokenProvider_=C,this.log_=ci("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,l){return void 0!==l?"tag$"+l:((0,P.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,l,g,C){const x=u._path.toString();this.log_("Listen called for "+x+" "+u._queryIdentifier);const B=Qe.getListenId_(u,g),ee={};this.listens_[B]=ee;const ue=X(u._queryParams);this.restRequest_(x+".json",ue,(we,dt)=>{let ft=dt;if(404===we&&(ft=null,we=null),null===we&&this.onDataUpdate_(x,ft,!1,g),(0,P.DV)(this.listens_,B)===ee){let wt;wt=we?401===we?"permission_denied":"rest_error:"+we:"ok",C(wt,null)}})}unlisten(u,l){const g=Qe.getListenId_(u,l);delete this.listens_[g]}get(u){const l=X(u._queryParams),g=u._path.toString(),C=new P.BH;return this.restRequest_(g+".json",l,(x,B)=>{let ee=B;404===x&&(ee=null,x=null),null===x?(this.onDataUpdate_(g,ee,!1,null),C.resolve(ee)):C.reject(new Error(ee))}),C.promise}refreshAuthToken(u){}restRequest_(u,l={},g){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([C,x])=>{C&&C.accessToken&&(l.auth=C.accessToken),x&&x.token&&(l.ac=x.token);const B=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,P.xO)(l);this.log_("Sending REST request for "+B);const ee=new XMLHttpRequest;ee.onreadystatechange=()=>{if(g&&4===ee.readyState){this.log_("REST Response for "+B+" received. status:",ee.status,"response:",ee.responseText);let ue=null;if(ee.status>=200&&ee.status<300){try{ue=(0,P.cI)(ee.responseText)}catch{Vn("Failed to parse JSON response for "+B+": "+ee.responseText)}g(null,ue)}else 401!==ee.status&&404!==ee.status&&Vn("Got unsuccessful REST response for "+B+" Status: "+ee.status),g(ee.status);g=null}},ee.open("GET",B,!0),ee.send()})}}class pt{constructor(){this.rootNode_=pn.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,l){this.rootNode_=this.rootNode_.updateChild(u,l)}}function nn(){return{value:null,children:new Map}}function Yn(d,u,l){if(Sn(u))d.value=l,d.children.clear();else if(null!==d.value)d.value=d.value.updateChild(u,l);else{const g=At(u);d.children.has(g)||d.children.set(g,nn()),Yn(d.children.get(g),u=Kn(u),l)}}function Ar(d,u){if(Sn(u))return d.value=null,d.children.clear(),!0;if(null!==d.value){if(d.value.isLeafNode())return!1;{const l=d.value;return d.value=null,l.forEachChild(tr,(g,C)=>{Yn(d,new rt(g),C)}),Ar(d,u)}}if(d.children.size>0){const l=At(u);return u=Kn(u),d.children.has(l)&&Ar(d.children.get(l),u)&&d.children.delete(l),0===d.children.size}return!0}function _r(d,u,l){null!==d.value?l(u,d.value):function nr(d,u){d.children.forEach((l,g)=>{u(g,l)})}(d,(g,C)=>{_r(C,new rt(u.toString()+"/"+g),l)})}class bi{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),l=Object.assign({},u);return this.last_&&ur(this.last_,(g,C)=>{l[g]=l[g]-C}),this.last_=u,l}}class io{constructor(u,l){this.server_=l,this.statsToReport_={},this.statsListener_=new bi(u);const g=1e4+2e4*Math.random();Qr(this.reportStats_.bind(this),Math.floor(g))}reportStats_(){const u=this.statsListener_.get(),l={};let g=!1;ur(u,(C,x)=>{x>0&&(0,P.r3)(this.statsToReport_,C)&&(l[C]=x,g=!0)}),g&&this.server_.reportStats(l),Qr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var si=(()=>{return(d=si||(si={}))[d.OVERWRITE=0]="OVERWRITE",d[d.MERGE=1]="MERGE",d[d.ACK_USER_WRITE=2]="ACK_USER_WRITE",d[d.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",si;var d})();function js(d){return{fromUser:!1,fromServer:!0,queryId:d,tagged:!0}}class as{constructor(u,l,g){this.path=u,this.affectedTree=l,this.revert=g,this.type=si.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(Sn(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new rt(u));return new as(vt(),l,this.revert)}}return(0,P.hu)(At(this.path)===u,"operationForChild called for unrelated child."),new as(Kn(this.path),this.affectedTree,this.revert)}}class ma{constructor(u,l){this.source=u,this.path=l,this.type=si.LISTEN_COMPLETE}operationForChild(u){return Sn(this.path)?new ma(this.source,vt()):new ma(this.source,Kn(this.path))}}class Wr{constructor(u,l,g){this.source=u,this.path=l,this.snap=g,this.type=si.OVERWRITE}operationForChild(u){return Sn(this.path)?new Wr(this.source,vt(),this.snap.getImmediateChild(u)):new Wr(this.source,Kn(this.path),this.snap)}}class Ko{constructor(u,l,g){this.source=u,this.path=l,this.children=g,this.type=si.MERGE}operationForChild(u){if(Sn(this.path)){const l=this.children.subtree(new rt(u));return l.isEmpty()?null:l.value?new Wr(this.source,vt(),l.value):new Ko(this.source,vt(),l)}return(0,P.hu)(At(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new Ko(this.source,Kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ya{constructor(u,l,g){this.node_=u,this.fullyInitialized_=l,this.filtered_=g}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(Sn(u))return this.isFullyInitialized()&&!this.filtered_;const l=At(u);return this.isCompleteForChild(l)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class Ba{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function _a(d,u,l,g,C,x){const B=g.filter(ee=>ee.type===l);B.sort((ee,ue)=>function Aa(d,u,l){if(null==u.childName||null==l.childName)throw(0,P.g5)("Should only compare child_ events.");const g=new qn(u.childName,u.snapshotNode),C=new qn(l.childName,l.snapshotNode);return d.index_.compare(g,C)}(d,ee,ue)),B.forEach(ee=>{const ue=function tu(d,u,l){return"value"===u.type||"child_removed"===u.type||(u.prevName=l.getPredecessorChildName(u.childName,u.snapshotNode,d.index_)),u}(d,ee,x);C.forEach(we=>{we.respondsTo(ee.type)&&u.push(we.createEvent(ue,d.query_))})})}function qo(d,u){return{eventCache:d,serverCache:u}}function Fi(d,u,l,g){return qo(new ya(u,l,g),d.serverCache)}function hu(d,u,l,g){return qo(d.eventCache,new ya(u,l,g))}function ja(d){return d.eventCache.isFullyInitialized()?d.eventCache.getNode():null}function qr(d){return d.serverCache.isFullyInitialized()?d.serverCache.getNode():null}let nu;class Er{constructor(u,l=(()=>(nu||(nu=new Xr(or)),nu))()){this.value=u,this.children=l}static fromObject(u){let l=new Er(null);return ur(u,(g,C)=>{l=l.set(new rt(g),C)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,l){if(null!=this.value&&l(this.value))return{path:vt(),value:this.value};if(Sn(u))return null;{const g=At(u),C=this.children.get(g);if(null!==C){const x=C.findRootMostMatchingPathAndValue(Kn(u),l);return null!=x?{path:rr(new rt(g),x.path),value:x.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(Sn(u))return this;{const l=At(u),g=this.children.get(l);return null!==g?g.subtree(Kn(u)):new Er(null)}}set(u,l){if(Sn(u))return new Er(l,this.children);{const g=At(u),x=(this.children.get(g)||new Er(null)).set(Kn(u),l),B=this.children.insert(g,x);return new Er(this.value,B)}}remove(u){if(Sn(u))return this.children.isEmpty()?new Er(null):new Er(null,this.children);{const l=At(u),g=this.children.get(l);if(g){const C=g.remove(Kn(u));let x;return x=C.isEmpty()?this.children.remove(l):this.children.insert(l,C),null===this.value&&x.isEmpty()?new Er(null):new Er(this.value,x)}return this}}get(u){if(Sn(u))return this.value;{const l=At(u),g=this.children.get(l);return g?g.get(Kn(u)):null}}setTree(u,l){if(Sn(u))return l;{const g=At(u),x=(this.children.get(g)||new Er(null)).setTree(Kn(u),l);let B;return B=x.isEmpty()?this.children.remove(g):this.children.insert(g,x),new Er(this.value,B)}}fold(u){return this.fold_(vt(),u)}fold_(u,l){const g={};return this.children.inorderTraversal((C,x)=>{g[C]=x.fold_(rr(u,C),l)}),l(u,this.value,g)}findOnPath(u,l){return this.findOnPath_(u,vt(),l)}findOnPath_(u,l,g){const C=!!this.value&&g(l,this.value);if(C)return C;if(Sn(u))return null;{const x=At(u),B=this.children.get(x);return B?B.findOnPath_(Kn(u),rr(l,x),g):null}}foreachOnPath(u,l){return this.foreachOnPath_(u,vt(),l)}foreachOnPath_(u,l,g){if(Sn(u))return this;{this.value&&g(l,this.value);const C=At(u),x=this.children.get(C);return x?x.foreachOnPath_(Kn(u),rr(l,C),g):new Er(null)}}foreach(u){this.foreach_(vt(),u)}foreach_(u,l){this.children.inorderTraversal((g,C)=>{C.foreach_(rr(u,g),l)}),this.value&&l(u,this.value)}foreachChild(u){this.children.inorderTraversal((l,g)=>{g.value&&u(l,g.value)})}}class Hs{constructor(u){this.writeTree_=u}static empty(){return new Hs(new Er(null))}}function Au(d,u,l){if(Sn(u))return new Hs(new Er(l));{const g=d.writeTree_.findRootMostValueAndPath(u);if(null!=g){const C=g.path;let x=g.value;const B=Pr(C,u);return x=x.updateChild(B,l),new Hs(d.writeTree_.set(C,x))}{const C=new Er(l),x=d.writeTree_.setTree(u,C);return new Hs(x)}}}function va(d,u,l){let g=d;return ur(l,(C,x)=>{g=Au(g,rr(u,C),x)}),g}function ru(d,u){if(Sn(u))return Hs.empty();{const l=d.writeTree_.setTree(u,new Er(null));return new Hs(l)}}function gi(d,u){return null!=Zi(d,u)}function Zi(d,u){const l=d.writeTree_.findRootMostValueAndPath(u);return null!=l?d.writeTree_.get(l.path).getChild(Pr(l.path,u)):null}function Ha(d){const u=[],l=d.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(tr,(g,C)=>{u.push(new qn(g,C))}):d.writeTree_.children.inorderTraversal((g,C)=>{null!=C.value&&u.push(new qn(g,C.value))}),u}function zr(d,u){if(Sn(u))return d;{const l=Zi(d,u);return new Hs(null!=l?new Er(l):d.writeTree_.subtree(u))}}function Eo(d){return d.writeTree_.isEmpty()}function $s(d,u){return $a(vt(),d.writeTree_,u)}function $a(d,u,l){if(null!=u.value)return l.updateChild(d,u.value);{let g=null;return u.children.inorderTraversal((C,x)=>{".priority"===C?((0,P.hu)(null!==x.value,"Priority writes must always be leaf nodes"),g=x.value):l=$a(rr(d,C),x,l)}),!l.getChild(d).isEmpty()&&null!==g&&(l=l.updateChild(rr(d,".priority"),g)),l}}function Zo(d,u){return Hn(u,d)}function cn(d,u){if(d.snap)return hi(d.path,u);for(const l in d.children)if(d.children.hasOwnProperty(l)&&hi(rr(d.path,l),u))return!0;return!1}function wa(d){return d.visible}function Gt(d,u,l){let g=Hs.empty();for(let C=0;C<d.length;++C){const x=d[C];if(u(x)){const B=x.path;let ee;if(x.snap)hi(l,B)?(ee=Pr(l,B),g=Au(g,ee,x.snap)):hi(B,l)&&(ee=Pr(B,l),g=Au(g,vt(),x.snap.getChild(ee)));else{if(!x.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(hi(l,B))ee=Pr(l,B),g=va(g,ee,x.children);else if(hi(B,l))if(ee=Pr(B,l),Sn(ee))g=va(g,vt(),x.children);else{const ue=(0,P.DV)(x.children,At(ee));if(ue){const we=ue.getChild(Kn(ee));g=Au(g,vt(),we)}}}}}return g}function ot(d,u,l,g,C){if(g||C){const x=zr(d.visibleWrites,u);return!C&&Eo(x)?l:C||null!=l||gi(x,vt())?$s(Gt(d.allWrites,function(we){return(we.visible||C)&&(!g||!~g.indexOf(we.writeId))&&(hi(we.path,u)||hi(u,we.path))},u),l||pn.EMPTY_NODE):null}{const x=Zi(d.visibleWrites,u);if(null!=x)return x;{const B=zr(d.visibleWrites,u);return Eo(B)?l:null!=l||gi(B,vt())?$s(B,l||pn.EMPTY_NODE):null}}}function Yo(d,u,l,g){return ot(d.writeTree,d.treePath,u,l,g)}function xa(d,u){return function xt(d,u,l){let g=pn.EMPTY_NODE;const C=Zi(d.visibleWrites,u);if(C)return C.isLeafNode()||C.forEachChild(tr,(x,B)=>{g=g.updateImmediateChild(x,B)}),g;if(l){const x=zr(d.visibleWrites,u);return l.forEachChild(tr,(B,ee)=>{const ue=$s(zr(x,new rt(B)),ee);g=g.updateImmediateChild(B,ue)}),Ha(x).forEach(B=>{g=g.updateImmediateChild(B.name,B.node)}),g}return Ha(zr(d.visibleWrites,u)).forEach(B=>{g=g.updateImmediateChild(B.name,B.node)}),g}(d.writeTree,d.treePath,u)}function Ma(d,u,l,g){return function Ti(d,u,l,g,C){(0,P.hu)(g||C,"Either existingEventSnap or existingServerSnap must exist");const x=rr(u,l);if(gi(d.visibleWrites,x))return null;{const B=zr(d.visibleWrites,x);return Eo(B)?C.getChild(l):$s(B,C.getChild(l))}}(d.writeTree,d.treePath,u,l,g)}function us(d,u){return function zu(d,u){return Zi(d.visibleWrites,u)}(d.writeTree,rr(d.treePath,u))}function Qo(d,u,l){return function Ea(d,u,l,g){const C=rr(u,l),x=Zi(d.visibleWrites,C);return null!=x?x:g.isCompleteForChild(l)?$s(zr(d.visibleWrites,C),g.getNode().getImmediateChild(l)):null}(d.writeTree,d.treePath,u,l)}function Ga(d,u){return Hn(rr(d.treePath,u),d.writeTree)}function Hn(d,u){return{treePath:d,writeTree:u}}class Co{constructor(){this.changeMap=new Map}trackChildChange(u){const l=u.type,g=u.childName;(0,P.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==g,"Only non-priority child changes can be tracked.");const C=this.changeMap.get(g);if(C){const x=C.type;if("child_added"===l&&"child_removed"===x)this.changeMap.set(g,Vs(g,u.snapshotNode,C.snapshotNode));else if("child_removed"===l&&"child_added"===x)this.changeMap.delete(g);else if("child_removed"===l&&"child_changed"===x)this.changeMap.set(g,Gi(g,C.oldSnap));else if("child_changed"===l&&"child_added"===x)this.changeMap.set(g,fi(g,u.snapshotNode));else{if("child_changed"!==l||"child_changed"!==x)throw(0,P.g5)("Illegal combination of changes: "+u+" occurred after "+C);this.changeMap.set(g,Vs(g,u.snapshotNode,C.oldSnap))}}else this.changeMap.set(g,u)}getChanges(){return Array.from(this.changeMap.values())}}const Br=new class Lo{getCompleteChild(u){return null}getChildAfterChild(u,l,g){return null}};class Yt{constructor(u,l,g=null){this.writes_=u,this.viewCache_=l,this.optCompleteServerCache_=g}getCompleteChild(u){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(u))return l.getNode().getImmediateChild(u);{const g=null!=this.optCompleteServerCache_?new ya(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Qo(this.writes_,u,g)}}getChildAfterChild(u,l,g){const C=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:qr(this.viewCache_),x=function Ra(d,u,l,g,C,x){return function Yi(d,u,l,g,C,x,B){let ee;const ue=zr(d.visibleWrites,u),we=Zi(ue,vt());if(null!=we)ee=we;else{if(null==l)return[];ee=$s(ue,l)}if(ee=ee.withIndex(B),ee.isEmpty()||ee.isLeafNode())return[];{const dt=[],ft=B.getCompare(),wt=x?ee.getReverseIteratorFrom(g,B):ee.getIteratorFrom(g,B);let dn=wt.getNext();for(;dn&&dt.length<C;)0!==ft(dn,g)&&dt.push(dn),dn=wt.getNext();return dt}}(d.writeTree,d.treePath,u,l,g,C,x)}(this.writes_,C,l,1,g,u);return 0===x.length?null:x[0]}}function Jt(d,u,l,g,C,x){const B=u.eventCache;if(null!=us(g,l))return u;{let ee,ue;if(Sn(l))if((0,P.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const we=qr(u),ft=xa(g,we instanceof pn?we:pn.EMPTY_NODE);ee=d.filter.updateFullNode(u.eventCache.getNode(),ft,x)}else{const we=Yo(g,qr(u));ee=d.filter.updateFullNode(u.eventCache.getNode(),we,x)}else{const we=At(l);if(".priority"===we){(0,P.hu)(1===xn(l),"Can't have a priority with additional path components");const dt=B.getNode();ue=u.serverCache.getNode();const ft=Ma(g,l,dt,ue);ee=null!=ft?d.filter.updatePriority(dt,ft):B.getNode()}else{const dt=Kn(l);let ft;if(B.isCompleteForChild(we)){ue=u.serverCache.getNode();const wt=Ma(g,l,B.getNode(),ue);ft=null!=wt?B.getNode().getImmediateChild(we).updateChild(dt,wt):B.getNode().getImmediateChild(we)}else ft=Qo(g,we,u.serverCache);ee=null!=ft?d.filter.updateChild(B.getNode(),we,ft,dt,C,x):B.getNode()}}return Fi(u,ee,B.isFullyInitialized()||Sn(l),d.filter.filtersNodes())}}function Ia(d,u,l,g,C,x,B,ee){const ue=u.serverCache;let we;const dt=B?d.filter:d.filter.getIndexedFilter();if(Sn(l))we=dt.updateFullNode(ue.getNode(),g,null);else if(dt.filtersNodes()&&!ue.isFiltered()){const dn=ue.getNode().updateChild(l,g);we=dt.updateFullNode(ue.getNode(),dn,null)}else{const dn=At(l);if(!ue.isCompleteForPath(l)&&xn(l)>1)return u;const Dn=Kn(l),Ws=ue.getNode().getImmediateChild(dn).updateChild(Dn,g);we=".priority"===dn?dt.updatePriority(ue.getNode(),Ws):dt.updateChild(ue.getNode(),dn,Ws,Dn,Br,null)}const ft=hu(u,we,ue.isFullyInitialized()||Sn(l),dt.filtersNodes());return Jt(d,ft,l,C,new Yt(C,ft,x),ee)}function Mu(d,u,l,g,C,x,B){const ee=u.eventCache;let ue,we;const dt=new Yt(C,u,x);if(Sn(l))we=d.filter.updateFullNode(u.eventCache.getNode(),g,B),ue=Fi(u,we,!0,d.filter.filtersNodes());else{const ft=At(l);if(".priority"===ft)we=d.filter.updatePriority(u.eventCache.getNode(),g),ue=Fi(u,we,ee.isFullyInitialized(),ee.isFiltered());else{const wt=Kn(l),dn=ee.getNode().getImmediateChild(ft);let Dn;if(Sn(wt))Dn=g;else{const Lr=dt.getCompleteChild(ft);Dn=null!=Lr?".priority"===mr(wt)&&Lr.getChild(ro(wt)).isEmpty()?Lr:Lr.updateChild(wt,g):pn.EMPTY_NODE}ue=dn.equals(Dn)?u:Fi(u,d.filter.updateChild(ee.getNode(),ft,Dn,wt,dt,B),ee.isFullyInitialized(),d.filter.filtersNodes())}}return ue}function so(d,u){return d.eventCache.isCompleteForChild(u)}function qu(d,u,l){return l.foreach((g,C)=>{u=u.updateChild(g,C)}),u}function Wi(d,u,l,g,C,x,B,ee){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let we,ue=u;we=Sn(l)?g:new Er(null).setTree(l,g);const dt=u.serverCache.getNode();return we.children.inorderTraversal((ft,wt)=>{if(dt.hasChild(ft)){const Dn=qu(0,u.serverCache.getNode().getImmediateChild(ft),wt);ue=Ia(d,ue,new rt(ft),Dn,C,x,B,ee)}}),we.children.inorderTraversal((ft,wt)=>{const dn=!u.serverCache.isCompleteForChild(ft)&&null===wt.value;if(!dt.hasChild(ft)&&!dn){const Lr=qu(0,u.serverCache.getNode().getImmediateChild(ft),wt);ue=Ia(d,ue,new rt(ft),Lr,C,x,B,ee)}}),ue}class Qi{constructor(u,l){this.query_=u,this.eventRegistrations_=[];const g=this.query_._queryParams,C=new Us(g.getIndex()),x=function Ja(d){return d.loadsAllData()?new Us(d.getIndex()):d.hasLimit()?new pi(d):new pa(d)}(g);this.processor_=function Ku(d){return{filter:d}}(x);const B=l.serverCache,ee=l.eventCache,ue=C.updateFullNode(pn.EMPTY_NODE,B.getNode(),null),we=x.updateFullNode(pn.EMPTY_NODE,ee.getNode(),null),dt=new ya(ue,B.isFullyInitialized(),C.filtersNodes()),ft=new ya(we,ee.isFullyInitialized(),x.filtersNodes());this.viewCache_=qo(ft,dt),this.eventGenerator_=new Ba(this.query_)}get query(){return this.query_}}function Zu(d,u){const l=qr(d.viewCache_);return l&&(d.query._queryParams.loadsAllData()||!Sn(u)&&!l.getImmediateChild(At(u)).isEmpty())?l.getChild(u):null}function Xs(d){return 0===d.eventRegistrations_.length}function Je(d,u,l){const g=[];if(l){(0,P.hu)(null==u,"A cancel should cancel all event registrations.");const C=d.query._path;d.eventRegistrations_.forEach(x=>{const B=x.createCancelEvent(l,C);B&&g.push(B)})}if(u){let C=[];for(let x=0;x<d.eventRegistrations_.length;++x){const B=d.eventRegistrations_[x];if(B.matches(u)){if(u.hasAnyCallback()){C=C.concat(d.eventRegistrations_.slice(x+1));break}}else C.push(B)}d.eventRegistrations_=C}else d.eventRegistrations_=[];return g}function Ru(d,u,l,g){u.type===si.MERGE&&null!==u.source.queryId&&((0,P.hu)(qr(d.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(ja(d.viewCache_),"Missing event cache, even though we have a server cache"));const C=d.viewCache_,x=function iu(d,u,l,g,C){const x=new Co;let B,ee;if(l.type===si.OVERWRITE){const we=l;we.source.fromUser?B=Mu(d,u,we.path,we.snap,g,C,x):((0,P.hu)(we.source.fromServer,"Unknown source."),ee=we.source.tagged||u.serverCache.isFiltered()&&!Sn(we.path),B=Ia(d,u,we.path,we.snap,g,C,ee,x))}else if(l.type===si.MERGE){const we=l;we.source.fromUser?B=function _c(d,u,l,g,C,x,B){let ee=u;return g.foreach((ue,we)=>{const dt=rr(l,ue);so(u,At(dt))&&(ee=Mu(d,ee,dt,we,C,x,B))}),g.foreach((ue,we)=>{const dt=rr(l,ue);so(u,At(dt))||(ee=Mu(d,ee,dt,we,C,x,B))}),ee}(d,u,we.path,we.children,g,C,x):((0,P.hu)(we.source.fromServer,"Unknown source."),ee=we.source.tagged||u.serverCache.isFiltered(),B=Wi(d,u,we.path,we.children,g,C,ee,x))}else if(l.type===si.ACK_USER_WRITE){const we=l;B=we.revert?function jl(d,u,l,g,C,x){let B;if(null!=us(g,l))return u;{const ee=new Yt(g,u,C),ue=u.eventCache.getNode();let we;if(Sn(l)||".priority"===At(l)){let dt;if(u.serverCache.isFullyInitialized())dt=Yo(g,qr(u));else{const ft=u.serverCache.getNode();(0,P.hu)(ft instanceof pn,"serverChildren would be complete if leaf node"),dt=xa(g,ft)}we=d.filter.updateFullNode(ue,dt,x)}else{const dt=At(l);let ft=Qo(g,dt,u.serverCache);null==ft&&u.serverCache.isCompleteForChild(dt)&&(ft=ue.getImmediateChild(dt)),we=null!=ft?d.filter.updateChild(ue,dt,ft,Kn(l),ee,x):u.eventCache.getNode().hasChild(dt)?d.filter.updateChild(ue,dt,pn.EMPTY_NODE,Kn(l),ee,x):ue,we.isEmpty()&&u.serverCache.isFullyInitialized()&&(B=Yo(g,qr(u)),B.isLeafNode()&&(we=d.filter.updateFullNode(we,B,x)))}return B=u.serverCache.isFullyInitialized()||null!=us(g,vt()),Fi(u,we,B,d.filter.filtersNodes())}}(d,u,we.path,g,C,x):function Na(d,u,l,g,C,x,B){if(null!=us(C,l))return u;const ee=u.serverCache.isFiltered(),ue=u.serverCache;if(null!=g.value){if(Sn(l)&&ue.isFullyInitialized()||ue.isCompleteForPath(l))return Ia(d,u,l,ue.getNode().getChild(l),C,x,ee,B);if(Sn(l)){let we=new Er(null);return ue.getNode().forEachChild(bs,(dt,ft)=>{we=we.set(new rt(dt),ft)}),Wi(d,u,l,we,C,x,ee,B)}return u}{let we=new Er(null);return g.foreach((dt,ft)=>{const wt=rr(l,dt);ue.isCompleteForPath(wt)&&(we=we.set(dt,ue.getNode().getChild(wt)))}),Wi(d,u,l,we,C,x,ee,B)}}(d,u,we.path,we.affectedTree,g,C,x)}else{if(l.type!==si.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+l.type);B=function Wa(d,u,l,g,C){const x=u.serverCache;return Jt(d,hu(u,x.getNode(),x.isFullyInitialized()||Sn(l),x.isFiltered()),l,g,Br,C)}(d,u,l.path,g,x)}const ue=x.getChanges();return function Si(d,u,l){const g=u.eventCache;if(g.isFullyInitialized()){const C=g.getNode().isLeafNode()||g.getNode().isEmpty(),x=ja(d);(l.length>0||!d.eventCache.isFullyInitialized()||C&&!g.getNode().equals(x)||!g.getNode().getPriority().equals(x.getPriority()))&&l.push(ki(ja(u)))}}(u,B,ue),{viewCache:B,changes:ue}}(d.processor_,C,u,l,g);return function Or(d,u){(0,P.hu)(u.eventCache.getNode().isIndexed(d.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(u.serverCache.getNode().isIndexed(d.filter.getIndex()),"Server snap not indexed")}(d.processor_,x.viewCache),(0,P.hu)(x.viewCache.serverCache.isFullyInitialized()||!C.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),d.viewCache_=x.viewCache,pu(d,x.changes,x.viewCache.eventCache.getNode(),null)}function pu(d,u,l,g){return function Wu(d,u,l,g){const C=[],x=[];return u.forEach(B=>{"child_changed"===B.type&&d.index_.indexedValueChanged(B.oldSnap,B.snapshotNode)&&x.push(function Qs(d,u){return{type:"child_moved",snapshotNode:u,childName:d}}(B.childName,B.snapshotNode))}),_a(d,C,"child_removed",u,g,l),_a(d,C,"child_added",u,g,l),_a(d,C,"child_moved",x,g,l),_a(d,C,"child_changed",u,g,l),_a(d,C,"value",u,g,l),C}(d.eventGenerator_,u,l,g?[g]:d.eventRegistrations_)}let uo,Nt;class lo{constructor(){this.views=new Map}}function b(d,u,l,g){const C=u.source.queryId;if(null!==C){const x=d.views.get(C);return(0,P.hu)(null!=x,"SyncTree gave us an op for an invalid query."),Ru(x,u,l,g)}{let x=[];for(const B of d.views.values())x=x.concat(Ru(B,u,l,g));return x}}function I(d,u,l,g,C){const B=d.views.get(u._queryIdentifier);if(!B){let ee=Yo(l,C?g:null),ue=!1;ee?ue=!0:g instanceof pn?(ee=xa(l,g),ue=!1):(ee=pn.EMPTY_NODE,ue=!1);const we=qo(new ya(ee,ue,!1),new ya(g,C,!1));return new Qi(u,we)}return B}function Y(d){const u=[];for(const l of d.views.values())l.query._queryParams.loadsAllData()||u.push(l);return u}function ce(d,u){let l=null;for(const g of d.views.values())l=l||Zu(g,u);return l}function Ce(d,u){return u._queryParams.loadsAllData()?gn(d):d.views.get(u._queryIdentifier)}function Ze(d,u){return null!=Ce(d,u)}function Ft(d){return null!=gn(d)}function gn(d){for(const u of d.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let Ci=1;class Ts{constructor(u){this.listenProvider_=u,this.syncPointTree_=new Er(null),this.pendingWriteTree_=function xu(){return{visibleWrites:Hs.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Fr(d,u,l,g,C){return function Ot(d,u,l,g,C){(0,P.hu)(g>d.lastWriteId,"Stacking an older write on top of newer ones"),void 0===C&&(C=!0),d.allWrites.push({path:u,snap:l,writeId:g,visible:C}),C&&(d.visibleWrites=Au(d.visibleWrites,u,l)),d.lastWriteId=g}(d.pendingWriteTree_,u,l,g,C),C?Xe(d,new Wr({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,l)):[]}function Ji(d,u,l=!1){const g=function Fo(d,u){for(let l=0;l<d.allWrites.length;l++){const g=d.allWrites[l];if(g.writeId===u)return g}return null}(d.pendingWriteTree_,u);if(function Io(d,u){const l=d.allWrites.findIndex(ee=>ee.writeId===u);(0,P.hu)(l>=0,"removeWrite called with nonexistent writeId.");const g=d.allWrites[l];d.allWrites.splice(l,1);let C=g.visible,x=!1,B=d.allWrites.length-1;for(;C&&B>=0;){const ee=d.allWrites[B];ee.visible&&(B>=l&&cn(ee,g.path)?C=!1:hi(g.path,ee.path)&&(x=!0)),B--}return!!C&&(x?(function Un(d){d.visibleWrites=Gt(d.allWrites,wa,vt()),d.lastWriteId=d.allWrites.length>0?d.allWrites[d.allWrites.length-1].writeId:-1}(d),!0):(g.snap?d.visibleWrites=ru(d.visibleWrites,g.path):ur(g.children,ue=>{d.visibleWrites=ru(d.visibleWrites,rr(g.path,ue))}),!0))}(d.pendingWriteTree_,u)){let x=new Er(null);return null!=g.snap?x=x.set(vt(),!0):ur(g.children,B=>{x=x.set(new rt(B),!0)}),Xe(d,new as(g.path,x,l))}return[]}function jr(d,u,l){return Xe(d,new Wr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,l))}function su(d,u,l,g,C=!1){const x=u._path,B=d.syncPointTree_.get(x);let ee=[];if(B&&("default"===u._queryIdentifier||Ze(B,u))){const ue=function V(d,u,l,g){const C=u._queryIdentifier,x=[];let B=[];const ee=Ft(d);if("default"===C)for(const[ue,we]of d.views.entries())B=B.concat(Je(we,l,g)),Xs(we)&&(d.views.delete(ue),we.query._queryParams.loadsAllData()||x.push(we.query));else{const ue=d.views.get(C);ue&&(B=B.concat(Je(ue,l,g)),Xs(ue)&&(d.views.delete(C),ue.query._queryParams.loadsAllData()||x.push(ue.query)))}return ee&&!Ft(d)&&x.push(new(function Xo(){return(0,P.hu)(uo,"Reference.ts has not been loaded"),uo}())(u._repo,u._path)),{removed:x,events:B}}(B,u,l,g);(function D(d){return 0===d.views.size})(B)&&(d.syncPointTree_=d.syncPointTree_.remove(x));const we=ue.removed;if(ee=ue.events,!C){const dt=-1!==we.findIndex(wt=>wt._queryParams.loadsAllData()),ft=d.syncPointTree_.findOnPath(x,(wt,dn)=>Ft(dn));if(dt&&!ft){const wt=d.syncPointTree_.subtree(x);if(!wt.isEmpty()){const dn=function ta(d){return d.fold((u,l,g)=>{if(l&&Ft(l))return[gn(l)];{let C=[];return l&&(C=Y(l)),ur(g,(x,B)=>{C=C.concat(B)}),C}})}(wt);for(let Dn=0;Dn<dn.length;++Dn){const Lr=dn[Dn],Ws=Lr.query,jo=vn(d,Lr);d.listenProvider_.startListening(na(Ws),Mn(d,Ws),jo.hashFn,jo.onComplete)}}}!ft&&we.length>0&&!g&&(dt?d.listenProvider_.stopListening(na(u),null):we.forEach(wt=>{const dn=d.queryToTagMap.get($n(wt));d.listenProvider_.stopListening(na(wt),dn)}))}!function Ca(d,u){for(let l=0;l<u.length;++l){const g=u[l];if(!g._queryParams.loadsAllData()){const C=$n(g),x=d.queryToTagMap.get(C);d.queryToTagMap.delete(C),d.tagToQueryMap.delete(x)}}}(d,we)}return ee}function k(d,u,l,g){const C=Rn(d,g);if(null!=C){const x=oi(C),B=x.path,ee=x.queryId,ue=Pr(B,u);return ls(d,B,new Wr(js(ee),ue,l))}return[]}function Q(d,u,l,g=!1){const C=u._path;let x=null,B=!1;d.syncPointTree_.foreachOnPath(C,(wt,dn)=>{const Dn=Pr(wt,C);x=x||ce(dn,Dn),B=B||Ft(dn)});let ue,ee=d.syncPointTree_.get(C);ee?(B=B||Ft(ee),x=x||ce(ee,vt())):(ee=new lo,d.syncPointTree_=d.syncPointTree_.set(C,ee)),null!=x?ue=!0:(ue=!1,x=pn.EMPTY_NODE,d.syncPointTree_.subtree(C).foreachChild((dn,Dn)=>{const Lr=ce(Dn,vt());Lr&&(x=x.updateImmediateChild(dn,Lr))}));const we=Ze(ee,u);if(!we&&!u._queryParams.loadsAllData()){const wt=$n(u);(0,P.hu)(!d.queryToTagMap.has(wt),"View does not exist, but we have a tag");const dn=function gu(){return Ci++}();d.queryToTagMap.set(wt,dn),d.tagToQueryMap.set(dn,wt)}let ft=function M(d,u,l,g,C,x){const B=I(d,u,g,C,x);return d.views.has(u._queryIdentifier)||d.views.set(u._queryIdentifier,B),function Jo(d,u){d.eventRegistrations_.push(u)}(B,l),function ao(d,u){const l=d.viewCache_.eventCache,g=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(tr,(x,B)=>{g.push(fi(x,B))}),l.isFullyInitialized()&&g.push(ki(l.getNode())),pu(d,g,l.getNode(),u)}(B,l)}(ee,u,l,Zo(d.pendingWriteTree_,C),x,ue);if(!we&&!B&&!g){const wt=Ce(ee,u);ft=ft.concat(function za(d,u,l){const g=u._path,C=Mn(d,u),x=vn(d,l),B=d.listenProvider_.startListening(na(u),C,x.hashFn,x.onComplete),ee=d.syncPointTree_.subtree(g);if(C)(0,P.hu)(!Ft(ee.value),"If we're adding a query, it shouldn't be shadowed");else{const ue=ee.fold((we,dt,ft)=>{if(!Sn(we)&&dt&&Ft(dt))return[gn(dt).query];{let wt=[];return dt&&(wt=wt.concat(Y(dt).map(dn=>dn.query))),ur(ft,(dn,Dn)=>{wt=wt.concat(Dn)}),wt}});for(let we=0;we<ue.length;++we){const dt=ue[we];d.listenProvider_.stopListening(na(dt),Mn(d,dt))}}return B}(d,u,wt))}return ft}function ge(d,u,l){const C=d.pendingWriteTree_,x=d.syncPointTree_.findOnPath(u,(B,ee)=>{const we=ce(ee,Pr(B,u));if(we)return we});return ot(C,u,x,l,!0)}function Xe(d,u){return bt(u,d.syncPointTree_,null,Zo(d.pendingWriteTree_,vt()))}function bt(d,u,l,g){if(Sn(d.path))return $t(d,u,l,g);{const C=u.get(vt());null==l&&null!=C&&(l=ce(C,vt()));let x=[];const B=At(d.path),ee=d.operationForChild(B),ue=u.children.get(B);if(ue&&ee){const we=l?l.getImmediateChild(B):null,dt=Ga(g,B);x=x.concat(bt(ee,ue,we,dt))}return C&&(x=x.concat(b(C,d,g,l))),x}}function $t(d,u,l,g){const C=u.get(vt());null==l&&null!=C&&(l=ce(C,vt()));let x=[];return u.children.inorderTraversal((B,ee)=>{const ue=l?l.getImmediateChild(B):null,we=Ga(g,B),dt=d.operationForChild(B);dt&&(x=x.concat($t(dt,ee,ue,we)))}),C&&(x=x.concat(b(C,d,g,l))),x}function vn(d,u){const l=u.query,g=Mn(d,l);return{hashFn:()=>(function Js(d){return d.viewCache_.serverCache.getNode()}(u)||pn.EMPTY_NODE).hash(),onComplete:C=>{if("ok"===C)return g?function Xi(d,u,l){const g=Rn(d,l);if(g){const C=oi(g),x=C.path,B=C.queryId,ee=Pr(x,u);return ls(d,x,new ma(js(B),ee))}return[]}(d,l._path,g):function fl(d,u){return Xe(d,new ma({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(d,l._path);{const x=function ln(d,u){let l="Unknown Error";"too_big"===d?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===d?l="Client doesn't have permission to access the desired data.":"unavailable"===d&&(l="The service is unavailable");const g=new Error(d+" at "+u._path.toString()+": "+l);return g.code=d.toUpperCase(),g}(C,l);return su(d,l,null,x)}}}}function Mn(d,u){const l=$n(u);return d.queryToTagMap.get(l)}function $n(d){return d._path.toString()+"$"+d._queryIdentifier}function Rn(d,u){return d.tagToQueryMap.get(u)}function oi(d){const u=d.indexOf("$");return(0,P.hu)(-1!==u&&u<d.length-1,"Bad queryKey."),{queryId:d.substr(u+1),path:new rt(d.substr(0,u))}}function ls(d,u,l){const g=d.syncPointTree_.get(u);return(0,P.hu)(g,"Missing sync point for query tag that we're tracking"),b(g,l,Zo(d.pendingWriteTree_,u),null)}function na(d){return d._queryParams.loadsAllData()&&!d._queryParams.isDefault()?new(function Li(){return(0,P.hu)(Nt,"Reference.ts has not been loaded"),Nt}())(d._repo,d._path):d}class ra{constructor(u){this.node_=u}getImmediateChild(u){const l=this.node_.getImmediateChild(u);return new ra(l)}node(){return this.node_}}class ia{constructor(u,l){this.syncTree_=u,this.path_=l}getImmediateChild(u){const l=rr(this.path_,u);return new ia(this.syncTree_,l)}node(){return ge(this.syncTree_,this.path_)}}const Hl=function(d,u,l){return d&&"object"==typeof d?((0,P.hu)(".sv"in d,"Unexpected leaf node or priority contents"),"string"==typeof d[".sv"]?Pd(d[".sv"],u,l):"object"==typeof d[".sv"]?kd(d[".sv"],u):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2))):d},Pd=function(d,u,l){if("timestamp"===d)return l.timestamp;(0,P.hu)(!1,"Unexpected server value: "+d)},kd=function(d,u,l){d.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2));const g=d.increment;"number"!=typeof g&&(0,P.hu)(!1,"Unexpected increment value: "+g);const C=u.node();if((0,P.hu)(null!==C&&typeof C<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!C.isLeafNode())return g;const B=C.getValue();return"number"!=typeof B?g:B+g},Hc=function(d,u,l,g){return Yu(u,new ia(l,d),g)},Ss=function(d,u,l){return Yu(d,new ra(u),l)};function Yu(d,u,l){const g=d.getPriority().val(),C=Hl(g,u.getImmediateChild(".priority"),l);let x;if(d.isLeafNode()){const B=d,ee=Hl(B.getValue(),u,l);return ee!==B.getValue()||C!==B.getPriority().val()?new Nr(ee,Ur(C)):d}{const B=d;return x=B,C!==B.getPriority().val()&&(x=x.updatePriority(new Nr(C))),B.forEachChild(tr,(ee,ue)=>{const we=Yu(ue,u.getImmediateChild(ee),l);we!==ue&&(x=x.updateImmediateChild(ee,we))}),x}}class ti{constructor(u="",l=null,g={children:{},childCount:0}){this.name=u,this.parent=l,this.node=g}}function vc(d,u){let l=u instanceof rt?u:new rt(u),g=d,C=At(l);for(;null!==C;){const x=(0,P.DV)(g.node.children,C)||{children:{},childCount:0};g=new ti(C,g,x),l=Kn(l),C=At(l)}return g}function mu(d){return d.node.value}function Nu(d,u){d.node.value=u,vs(d)}function $c(d){return d.node.childCount>0}function yu(d,u){ur(d.node.children,(l,g)=>{u(new ti(l,d,g))})}function $l(d,u,l,g){l&&!g&&u(d),yu(d,C=>{$l(C,u,!0,g)}),l&&g&&u(d)}function Ka(d){return new rt(null===d.parent?d.name:Ka(d.parent)+"/"+d.name)}function vs(d){null!==d.parent&&function pl(d,u,l){const g=function wc(d){return void 0===mu(d)&&!$c(d)}(l),C=(0,P.r3)(d.node.children,u);g&&C?(delete d.node.children[u],d.node.childCount--,vs(d)):!g&&!C&&(d.node.children[u]=l.node,d.node.childCount++,vs(d))}(d.parent,d.name,d)}const ph=/[\[\].#$\/\u0000-\u001F\u007F]/,gh=/[\[\].#$\u0000-\u001F\u007F]/,Wc=10485760,Ou=function(d){return"string"==typeof d&&0!==d.length&&!ph.test(d)},Ec=function(d){return"string"==typeof d&&0!==d.length&&!gh.test(d)},gl=function(d){return null===d||"string"==typeof d||"number"==typeof d&&!Ht(d)||d&&"object"==typeof d&&(0,P.r3)(d,".sv")},eo=function(d,u,l,g){g&&void 0===u||Da((0,P.gK)(d,"value"),u,l)},Da=function(d,u,l){const g=l instanceof rt?new ns(l,d):l;if(void 0===u)throw new Error(d+"contains undefined "+ji(g));if("function"==typeof u)throw new Error(d+"contains a function "+ji(g)+" with contents = "+u.toString());if(Ht(u))throw new Error(d+"contains "+u.toString()+" "+ji(g));if("string"==typeof u&&u.length>Wc/3&&(0,P.ug)(u)>Wc)throw new Error(d+"contains a string greater than "+Wc+" utf8 bytes "+ji(g)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let C=!1,x=!1;if(ur(u,(B,ee)=>{if(".value"===B)C=!0;else if(".priority"!==B&&".sv"!==B&&(x=!0,!Ou(B)))throw new Error(d+" contains an invalid key ("+B+") "+ji(g)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function xi(d,u){d.parts_.length>0&&(d.byteLength_+=1),d.parts_.push(u),d.byteLength_+=(0,P.ug)(u),Ro(d)})(g,B),Da(d,ee,g),function Cs(d){const u=d.parts_.pop();d.byteLength_-=(0,P.ug)(u),d.parts_.length>0&&(d.byteLength_-=1)}(g)}),C&&x)throw new Error(d+' contains ".value" child '+ji(g)+" in addition to actual children.")}},Gl=function(d,u,l,g){if(g&&void 0===u)return;const C=(0,P.gK)(d,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(C+" must be an object containing the children to replace.");const x=[];ur(u,(B,ee)=>{const ue=new rt(B);if(Da(C,ee,rr(l,ue)),".priority"===mr(ue)&&!gl(ee))throw new Error(C+"contains an invalid value for '"+ue.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");x.push(ue)}),function(d,u){let l,g;for(l=0;l<u.length;l++){g=u[l];const x=ps(g);for(let B=0;B<x.length;B++)if((".priority"!==x[B]||B!==x.length-1)&&!Ou(x[B]))throw new Error(d+"contains an invalid key ("+x[B]+") in path "+g.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(gs);let C=null;for(l=0;l<u.length;l++){if(g=u[l],null!==C&&hi(C,g))throw new Error(d+"contains a path "+C.toString()+" that is ancestor of another path "+g.toString());C=g}}(C,x)},Ic=function(d,u,l){if(!l||void 0!==u){if(Ht(u))throw new Error((0,P.gK)(d,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!gl(u))throw new Error((0,P.gK)(d,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},sa=function(d,u,l,g){if(!(g&&void 0===l||Ou(l)))throw new Error((0,P.gK)(d,u)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ml=function(d,u,l,g){if(!(g&&void 0===l||Ec(l)))throw new Error((0,P.gK)(d,u)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ho=function(d,u){if(".info"===At(u))throw new Error(d+" failed = Can't modify data under /.info/")},Wl=function(d,u){const l=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!Ou(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==l.length&&!function(d){return d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),Ec(d)}(l))throw new Error((0,P.gK)(d,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class zc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function zl(d,u){let l=null;for(let g=0;g<u.length;g++){const C=u[g],x=C.getPath();null!==l&&!Wo(x,l.path)&&(d.eventLists_.push(l),l=null),null===l&&(l={events:[],path:x}),l.events.push(C)}l&&d.eventLists_.push(l)}function yl(d,u,l){zl(d,l),Kc(d,g=>Wo(g,u))}function Vi(d,u,l){zl(d,l),Kc(d,g=>hi(g,u)||hi(u,g))}function Kc(d,u){d.recursionDepth_++;let l=!0;for(let g=0;g<d.eventLists_.length;g++){const C=d.eventLists_[g];C&&(u(C.path)?(Oa(d.eventLists_[g]),d.eventLists_[g]=null):l=!1)}l&&(d.eventLists_=[]),d.recursionDepth_--}function Oa(d){for(let u=0;u<d.events.length;u++){const l=d.events[u];if(null!==l){d.events[u]=null;const g=l.getEventRunner();tn&&mn("event: "+l.toString()),Mr(g)}}}const qc="repo_interrupt";class Kl{constructor(u,l,g,C){this.repoInfo_=u,this.forceRestClient_=l,this.authTokenProvider_=g,this.appCheckProvider_=C,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nn(),this.transactionQueueTree_=new ti,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Pu(d){const l=d.infoData_.getNode(new rt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function _l(d){return function(d){return(d=d||{}).timestamp=d.timestamp||(new Date).getTime(),d}({timestamp:Pu(d)})}function Pa(d,u,l,g,C){d.dataUpdateCount++;const x=new rt(u);l=d.interceptServerDataCallback_?d.interceptServerDataCallback_(u,l):l;let B=[];if(C)if(g){const ue=(0,P.UI)(l,we=>Ur(we));B=function U(d,u,l,g){const C=Rn(d,g);if(C){const x=oi(C),B=x.path,ee=x.queryId,ue=Pr(B,u),we=Er.fromObject(l);return ls(d,B,new Ko(js(ee),ue,we))}return[]}(d.serverSyncTree_,x,ue,C)}else{const ue=Ur(l);B=k(d.serverSyncTree_,x,ue,C)}else if(g){const ue=(0,P.UI)(l,we=>Ur(we));B=function Do(d,u,l){const g=Er.fromObject(l);return Xe(d,new Ko({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,g))}(d.serverSyncTree_,x,ue)}else{const ue=Ur(l);B=jr(d.serverSyncTree_,x,ue)}let ee=x;B.length>0&&(ee=Ii(d,x)),Vi(d.eventQueue_,ee,B)}function _u(d,u){Qu(d,"connected",u),!1===u&&function vu(d){wl(d,"onDisconnectEvents");const u=_l(d),l=nn();_r(d.onDisconnect_,vt(),(C,x)=>{const B=Hc(C,x,d.serverSyncTree_,u);Yn(l,C,B)});let g=[];_r(l,vt(),(C,x)=>{g=g.concat(jr(d.serverSyncTree_,C,x));const B=Ql(d,C);Ii(d,B)}),d.onDisconnect_=nn(),Vi(d.eventQueue_,vt(),g)}(d)}function Qu(d,u,l){const g=new rt("/.info/"+u),C=Ur(l);d.infoData_.updateSnapshot(g,C);const x=jr(d.infoSyncTree_,g,C);Vi(d.eventQueue_,g,x)}function Ju(d){return d.nextWriteId_++}function Qc(d,u,l,g,C){wl(d,"set",{path:u.toString(),value:l,priority:g});const x=_l(d),B=Ur(l,g),ee=ge(d.serverSyncTree_,u),ue=Ss(B,ee,x),we=Ju(d),dt=Fr(d.serverSyncTree_,u,ue,we,!0);zl(d.eventQueue_,dt),d.server_.put(u.toString(),B.val(!0),(wt,dn)=>{const Dn="ok"===wt;Dn||Vn("set at "+u+" failed: "+wt);const Lr=Ji(d.serverSyncTree_,we,!Dn);Vi(d.eventQueue_,u,Lr),Hr(0,C,wt,dn)});const ft=Ql(d,u);Ii(d,ft),Vi(d.eventQueue_,ft,[])}function Cc(d,u,l){d.server_.onDisconnectCancel(u.toString(),(g,C)=>{"ok"===g&&Ar(d.onDisconnect_,u),Hr(0,l,g,C)})}function qa(d,u,l,g){const C=Ur(l);d.server_.onDisconnectPut(u.toString(),C.val(!0),(x,B)=>{"ok"===x&&Yn(d.onDisconnect_,u,C),Hr(0,g,x,B)})}function vl(d,u,l){let g;g=".info"===At(u._path)?su(d.infoSyncTree_,u,l):su(d.serverSyncTree_,u,l),yl(d.eventQueue_,u._path,g)}function ku(d){d.persistentConnection_&&d.persistentConnection_.interrupt(qc)}function wl(d,...u){let l="";d.persistentConnection_&&(l=d.persistentConnection_.id+":"),mn(l,...u)}function Hr(d,u,l,g){u&&Mr(()=>{if("ok"===l)u(null);else{const C=(l||"error").toUpperCase();let x=C;g&&(x+=": "+g);const B=new Error(x);B.code=C,u(B)}})}function El(d,u,l){return ge(d.serverSyncTree_,u,l)||pn.EMPTY_NODE}function el(d,u=d.transactionQueueTree_){if(u||Yl(d,u),mu(u)){const l=wu(d,u);(0,P.hu)(l.length>0,"Sending zero length transaction queue"),l.every(C=>0===C.status)&&function Vd(d,u,l){const g=l.map(we=>we.currentWriteId),C=El(d,u,g);let x=C;const B=C.hash();for(let we=0;we<l.length;we++){const dt=l[we];(0,P.hu)(0===dt.status,"tryToSendTransactionQueue_: items in queue should all be run."),dt.status=1,dt.retryCount++;const ft=Pr(u,dt.path);x=x.updateChild(ft,dt.currentOutputSnapshotRaw)}const ee=x.val(!0),ue=u;d.server_.put(ue.toString(),ee,we=>{wl(d,"transaction put response",{path:ue.toString(),status:we});let dt=[];if("ok"===we){const ft=[];for(let wt=0;wt<l.length;wt++)l[wt].status=2,dt=dt.concat(Ji(d.serverSyncTree_,l[wt].currentWriteId)),l[wt].onComplete&&ft.push(()=>l[wt].onComplete(null,!0,l[wt].currentOutputSnapshotResolved)),l[wt].unwatcher();Yl(d,vc(d.transactionQueueTree_,u)),el(d,d.transactionQueueTree_),Vi(d.eventQueue_,u,dt);for(let wt=0;wt<ft.length;wt++)Mr(ft[wt])}else{if("datastale"===we)for(let ft=0;ft<l.length;ft++)l[ft].status=3===l[ft].status?4:0;else{Vn("transaction at "+ue.toString()+" failed: "+we);for(let ft=0;ft<l.length;ft++)l[ft].status=4,l[ft].abortReason=we}Ii(d,u)}},B)}(d,Ka(u),l)}else $c(u)&&yu(u,l=>{el(d,l)})}function Ii(d,u){const l=ed(d,u),g=Ka(l);return function _h(d,u,l){if(0===u.length)return;const g=[];let C=[];const B=u.filter(ee=>0===ee.status).map(ee=>ee.currentWriteId);for(let ee=0;ee<u.length;ee++){const ue=u[ee],we=Pr(l,ue.path);let ft,dt=!1;if((0,P.hu)(null!==we,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ue.status)dt=!0,ft=ue.abortReason,C=C.concat(Ji(d.serverSyncTree_,ue.currentWriteId,!0));else if(0===ue.status)if(ue.retryCount>=25)dt=!0,ft="maxretry",C=C.concat(Ji(d.serverSyncTree_,ue.currentWriteId,!0));else{const wt=El(d,ue.path,B);ue.currentInputSnapshot=wt;const dn=u[ee].update(wt.val());if(void 0!==dn){Da("transaction failed: Data returned ",dn,ue.path);let Dn=Ur(dn);"object"==typeof dn&&null!=dn&&(0,P.r3)(dn,".priority")||(Dn=Dn.updatePriority(wt.getPriority()));const Ws=ue.currentWriteId,jo=_l(d),bu=Ss(Dn,wt,jo);ue.currentOutputSnapshotRaw=Dn,ue.currentOutputSnapshotResolved=bu,ue.currentWriteId=Ju(d),B.splice(B.indexOf(Ws),1),C=C.concat(Fr(d.serverSyncTree_,ue.path,bu,ue.currentWriteId,ue.applyLocally)),C=C.concat(Ji(d.serverSyncTree_,Ws,!0))}else dt=!0,ft="nodata",C=C.concat(Ji(d.serverSyncTree_,ue.currentWriteId,!0))}Vi(d.eventQueue_,l,C),C=[],dt&&(u[ee].status=2,setTimeout(u[ee].unwatcher,Math.floor(0)),u[ee].onComplete&&g.push("nodata"===ft?()=>u[ee].onComplete(null,!1,u[ee].currentInputSnapshot):()=>u[ee].onComplete(new Error(ft),!1,null)))}Yl(d,d.transactionQueueTree_);for(let ee=0;ee<g.length;ee++)Mr(g[ee]);el(d,d.transactionQueueTree_)}(d,wu(d,l),g),g}function ed(d,u){let l,g=d.transactionQueueTree_;for(l=At(u);null!==l&&void 0===mu(g);)g=vc(g,l),l=At(u=Kn(u));return g}function wu(d,u){const l=[];return Uo(d,u,l),l.sort((g,C)=>g.order-C.order),l}function Uo(d,u,l){const g=mu(u);if(g)for(let C=0;C<g.length;C++)l.push(g[C]);yu(u,C=>{Uo(d,C,l)})}function Yl(d,u){const l=mu(u);if(l){let g=0;for(let C=0;C<l.length;C++)2!==l[C].status&&(l[g]=l[C],g++);l.length=g,Nu(u,l.length>0?l:void 0)}yu(u,g=>{Yl(d,g)})}function Ql(d,u){const l=Ka(ed(d,u)),g=vc(d.transactionQueueTree_,u);return function Gc(d,u,l){let g=l?d:d.parent;for(;null!==g;){if(u(g))return!0;g=g.parent}}(g,C=>{Dc(d,C)}),Dc(d,g),$l(g,C=>{Dc(d,C)}),l}function Dc(d,u){const l=mu(u);if(l){const g=[];let C=[],x=-1;for(let B=0;B<l.length;B++)3===l[B].status||(1===l[B].status?((0,P.hu)(x===B-1,"All SENT items should be at beginning of queue."),x=B,l[B].status=3,l[B].abortReason="set"):((0,P.hu)(0===l[B].status,"Unexpected transaction status in abort"),l[B].unwatcher(),C=C.concat(Ji(d.serverSyncTree_,l[B].currentWriteId,!0)),l[B].onComplete&&g.push(l[B].onComplete.bind(null,new Error("set"),!1,null))));-1===x?Nu(u,void 0):l.length=x+1,Vi(d.eventQueue_,Ka(u),C);for(let B=0;B<g.length;B++)Mr(g[B])}}const Ud=function(d,u){const l=As(d),g=l.namespace;return"firebase.com"===l.domain&&wn(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!g||"undefined"===g)&&"localhost"!==l.domain&&wn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ye(l.host,l.secure,g,"ws"===l.scheme||"wss"===l.scheme,u,"",g!==l.subdomain),path:new rt(l.pathString)}},As=function(d){let u="",l="",g="",C="",x="",B=!0,ee="https",ue=443;if("string"==typeof d){let we=d.indexOf("//");we>=0&&(ee=d.substring(0,we-1),d=d.substring(we+2));let dt=d.indexOf("/");-1===dt&&(dt=d.length);let ft=d.indexOf("?");-1===ft&&(ft=d.length),u=d.substring(0,Math.min(dt,ft)),dt<ft&&(C=function Il(d){let u="";const l=d.split("/");for(let g=0;g<l.length;g++)if(l[g].length>0){let C=l[g];try{C=decodeURIComponent(C.replace(/\+/g," "))}catch{}u+="/"+C}return u}(d.substring(dt,ft)));const wt=function td(d){const u={};"?"===d.charAt(0)&&(d=d.substring(1));for(const l of d.split("&")){if(0===l.length)continue;const g=l.split("=");2===g.length?u[decodeURIComponent(g[0])]=decodeURIComponent(g[1]):Vn(`Invalid query segment '${l}' in query '${d}'`)}return u}(d.substring(Math.min(d.length,ft)));we=u.indexOf(":"),we>=0?(B="https"===ee||"wss"===ee,ue=parseInt(u.substring(we+1),10)):we=u.length;const dn=u.slice(0,we);if("localhost"===dn.toLowerCase())l="localhost";else if(dn.split(".").length<=2)l=dn;else{const Dn=u.indexOf(".");g=u.substring(0,Dn).toLowerCase(),l=u.substring(Dn+1),x=g}"ns"in wt&&(x=wt.ns)}return{host:u,port:ue,domain:l,subdomain:g,secure:B,scheme:ee,pathString:C,namespace:x}};class Ir{constructor(u,l,g,C){this.eventType=u,this.eventRegistration=l,this.snapshot=g,this.prevName=C}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class tl{constructor(u,l,g){this.eventRegistration=u,this.error=l,this.path=g}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Cl{constructor(u,l){this.snapshotCallback=u,this.cancelCallback=l}onValue(u,l){this.snapshotCallback.call(null,u,l)}onCancel(u){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class au{constructor(u,l){this._repo=u,this._path=l}cancel(){const u=new P.BH;return Cc(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){ho("OnDisconnect.remove",this._path);const u=new P.BH;return qa(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){ho("OnDisconnect.set",this._path),eo("OnDisconnect.set",u,this._path,!1);const l=new P.BH;return qa(this._repo,this._path,u,l.wrapCallback(()=>{})),l.promise}setWithPriority(u,l){ho("OnDisconnect.setWithPriority",this._path),eo("OnDisconnect.setWithPriority",u,this._path,!1),Ic("OnDisconnect.setWithPriority",l,!1);const g=new P.BH;return function Jc(d,u,l,g,C){const x=Ur(l,g);d.server_.onDisconnectPut(u.toString(),x.val(!0),(B,ee)=>{"ok"===B&&Yn(d.onDisconnect_,u,x),Hr(0,C,B,ee)})}(this._repo,this._path,u,l,g.wrapCallback(()=>{})),g.promise}update(u){ho("OnDisconnect.update",this._path),Gl("OnDisconnect.update",u,this._path,!1);const l=new P.BH;return function Zl(d,u,l,g){if((0,P.xb)(l))return mn("onDisconnect().update() called with empty data.  Don't do anything."),void Hr(0,g,"ok",void 0);d.server_.onDisconnectMerge(u.toString(),l,(C,x)=>{"ok"===C&&ur(l,(B,ee)=>{const ue=Ur(ee);Yn(d.onDisconnect_,rr(u,B),ue)}),Hr(0,g,C,x)})}(this._repo,this._path,u,l.wrapCallback(()=>{})),l.promise}}class fo{constructor(u,l,g,C){this._repo=u,this._path=l,this._queryParams=g,this._orderByCalled=C}get key(){return Sn(this._path)?null:mr(this._path)}get ref(){return new bo(this._repo,this._path)}get _queryIdentifier(){const u=Ee(this._queryParams),l=cr(u);return"{}"===l?"default":l}get _queryObject(){return Ee(this._queryParams)}isEqual(u){if(!((u=(0,P.m9)(u))instanceof fo))return!1;const l=this._repo===u._repo,g=Wo(this._path,u._path);return l&&g&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ts(d){let u="";for(let l=d.pieceNum_;l<d.pieces_.length;l++)""!==d.pieces_[l]&&(u+="/"+encodeURIComponent(String(d.pieces_[l])));return u||"/"}(this._path)}}function po(d,u){if(!0===d._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function cs(d){let u=null,l=null;if(d.hasStart()&&(u=d.getIndexStartValue()),d.hasEnd()&&(l=d.getIndexEndValue()),d.getIndex()===bs){const g="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",C="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(d.hasStart()){if(d.getIndexStartName()!==Nn)throw new Error(g);if("string"!=typeof u)throw new Error(C)}if(d.hasEnd()){if(d.getIndexEndName()!==sr)throw new Error(g);if("string"!=typeof l)throw new Error(C)}}else if(d.getIndex()===tr){if(null!=u&&!gl(u)||null!=l&&!gl(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(d.getIndex()instanceof Ls||d.getIndex()===zo,"unknown index type."),null!=u&&"object"==typeof u||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ba(d){if(d.hasStart()&&d.hasEnd()&&d.hasLimit()&&!d.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class bo extends fo{constructor(u,l){super(u,l,new ga,!1)}get parent(){const u=ro(this._path);return null===u?null:new bo(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class Bo{constructor(u,l,g){this._node=u,this.ref=l,this._index=g}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const l=new rt(u),g=Fu(this.ref,u);return new Bo(this._node.getChild(l),g,tr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(g,C)=>u(new Bo(C,Fu(this.ref,g),tr)))}hasChild(u){const l=new rt(u);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Jl(d,u){return(d=(0,P.m9)(d))._checkNotDeleted("ref"),void 0!==u?Fu(d._root,u):d._root}function uu(d,u){(d=(0,P.m9)(d))._checkNotDeleted("refFromURL");const l=Ud(u,d._repo.repoInfo_.nodeAdmin);Wl("refFromURL",l);const g=l.repoInfo;return!d._repo.repoInfo_.isCustomHost()&&g.host!==d._repo.repoInfo_.host&&wn("refFromURL: Host name does not match the current database: (found "+g.host+" but expected "+d._repo.repoInfo_.host+")"),Jl(d,l.path.toString())}function Fu(d,u){return null===At((d=(0,P.m9)(d))._path)?(l=u,l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),ml("child","path",l,!1)):ml("child","path",u,!1),new bo(d._repo,rr(d._path,u));var l}function Eu(d,u){d=(0,P.m9)(d),ho("set",d._path),eo("set",u,d._path,!1);const l=new P.BH;return Qc(d._repo,d._path,u,null,l.wrapCallback(()=>{})),l.promise}function Dl(d,u){Gl("update",u,d._path,!1);const l=new P.BH;return function ql(d,u,l,g){wl(d,"update",{path:u.toString(),value:l});let C=!0;const x=_l(d),B={};if(ur(l,(ee,ue)=>{C=!1,B[ee]=Hc(rr(u,ee),Ur(ue),d.serverSyncTree_,x)}),C)mn("update() called with empty data.  Don't do anything."),Hr(0,g,"ok",void 0);else{const ee=Ju(d),ue=function ea(d,u,l,g){!function ei(d,u,l,g){(0,P.hu)(g>d.lastWriteId,"Stacking an older merge on top of newer ones"),d.allWrites.push({path:u,children:l,writeId:g,visible:!0}),d.visibleWrites=va(d.visibleWrites,u,l),d.lastWriteId=g}(d.pendingWriteTree_,u,l,g);const C=Er.fromObject(l);return Xe(d,new Ko({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,C))}(d.serverSyncTree_,u,B,ee);zl(d.eventQueue_,ue),d.server_.merge(u.toString(),l,(we,dt)=>{const ft="ok"===we;ft||Vn("update at "+u+" failed: "+we);const wt=Ji(d.serverSyncTree_,ee,!ft),dn=wt.length>0?Ii(d,u):u;Vi(d.eventQueue_,dn,wt),Hr(0,g,we,dt)}),ur(l,we=>{const dt=Ql(d,rr(u,we));Ii(d,dt)}),Vi(d.eventQueue_,u,[])}}(d._repo,d._path,u,l.wrapCallback(()=>{})),l.promise}function bl(d){d=(0,P.m9)(d);const u=new Cl(()=>{}),l=new Ui(u);return function mf(d,u,l){const g=function je(d,u){const l=u._path;let g=null;d.syncPointTree_.foreachOnPath(l,(we,dt)=>{const ft=Pr(we,l);g=g||ce(dt,ft)});let C=d.syncPointTree_.get(l);C?g=g||ce(C,vt()):(C=new lo,d.syncPointTree_=d.syncPointTree_.set(l,C));const x=null!=g,B=x?new ya(g,!0,!1):null;return function oo(d){return ja(d.viewCache_)}(I(C,u,Zo(d.pendingWriteTree_,u._path),x?B.getNode():pn.EMPTY_NODE,x))}(d.serverSyncTree_,u);return null!=g?Promise.resolve(g):d.server_.get(u).then(C=>{const x=Ur(C).withIndex(u._queryParams.getIndex());let B;if(Q(d.serverSyncTree_,u,l,!0),u._queryParams.loadsAllData())B=jr(d.serverSyncTree_,u._path,x);else{const ee=Mn(d.serverSyncTree_,u);B=k(d.serverSyncTree_,u._path,x,ee)}return Vi(d.eventQueue_,u._path,B),su(d.serverSyncTree_,u,l,null,!0),x},C=>(wl(d,"get for query "+(0,P.Pz)(u)+" failed: "+C),Promise.reject(new Error(C))))}(d._repo,d,l).then(g=>new Bo(g,new bo(d._repo,d._path),d._queryParams.getIndex()))}class Ui{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,l){const g=l._queryParams.getIndex();return new Ir("value",this,new Bo(u.snapshotNode,new bo(l._repo,l._path),g))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,l){return this.callbackContext.hasCancelCallback?new tl(this,u,l):null}matches(u){return u instanceof Ui&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Uu{constructor(u,l){this.eventType=u,this.callbackContext=l}respondsTo(u){let l="children_added"===u?"child_added":u;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(u,l){return this.callbackContext.hasCancelCallback?new tl(this,u,l):null}createEvent(u,l){(0,P.hu)(null!=u.childName,"Child events should have a childName.");const g=Fu(new bo(l._repo,l._path),u.childName),C=l._queryParams.getIndex();return new Ir(u.type,this,new Bo(u.snapshotNode,g,C),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof Uu&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Iu(d,u,l,g,C){let x;if("object"==typeof g&&(x=void 0,C=g),"function"==typeof g&&(x=g),C&&C.onlyOnce){const ue=l,we=(dt,ft)=>{vl(d._repo,d,ee),ue(dt,ft)};we.userCallback=l.userCallback,we.context=l.context,l=we}const B=new Cl(l,x||void 0),ee="value"===u?new Ui(B):new Uu(u,B);return function Xc(d,u,l){let g;g=".info"===At(u._path)?Q(d.infoSyncTree_,u,l):Q(d.serverSyncTree_,u,l),yl(d.eventQueue_,u._path,g)}(d._repo,d,ee),()=>vl(d._repo,d,ee)}function bc(d,u,l,g){return Iu(d,"value",u,l,g)}function Za(d,u,l,g){return Iu(d,"child_added",u,l,g)}function nl(d,u,l,g){return Iu(d,"child_changed",u,l,g)}function Bu(d,u,l,g){return Iu(d,"child_moved",u,l,g)}function nd(d,u,l,g){return Iu(d,"child_removed",u,l,g)}function Tl(d,u,l){let g=null;const C=l?new Cl(l):null;"value"===u?g=new Ui(C):u&&(g=new Uu(u,C)),vl(d._repo,d,g)}class oa{}class jd extends oa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){eo("endAt",this._value,u._path,!0);const l=R(u._queryParams,this._value,this._key);if(ba(l),cs(l),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(u._repo,u._path,l,u._orderByCalled)}}class rd extends oa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){eo("endBefore",this._value,u._path,!1);const l=function z(d,u,l){let g,C;return d.index_===bs?("string"==typeof u&&(u=yr(u)),C=R(d,u,l)):(g=null==l?Nn:yr(l),C=R(d,u,g)),C.endBeforeSet_=!0,C}(u._queryParams,this._value,this._key);if(ba(l),cs(l),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(u._repo,u._path,l,u._orderByCalled)}}class w extends oa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){eo("startAt",this._value,u._path,!0);const l=Sa(u._queryParams,this._value,this._key);if(ba(l),cs(l),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fo(u._repo,u._path,l,u._orderByCalled)}}class y extends oa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){eo("startAfter",this._value,u._path,!1);const l=function eu(d,u,l){let g;if(d.index_===bs)"string"==typeof u&&(u=hn(u)),g=Sa(d,u,l);else{let C;C=null==l?sr:hn(l),g=Sa(d,u,C)}return g.startAfterSet_=!0,g}(u._queryParams,this._value,this._key);if(ba(l),cs(l),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fo(u._repo,u._path,l,u._orderByCalled)}}class W extends oa{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(u._repo,u._path,function Xa(d,u){const l=d.copy();return l.limitSet_=!0,l.limit_=u,l.viewFrom_="l",l}(u._queryParams,this._limit),u._orderByCalled)}}class Oe extends oa{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(u._repo,u._path,function du(d,u){const l=d.copy();return l.limitSet_=!0,l.limit_=u,l.viewFrom_="r",l}(u._queryParams,this._limit),u._orderByCalled)}}class Wt extends oa{constructor(u){super(),this._path=u}_apply(u){po(u,"orderByChild");const l=new rt(this._path);if(Sn(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const g=new Ls(l),C=F(u._queryParams,g);return cs(C),new fo(u._repo,u._path,C,!0)}}class Fn extends oa{_apply(u){po(u,"orderByKey");const l=F(u._queryParams,bs);return cs(l),new fo(u._repo,u._path,l,!0)}}class Gs extends oa{_apply(u){po(u,"orderByPriority");const l=F(u._queryParams,tr);return cs(l),new fo(u._repo,u._path,l,!0)}}class Sl extends oa{_apply(u){po(u,"orderByValue");const l=F(u._queryParams,zo);return cs(l),new fo(u._repo,u._path,l,!0)}}class ec extends oa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){if(eo("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new jd(this._value,this._key)._apply(new w(this._value,this._key)._apply(u))}}function Fa(d,...u){let l=(0,P.m9)(d);for(const g of u)l=g._apply(l);return l}(function co(d){(0,P.hu)(!uo,"__referenceConstructor has already been defined"),uo=d})(bo),function fr(d){(0,P.hu)(!Nt,"__referenceConstructor has already been defined"),Nt=d}(bo);const ju={};function Hd(d,u,l,g,C){let x=g||d.options.databaseURL;void 0===x&&(d.options.projectId||wn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mn("Using default host for project ",d.options.projectId),x=`${d.options.projectId}-default-rtdb.firebaseio.com`);let ue,we,B=Ud(x,C),ee=B.repoInfo;typeof process<"u"&&process.env&&(we=process.env.FIREBASE_DATABASE_EMULATOR_HOST),we?(ue=!0,x=`http://${we}?ns=${ee.namespace}`,B=Ud(x,C),ee=B.repoInfo):ue=!B.repoInfo.secure;const dt=C&&ue?new jn(jn.OWNER):new Oi(d.name,d.options,u);Wl("Invalid Firebase Database URL",B),Sn(B.path)||wn("Database URL must point to the root of a Firebase Database (not including a child path).");const ft=function od(d,u,l,g){let C=ju[u.name];C||(C={},ju[u.name]=C);let x=C[d.toURLString()];return x&&wn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),x=new Kl(d,false,l,g),C[d.toURLString()]=x,x}(ee,d,dt,new Zn(d.name,l));return new Xg(ft,d)}class Xg{constructor(u,l){this._repoInternal=u,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Ld(d,u,l){if(d.stats_=Ln(d.repoInfo_),d.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)d.server_=new Qe(d.repoInfo_,(g,C,x,B)=>{Pa(d,g,C,x,B)},d.authTokenProvider_,d.appCheckProvider_),setTimeout(()=>_u(d,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(l)}catch(g){throw new Error("Invalid authOverride provided: "+g)}}d.persistentConnection_=new wi(d.repoInfo_,u,(g,C,x,B)=>{Pa(d,g,C,x,B)},g=>{_u(d,g)},g=>{!function Yc(d,u){ur(u,(l,g)=>{Qu(d,l,g)})}(d,g)},d.authTokenProvider_,d.appCheckProvider_,l),d.server_=d.persistentConnection_}d.authTokenProvider_.addTokenChangeListener(g=>{d.server_.refreshAuthToken(g)}),d.appCheckProvider_.addTokenChangeListener(g=>{d.server_.refreshAppCheckToken(g.token)}),d.statsReporter_=function he(d,u){const l=d.toString();return On[l]||(On[l]=u()),On[l]}(d.repoInfo_,()=>new io(d.stats_,d.server_)),d.infoData_=new pt,d.infoSyncTree_=new Ts({startListening:(g,C,x,B)=>{let ee=[];const ue=d.infoData_.getNode(g._path);return ue.isEmpty()||(ee=jr(d.infoSyncTree_,g._path,ue),setTimeout(()=>{B("ok")},0)),ee},stopListening:()=>{}}),Qu(d,"connected",!1),d.serverSyncTree_=new Ts({startListening:(g,C,x,B)=>(d.server_.listen(g,x,C,(ee,ue)=>{const we=B(ee,ue);Vi(d.eventQueue_,g._path,we)}),[]),stopListening:(g,C)=>{d.server_.unlisten(g,C)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bo(this._repo,vt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function yf(d,u){const l=ju[u];(!l||l[d.key]!==d)&&wn(`Database ${u}(${d.repoInfo_}) has already been deleted.`),ku(d),delete l[d.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&wn("Cannot call "+u+" on a deleted database.")}}function vh(){Is.IS_TRANSPORT_INITIALIZED&&Vn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Cu(){vh(),Tr.forceDisallow()}function $d(){vh(),di.forceDisallow(),Tr.forceAllow()}function Mp(d,u){yn(d,u)}const ad={".sv":"timestamp"};class Op{constructor(u,l){this.committed=u,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}wi.prototype.simpleListen=function(d,u){this.sendRequest("q",{p:d},u)},wi.prototype.echo=function(d,u){this.sendRequest("echo",{d},u)},function Ih(d){Be($e.SDK_VERSION),(0,$e._registerComponent)(new Ge.wA("database",(u,{instanceIdentifier:l})=>Hd(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,$e.registerVersion)(oe,"0.13.6",d),(0,$e.registerVersion)(oe,"0.13.6","esm2017")}();const Ch=new ve.Yd("@firebase/database-compat"),wf=function(d){Ch.warn("FIREBASE WARNING: "+d)};class Dh{constructor(u){this._delegate=u}cancel(u){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",u,!0);const l=this._delegate.cancel();return u&&l.then(()=>u(null),g=>u(g)),l}remove(u){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",u,!0);const l=this._delegate.remove();return u&&l.then(()=>u(null),g=>u(g)),l}set(u,l){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",l,!0);const g=this._delegate.set(u);return l&&g.then(()=>l(null),C=>l(C)),g}setWithPriority(u,l,g){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",g,!0);const C=this._delegate.setWithPriority(u,l);return g&&C.then(()=>g(null),x=>g(x)),C}update(u,l){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const C={};for(let x=0;x<u.length;++x)C[""+x]=u[x];u=C,wf("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",l,!0);const g=this._delegate.update(u);return l&&g.then(()=>l(null),C=>l(C)),g}}class If{constructor(u,l){this.committed=u,this.snapshot=l}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Al{constructor(u,l){this._database=u,this._delegate=l}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),ml("DataSnapshot.child","path",u,!1),new Al(this._database,this._delegate.child(u))}hasChild(u){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ml("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(l=>u(new Al(this._database,l)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new mi(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ai{constructor(u,l){this.database=u,this._delegate=l}on(u,l,g,C){var x;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",l,!1);const B=ai.getCancelAndContextArgs_("Query.on",g,C),ee=(we,dt)=>{l.call(B.context,new Al(this.database,we),dt)};ee.userCallback=l,ee.context=B.context;const ue=null===(x=B.cancel)||void 0===x?void 0:x.bind(B.context);switch(u){case"value":return bc(this._delegate,ee,ue),l;case"child_added":return Za(this._delegate,ee,ue),l;case"child_removed":return nd(this._delegate,ee,ue),l;case"child_changed":return nl(this._delegate,ee,ue),l;case"child_moved":return Bu(this._delegate,ee,ue),l;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,l,g){if((0,P.Dv)("Query.off",0,3,arguments.length),function(d,u,l){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,P.Wj)("Query.off","callback",l,!0),(0,P.lb)("Query.off","context",g,!0),l){const C=()=>{};C.userCallback=l,C.context=g,Tl(this._delegate,u,C)}else Tl(this._delegate,u)}get(){return bl(this._delegate).then(u=>new Al(this.database,u))}once(u,l,g,C){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",l,!0);const x=ai.getCancelAndContextArgs_("Query.once",g,C),B=new P.BH,ee=(we,dt)=>{const ft=new Al(this.database,we);l&&l.call(x.context,ft,dt),B.resolve(ft)};ee.userCallback=l,ee.context=x.context;const ue=we=>{x.cancel&&x.cancel.call(x.context,we),B.reject(we)};switch(u){case"value":bc(this._delegate,ee,ue,{onlyOnce:!0});break;case"child_added":Za(this._delegate,ee,ue,{onlyOnce:!0});break;case"child_removed":nd(this._delegate,ee,ue,{onlyOnce:!0});break;case"child_changed":nl(this._delegate,ee,ue,{onlyOnce:!0});break;case"child_moved":Bu(this._delegate,ee,ue,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return B.promise}limitToFirst(u){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new ai(this.database,Fa(this._delegate,function re(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new W(d)}(u)))}limitToLast(u){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new ai(this.database,Fa(this._delegate,function ut(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Oe(d)}(u)))}orderByChild(u){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new ai(this.database,Fa(this._delegate,function _n(d){if("$key"===d)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===d)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===d)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ml("orderByChild","path",d,!1),new Wt(d)}(u)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new ai(this.database,Fa(this._delegate,function kn(){return new Fn}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new ai(this.database,Fa(this._delegate,function ka(){return new Gs}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new ai(this.database,Fa(this._delegate,function Tc(){return new Sl}()))}startAt(u=null,l){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new ai(this.database,Fa(this._delegate,function f(d=null,u){return sa("startAt","key",u,!0),new w(d,u)}(u,l)))}startAfter(u=null,l){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new ai(this.database,Fa(this._delegate,function T(d,u){return sa("startAfter","key",u,!0),new y(d,u)}(u,l)))}endAt(u=null,l){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new ai(this.database,Fa(this._delegate,function xs(d,u){return sa("endAt","key",u,!0),new jd(d,u)}(u,l)))}endBefore(u=null,l){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new ai(this.database,Fa(this._delegate,function id(d,u){return sa("endBefore","key",u,!0),new rd(d,u)}(u,l)))}equalTo(u,l){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new ai(this.database,Fa(this._delegate,function sd(d,u){return sa("equalTo","key",u,!0),new ec(d,u)}(u,l)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof ai))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,l,g){const C={cancel:void 0,context:void 0};if(l&&g)C.cancel=l,(0,P.Wj)(u,"cancel",C.cancel,!0),C.context=g,(0,P.lb)(u,"context",C.context,!0);else if(l)if("object"==typeof l&&null!==l)C.context=l;else{if("function"!=typeof l)throw new Error((0,P.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");C.cancel=l}return C}get ref(){return new mi(this.database,new bo(this._delegate._repo,this._delegate._path))}}class mi extends ai{constructor(u,l){super(u,new fo(l._repo,l._path,new ga,!1)),this.database=u,this._delegate=l}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new mi(this.database,Fu(this._delegate,u))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new mi(this.database,u):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new mi(this.database,this._delegate.root)}set(u,l){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",l,!0);const g=Eu(this._delegate,u);return l&&g.then(()=>l(null),C=>l(C)),g}update(u,l){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const C={};for(let x=0;x<u.length;++x)C[""+x]=u[x];u=C,wf("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ho("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",l,!0);const g=Dl(this._delegate,u);return l&&g.then(()=>l(null),C=>l(C)),g}setWithPriority(u,l,g){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",g,!0);const C=function Xl(d,u,l){if(ho("setWithPriority",d._path),eo("setWithPriority",u,d._path,!1),Ic("setWithPriority",l,!1),".length"===d.key||".keys"===d.key)throw"setWithPriority failed: "+d.key+" is a read-only object.";const g=new P.BH;return Qc(d._repo,d._path,u,l,g.wrapCallback(()=>{})),g.promise}(this._delegate,u,l);return g&&C.then(()=>g(null),x=>g(x)),C}remove(u){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",u,!0);const l=function Lu(d){return ho("remove",d._path),Eu(d,null)}(this._delegate);return u&&l.then(()=>u(null),g=>u(g)),l}transaction(u,l,g){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,P.Wj)("Reference.transaction","onComplete",l,!0),function(d,u,l,g){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,g);const C=function vf(d,u,l){var g;if(d=(0,P.m9)(d),ho("Reference.transaction",d._path),".length"===d.key||".keys"===d.key)throw"Reference.transaction failed: "+d.key+" is a read-only object.";const C=null===(g=l?.applyLocally)||void 0===g||g,x=new P.BH,ee=bc(d,()=>{});return function Xu(d,u,l,g,C,x){wl(d,"transaction on "+u);const B={path:u,update:l,onComplete:g,status:null,order:Qt(),applyLocally:x,retryCount:0,unwatcher:C,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ee=El(d,u,void 0);B.currentInputSnapshot=ee;const ue=B.update(ee.val());if(void 0===ue)B.unwatcher(),B.currentOutputSnapshotRaw=null,B.currentOutputSnapshotResolved=null,B.onComplete&&B.onComplete(null,!1,B.currentInputSnapshot);else{Da("transaction failed: Data returned ",ue,B.path),B.status=0;const we=vc(d.transactionQueueTree_,u),dt=mu(we)||[];let ft;dt.push(B),Nu(we,dt),"object"==typeof ue&&null!==ue&&(0,P.r3)(ue,".priority")?(ft=(0,P.DV)(ue,".priority"),(0,P.hu)(gl(ft),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):ft=(ge(d.serverSyncTree_,u)||pn.EMPTY_NODE).getPriority().val();const wt=_l(d),dn=Ur(ue,ft),Dn=Ss(dn,ee,wt);B.currentOutputSnapshotRaw=dn,B.currentOutputSnapshotResolved=Dn,B.currentWriteId=Ju(d);const Lr=Fr(d.serverSyncTree_,u,Dn,B.currentWriteId,B.applyLocally);Vi(d.eventQueue_,u,Lr),el(d,d.transactionQueueTree_)}}(d._repo,d._path,u,(ue,we,dt)=>{let ft=null;ue?x.reject(ue):(ft=new Bo(dt,new bo(d._repo,d._path),tr),x.resolve(new Op(we,ft)))},ee,C),x.promise}(this._delegate,u,{applyLocally:g}).then(x=>new If(x.committed,new Al(this.database,x.snapshot)));return l&&C.then(x=>l(null,x.committed,x.snapshot),x=>l(x,!1,null)),C}setPriority(u,l){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",l,!0);const g=function Vu(d,u){d=(0,P.m9)(d),ho("setPriority",d._path),Ic("setPriority",u,!1);const l=new P.BH;return Qc(d._repo,rr(d._path,".priority"),u,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,u);return l&&g.then(()=>l(null),C=>l(C)),g}push(u,l){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",l,!0);const g=function er(d,u){d=(0,P.m9)(d),ho("push",d._path),eo("push",u,d._path,!0);const l=Pu(d._repo),g=ct(l),C=Fu(d,g),x=Fu(d,g);let B;return B=null!=u?Eu(x,u).then(()=>x):Promise.resolve(x),C.then=B.then.bind(B),C.catch=B.then.bind(B,void 0),C}(this._delegate,u),C=g.then(B=>new mi(this.database,B));l&&C.then(()=>l(null),B=>l(B));const x=new mi(this.database,g);return x.then=C.then.bind(C),x.catch=C.catch.bind(C,void 0),x}onDisconnect(){return ho("Reference.onDisconnect",this._delegate._path),new Dh(new au(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class xl{constructor(u,l){this._delegate=u,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Cu,forceLongPolling:$d}}useEmulator(u,l,g={}){!function wh(d,u,l,g={}){(d=(0,P.m9)(d))._checkNotDeleted("useEmulator"),d._instanceStarted&&wn("Cannot call useEmulator() after instance has already been initialized.");const C=d._repoInternal;let x;if(C.repoInfo_.nodeAdmin)g.mockUserToken&&wn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),x=new jn(jn.OWNER);else if(g.mockUserToken){const B="string"==typeof g.mockUserToken?g.mockUserToken:(0,P.Sg)(g.mockUserToken,d.app.options.projectId);x=new jn(B)}!function nc(d,u,l,g){d.repoInfo_=new ye(`${u}:${l}`,!1,d.repoInfo_.namespace,d.repoInfo_.webSocketOnly,d.repoInfo_.nodeAdmin,d.repoInfo_.persistenceKey,d.repoInfo_.includeNamespaceInQueryParams),g&&(d.authTokenProvider_=g)}(C,u,l,x)}(this._delegate,u,l,g)}ref(u){if((0,P.Dv)("database.ref",0,1,arguments.length),u instanceof mi){const l=uu(this._delegate,u.toString());return new mi(this,l)}{const l=Jl(this._delegate,u);return new mi(this,l)}}refFromURL(u){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const g=uu(this._delegate,u);return new mi(this,g)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function _f(d){(d=(0,P.m9)(d))._checkNotDeleted("goOffline"),ku(d._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function Eh(d){(d=(0,P.m9)(d))._checkNotDeleted("goOnline"),function yh(d){d.persistentConnection_&&d.persistentConnection_.resume(qc)}(d._repo)}(this._delegate)}}xl.ServerValue={TIMESTAMP:function Rp(){return ad}(),increment:d=>function Np(d){return{".sv":{increment:d}}}(d)};var To=Object.freeze({__proto__:null,initStandalone:function ud({app:d,url:u,version:l,customAuthImpl:g,namespace:C,nodeAdmin:x=!1}){Be(l);const B=new Ge.zt("auth-internal",new Ge.H0("database-standalone"));return B.setComponent(new Ge.wA("auth-internal",()=>g,"PRIVATE")),{instance:new xl(Hd(d,B,void 0,u,x),d),namespace:C}}});const lu=xl.ServerValue;!function Wd(d){d.INTERNAL.registerComponent(new Ge.wA("database-compat",(u,{instanceIdentifier:l})=>{const g=u.getProvider("app-compat").getImmediate(),C=u.getProvider("database").getImmediate({identifier:l});return new xl(C,g)},"PUBLIC").setServiceProps({Reference:mi,Query:ai,Database:xl,DataSnapshot:Al,enableLogging:Mp,INTERNAL:To,ServerValue:lu}).setMultipleInstances(!0)),d.registerVersion("@firebase/database-compat","0.2.6")}(st.Z);var Ml=H(1205),Cf=H(440),ld=H(127);function Nl(d){return null==d}function ic(d){return"function"==typeof d.set}function bh(d,u){return ic(u)?u:d.ref(u)}function zd(d,u){if(function rc(d){return"string"==typeof d}(d))return u.stringCase();if(ic(d))return u.firebaseCase();if(function Rl(d){return"function"==typeof d.exportVal}(d))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof d)}function sc(d,u,l="on",g=Z.z){return new q.y(C=>{let x=null;return x=d[l](u,(B,ee)=>{g.schedule(()=>{C.next({snapshot:B,prevKey:ee})}),"once"===l&&g.schedule(()=>C.complete())},B=>{g.schedule(()=>C.error(B))}),"on"===l?{unsubscribe(){null!=x&&d.off(u,x)}}:{unsubscribe(){}}}).pipe((0,Me.U)(C=>{const{snapshot:x,prevKey:B}=C;let ee=null;return x.exists()&&(ee=x.key),{type:u,payload:x,prevKey:B,key:ee}}),(0,Le.B)())}function Th(d,u){const l=d.length;for(let g=0;g<l;g++)if(d[g].payload.key===u)return g;return-1}function Hu(d,u){const{payload:l,prevKey:g,key:C}=u,x=Th(d,C),B=function Sc(d,u){if(Nl(u))return 0;{const l=Th(d,u);return-1===l?d.length:l+1}}(d,g);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let ee=null;u.payload.forEach(ue=>{const we={payload:ue,type:"value",prevKey:ee,key:ue.key};return ee=ue.key,d=[...d,we],!1})}return d;case"child_added":if(x>-1){const ee=d[x-1];(ee&&ee.key||null)!==g&&(d=d.filter(ue=>ue.payload.key!==l.key)).splice(B,0,u)}else{if(null==g)return[u,...d];(d=d.slice()).splice(B,0,u)}return d;case"child_removed":return d.filter(ee=>ee.payload.key!==l.key);case"child_changed":return d.map(ee=>ee.payload.key===C?u:ee);case"child_moved":if(x>-1){const ee=d.splice(x,1)[0];return(d=d.slice()).splice(B,0,ee),d}return d;default:return d}}function Sh(d){return(Nl(d)||0===d.length)&&(d=["child_added","child_removed","child_changed","child_moved"]),d}function cd(d,u,l){return function Df(d,u,l){return sc(d,"value","once",l).pipe((0,Ve.w)(g=>{const C=[(0,Re.of)(g)];return u.forEach(x=>C.push(sc(d,x,"on",l))),(0,J.T)(...C).pipe((0,He.R)(Hu,[]))}),(0,ae.x)())}(d,u=Sh(u),l)}function dd(d,u,l){const g=(u=Sh(u)).map(C=>sc(d,C,"on",l));return(0,J.T)(...g)}function Du(d,u){return function(g,C){return zd(g,{stringCase:()=>d.child(g)[u](C),firebaseCase:()=>g[u](C),snapshotCase:()=>g.ref[u](C)})}}function Ah(d){return function(l){return l?zd(l,{stringCase:()=>d.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):d.remove()}}function xc(d,u){return function(){return sc(d,"value","on",u)}}const oc=new _.OlP("angularfire2.realtimeDatabaseURL"),Mc=new _.OlP("angularfire2.database.use-emulator");let Tf=(()=>{class d{constructor(l,g,C,x,B,ee,ue,we,dt,ft,wt,dn,Dn,Lr,Ws){this.schedulers=ee;const jo=ue,bu=(0,Bt.on)(l,B,g);we&&(0,Ml.nw)(bu,B,dt,wt,dn,Dn,ft,Lr),this.database=(0,Bt.cc)(`${bu.name}.database.${C}`,"AngularFireDatabase",bu.name,()=>{const Tu=B.runOutsideAngular(()=>bu.database(C||void 0));return jo&&Tu.useEmulator(...jo),Tu},[jo])}list(l,g){const C=this.schedulers.ngZone.runOutsideAngular(()=>bh(this.database,l));let x=C;return g&&(x=g(C)),function xh(d,u){const l=u.schedulers.outsideAngular,g=u.schedulers.ngZone.run(()=>d.ref);return{query:d,update:Du(g,"update"),set:Du(g,"set"),push:C=>g.push(C),remove:Ah(g),snapshotChanges:C=>cd(d,C,l).pipe(Ne.iC),stateChanges:C=>dd(d,C,l).pipe(Ne.iC),auditTrail:C=>function Ac(d,u,l){return function Lp(d,u,l){return function bf(d,u){return sc(d,"value","on",u).pipe((0,Me.U)(l=>{let g;return l.payload.forEach(C=>(g=C.key,!1)),{data:l,lastKeyToLoad:g}}))}(d,l).pipe(function at(...d){const u=(0,zt.jO)(d);return(0,ie.e)((l,g)=>{const C=d.length,x=new Array(C);let B=d.map(()=>!1),ee=!1;for(let ue=0;ue<C;ue++)(0,it.Xf)(d[ue]).subscribe((0,me.x)(g,we=>{x[ue]=we,!ee&&!B[ue]&&(B[ue]=!0,(ee=B.every(tt.y))&&(B=null))},Ke.Z));l.subscribe((0,me.x)(g,ue=>{if(ee){const we=[ue,...x];g.next(u?u(...we):we)}}))})}(u),(0,Me.U)(([C,x])=>{const B=C.lastKeyToLoad,ee=x.map(ue=>ue.key);return{actions:x,lastKeyToLoad:B,loadedKeys:ee}}),function nt(d){return(0,ie.e)((u,l)=>{let g=!1,C=0;u.subscribe((0,me.x)(l,x=>(g||(g=!d(x,C++)))&&l.next(x)))})}(C=>-1===C.loadedKeys.indexOf(C.lastKeyToLoad)),(0,Me.U)(C=>C.actions))}(d,dd(d,u).pipe((0,He.R)((C,x)=>[...C,x],[])),l)}(d,C,l).pipe(Ne.iC),valueChanges:(C,x)=>cd(d,C,l).pipe((0,Me.U)(ee=>ee.map(ue=>x&&x.idField?Object.assign(Object.assign({},ue.payload.val()),{[x.idField]:ue.key}):ue.payload.val())),Ne.iC)}}(x,this)}object(l){return function Ol(d,u){return{query:d,snapshotChanges:()=>xc(d,u.schedulers.outsideAngular)().pipe(Ne.iC),update:l=>d.ref.update(l),set:l=>d.ref.set(l),remove:()=>d.ref.remove(),valueChanges:()=>xc(d,u.schedulers.outsideAngular)().pipe(Ne.iC,(0,Me.U)(g=>g.payload.exists()?g.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>bh(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return d.\u0275fac=function(l){return new(l||d)(_.LFG(Bt.Dh),_.LFG(Bt.xv,8),_.LFG(oc,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Ne.HU),_.LFG(Mc,8),_.LFG(Ml.zQ,8),_.LFG(Ml.Qv,8),_.LFG(Ml.L6,8),_.LFG(Ml._Q,8),_.LFG(Ml.rT,8),_.LFG(Ml.lh,8),_.LFG(Ml.f7,8),_.LFG(Cf.nm,8))},d.\u0275prov=_.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),Vp=(()=>{class d{constructor(){ld.Z.registerVersion("angularfire",Ne.q4.full,"rtdb-compat")}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=_.oAB({type:d}),d.\u0275inj=_.cJS({providers:[Tf]}),d})()},7407:(Kt,qe,H)=>{H.d(qe,{ST:()=>bp});var _=H(4650),Z=H(4986),q=H(9751),Re=H(8996),J=H(9646),Me=H(5813),Le=H(8675),Ve=H(4482),He=H(5403);function ae(){return(0,Ve.e)((i,e)=>{let t,o=!1;i.subscribe((0,He.x)(e,c=>{const p=t;t=c,o&&e.next([p,c]),o=!0}))})}var P,ie=H(4004),me=H(5026),it=H(1884),tt=H(9300),Ke=H(2011),zt=H(6895),nt=(H(2274),H(3942)),Ne=H(5861),Bt=H(9681),mt=H(4859),st=H(1877),Ge=H(2090),Mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$e={},ve=ve||{},oe=Mt||self;function Te(){}function Se(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Be(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Rt="closure_uid_"+(1e9*Math.random()>>>0),kt=0;function Ut(i,e,t){return i.call.apply(i.bind,arguments)}function Zt(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,o),i.apply(e,c)}}return function(){return i.apply(e,arguments)}}function lt(i,e,t){return(lt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ut:Zt).apply(null,arguments)}function Qt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function sn(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,c,p){for(var v=Array(arguments.length-2),A=2;A<arguments.length;A++)v[A-2]=arguments[A];return e.prototype[c].apply(o,v)}}function en(){this.s=this.s,this.o=this.o}var Xn={};en.prototype.s=!1,en.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Ct(i){return Object.prototype.hasOwnProperty.call(i,Rt)&&i[Rt]||(i[Rt]=++kt)}(this);delete Xn[i]}},en.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},mn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,c="string"==typeof i?i.split(""):i;for(let p=0;p<o;p++)p in c&&e.call(t,c[p],p,i)};function Dr(i){return Array.prototype.concat.apply([],arguments)}function wn(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Vn(i){return/^[\s\xa0]*$/.test(i)}var Nn,Zr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Ht(i,e){return-1!=i.indexOf(e)}function pr(i,e){return i<e?-1:i>e?1:0}e:{var sr=oe.navigator;if(sr){var St=sr.userAgent;if(St){Nn=St;break e}}Nn=""}function or(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function Tn(i){const e={};for(const t in i)e[t]=i[t];return e}var cr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _i(i,e){let t,o;for(let c=1;c<arguments.length;c++){for(t in o=arguments[c],o)i[t]=o[t];for(let p=0;p<cr.length;p++)t=cr[p],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function ur(i){return ur[" "](i),i}ur[" "]=Te;var Mr,i,zn=Ht(Nn,"Opera"),Bn=Ht(Nn,"Trident")||Ht(Nn,"MSIE"),ln=Ht(Nn,"Edge"),on=ln||Bn,gr=Ht(Nn,"Gecko")&&!(Ht(Nn.toLowerCase(),"webkit")&&!Ht(Nn,"Edge"))&&!(Ht(Nn,"Trident")||Ht(Nn,"MSIE"))&&!Ht(Nn,"Edge"),vr=Ht(Nn.toLowerCase(),"webkit")&&!Ht(Nn,"Edge");function dr(){var i=oe.document;return i?i.documentMode:void 0}e:{var En="",Qr=(i=Nn,gr?/rv:([^\);]+)(\)|;)/.exec(i):ln?/Edge\/([\d\.]+)/.exec(i):Bn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):vr?/WebKit\/(\S+)/.exec(i):zn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Qr&&(En=Qr?Qr[1]:""),Bn){var Zn=dr();if(null!=Zn&&Zn>parseFloat(En)){Mr=String(Zn);break e}}Mr=En}var Oi={};var Ie=oe.document&&Bn&&(dr()||parseInt(Mr,10))||void 0,Ae=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{oe.addEventListener("test",Te,e),oe.removeEventListener("test",Te,e)}catch{}return i}();function De(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function _t(i,e){if(De.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(gr){e:{try{ur(e.nodeName);var c=!0;break e}catch{}c=!1}c||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Pt[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&_t.Z.h.call(this)}}De.prototype.h=function(){this.defaultPrevented=!0},sn(_t,De);var Pt={2:"touch",3:"pen",4:"mouse"};_t.prototype.h=function(){_t.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var qt="closure_listenable_"+(1e6*Math.random()|0),lr=0;function Gn(i,e,t,o,c){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=c,this.key=++lr,this.ca=this.fa=!1}function Ue(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function ye(i){this.src=i,this.g={},this.h=0}function _e(i,e){var t=e.type;if(t in i.g){var p,o=i.g[t],c=yn(o,e);(p=0<=c)&&Array.prototype.splice.call(o,c,1),p&&(Ue(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function yt(i,e,t,o){for(var c=0;c<i.length;++c){var p=i[c];if(!p.ca&&p.listener==e&&p.capture==!!t&&p.ia==o)return c}return-1}ye.prototype.add=function(i,e,t,o,c){var p=i.toString();(i=this.g[p])||(i=this.g[p]=[],this.h++);var v=yt(i,e,o,c);return-1<v?(e=i[v],t||(e.fa=!1)):((e=new Gn(e,this.src,p,!!o,c)).fa=t,i.push(e)),e};var gt="closure_lm_"+(1e6*Math.random()|0),an={};function On(i,e,t,o,c){if(o&&o.once)return pe(i,e,t,o,c);if(Array.isArray(e)){for(var p=0;p<e.length;p++)On(i,e[p],t,o,c);return null}return t=br(t),i&&i[qt]?i.N(e,t,Be(o)?!!o.capture:!!o,c):Ln(i,e,t,!1,o,c)}function Ln(i,e,t,o,c,p){if(!e)throw Error("Invalid event type");var v=Be(c)?!!c.capture:!!c,A=Xt(i);if(A||(i[gt]=A=new ye(i)),(t=A.add(e,t,o,v,p)).proxy)return t;if(o=function he(){var e=Vt;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Ae||(c=v),void 0===c&&(c=!1),i.addEventListener(e.toString(),o,c);else if(i.attachEvent)i.attachEvent(ht(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function pe(i,e,t,o,c){if(Array.isArray(e)){for(var p=0;p<e.length;p++)pe(i,e[p],t,o,c);return null}return t=br(t),i&&i[qt]?i.O(e,t,Be(o)?!!o.capture:!!o,c):Ln(i,e,t,!0,o,c)}function le(i,e,t,o,c){if(Array.isArray(e))for(var p=0;p<e.length;p++)le(i,e[p],t,o,c);else o=Be(o)?!!o.capture:!!o,t=br(t),i&&i[qt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=yt(p=i.g[e],t,o,c))&&(Ue(p[t]),Array.prototype.splice.call(p,t,1),0==p.length&&(delete i.g[e],i.h--))):i&&(i=Xt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=yt(e,t,o,c)),(t=-1<i?e[i]:null)&&ze(t))}function ze(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[qt])_e(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(ht(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Xt(e))?(_e(t,i),0==t.h&&(t.src=null,e[gt]=null)):Ue(i)}}}function ht(i){return i in an?an[i]:an[i]="on"+i}function Vt(i,e){if(i.ca)i=!0;else{e=new _t(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&ze(i),i=t.call(o,e)}return i}function Xt(i){return(i=i[gt])instanceof ye?i:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function br(i){return"function"==typeof i?i:(i[In]||(i[In]=function(e){return i.handleEvent(e)}),i[In])}function Pn(){en.call(this),this.i=new ye(this),this.P=this,this.I=null}function un(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new De(e,i);else if(e instanceof De)e.target=e.target||i;else{var c=e;_i(e=new De(o,i),c)}if(c=!0,t)for(var p=t.length-1;0<=p;p--){var v=e.g=t[p];c=wr(v,o,!0,e)&&c}if(c=wr(v=e.g=i,o,!0,e)&&c,c=wr(v,o,!1,e)&&c,t)for(p=0;p<t.length;p++)c=wr(v=e.g=t[p],o,!1,e)&&c}function wr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,p=0;p<e.length;++p){var v=e[p];if(v&&!v.ca&&v.capture==t){var A=v.listener,$=v.ia||v.src;v.fa&&_e(i.i,v),c=!1!==A.call($,o)&&c}}return c&&!o.defaultPrevented}sn(Pn,en),Pn.prototype[qt]=!0,Pn.prototype.removeEventListener=function(i,e,t,o){le(this,i,e,t,o)},Pn.prototype.M=function(){if(Pn.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)Ue(t[o]);delete i.g[e],i.h--}}this.I=null},Pn.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Pn.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var ri=oe.JSON.stringify;function mo(){var i=$o;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Tr,Kr=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new to,i=>i.reset());class to{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Rs(i){oe.setTimeout(()=>{throw i},0)}function ii(i,e){Tr||function zi(){var i=oe.Promise.resolve(void 0);Tr=function(){i.then(Es)}}(),Sr||(Tr(),Sr=!0),$o.add(i,e)}var Sr=!1,$o=new class hs{constructor(){this.h=this.g=null}add(e,t){const o=Kr.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Es(){for(var i;i=mo();){try{i.h.call(i.g)}catch(t){Rs(t)}var e=Kr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Sr=!1}function di(i,e){Pn.call(this),this.h=i||1,this.g=e||oe,this.j=lt(this.kb,this),this.l=Date.now()}function Is(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Ki(i,e,t){if("function"==typeof i)t&&(i=lt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=lt(i.handleEvent,i)}return 2147483647<Number(e)?-1:oe.setTimeout(i,e||0)}function fs(i){i.g=Ki(()=>{i.g=null,i.i&&(i.i=!1,fs(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}sn(di,Pn),(P=di.prototype).da=!1,P.S=null,P.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),un(this,"tick"),this.da&&(Is(this),this.start()))}},P.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},P.M=function(){di.Z.M.call(this),Is(this),delete this.g};class Ns extends en{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fs(this)}M(){super.M(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vr(i){en.call(this),this.h=i,this.g={}}sn(Vr,en);var qi=[];function Jr(i,e,t,o){Array.isArray(t)||(t&&(qi[0]=t.toString()),t=qi);for(var c=0;c<t.length;c++){var p=On(e,t[c],o||i.handleEvent,!1,i.h||i);if(!p)break;i.g[p.key]=p}}function Di(i){or(i.g,function(e,t){this.g.hasOwnProperty(t)&&ze(e)},i),i.g={}}function Os(){this.g=!0}function Rr(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function no(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var c=o[1];if(Array.isArray(c)&&!(1>c.length)){var p=c[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var v=1;v<c.length;v++)c[v]=""}}}return ri(t)}catch{return e}}(i,t)+(o?" "+o:"")})}Vr.prototype.M=function(){Vr.Z.M.call(this),Di(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Os.prototype.Aa=function(){this.g=!1},Os.prototype.info=function(){};var qs={},Go=null;function Mo(){return Go=Go||new Pn}function vi(i){De.call(this,qs.Ma,i)}function Fe(i){const e=Mo();un(e,new vi(e,i))}function ke(i,e){De.call(this,qs.STAT_EVENT,i),this.stat=e}function We(i){const e=Mo();un(e,new ke(e,i))}function rt(i,e){De.call(this,qs.Na,i),this.size=e}function vt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){i()},e)}qs.Ma="serverreachability",sn(vi,De),qs.STAT_EVENT="statevent",sn(ke,De),qs.Na="timingevent",sn(rt,De);var At={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},xn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Kn(){}function ts(){}Kn.prototype.h=null;var Sn,ps={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ro(){De.call(this,"d")}function rr(){De.call(this,"c")}function Pr(){}function gs(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Vr(this),this.P=hi,this.W=new di(i=on?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Wo}function Wo(){this.i=null,this.g="",this.h=!1}sn(ro,De),sn(rr,De),sn(Pr,Kn),Pr.prototype.g=function(){return new XMLHttpRequest},Pr.prototype.i=function(){return{}},Sn=new Pr;var hi=45e3,ns={},xi={};function Cs(i,e,t){i.K=1,i.v=Oo(Ei(e)),i.s=t,i.U=!0,Ro(i,null)}function Ro(i,e){i.F=Date.now(),Ds(i),i.A=Ei(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),$i(t.h,"t",o),i.C=0,t=i.l.H,i.h=new Wo,i.g=tu(i.l,t?e:null,!i.s),0<i.O&&(i.L=new Ns(lt(i.Ia,i,i.g),i.O)),Jr(i.V,i.g,"readystatechange",i.gb),e=i.H?Tn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Fe(1),function Ks(i,e,t,o,c,p){i.info(function(){if(i.g)if(p)for(var v="",A=p.split("&"),$=0;$<A.length;$++){var K=A[$].split("=");if(1<K.length){var se=K[0];K=K[1];var be=se.split("_");v=2<=be.length&&"type"==be[1]?v+(se+"=")+K+"&":v+(se+"=redacted&")}}else v=null;else v=p;return"XMLHTTP REQ ("+o+") [attempt "+c+"]: "+e+"\n"+t+"\n"+v})}(i.j,i.u,i.A,i.m,i.X,i.s)}function ji(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function yo(i,e,t){let c,o=!0;for(;!i.I&&i.C<t.length;){if(c=No(i,t),c==xi){4==e&&(i.o=4,We(14),o=!1),Rr(i.j,i.m,null,"[Incomplete Response]");break}if(c==ns){i.o=4,We(15),Rr(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Rr(i.j,i.m,c,null),da(i,c)}ji(i)&&c!=xi&&c!=ns&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,We(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),as(e),e.L=!0,We(11))):(Rr(i.j,i.m,t,"[Invalid Chunked Response]"),Ri(i),Pi(i))}function No(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?xi:(t=Number(e.substring(t,o)),isNaN(t)?ns:(o+=1)+t>e.length?xi:(e=e.substr(o,t),i.C=o+t,e))}function Ds(i){i.Y=Date.now()+i.P,ms(i,i.P)}function ms(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=vt(lt(i.eb,i),e)}function Mi(i){i.B&&(oe.clearTimeout(i.B),i.B=null)}function Pi(i){0==i.l.G||i.I||Ko(i.l,i)}function Ri(i){Mi(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Is(i.W),Di(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function da(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||vo(t.i,i)))if(t.I=i.N,!i.J&&vo(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var c=o;if(0==c[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Wr(t),nr(t)}js(t),We(18)}}else t.ta=c[1],0<t.ta-t.U&&37500>c[2]&&t.N&&0==t.A&&!t.v&&(t.v=vt(lt(t.ab,t),6e3));if(1>=Ls(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Ba(t,11)}else if((i.J||t.g==i)&&Wr(t),!Vn(e))for(c=t.Ca.g.parse(e),e=0;e<c.length;e++){let K=c[e];if(t.U=K[0],K=K[1],2==t.G)if("c"==K[0]){t.J=K[1],t.la=K[2];const se=K[3];null!=se&&(t.ma=se,t.h.info("VER="+t.ma));const be=K[4];null!=be&&(t.za=be,t.h.info("SVER="+t.za));const et=K[5];null!=et&&"number"==typeof et&&0<et&&(t.K=o=1.5*et,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const Et=i.g;if(Et){const Dt=Et.g?Et.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dt){var p=o.i;!p.g&&(Ht(Dt,"spdy")||Ht(Dt,"quic")||Ht(Dt,"h2"))&&(p.j=p.l,p.g=new Set,p.h&&(zo(p,p.h),p.h=null))}if(o.D){const rn=Et.g?Et.g.getResponseHeader("X-HTTP-Session-Id"):null;rn&&(o.sa=rn,xr(o.F,o.D,rn))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var v=i;if((o=t).oa=_a(o,o.H?o.la:null,o.W),v.J){j(o.i,v);var A=v,$=o.K;$&&A.setTimeout($),A.B&&(Mi(A),Ds(A)),o.g=v}else Bs(o);0<t.l.length&&Gr(t)}else"stop"!=K[0]&&"close"!=K[0]||Ba(t,7);else 3==t.G&&("stop"==K[0]||"close"==K[0]?"stop"==K[0]?Ba(t,7):_r(t):"noop"!=K[0]&&t.j&&t.j.wa(K),t.A=0)}Fe(4)}catch{}}function qn(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Se(i)||"string"==typeof i)mn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Se(i)||"string"==typeof i){t=[];for(var o=i.length,c=0;c<o;c++)t.push(c)}else for(c in t=[],o=0,i)t[o++]=c;o=function wi(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Se(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),c=o.length;for(var p=0;p<c;p++)e.call(void 0,o[p],t&&t[p],i)}}function Zs(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Zs)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function $r(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];rs(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var c={};for(t=e=0;e<i.g.length;)rs(c,o=i.g[e])||(i.g[t++]=o,c[o]=1),e++;i.g.length=t}}function rs(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(P=gs.prototype).setTimeout=function(i){this.P=i},P.gb=function(i){i=i.target;const e=this.L;e&&3==Ee(i)?e.l():this.Ia(i)},P.Ia=function(i){try{if(i==this.g)e:{const se=Ee(this.g);var e=this.g.Da();const be=this.g.ba();if(!(3>se)&&(3!=se||on||this.g&&(this.h.h||this.g.ga()||Qe(this.g)))){this.I||4!=se||7==e||Fe(8==e||0>=be?3:2),Mi(this);var t=this.g.ba();this.N=t;t:if(ji(this)){var o=Qe(this.g);i="";var c=o.length,p=4==Ee(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),Pi(this);var v="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:p&&e==c-1});o.splice(0,c),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.ga();if(this.i=200==t,function ca(i,e,t,o,c,p,v){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+p+" "+v})}(this.j,this.u,this.A,this.m,this.X,se,t),this.i){if(this.$&&!this.J){t:{if(this.g){var A,$=this.g;if((A=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vn(A)){var K=A;break t}}K=null}if(!(t=K)){this.i=!1,this.o=3,We(12),Ri(this),Pi(this);break e}Rr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,da(this,t)}this.U?(yo(this,se,v),on&&this.i&&3==se&&(Jr(this.V,this.W,"tick",this.fb),this.W.start())):(Rr(this.j,this.m,v,null),da(this,v)),4==se&&Ri(this),this.i&&!this.I&&(4==se?Ko(this.l,this):(this.i=!1,Ds(this)))}else 400==t&&0<v.indexOf("Unknown SID")?(this.o=3,We(12)):(this.o=0,We(13)),Ri(this),Pi(this)}}}catch{}},P.fb=function(){if(this.g){var i=Ee(this.g),e=this.g.ga();this.C<e.length&&(Mi(this),yo(this,i,e),this.i&&4!=i&&Ds(this))}},P.cancel=function(){this.I=!0,Ri(this)},P.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function xo(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Fe(3),We(17)),Ri(this),this.o=2,Pi(this)):ms(this,this.Y-i)},(P=Zs.prototype).R=function(){$r(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},P.T=function(){return $r(this),this.g.concat()},P.get=function(i,e){return rs(this.h,i)?this.h[i]:e},P.set=function(i,e){rs(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},P.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var c=t[o],p=this.get(c);i.call(e,p,c,this)}};var bs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function hr(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof hr){this.g=void 0!==e?e:i.g,Xr(this,i.j),this.s=i.s,ys(this,i.i),ir(this,i.m),this.l=i.l,e=i.h;var t=new Ys;t.i=e.i,e.g&&(t.g=new Zs(e.g),t.h=e.h),Ps(this,t),this.o=i.o}else i&&(t=String(i).match(bs))?(this.g=!!e,Xr(this,t[1]||"",!0),this.s=Nr(t[2]||""),ys(this,t[3]||"",!0),ir(this,t[4]),this.l=Nr(t[5]||"",!0),Ps(this,t[6]||"",!0),this.o=Nr(t[7]||"")):(this.g=!!e,this.h=new Ys(null,this.g))}function Ei(i){return new hr(i)}function Xr(i,e,t){i.j=t?Nr(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function ys(i,e,t){i.i=t?Nr(e,!0):e}function ir(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Ps(i,e,t){e instanceof Ys?(i.h=e,function pn(i,e){e&&!i.j&&(ss(i),i.i=null,i.g.forEach(function(t,o){var c=o.toLowerCase();o!=c&&(It(this,o),$i(this,c,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Cn(e,tr)),i.h=new Ys(e,i.g))}function xr(i,e,t){i.h.set(e,t)}function Oo(i){return xr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Nr(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Cn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,fa),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function fa(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}hr.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Cn(e,Ua,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Cn(e,Ua,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Cn(t,"/"==t.charAt(0)?Po:Ta,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Cn(t,ks)),i.join("")};var Ua=/[#\/\?@]/g,Ta=/[#\?:]/g,Po=/[#\?]/g,tr=/[#\?@]/g,ks=/#/g;function Ys(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ss(i){i.g||(i.g=new Zs,i.h=0,i.i&&function Hi(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),c=null;if(0<=o){var p=i[t].substring(0,o);c=i[t].substring(o+1)}else p=i[t];e(p,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function It(i,e){ss(i),e=_s(i,e),rs(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,rs((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&$r(i)))}function Wn(i,e){return ss(i),e=_s(i,e),rs(i.g.h,e)}function $i(i,e,t){It(i,e),0<t.length&&(i.i=null,i.g.set(_s(i,e),wn(t)),i.h+=t.length)}function _s(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function os(i){this.l=i||Fs,i=oe.PerformanceNavigationTiming?0<(i=oe.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(oe.g&&oe.g.Ea&&oe.g.Ea()&&oe.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(P=Ys.prototype).add=function(i,e){ss(this),this.i=null,i=_s(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},P.forEach=function(i,e){ss(this),this.g.forEach(function(t,o){mn(t,function(c){i.call(e,c,o,this)},this)},this)},P.T=function(){ss(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var c=i[o],p=0;p<c.length;p++)t.push(e[o]);return t},P.R=function(i){ss(this);var e=[];if("string"==typeof i)Wn(this,i)&&(e=Dr(e,this.g.get(_s(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=Dr(e,i[t])}return e},P.set=function(i,e){return ss(this),this.i=null,Wn(this,i=_s(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},P.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},P.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],c=encodeURIComponent(String(o));o=this.R(o);for(var p=0;p<o.length;p++){var v=c;""!==o[p]&&(v+="="+encodeURIComponent(String(o[p]))),i.push(v)}}return this.i=i.join("&")};var Fs=10;function Ur(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Ls(i){return i.h?1:i.g?i.g.size:0}function vo(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function zo(i,e){i.g?i.g.add(e):i.h=e}function j(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function L(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return wn(i.i)}function O(){}function ne(){this.g=new O}function ct(i,e,t){const o=t||"";try{qn(i,function(c,p){let v=c;Be(c)&&(v=ri(c)),e.push(o+p+"="+encodeURIComponent(v))})}catch(c){throw e.push(o+"type="+encodeURIComponent("_badmap")),c}}function yr(i,e,t,o,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(o)}catch{}}function ki(i){this.l=i.$b||null,this.j=i.ib||!1}function fi(i,e){Pn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Gi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}os.prototype.cancel=function(){if(this.i=L(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},O.prototype.stringify=function(i){return oe.JSON.stringify(i,void 0)},O.prototype.parse=function(i){return oe.JSON.parse(i,void 0)},sn(ki,Kn),ki.prototype.g=function(){return new fi(this.l,this.j)},ki.prototype.i=function(i){return function(){return i}}({}),sn(fi,Pn);var Gi=0;function Vs(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Qs(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Us(i)}function Us(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(P=fi.prototype).open=function(i,e){if(this.readyState!=Gi)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Us(this)},P.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||oe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},P.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qs(this)),this.readyState=Gi},P.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Us(this)),this.g&&(this.readyState=3,Us(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof oe.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Vs(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},P.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Qs(this):Us(this),3==this.readyState&&Vs(this)}},P.Ua=function(i){this.g&&(this.response=this.responseText=i,Qs(this))},P.Ta=function(i){this.g&&(this.response=i,Qs(this))},P.ha=function(){this.g&&Qs(this)},P.setRequestHeader=function(i,e){this.v.append(i,e)},P.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},P.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(fi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var pa=oe.JSON.parse;function pi(i){Pn.call(this),this.headers=new Zs,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ga,this.K=this.L=!1}sn(pi,Pn);var ga="",Ja=/^https?$/i,Xa=["POST","PUT"];function Sa(i){return"content-type"==i.toLowerCase()}function eu(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,R(i),F(i)}function R(i){i.D||(i.D=!0,un(i,"complete"),un(i,"error"))}function z(i){if(i.h&&typeof ve<"u"&&(!i.C[1]||4!=Ee(i)||2!=i.ba()))if(i.v&&4==Ee(i))Ki(i.Fa,0,i);else if(un(i,"readystatechange"),4==Ee(i)){i.h=!1;try{const A=i.ba();e:switch(A){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===A){var c=String(i.H).match(bs)[1]||null;if(!c&&oe.self&&oe.self.location){var p=oe.self.location.protocol;c=p.substr(0,p.length-1)}o=!Ja.test(c?c.toLowerCase():"")}t=o}if(t)un(i,"complete"),un(i,"success");else{i.m=6;try{var v=2<Ee(i)?i.g.statusText:""}catch{v=""}i.j=v+" ["+i.ba()+"]",R(i)}}finally{F(i)}}}function F(i,e){if(i.g){X(i);const t=i.g,o=i.C[0]?Te:null;i.g=null,i.C=null,e||un(i,"ready");try{t.onreadystatechange=o}catch{}}}function X(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(oe.clearTimeout(i.A),i.A=null)}function Ee(i){return i.g?i.g.readyState:0}function Qe(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ga:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function nn(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function pt(i){let e="";return or(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):xr(i,e,t))}function Yn(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Ar(i){this.za=0,this.l=[],this.h=new Os,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Yn("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Yn("baseRetryDelayMs",5e3,i),this.$a=Yn("retryDelaySeedMs",1e4,i),this.Ya=Yn("forwardChannelMaxRetries",2,i),this.ra=Yn("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new os(i&&i.concurrentRequestLimit),this.Ca=new ne,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function _r(i){if(bi(i),3==i.G){var e=i.V++,t=Ei(i.F);xr(t,"SID",i.J),xr(t,"RID",e),xr(t,"TYPE","terminate"),si(i,t),(e=new gs(i,i.h,e,void 0)).K=2,e.v=Oo(Ei(t)),t=!1,oe.navigator&&oe.navigator.sendBeacon&&(t=oe.navigator.sendBeacon(e.v.toString(),"")),!t&&oe.Image&&((new Image).src=e.v,t=!0),t||(e.g=tu(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ds(e)}Wu(i)}function nr(i){i.g&&(as(i),i.g.cancel(),i.g=null)}function bi(i){nr(i),i.u&&(oe.clearTimeout(i.u),i.u=null),Wr(i),i.i.cancel(),i.m&&("number"==typeof i.m&&oe.clearTimeout(i.m),i.m=null)}function kr(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Gr(i)}function Gr(i){Ur(i.i)||i.m||(i.m=!0,ii(i.Ha,i),i.C=0)}function io(i,e){var t;t=e?e.m:i.V++;const o=Ei(i.F);xr(o,"SID",i.J),xr(o,"RID",t),xr(o,"AID",i.U),si(i,o),i.o&&i.s&&nn(o,i.o,i.s),t=new gs(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=wo(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),zo(i.i,t),Cs(t,o,e)}function si(i,e){i.j&&qn({},function(t,o){xr(e,o,t)})}function wo(i,e,t){t=Math.min(i.l.length,t);var o=i.j?lt(i.j.Oa,i.j,i):null;e:{var c=i.l;let p=-1;for(;;){const v=["count="+t];-1==p?0<t?(p=c[0].h,v.push("ofs="+p)):p=0:v.push("ofs="+p);let A=!0;for(let $=0;$<t;$++){let K=c[$].h;const se=c[$].g;if(K-=p,0>K)p=Math.max(0,c[$].h-100),A=!1;else try{ct(se,v,"req"+K+"_")}catch{o&&o(se)}}if(A){o=v.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function Bs(i){i.g||i.u||(i.Y=1,ii(i.Ga,i),i.A=0)}function js(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=vt(lt(i.Ga,i),ya(i,i.A)),i.A++,0))}function as(i){null!=i.B&&(oe.clearTimeout(i.B),i.B=null)}function ma(i){i.g=new gs(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=Ei(i.oa);xr(e,"RID","rpc"),xr(e,"SID",i.J),xr(e,"CI",i.N?"0":"1"),xr(e,"AID",i.U),si(i,e),xr(e,"TYPE","xmlhttp"),i.o&&i.s&&nn(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=Oo(Ei(e)),t.s=null,t.U=!0,Ro(t,i)}function Wr(i){null!=i.v&&(oe.clearTimeout(i.v),i.v=null)}function Ko(i,e){var t=null;if(i.g==e){Wr(i),as(i),i.g=null;var o=2}else{if(!vo(i.i,e))return;t=e.D,j(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var c=i.C;un(o=Mo(),new rt(o,t,e,c)),Gr(i)}else Bs(i);else if(3==(c=e.o)||0==c&&0<i.I||!(1==o&&function ko(i,e){return!(Ls(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=vt(lt(i.Ha,i,e),ya(i,i.C)),i.C++,0)))}(i,e)||2==o&&js(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),c){case 1:Ba(i,5);break;case 4:Ba(i,10);break;case 3:Ba(i,6);break;default:Ba(i,2)}}function ya(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Ba(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=lt(i.jb,i);t||(t=new hr("//www.google.com/images/cleardot.gif"),oe.location&&"http"==oe.location.protocol||Xr(t,"https"),Oo(t)),function hn(i,e){const t=new Os;if(oe.Image){const o=new Image;o.onload=Qt(yr,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Qt(yr,t,o,"TestLoadImage: error",!1,e),o.onabort=Qt(yr,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Qt(yr,t,o,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else We(2);i.G=0,i.j&&i.j.va(e),Wu(i),bi(i)}function Wu(i){i.G=0,i.I=-1,i.j&&((0!=L(i.i).length||0!=i.l.length)&&(i.i.i.length=0,wn(i.l),i.l.length=0),i.j.ua())}function _a(i,e,t){let o=function is(i){return i instanceof hr?Ei(i):new hr(i,void 0)}(t);if(""!=o.i)e&&ys(o,e+"."+o.i),ir(o,o.m);else{const c=oe.location;o=function ha(i,e,t,o){var c=new hr(null,void 0);return i&&Xr(c,i),e&&ys(c,e),t&&ir(c,t),o&&(c.l=o),c}(c.protocol,e?e+"."+c.hostname:c.hostname,+c.port,t)}return i.aa&&or(i.aa,function(c,p){xr(o,p,c)}),t=i.sa,(e=i.D)&&t&&xr(o,e,t),xr(o,"VER",i.ma),si(i,o),o}function tu(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pi(t&&i.Ba&&!i.qa?new ki({ib:!0}):i.qa)).L=i.H,e}function Aa(){}function qo(){if(Bn&&!(10<=Number(Ie)))throw Error("Environmental error: no available transport.")}function Fi(i,e){Pn.call(this),this.g=new Ar(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!Vn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new qr(this)}function hu(i){ro.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function ja(){rr.call(this),this.status=1}function qr(i){this.g=i}(P=pi.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Sn.g(),this.C=function mr(i){return i.h||(i.h=i.i())}(this.u?this.u:Sn),this.g.onreadystatechange=lt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(p){return void eu(this,p)}i=t||"";const c=new Zs(this.headers);o&&qn(o,function(p,v){c.set(v,p)}),o=function ci(i){e:{var e=Sa;const t=i.length,o="string"==typeof i?i.split(""):i;for(let c=0;c<t;c++)if(c in o&&e.call(void 0,o[c],c,i)){e=c;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(c.T()),t=oe.FormData&&i instanceof oe.FormData,!(0<=yn(Xa,e))||o||t||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),c.forEach(function(p,v){this.g.setRequestHeader(v,p)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{X(this),0<this.B&&((this.K=function du(i){return Bn&&function jn(){return function Yr(i){var e=Oi;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Zr(String(Mr)).split("."),t=Zr("9").split("."),o=Math.max(e.length,t.length);for(let v=0;0==i&&v<o;v++){var c=e[v]||"",p=t[v]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],0==c[0].length&&0==p[0].length)break;i=pr(0==c[1].length?0:parseInt(c[1],10),0==p[1].length?0:parseInt(p[1],10))||pr(0==c[2].length,0==p[2].length)||pr(c[2],p[2]),c=c[3],p=p[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lt(this.pa,this)):this.A=Ki(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(p){eu(this,p)}},P.pa=function(){typeof ve<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,un(this,"timeout"),this.abort(8))},P.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,un(this,"complete"),un(this,"abort"),F(this))},P.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),F(this,!0)),pi.Z.M.call(this)},P.Fa=function(){this.s||(this.F||this.v||this.l?z(this):this.cb())},P.cb=function(){z(this)},P.ba=function(){try{return 2<Ee(this)?this.g.status:-1}catch{return-1}},P.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},P.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),pa(e)}},P.Da=function(){return this.m},P.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(P=Ar.prototype).ma=8,P.G=1,P.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch{}},P.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const c=new gs(this,this.h,i,void 0);let p=this.s;if(this.P&&(p?(p=Tn(p),_i(p,this.P)):p=this.P),null===this.o&&(c.H=p),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=wo(this,c,e),xr(t=Ei(this.F),"RID",i),xr(t,"CVER",22),this.D&&xr(t,"X-HTTP-Session-Id",this.D),si(this,t),this.o&&p&&nn(t,this.o,p),zo(this.i,c),this.Ra&&xr(t,"TYPE","init"),this.ja?(xr(t,"$req",e),xr(t,"SID","null"),c.$=!0,Cs(c,t,null)):Cs(c,t,e),this.G=2}}else 3==this.G&&(i?io(this,i):0==this.l.length||Ur(this.i)||io(this))},P.Ga=function(){if(this.u=null,ma(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=vt(lt(this.bb,this),i)}},P.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,We(10),nr(this),ma(this))},P.ab=function(){null!=this.v&&(this.v=null,nr(this),js(this),We(19))},P.jb=function(i){i?(this.h.info("Successfully pinged google.com"),We(2)):(this.h.info("Failed to ping google.com"),We(1))},(P=Aa.prototype).xa=function(){},P.wa=function(){},P.va=function(){},P.ua=function(){},P.Oa=function(){},qo.prototype.g=function(i,e){return new Fi(i,e)},sn(Fi,Pn),Fi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),ii(lt(i.hb,i,e))),We(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=_a(i,null,i.W),Gr(i)},Fi.prototype.close=function(){_r(this.g)},Fi.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,kr(this.g,e)}else this.v?((e={}).__data__=ri(i),kr(this.g,e)):kr(this.g,i)},Fi.prototype.M=function(){this.g.j=null,delete this.j,_r(this.g),delete this.g,Fi.Z.M.call(this)},sn(hu,ro),sn(ja,rr),sn(qr,Aa),qr.prototype.xa=function(){un(this.g,"a")},qr.prototype.wa=function(i){un(this.g,new hu(i))},qr.prototype.va=function(i){un(this.g,new ja(i))},qr.prototype.ua=function(){un(this.g,"b")},qo.prototype.createWebChannel=qo.prototype.g,Fi.prototype.send=Fi.prototype.u,Fi.prototype.open=Fi.prototype.m,Fi.prototype.close=Fi.prototype.close,At.NO_ERROR=0,At.TIMEOUT=8,At.HTTP_ERROR=6,xn.COMPLETE="complete",ts.EventType=ps,ps.OPEN="a",ps.CLOSE="b",ps.ERROR="c",ps.MESSAGE="d",Pn.prototype.listen=Pn.prototype.N,pi.prototype.listenOnce=pi.prototype.O,pi.prototype.getLastError=pi.prototype.La,pi.prototype.getLastErrorCode=pi.prototype.Da,pi.prototype.getStatus=pi.prototype.ba,pi.prototype.getResponseJson=pi.prototype.Qa,pi.prototype.getResponseText=pi.prototype.ga,pi.prototype.send=pi.prototype.ea;var nu=$e.createWebChannelTransport=function(){return new qo},fu=$e.getStatEventTarget=function(){return Mo()},Er=$e.ErrorCode=At,Hs=$e.EventType=xn,Au=$e.Event=qs,va=$e.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ru=$e.FetchXmlHttpFactory=ki,gi=$e.WebChannel=ts,Zi=$e.XhrIo=pi;const Ha="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let Eo="9.9.4";const $s=new st.Yd("@firebase/firestore");function $a(){return $s.logLevel}function Ot(i,...e){if($s.logLevel<=st.in.DEBUG){const t=e.map(Io);$s.debug(`Firestore (${Eo}): ${i}`,...t)}}function ei(i,...e){if($s.logLevel<=st.in.ERROR){const t=e.map(Io);$s.error(`Firestore (${Eo}): ${i}`,...t)}}function Fo(i,...e){if($s.logLevel<=st.in.WARN){const t=e.map(Io);$s.warn(`Firestore (${Eo}): ${i}`,...t)}}function Io(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function cn(i="Unexpected state"){const e=`FIRESTORE (${Eo}) INTERNAL ASSERTION FAILED: `+i;throw ei(e),new Error(e)}function Un(i,e){i||cn()}function Gt(i,e){return i}const ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xt extends Ge.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ea{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zr.UNAUTHENTICATED))}shutdown(){}}class Yi{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xu{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let c=this.i;const p=K=>this.i!==c?(c=this.i,t(K)):Promise.resolve();let v=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new Ti,e.enqueueRetryable(()=>p(this.currentUser))};const A=()=>{const K=v;e.enqueueRetryable((0,Ne.Z)(function*(){yield K.promise,yield p(o.currentUser)}))},$=K=>{Ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=K,this.auth.addAuthTokenListener(this.o),A()};this.t.onInit(K=>$(K)),setTimeout(()=>{if(!this.auth){const K=this.t.getImmediate({optional:!0});K?$(K):(Ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new Ti)}},0),A()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Un("string"==typeof o.accessToken),new Ea(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Un(null===e||"string"==typeof e),new zr(e)}}class Yo{constructor(e,t,o,c){this.h=e,this.l=t,this.m=o,this.g=c,this.type="FirstParty",this.user=zr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Un(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class xa{constructor(e,t,o,c){this.h=e,this.l=t,this.m=o,this.g=c}getToken(){return Promise.resolve(new Yo(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ma{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class us{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=p=>{null!=p.error&&Ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const v=p.token!==this.A;return this.A=p.token,Ot("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>o(p))};const c=p=>{Ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.T.onInit(p=>c(p)),setTimeout(()=>{if(!this.appCheck){const p=this.T.getImmediate({optional:!0});p?c(p):Ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Un("string"==typeof t.token),this.A=t.token,new Ma(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Qo(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class Ga{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const c=Qo(40);for(let p=0;p<c.length;++p)o.length<20&&c[p]<t&&(o+=e.charAt(c[p]%e.length))}return o}}function Hn(i,e){return i<e?-1:i>e?1:0}function Co(i,e,t){return i.length===e.length&&i.every((o,c)=>t(o,e[c]))}function Lo(i){return i+"\0"}class Br{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Br.fromMillis(Date.now())}static fromDate(e){return Br.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Br(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Hn(this.nanoseconds,e.nanoseconds):Hn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new Br(0,0))}static max(){return new Yt(new Br(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ku{constructor(e,t,o){void 0===t?t=0:t>e.length&&cn(),void 0===o?o=e.length-t:o>e.length-t&&cn(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Ku.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ku?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let c=0;c<o;c++){const p=e.get(c),v=t.get(c);if(p<v)return-1;if(p>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Or extends Ku{construct(e,t,o){return new Or(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new xt(ot.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(c=>c.length>0))}return new Or(t)}static emptyPath(){return new Or([])}}const iu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Si extends Ku{construct(e,t,o){return new Si(e,t,o)}static isValidIdentifier(e){return iu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Si.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Si(["__name__"])}static fromServerFormat(e){const t=[];let o="",c=0;const p=()=>{if(0===o.length)throw new xt(ot.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let v=!1;for(;c<e.length;){const A=e[c];if("\\"===A){if(c+1===e.length)throw new xt(ot.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const $=e[c+1];if("\\"!==$&&"."!==$&&"`"!==$)throw new xt(ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=$,c+=2}else"`"===A?(v=!v,c++):"."!==A||v?(o+=A,c++):(p(),c++)}if(p(),v)throw new xt(ot.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Si(t)}static emptyPath(){return new Si([])}}class Jt{constructor(e){this.path=e}static fromPath(e){return new Jt(Or.fromString(e))}static fromName(e){return new Jt(Or.fromString(e).popFirst(5))}static empty(){return new Jt(Or.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Or.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Or.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Jt(new Or(e.slice()))}}class Ia{constructor(e,t,o,c){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=c}}function Mu(i){return i.fields.find(e=>2===e.kind)}function so(i){return i.fields.filter(e=>2!==e.kind)}Ia.UNKNOWN_ID=-1;class qu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Na{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Na(0,Qi.min())}}function Wa(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,c=Yt.fromTimestamp(1e9===o?new Br(t+1,0):new Br(t,o));return new Qi(c,Jt.empty(),e)}function jl(i){return new Qi(i.readTime,i.key,-1)}class Qi{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Qi(Yt.min(),Jt.empty(),-1)}static max(){return new Qi(Yt.max(),Jt.empty(),-1)}}function Js(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Jt.comparator(i.documentKey,e.documentKey),0!==t?t:Hn(i.largestBatchId,e.largestBatchId))}const oo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Xs(i){return Jo.apply(this,arguments)}function Jo(){return Jo=(0,Ne.Z)(function*(i){if(i.code!==ot.FAILED_PRECONDITION||i.message!==oo)throw i;Ot("LocalStore","Unexpectedly lost primary lease")}),Jo.apply(this,arguments)}class Je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&cn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Je((o,c)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(o,c)},this.catchCallback=p=>{this.wrapFailure(t,p).next(o,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Je?t:Je.resolve(t)}catch(t){return Je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Je.reject(t)}static resolve(e){return new Je((t,o)=>{t(e)})}static reject(e){return new Je((t,o)=>{o(e)})}static waitFor(e){return new Je((t,o)=>{let c=0,p=0,v=!1;e.forEach(A=>{++c,A.next(()=>{++p,v&&p===c&&t()},$=>o($))}),v=!0,p===c&&t()})}static or(e){let t=Je.resolve(!1);for(const o of e)t=t.next(c=>c?Je.resolve(c):o());return t}static forEach(e,t){const o=[];return e.forEach((c,p)=>{o.push(t.call(this,c,p))}),this.waitFor(o)}static mapArray(e,t){return new Je((o,c)=>{const p=e.length,v=new Array(p);let A=0;for(let $=0;$<p;$++){const K=$;t(e[K]).next(se=>{v[K]=se,++A,A===p&&o(v)},se=>c(se))}})}static doWhile(e,t){return new Je((o,c)=>{const p=()=>{!0===e()?t().next(()=>{p()},c):o()};p()})}}class Ru{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ti,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new uo(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const c=b(o.target.error);this.P.reject(new uo(e,c))}}static open(e,t,o,c){try{return new Ru(t,e.transaction(c,o))}catch(p){throw new uo(t,p)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ot("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new co(t)}}class ao{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===ao.D((0,Ge.z$)())&&ei("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ot("SimpleDb","Removing database:",e),Xo(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Ge.hl)())return!1;if(ao.N())return!0;const e=(0,Ge.z$)(),t=ao.D(e),o=0<t&&t<10,c=ao.k(e),p=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||p)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,Ne.Z)(function*(){return t.db||(Ot("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,c)=>{const p=indexedDB.open(t.name,t.version);p.onsuccess=v=>{o(v.target.result)},p.onblocked=()=>{c(new uo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=v=>{const A=v.target.error;c("VersionError"===A.name?new xt(ot.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===A.name?new xt(ot.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+A):new uo(e,A))},p.onupgradeneeded=v=>{Ot("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.S.$(v.target.result,p.transaction,v.oldVersion,t.version).next(()=>{Ot("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,c){var p=this;return(0,Ne.Z)(function*(){const v="readonly"===t;let A=0;for(;;){++A;try{p.db=yield p.F(e);const $=Ru.open(p.db,e,v?"readonly":"readwrite",o),K=c($).next(se=>($.V(),se)).catch(se=>($.abort(se),Je.reject(se))).toPromise();return K.catch(()=>{}),yield $.v,K}catch($){const K=$,se="FirebaseError"!==K.name&&A<3;if(Ot("SimpleDb","Transaction failed with error:",K.message,"Retrying:",se),p.close(),!se)return Promise.reject(K)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pu{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Xo(this.U.delete())}}class uo extends xt{constructor(e,t){super(ot.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function lo(i){return"IndexedDbTransactionError"===i.name}class co{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Ot("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Ot("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Xo(o)}add(e){return Ot("SimpleDb","ADD",this.store.name,e,e),Xo(this.store.add(e))}get(e){return Xo(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ot("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ot("SimpleDb","DELETE",this.store.name,e),Xo(this.store.delete(e))}count(){return Ot("SimpleDb","COUNT",this.store.name),Xo(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const c=this.cursor(o),p=[];return this.H(c,(v,A)=>{p.push(A)}).next(()=>p)}{const c=this.store.getAll(o.range);return new Je((p,v)=>{c.onerror=A=>{v(A.target.error)},c.onsuccess=A=>{p(A.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new Je((c,p)=>{o.onerror=v=>{p(v.target.error)},o.onsuccess=v=>{c(v.target.result)}})}Y(e,t){Ot("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const c=this.cursor(o);return this.H(c,(p,v,A)=>A.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const c=this.cursor(o);return this.H(c,t)}tt(e){const t=this.cursor({});return new Je((o,c)=>{t.onerror=p=>{const v=b(p.target.error);c(v)},t.onsuccess=p=>{const v=p.target.result;v?e(v.primaryKey,v.value).next(A=>{A?v.continue():o()}):o()}})}H(e,t){const o=[];return new Je((c,p)=>{e.onerror=v=>{p(v.target.error)},e.onsuccess=v=>{const A=v.target.result;if(!A)return void c();const $=new pu(A),K=t(A.primaryKey,A.value,$);if(K instanceof Je){const se=K.catch(be=>($.done(),Je.reject(be)));o.push(se)}$.isDone?c():null===$.G?A.continue():A.continue($.G)}}).next(()=>Je.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Xo(i){return new Je((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const c=b(o.target.error);t(c)}})}let D=!1;function b(i){const e=ao.D((0,Ge.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new xt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return D||(D=!0,setTimeout(()=>{throw o},0)),o}}return i}class I{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ot("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ne.Z)(function*(){t.task=null;try{Ot("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){lo(o)?Ot("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Xs(o)}yield t.nt(1)}))}}class M{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ne.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let c=t,p=!0;return Je.doWhile(()=>!0===p&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!o.has(v))return Ot("IndexBackiller",`Processing collection: ${v}`),this.rt(e,v,c).next(A=>{c-=A,o.add(v)});p=!1})).next(()=>t-c)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,o).next(p=>{const v=p.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.ot(c,p)).next(A=>(Ot("IndexBackiller",`Updating offset: ${A}`),this.localStore.indexManager.updateCollectionGroup(e,t,A))).next(()=>v.size)}))}ot(e,t){let o=e;return t.changes.forEach((c,p)=>{const v=jl(p);Js(v,o)>0&&(o=v)}),new Qi(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class V{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Y(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ce(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Ce(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}V.at=-1;class Ze{constructor(e,t){this.comparator=e,this.root=t||gn.EMPTY}insert(e,t){return new Ze(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const c=this.comparator(e,o.key);if(0===c)return t+o.left.size;c<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ft(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ft(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ft(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ft(this.root,e,this.comparator,!0)}}class Ft{constructor(e,t,o,c){this.isReverse=c,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=t?o(e.key,t):1,t&&c&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,t,o,c,p){this.key=e,this.value=t,this.color=o??gn.RED,this.left=c??gn.EMPTY,this.right=p??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,c,p){return new gn(e??this.key,t??this.value,o??this.color,c??this.left,p??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let c=this;const p=o(e,c.key);return c=p<0?c.copy(null,null,null,c.left.insert(e,t,o),null):0===p?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,o)),c.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return gn.EMPTY;o=c.right.min(),c=c.copy(o.key,o.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw cn();const e=this.left.check();if(e!==this.right.check())throw cn();return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1,gn.EMPTY=new class{constructor(){this.size=0}get key(){throw cn()}get value(){throw cn()}get color(){throw cn()}get left(){throw cn()}get right(){throw cn()}copy(i,e,t,o,c){return this}insert(i,e,t){return new gn(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const c=o.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fr(this.data.getIterator())}getIteratorFrom(e){return new fr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,p=o.getNext().key;if(0!==this.comparator(c,p))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nt(this.comparator);return t.data=e,t}}class fr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Li(i){return i.hasNext()?i.getNext():void 0}class Ci{constructor(e){this.fields=e,e.sort(Si.comparator)}static empty(){return new Ci([])}unionWith(e){let t=new Nt(Si.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new Ci(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Fr(t)}static fromUint8Array(e){const t=function(o){let c="";for(let p=0;p<o.length;++p)c+=String.fromCharCode(o[p]);return c}(e);return new Fr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Hn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const ea=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ji(i){if(Un(!!i),"string"==typeof i){let e=0;const t=ea.exec(i);if(Un(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:jr(i.seconds),nanos:jr(i.nanos)}}function jr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Do(i){return"string"==typeof i?Fr.fromBase64String(i):Fr.fromUint8Array(i)}function fl(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Xi(i){const e=i.mapValue.fields.__previous_value__;return fl(e)?Xi(e):e}function su(i){const e=Ji(i.mapValue.fields.__local_write_time__.timestampValue);return new Br(e.seconds,e.nanos)}class k{constructor(e,t,o,c,p,v,A,$){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=c,this.ssl=p,this.forceLongPolling=v,this.autoDetectLongPolling=A,this.useFetchStreams=$}}class U{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new U("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof U&&e.projectId===this.projectId&&e.database===this.database}}function Q(i){return null==i}function ge(i){return 0===i&&1/i==-1/0}function je(i){return"number"==typeof i&&Number.isInteger(i)&&!ge(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Xe={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bt={nullValue:"NULL_VALUE"};function $t(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?fl(i)?4:ou(i)?9007199254740991:10:cn()}function vn(i,e){if(i===e)return!0;const t=$t(i);if(t!==$t(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return su(i).isEqual(su(e));case 3:return function(o,c){if("string"==typeof o.timestampValue&&"string"==typeof c.timestampValue&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const p=Ji(o.timestampValue),v=Ji(c.timestampValue);return p.seconds===v.seconds&&p.nanos===v.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,Do(i.bytesValue).isEqual(Do(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,c){return jr(o.geoPointValue.latitude)===jr(c.geoPointValue.latitude)&&jr(o.geoPointValue.longitude)===jr(c.geoPointValue.longitude)}(i,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return jr(o.integerValue)===jr(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const p=jr(o.doubleValue),v=jr(c.doubleValue);return p===v?ge(p)===ge(v):isNaN(p)&&isNaN(v)}return!1}(i,e);case 9:return Co(i.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:return function(o,c){const p=o.mapValue.fields||{},v=c.mapValue.fields||{};if(Y(p)!==Y(v))return!1;for(const A in p)if(p.hasOwnProperty(A)&&(void 0===v[A]||!vn(p[A],v[A])))return!1;return!0}(i,e);default:return cn()}var c}function Mn(i,e){return void 0!==(i.values||[]).find(t=>vn(t,e))}function $n(i,e){if(i===e)return 0;const t=$t(i),o=$t(e);if(t!==o)return Hn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Hn(i.booleanValue,e.booleanValue);case 2:return function(c,p){const v=jr(c.integerValue||c.doubleValue),A=jr(p.integerValue||p.doubleValue);return v<A?-1:v>A?1:v===A?0:isNaN(v)?isNaN(A)?0:-1:1}(i,e);case 3:return Rn(i.timestampValue,e.timestampValue);case 4:return Rn(su(i),su(e));case 5:return Hn(i.stringValue,e.stringValue);case 6:return function(c,p){const v=Do(c),A=Do(p);return v.compareTo(A)}(i.bytesValue,e.bytesValue);case 7:return function(c,p){const v=c.split("/"),A=p.split("/");for(let $=0;$<v.length&&$<A.length;$++){const K=Hn(v[$],A[$]);if(0!==K)return K}return Hn(v.length,A.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,p){const v=Hn(jr(c.latitude),jr(p.latitude));return 0!==v?v:Hn(jr(c.longitude),jr(p.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,p){const v=c.values||[],A=p.values||[];for(let $=0;$<v.length&&$<A.length;++$){const K=$n(v[$],A[$]);if(K)return K}return Hn(v.length,A.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,p){if(c===Xe.mapValue&&p===Xe.mapValue)return 0;if(c===Xe.mapValue)return 1;if(p===Xe.mapValue)return-1;const v=c.fields||{},A=Object.keys(v),$=p.fields||{},K=Object.keys($);A.sort(),K.sort();for(let se=0;se<A.length&&se<K.length;++se){const be=Hn(A[se],K[se]);if(0!==be)return be;const et=$n(v[A[se]],$[K[se]]);if(0!==et)return et}return Hn(A.length,K.length)}(i.mapValue,e.mapValue);default:throw cn()}}function Rn(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Hn(i,e);const t=Ji(i),o=Ji(e),c=Hn(t.seconds,o.seconds);return 0!==c?c:Hn(t.nanos,o.nanos)}function oi(i){return ls(i)}function ls(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const c=Ji(o);return`time(${c.seconds},${c.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Do(i.bytesValue).toBase64():"referenceValue"in i?Jt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let c="[",p=!0;for(const v of o.values||[])p?p=!1:c+=",",c+=ls(v);return c+"]"}(i.arrayValue):"mapValue"in i?function(o){const c=Object.keys(o.fields||{}).sort();let p="{",v=!0;for(const A of c)v?v=!1:p+=",",p+=`${A}:${ls(o.fields[A])}`;return p+"}"}(i.mapValue):cn();var e}function ta(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function na(i){return!!i&&"integerValue"in i}function Ca(i){return!!i&&"arrayValue"in i}function gu(i){return!!i&&"nullValue"in i}function za(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ra(i){return!!i&&"mapValue"in i}function ia(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ce(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=ia(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ia(i.arrayValue.values[t]);return e}return Object.assign({},i)}function ou(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Hl(i){return"nullValue"in i?bt:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?ta(U.empty(),Jt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:cn()}function Pd(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?ta(U.empty(),Jt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Xe:cn()}function kd(i,e){const t=$n(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Hc(i,e){const t=$n(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Ss{constructor(e){this.value=e}static empty(){return new Ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!ra(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ia(t)}setAll(e){let t=Si.emptyPath(),o={},c=[];e.forEach((v,A)=>{if(!t.isImmediateParentOf(A)){const $=this.getFieldsMap(t);this.applyChanges($,o,c),o={},c=[],t=A.popLast()}v?o[A.lastSegment()]=ia(v):c.push(A.lastSegment())});const p=this.getFieldsMap(t);this.applyChanges(p,o,c)}delete(e){const t=this.field(e.popLast());ra(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let c=t.mapValue.fields[e.get(o)];ra(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,o){ce(t,(c,p)=>e[c]=p);for(const c of o)delete e[c]}clone(){return new Ss(ia(this.value))}}function Yu(i){const e=[];return ce(i.fields,(t,o)=>{const c=new Si([t]);if(ra(o)){const p=Yu(o.mapValue).fields;if(0===p.length)e.push(c);else for(const v of p)e.push(c.child(v))}else e.push(c)}),new Ci(e)}class ti{constructor(e,t,o,c,p,v){this.key=e,this.documentType=t,this.version=o,this.readTime=c,this.data=p,this.documentState=v}static newInvalidDocument(e){return new ti(e,0,Yt.min(),Yt.min(),Ss.empty(),0)}static newFoundDocument(e,t,o){return new ti(e,1,t,Yt.min(),o,0)}static newNoDocument(e,t){return new ti(e,2,t,Yt.min(),Ss.empty(),0)}static newUnknownDocument(e,t){return new ti(e,3,t,Yt.min(),Ss.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ti&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ti(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vc{constructor(e,t=null,o=[],c=[],p=null,v=null,A=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=c,this.limit=p,this.startAt=v,this.endAt=A,this.ht=null}}function mu(i,e=null,t=[],o=[],c=null,p=null,v=null){return new vc(i,e,t,o,c,p,v)}function Nu(i){const e=Gt(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(c=o).field.canonicalString()+c.op.toString()+oi(c.value);var c}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(c=o).field.canonicalString()+c.dir;var c}).join(","),Q(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>oi(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>oi(o)).join(",")),e.ht=t}return e.ht}function wc(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let c=0;c<i.orderBy.length;c++)if(!mh(i.orderBy[c],e.orderBy[c]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let c=0;c<i.filters.length;c++)if((t=i.filters[c]).op!==(o=e.filters[c]).op||!t.field.isEqual(o.field)||!vn(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ic(i.startAt,e.startAt)&&Ic(i.endAt,e.endAt)}function yu(i){return Jt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function $l(i,e){return i.filters.filter(t=>t instanceof vs&&t.field.isEqual(e))}function Gc(i,e,t){let o=bt,c=!0;for(const p of $l(i,e)){let v=bt,A=!0;switch(p.op){case"<":case"<=":v=Hl(p.value);break;case"==":case"in":case">=":v=p.value;break;case">":v=p.value,A=!1;break;case"!=":case"not-in":v=bt}kd({value:o,inclusive:c},{value:v,inclusive:A})<0&&(o=v,c=A)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const v=t.position[p];kd({value:o,inclusive:c},{value:v,inclusive:t.inclusive})<0&&(o=v,c=t.inclusive);break}return{value:o,inclusive:c}}function Ka(i,e,t){let o=Xe,c=!0;for(const p of $l(i,e)){let v=Xe,A=!0;switch(p.op){case">=":case">":v=Pd(p.value),A=!1;break;case"==":case"in":case"<=":v=p.value;break;case"<":v=p.value,A=!1;break;case"!=":case"not-in":v=Xe}Hc({value:o,inclusive:c},{value:v,inclusive:A})>0&&(o=v,c=A)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const v=t.position[p];Hc({value:o,inclusive:c},{value:v,inclusive:t.inclusive})>0&&(o=v,c=t.inclusive);break}return{value:o,inclusive:c}}class vs extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new pl(e,t,o):"array-contains"===t?new Ou(e,o):"in"===t?new Ec(e,o):"not-in"===t?new Fd(e,o):"array-contains-any"===t?new gl(e,o):new vs(e,t,o)}static lt(e,t,o){return"in"===t?new ph(e,o):new gh(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft($n(t,this.value)):null!==t&&$t(this.value)===$t(t)&&this.ft($n(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return cn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class pl extends vs{constructor(e,t,o){super(e,t,o),this.key=Jt.fromName(o.referenceValue)}matches(e){const t=Jt.comparator(e.key,this.key);return this.ft(t)}}class ph extends vs{constructor(e,t){super(e,"in",t),this.keys=Wc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gh extends vs{constructor(e,t){super(e,"not-in",t),this.keys=Wc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Wc(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Jt.fromName(o.referenceValue))}class Ou extends vs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ca(t)&&Mn(t.arrayValue,this.value)}}class Ec extends vs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Mn(this.value.arrayValue,t)}}class Fd extends vs{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Mn(this.value.arrayValue,t)}}class gl extends vs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ca(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>Mn(this.value.arrayValue,o))}}class eo{constructor(e,t){this.position=e,this.inclusive=t}}class Da{constructor(e,t="asc"){this.field=e,this.dir=t}}function mh(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Gl(i,e,t){let o=0;for(let c=0;c<i.position.length;c++){const p=e[c],v=i.position[c];if(o=p.field.isKeyField()?Jt.comparator(Jt.fromName(v.referenceValue),t.key):$n(v,t.data.field(p.field)),"desc"===p.dir&&(o*=-1),0!==o)break}return o}function Ic(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!vn(i.position[t],e.position[t]))return!1;return!0}class sa{constructor(e,t=null,o=[],c=[],p=null,v="F",A=null,$=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=c,this.limit=p,this.limitType=v,this.startAt=A,this.endAt=$,this._t=null,this.wt=null}}function ml(i,e,t,o,c,p,v,A){return new sa(i,e,t,o,c,p,v,A)}function Vo(i){return new sa(i)}function ho(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Wl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function zc(i){for(const e of i.filters)if(e.dt())return e.field;return null}function zl(i){return null!==i.collectionGroup}function yl(i){const e=Gt(i);if(null===e._t){e._t=[];const t=zc(e),o=Wl(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new Da(t)),e._t.push(new Da(Si.keyField(),"asc"));else{let c=!1;for(const p of e.explicitOrderBy)e._t.push(p),p.field.isKeyField()&&(c=!0);if(!c){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Da(Si.keyField(),p))}}}return e._t}function Vi(i){const e=Gt(i);if(!e.wt)if("F"===e.limitType)e.wt=mu(e.path,e.collectionGroup,yl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const p of yl(e))t.push(new Da(p.field,"desc"===p.dir?"asc":"desc"));const o=e.endAt?new eo(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new eo(e.startAt.position,e.startAt.inclusive):null;e.wt=mu(e.path,e.collectionGroup,t,e.filters,e.limit,o,c)}return e.wt}function Kc(i,e,t){return new sa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Oa(i,e){return wc(Vi(i),Vi(e))&&i.limitType===e.limitType}function qc(i){return`${Nu(Vi(i))}|lt:${i.limitType}`}function Zc(i){return`Query(target=${function $c(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${oi(o.value)}`;var o}).join(", ")}]`),Q(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>oi(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>oi(t)).join(",")),`Target(${e})`}(Vi(i))}; limitType=${i.limitType})`}function Kl(i,e){return e.isFoundDocument()&&function(t,o){const c=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):Jt.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(i,e)&&function(t,o){for(const c of t.explicitOrderBy)if(!c.field.isKeyField()&&null===o.data.field(c.field))return!1;return!0}(i,e)&&function(t,o){for(const c of t.filters)if(!c.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(c,p,v){const A=Gl(c,p,v);return c.inclusive?A<=0:A<0}(t.startAt,yl(t),o)||t.endAt&&!function(c,p,v){const A=Gl(c,p,v);return c.inclusive?A>=0:A>0}(t.endAt,yl(t),o)));var t,o}function Ld(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Pu(i){return(e,t)=>{let o=!1;for(const c of yl(i)){const p=_l(c,e,t);if(0!==p)return p;o=o||c.field.isKeyField()}return 0}}function _l(i,e,t){const o=i.field.isKeyField()?Jt.comparator(e.key,t.key):function(c,p,v){const A=p.data.field(c),$=v.data.field(c);return null!==A&&null!==$?$n(A,$):cn()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return cn()}}function Pa(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ge(e)?"-0":e}}function _u(i){return{integerValue:""+i}}function Yc(i,e){return je(e)?_u(e):Pa(i,e)}class Qu{constructor(){this._=void 0}}function Ju(i,e,t){return i instanceof ql?function(o,c){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&(p.fields.__previous_value__=c),{mapValue:p}}(t,e):i instanceof vu?Cc(i,e):i instanceof qa?Jc(i,e):function(o,c){const p=Qc(o,c),v=Xc(p)+Xc(o.yt);return na(p)&&na(o.yt)?_u(v):Pa(o.It,v)}(i,e)}function mf(i,e,t){return i instanceof vu?Cc(i,e):i instanceof qa?Jc(i,e):t}function Qc(i,e){return i instanceof Zl?na(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class ql extends Qu{}class vu extends Qu{constructor(e){super(),this.elements=e}}function Cc(i,e){const t=vl(e);for(const o of i.elements)t.some(c=>vn(c,o))||t.push(o);return{arrayValue:{values:t}}}class qa extends Qu{constructor(e){super(),this.elements=e}}function Jc(i,e){let t=vl(e);for(const o of i.elements)t=t.filter(c=>!vn(c,o));return{arrayValue:{values:t}}}class Zl extends Qu{constructor(e,t){super(),this.It=e,this.yt=t}}function Xc(i){return jr(i.integerValue||i.doubleValue)}function vl(i){return Ca(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ku{constructor(e,t){this.field=e,this.transform=t}}class wl{constructor(e,t){this.version=e,this.transformResults=t}}class Hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hr}static exists(e){return new Hr(void 0,e)}static updateTime(e){return new Hr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class El{}function el(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Il(i.key,Hr.none()):new wu(i.key,i.data,Hr.none());{const t=i.data,o=Ss.empty();let c=new Nt(Si.comparator);for(let p of e.fields)if(!c.has(p)){let v=t.field(p);null===v&&p.length>1&&(p=p.popLast(),v=t.field(p)),null===v?o.delete(p):o.set(p,v),c=c.add(p)}return new Uo(i.key,o,new Ci(c.toArray()),Hr.none())}}function Vd(i,e,t){i instanceof wu?function(o,c,p){const v=o.value.clone(),A=Ql(o.fieldTransforms,c,p.transformResults);v.setAll(A),c.convertToFoundDocument(p.version,v).setHasCommittedMutations()}(i,e,t):i instanceof Uo?function(o,c,p){if(!Xu(o.precondition,c))return void c.convertToUnknownDocument(p.version);const v=Ql(o.fieldTransforms,c,p.transformResults),A=c.data;A.setAll(Yl(o)),A.setAll(v),c.convertToFoundDocument(p.version,A).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ii(i,e,t,o){return i instanceof wu?function(c,p,v,A){if(!Xu(c.precondition,p))return v;const $=c.value.clone(),K=Dc(c.fieldTransforms,A,p);return $.setAll(K),p.convertToFoundDocument(p.version,$).setHasLocalMutations(),null}(i,e,t,o):i instanceof Uo?function(c,p,v,A){if(!Xu(c.precondition,p))return v;const $=Dc(c.fieldTransforms,A,p),K=p.data;return K.setAll(Yl(c)),K.setAll($),p.convertToFoundDocument(p.version,K).setHasLocalMutations(),null===v?null:v.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(se=>se.field))}(i,e,t,o):(v=t,Xu(i.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):v);var p,v}function _h(i,e){let t=null;for(const o of i.fieldTransforms){const c=e.data.field(o.field),p=Qc(o.transform,c||null);null!=p&&(null===t&&(t=Ss.empty()),t.set(o.field,p))}return t||null}function ed(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Co(t,o,(c,p)=>function yh(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof vu&&o instanceof vu||t instanceof qa&&o instanceof qa?Co(t.elements,o.elements,vn):t instanceof Zl&&o instanceof Zl?vn(t.yt,o.yt):t instanceof ql&&o instanceof ql);var t,o}(c,p))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class wu extends El{constructor(e,t,o,c=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Uo extends El{constructor(e,t,o,c,p=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=c,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function Yl(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Ql(i,e,t){const o=new Map;Un(i.length===t.length);for(let c=0;c<t.length;c++){const p=i[c],v=p.transform,A=e.data.field(p.field);o.set(p.field,mf(v,A,t[c]))}return o}function Dc(i,e,t){const o=new Map;for(const c of i){const p=c.transform,v=t.data.field(c.field);o.set(c.field,Ju(p,v,e))}return o}class Il extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class td extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ud{constructor(e){this.count=e}}var As,Ir;function tl(i){switch(i){default:return cn();case ot.CANCELLED:case ot.UNKNOWN:case ot.DEADLINE_EXCEEDED:case ot.RESOURCE_EXHAUSTED:case ot.INTERNAL:case ot.UNAVAILABLE:case ot.UNAUTHENTICATED:return!1;case ot.INVALID_ARGUMENT:case ot.NOT_FOUND:case ot.ALREADY_EXISTS:case ot.PERMISSION_DENIED:case ot.FAILED_PRECONDITION:case ot.ABORTED:case ot.OUT_OF_RANGE:case ot.UNIMPLEMENTED:case ot.DATA_LOSS:return!0}}function Cl(i){if(void 0===i)return ei("GRPC error has no .code"),ot.UNKNOWN;switch(i){case As.OK:return ot.OK;case As.CANCELLED:return ot.CANCELLED;case As.UNKNOWN:return ot.UNKNOWN;case As.DEADLINE_EXCEEDED:return ot.DEADLINE_EXCEEDED;case As.RESOURCE_EXHAUSTED:return ot.RESOURCE_EXHAUSTED;case As.INTERNAL:return ot.INTERNAL;case As.UNAVAILABLE:return ot.UNAVAILABLE;case As.UNAUTHENTICATED:return ot.UNAUTHENTICATED;case As.INVALID_ARGUMENT:return ot.INVALID_ARGUMENT;case As.NOT_FOUND:return ot.NOT_FOUND;case As.ALREADY_EXISTS:return ot.ALREADY_EXISTS;case As.PERMISSION_DENIED:return ot.PERMISSION_DENIED;case As.FAILED_PRECONDITION:return ot.FAILED_PRECONDITION;case As.ABORTED:return ot.ABORTED;case As.OUT_OF_RANGE:return ot.OUT_OF_RANGE;case As.UNIMPLEMENTED:return ot.UNIMPLEMENTED;case As.DATA_LOSS:return ot.DATA_LOSS;default:return cn()}}(Ir=As||(As={}))[Ir.OK=0]="OK",Ir[Ir.CANCELLED=1]="CANCELLED",Ir[Ir.UNKNOWN=2]="UNKNOWN",Ir[Ir.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ir[Ir.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ir[Ir.NOT_FOUND=5]="NOT_FOUND",Ir[Ir.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ir[Ir.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ir[Ir.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ir[Ir.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ir[Ir.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ir[Ir.ABORTED=10]="ABORTED",Ir[Ir.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ir[Ir.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ir[Ir.INTERNAL=13]="INTERNAL",Ir[Ir.UNAVAILABLE=14]="UNAVAILABLE",Ir[Ir.DATA_LOSS=15]="DATA_LOSS";class au{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[c,p]of o)if(this.equalsFn(c,e))return p}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),c=this.inner[o];if(void 0===c)return this.inner[o]=[[e,t]],void this.innerSize++;for(let p=0;p<c.length;p++)if(this.equalsFn(c[p][0],e))return void(c[p]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return 1===o.length?delete this.inner[t]:o.splice(c,1),this.innerSize--,!0;return!1}forEach(e){ce(this.inner,(t,o)=>{for(const[c,p]of o)e(c,p)})}isEmpty(){return Ce(this.inner)}size(){return this.innerSize}}const fo=new Ze(Jt.comparator);function po(){return fo}const cs=new Ze(Jt.comparator);function ba(...i){let e=cs;for(const t of i)e=e.insert(t.key,t);return e}function bo(i){let e=cs;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Bo(){return uu()}function Jl(){return uu()}function uu(){return new au(i=>i.toString(),(i,e)=>i.isEqual(e))}const Fu=new Ze(Jt.comparator),Bd=new Nt(Jt.comparator);function er(...i){let e=Bd;for(const t of i)e=e.add(t);return e}const Lu=new Nt(Hn);function Eu(){return Lu}class Vu{constructor(e,t,o,c,p){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=c,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,Xl.createSynthesizedTargetChangeForCurrentChange(e,t)),new Vu(Yt.min(),o,Eu(),po(),er())}}class Xl{constructor(e,t,o,c,p){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=c,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Xl(Fr.EMPTY_BYTE_STRING,t,er(),er(),er())}}class Dl{constructor(e,t,o,c){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=c}}class bl{constructor(e,t){this.targetId=e,this.At=t}}class Ui{constructor(e,t,o=Fr.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=c}}class Uu{constructor(){this.Rt=0,this.bt=Za(),this.Pt=Fr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=er(),t=er(),o=er();return this.bt.forEach((c,p)=>{switch(p){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:o=o.add(c);break;default:cn()}}),new Xl(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=Za()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Iu{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=po(),this.qt=bc(),this.Kt=new Nt(Hn)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:cn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,c)=>{this.Ht(c)&&t(c)})}Yt(e){const t=e.targetId,o=e.At.count,c=this.Xt(t);if(c){const p=c.target;if(yu(p))if(0===o){const v=new Jt(p.path);this.jt(t,v,ti.newNoDocument(v,Yt.min()))}else Un(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((p,v)=>{const A=this.Xt(v);if(A){if(p.current&&yu(A.target)){const $=new Jt(A.target.path);null!==this.Ut.get($)||this.ee(v,$)||this.jt(v,$,ti.newNoDocument($,e))}p.Dt&&(t.set(v,p.xt()),p.Nt())}});let o=er();this.qt.forEach((p,v)=>{let A=!0;v.forEachWhile($=>{const K=this.Xt($);return!K||2===K.purpose||(A=!1,!1)}),A&&(o=o.add(p))}),this.Ut.forEach((p,v)=>v.setReadTime(e));const c=new Vu(e,t,this.Kt,this.Ut,o);return this.Ut=po(),this.qt=bc(),this.Kt=new Nt(Hn),c}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const c=this.zt(e);this.ee(e,t)?c.kt(t,1):c.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new Uu,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Nt(Hn),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ot("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Uu),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function bc(){return new Ze(Jt.comparator)}function Za(){return new Ze(Jt.comparator)}const nl={asc:"ASCENDING",desc:"DESCENDING"},Bu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class nd{constructor(e,t){this.databaseId=e,this.gt=t}}function Tl(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oa(i,e){return i.gt?e.toBase64():e.toUint8Array()}function jd(i,e){return Tl(i,e.toTimestamp())}function xs(i){return Un(!!i),Yt.fromTimestamp(function(e){const t=Ji(e);return new Br(t.seconds,t.nanos)}(i))}function rd(i,e){return(t=i,new Or(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function id(i){const e=Or.fromString(i);return Un(od(e)),e}function w(i,e){return rd(i.databaseId,e.path)}function f(i,e){const t=id(e);if(t.get(1)!==i.databaseId.projectId)throw new xt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new xt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Jt(re(t))}function y(i,e){return rd(i.databaseId,e)}function T(i){const e=id(i);return 4===e.length?Or.emptyPath():re(e)}function W(i){return new Or(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function re(i){return Un(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Oe(i,e,t){return{name:w(i,e),fields:t.value.mapValue.fields}}function ut(i,e,t){const o=f(i,e.name),c=xs(e.updateTime),p=new Ss({mapValue:{fields:e.fields}}),v=ti.newFoundDocument(o,c,p);return t&&v.setHasCommittedMutations(),t?v.setHasCommittedMutations():v}function Fn(i,e){let t;if(e instanceof wu)t={update:Oe(i,e.key,e.value)};else if(e instanceof Il)t={delete:w(i,e.key)};else if(e instanceof Uo)t={update:Oe(i,e.key,e.data),updateMask:yf(e.fieldMask)};else{if(!(e instanceof td))return cn();t={verify:w(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(c,p){const v=p.transform;if(v instanceof ql)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof vu)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof qa)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Zl)return{fieldPath:p.field.canonicalString(),increment:v.yt};throw cn()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:jd(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:cn()),t;var c}function kn(i,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?Hr.updateTime(xs(c.updateTime)):void 0!==c.exists?Hr.exists(c.exists):Hr.none():Hr.none(),o=e.updateTransforms?e.updateTransforms.map(c=>function(p,v){let A=null;"setToServerValue"in v?(Un("REQUEST_TIME"===v.setToServerValue),A=new ql):"appendMissingElements"in v?A=new vu(v.appendMissingElements.values||[]):"removeAllFromArray"in v?A=new qa(v.removeAllFromArray.values||[]):"increment"in v?A=new Zl(p,v.increment):cn();const $=Si.fromServerFormat(v.fieldPath);return new ku($,A)}(i,c)):[];var c;if(e.update){const c=f(i,e.update.name),p=new Ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new Ci((e.updateMask.fieldPaths||[]).map(K=>Si.fromServerFormat(K)));return new Uo(c,p,v,t,o)}return new wu(c,p,t,o)}if(e.delete){const c=f(i,e.delete);return new Il(c,t)}if(e.verify){const c=f(i,e.verify);return new td(c,t)}return cn()}function ka(i,e){return{documents:[y(i,e.path)]}}function Sl(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=y(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=y(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const c=function($){if(0===$.length)return;const K=$.map(se=>function(be){if("=="===be.op){if(za(be.value))return{unaryFilter:{field:ju(be.field),op:"IS_NAN"}};if(gu(be.value))return{unaryFilter:{field:ju(be.field),op:"IS_NULL"}}}else if("!="===be.op){if(za(be.value))return{unaryFilter:{field:ju(be.field),op:"IS_NOT_NAN"}};if(gu(be.value))return{unaryFilter:{field:ju(be.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ju(be.field),op:tc(be.op),value:be.value}}}(se));return 1===K.length?K[0]:{compositeFilter:{op:"AND",filters:K}}}(e.filters);c&&(t.structuredQuery.where=c);const p=function($){if(0!==$.length)return $.map(K=>{return{field:ju((se=K).field),direction:Fa(se.dir)};var se})}(e.orderBy);p&&(t.structuredQuery.orderBy=p);const v=(K=e.limit,i.gt||Q(K)?K:{value:K});var K,A,$;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(A=e.startAt).inclusive,values:A.position}),e.endAt&&(t.structuredQuery.endAt={before:!($=e.endAt).inclusive,values:$.position}),t}function Tc(i){let e=T(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let c=null;if(o>0){Un(1===o);const se=t.from[0];se.allDescendants?c=se.collectionId:e=e.child(se.collectionId)}let p=[];t.where&&(p=sd(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(se=>{return new Da(rl((be=se).field),function(et){switch(et){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(be.direction));var be}));let A=null;t.limit&&(A=function(se){let be;return be="object"==typeof se?se.value:se,Q(be)?null:be}(t.limit));let $=null;var se;t.startAt&&($=new eo((se=t.startAt).values||[],!!se.before));let K=null;return t.endAt&&(K=function(se){return new eo(se.values||[],!se.before)}(t.endAt)),ml(e,c,v,p,A,"F",$,K)}function sd(i){return i?void 0!==i.unaryFilter?[Hd(i)]:void 0!==i.fieldFilter?[nc(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>sd(e)).reduce((e,t)=>e.concat(t)):cn():[]}function Fa(i){return nl[i]}function tc(i){return Bu[i]}function ju(i){return{fieldPath:i.canonicalString()}}function rl(i){return Si.fromServerFormat(i.fieldPath)}function nc(i){return vs.create(rl(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return cn()}}(i.fieldFilter.op),i.fieldFilter.value)}function Hd(i){switch(i.unaryFilter.op){case"IS_NAN":const e=rl(i.unaryFilter.field);return vs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=rl(i.unaryFilter.field);return vs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=rl(i.unaryFilter.field);return vs.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=rl(i.unaryFilter.field);return vs.create(c,"!=",{nullValue:"NULL_VALUE"});default:return cn()}}function yf(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function od(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function aa(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=vh(e)),e=Xg(i.get(t),e);return vh(e)}function Xg(i,e){let t=e;const o=i.length;for(let c=0;c<o;c++){const p=i.charAt(c);switch(p){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=p}}return t}function vh(i){return i+"\x01\x01"}function Cu(i){const e=i.length;if(Un(e>=2),2===e)return Un("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Or.emptyPath();const t=e-2,o=[];let c="";for(let p=0;p<e;){const v=i.indexOf("\x01",p);switch((v<0||v>t)&&cn(),i.charAt(v+1)){case"\x01":const A=i.substring(p,v);let $;0===c.length?$=A:(c+=A,$=c,c=""),o.push($);break;case"\x10":c+=i.substring(p,v),c+="\0";break;case"\x11":c+=i.substring(p,v+1);break;default:cn()}p=v+2}return new Or(o)}const $d=["userId","batchId"];function Gd(i,e){return[i,aa(e)]}function wh(i,e,t){return[i,aa(e),t]}const _f={},Eh=["prefixPath","collectionGroup","readTime","documentId"],Mp=["prefixPath","collectionGroup","documentId"],Ih=["collectionGroup","readTime","prefixPath","documentId"],ad=["canonicalId","targetId"],Rp=["targetId","path"],Np=["path","targetId"],Op=["collectionId","parent"],vf=["indexId","uid"],em=["uid","sequenceNumber"],tm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Pp=["indexId","uid","orderedDocumentKey"],kp=["userId","collectionPath","documentId"],Ch=["userId","collectionPath","largestBatchId"],wf=["userId","collectionGroup","largestBatchId"],Ef=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fp=[...Ef,"documentOverlays"],Dh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],If=Dh,Al=[...If,"indexConfiguration","indexState","indexEntries"];class ai extends Zu{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function mi(i,e){const t=Gt(i);return ao.O(t.ie,e)}class xl{constructor(e,t,o,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=c}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const p=this.mutations[c];p.key.isEqual(e.key)&&Vd(p,e,o[c])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Ii(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Ii(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=Jl();return this.mutations.forEach(c=>{const p=e.get(c.key),v=p.overlayedDocument;let A=this.applyToLocalView(v,p.mutatedFields);A=t.has(c.key)?null:A;const $=el(v,A);null!==$&&o.set(c.key,$),v.isValidDocument()||v.convertToNoDocument(Yt.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),er())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,(t,o)=>ed(t,o))&&Co(this.baseMutations,e.baseMutations,(t,o)=>ed(t,o))}}class ud{constructor(e,t,o,c){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=c}static from(e,t,o){Un(e.mutations.length===o.length);let c=Fu;const p=e.mutations;for(let v=0;v<p.length;v++)c=c.insert(p[v].key,o[v].version);return new ud(e,t,o,c)}}class To{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lu{constructor(e,t,o,c,p=Yt.min(),v=Yt.min(),A=Fr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=c,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=A}withSequenceNumber(e){return new lu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Wd{constructor(e){this.re=e}}function Cf(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ld(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:w(c=i.re,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:Tl(c,p.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:rc(e.version)};else{if(!e.isUnknownDocument())return cn();o.unknownDocument={path:t.path.toArray(),version:rc(e.version)}}var c,p;return o}function ld(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function rc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rl(i){const e=new Br(i.seconds,i.nanoseconds);return Yt.fromTimestamp(e)}function Nl(i,e){const t=(e.baseMutations||[]).map(p=>kn(i.re,p));for(let p=0;p<e.mutations.length-1;++p){const v=e.mutations[p];p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(v.updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p)}const o=e.mutations.map(p=>kn(i.re,p)),c=Br.fromMillis(e.localWriteTimeMs);return new xl(e.batchId,c,t,o)}function ic(i){const e=Rl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Rl(i.lastLimboFreeSnapshotVersion):Yt.min();let o;var c;return void 0!==i.query.documents?(Un(1===(c=i.query).documents.length),o=Vi(Vo(T(c.documents[0])))):o=Vi(Tc(i.query)),new lu(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Fr.fromBase64String(i.resumeToken))}function bh(i,e){const t=rc(e.snapshotVersion),o=rc(e.lastLimboFreeSnapshotVersion);let c;c=yu(e.target)?ka(i.re,e.target):Sl(i.re,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Nu(e.target),readTime:t,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:c}}function zd(i){const e=Tc({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Kc(e,e.limit,"L"):e}function sc(i,e){return new To(e.largestBatchId,kn(i.re,e.overlayMutation))}function Df(i,e){const t=e.path.lastSegment();return[i,aa(e.path.popLast()),t]}function Th(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:rc(o.readTime),documentKey:aa(o.documentKey.path),largestBatchId:o.largestBatchId}}class Sc{getBundleMetadata(e,t){return Hu(e).get(t).next(o=>{if(o)return{id:(c=o).bundleId,createTime:Rl(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return Hu(e).put({bundleId:(o=t).id,createTime:rc(xs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Sh(e).get(t).next(o=>{if(o)return{name:(c=o).name,query:zd(c.bundledQuery),readTime:Rl(c.readTime)};var c})}saveNamedQuery(e,t){return Sh(e).put({name:(o=t).name,readTime:rc(xs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Hu(i){return mi(i,"bundles")}function Sh(i){return mi(i,"namedQueries")}class cd{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new cd(e,t.uid||"")}getOverlay(e,t){return dd(e).get(Df(this.userId,t)).next(o=>o?sc(this.It,o):null)}getOverlays(e,t){const o=Bo();return Je.forEach(t,c=>this.getOverlay(e,c).next(p=>{null!==p&&o.set(c,p)})).next(()=>o)}saveOverlays(e,t,o){const c=[];return o.forEach((p,v)=>{const A=new To(t,v);c.push(this.ue(e,A))}),Je.waitFor(c)}removeOverlaysForBatchId(e,t,o){const c=new Set;t.forEach(v=>c.add(aa(v.getCollectionPath())));const p=[];return c.forEach(v=>{const A=IDBKeyRange.bound([this.userId,v,o],[this.userId,v,o+1],!1,!0);p.push(dd(e).Y("collectionPathOverlayIndex",A))}),Je.waitFor(p)}getOverlaysForCollection(e,t,o){const c=Bo(),p=aa(t),v=IDBKeyRange.bound([this.userId,p,o],[this.userId,p,Number.POSITIVE_INFINITY],!0);return dd(e).W("collectionPathOverlayIndex",v).next(A=>{for(const $ of A){const K=sc(this.It,$);c.set(K.getKey(),K)}return c})}getOverlaysForCollectionGroup(e,t,o,c){const p=Bo();let v;const A=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dd(e).Z({index:"collectionGroupOverlayIndex",range:A},($,K,se)=>{const be=sc(this.It,K);p.size()<c||be.largestBatchId===v?(p.set(be.getKey(),be),v=be.largestBatchId):se.done()}).next(()=>p)}ue(e,t){return dd(e).put(function(o,c,p){const[v,A,$]=Df(c,p.mutation.key);return{userId:c,collectionPath:A,documentId:$,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:Fn(o.re,p.mutation)}}(this.It,this.userId,t))}}function dd(i){return mi(i,"documentOverlays")}class Ac{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(jr(e.integerValue));else if("doubleValue"in e){const o=jr(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),ge(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Do(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?ou(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):cn()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const c of Object.keys(o))this._e(c,t),this.ae(o[c],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const c of o)this.ae(c,t)}ge(e,t){this.le(t,37),Jt.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function bf(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Lp(i){const e=64-function(t){let o=0;for(let c=0;c<8;++c){const p=bf(255&t[c]);if(o+=p,8!==p)break}return o}(i);return Math.ceil(e/8)}Ac.Te=new Ac;class Du{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const c=t.codePointAt(0);this.Ae(240|c>>>18),this.Ae(128|63&c>>>12),this.Ae(128|63&c>>>6),this.Ae(128|63&c)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const c=t.codePointAt(0);this.Pe(240|c>>>18),this.Pe(128|63&c>>>12),this.Pe(128|63&c>>>6),this.Pe(128|63&c)}}this.ve()}De(e){const t=this.Ce(e),o=Lp(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let c=t.length-o;c<t.length;++c)this.buffer[this.position++]=255&t[c]}Ne(e){const t=this.Ce(e),o=Lp(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let c=t.length-o;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(c){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,c,!1),new Uint8Array(p.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let c=1;c<t.length;++c)t[c]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const c=new Uint8Array(o);c.set(this.buffer),this.buffer=c}}class Ah{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class xh{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class xc{constructor(){this.Be=new Du,this.Le=new Ah(this.Be),this.Ue=new xh(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Ol{constructor(e,t,o,c){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=c}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Ol(this.indexId,this.documentKey,this.arrayValue,o)}}function oc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Mc(i.arrayValue,e.arrayValue),0!==t?t:(t=Mc(i.directionalValue,e.directionalValue),0!==t?t:Jt.comparator(i.documentKey,e.documentKey)))}function Mc(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Tf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=Mu(e);if(void 0!==t&&!this.ze(t))return!1;const o=so(e);let c=0,p=0;for(;c<o.length&&this.ze(o[c]);++c);if(c===o.length)return!0;if(void 0!==this.je){const v=o[c];if(!this.He(this.je,v)||!this.Je(this.Ge[p++],v))return!1;++c}for(;c<o.length;++c){const v=o[c];if(p>=this.Ge.length||!this.Je(this.Ge[p++],v))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Vp{constructor(){this.Ye=new d}addToCollectionParentIndex(e,t){return this.Ye.add(t),Je.resolve()}getCollectionParents(e,t){return Je.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return Je.resolve()}deleteFieldIndex(e,t){return Je.resolve()}getDocumentsMatchingTarget(e,t){return Je.resolve(null)}getIndexType(e,t){return Je.resolve(0)}getFieldIndexes(e,t){return Je.resolve([])}getNextCollectionGroupToUpdate(e){return Je.resolve(null)}getMinOffset(e,t){return Je.resolve(Qi.min())}getMinOffsetFromCollectionGroup(e,t){return Je.resolve(Qi.min())}updateCollectionGroup(e,t,o){return Je.resolve()}updateIndexEntries(e,t){return Je.resolve()}}class d{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),c=this.index[t]||new Nt(Or.comparator),p=!c.has(o);return this.index[t]=c.add(o),p}has(e){const t=e.lastSegment(),o=e.popLast(),c=this.index[t];return c&&c.has(o)}getEntries(e){return(this.index[e]||new Nt(Or.comparator)).toArray()}}const u=new Uint8Array(0);class l{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new d,this.Ze=new au(o=>Nu(o),(o,c)=>wc(o,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const p={collectionId:o,parent:aa(c)};return g(e).put(p)}return Je.resolve()}getCollectionParents(e,t){const o=[],c=IDBKeyRange.bound([t,""],[Lo(t),""],!1,!0);return g(e).W(c).next(p=>{for(const v of p){if(v.collectionId!==t)break;o.push(Cu(v.parent))}return o})}addFieldIndex(e,t){const o=x(e),c={indexId:(v=t).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(A=>[A.fieldPath.canonicalString(),A.kind])};var v;delete c.indexId;const p=o.add(c);if(t.indexState){const v=B(e);return p.next(A=>{v.put(Th(A,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return p.next()}deleteFieldIndex(e,t){const o=x(e),c=B(e),p=C(e);return o.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=C(e);let c=!0;const p=new Map;return Je.forEach(this.tn(t),v=>this.en(e,v).next(A=>{c&&(c=!!A),p.set(v,A)})).next(()=>{if(c){let v=er();const A=[];return Je.forEach(p,($,K)=>{var se;Ot("IndexedDbIndexManager",`Using index ${se=$,`id=${se.indexId}|cg=${se.collectionGroup}|f=${se.fields.map(Ai=>`${Ai.fieldPath}:${Ai.kind}`).join(",")}`} to execute ${Nu(t)}`);const be=function(Ai,es){const ni=Mu(es);if(void 0===ni)return null;for(const Ni of $l(Ai,ni.fieldPath))switch(Ni.op){case"array-contains-any":return Ni.value.arrayValue.values||[];case"array-contains":return[Ni.value]}return null}(K,$),et=function(Ai,es){const ni=new Map;for(const Ni of so(es))for(const Ho of $l(Ai,Ni.fieldPath))switch(Ho.op){case"==":case"in":ni.set(Ni.fieldPath.canonicalString(),Ho.value);break;case"not-in":case"!=":return ni.set(Ni.fieldPath.canonicalString(),Ho.value),Array.from(ni.values())}return null}(K,$),Et=function(Ai,es){const ni=[];let Ni=!0;for(const Ho of so(es)){const ff=0===Ho.kind?Gc(Ai,Ho.fieldPath,Ai.startAt):Ka(Ai,Ho.fieldPath,Ai.startAt);ni.push(ff.value),Ni&&(Ni=ff.inclusive)}return new eo(ni,Ni)}(K,$),Dt=function(Ai,es){const ni=[];let Ni=!0;for(const Ho of so(es)){const ff=0===Ho.kind?Ka(Ai,Ho.fieldPath,Ai.endAt):Gc(Ai,Ho.fieldPath,Ai.endAt);ni.push(ff.value),Ni&&(Ni=ff.inclusive)}return new eo(ni,Ni)}(K,$),rn=this.nn($,K,Et),An=this.nn($,K,Dt),li=this.sn($,K,et),Bi=this.rn($.indexId,be,rn,Et.inclusive,An,Dt.inclusive,li);return Je.forEach(Bi,Ai=>o.J(Ai,t.limit).next(es=>{es.forEach(ni=>{const Ni=Jt.fromSegments(ni.documentKey);v.has(Ni)||(v=v.add(Ni),A.push(Ni))})}))}).next(()=>A)}return Je.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,c,p,v,A){const $=(null!=t?t.length:1)*Math.max(o.length,p.length),K=$/(null!=t?t.length:1),se=[];for(let be=0;be<$;++be){const et=t?this.on(t[be/K]):u,Et=this.un(e,et,o[be%K],c),Dt=this.cn(e,et,p[be%K],v),rn=A.map(An=>this.un(e,et,An,!0));se.push(...this.createRange(Et,Dt,rn))}return se}un(e,t,o,c){const p=new Ol(e,Jt.empty(),t,o);return c?p:p.Ke()}cn(e,t,o,c){const p=new Ol(e,Jt.empty(),t,o);return c?p.Ke():p}en(e,t){const o=new Tf(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(p=>{let v=null;for(const A of p)o.We(A)&&(!v||A.fields.length>v.fields.length)&&(v=A);return v})}getIndexType(e,t){let o=2;return Je.forEach(this.tn(t),c=>this.en(e,c).next(p=>{p?0!==o&&p.fields.length<function(v){let A=new Nt(Si.comparator),$=!1;for(const K of v.filters){const se=K;se.field.isKeyField()||("array-contains"===se.op||"array-contains-any"===se.op?$=!0:A=A.add(se.field))}for(const K of v.orderBy)K.field.isKeyField()||(A=A.add(K.field));return A.size+($?1:0)}(c)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new xc;for(const c of so(e)){const p=t.data.field(c.fieldPath);if(null==p)return null;const v=o.qe(c.kind);Ac.Te.ce(p,v)}return o.$e()}on(e){const t=new xc;return Ac.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new xc;return Ac.Te.ce(ta(this.databaseId,t),o.qe(function(c){const p=so(c);return 0===p.length?0:p[p.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let c=[];c.push(new xc);let p=0;for(const v of so(e)){const A=o[p++];for(const $ of c)if(this.ln(t,v.fieldPath)&&Ca(A))c=this.fn(c,v,A);else{const K=$.qe(v.kind);Ac.Te.ce(A,K)}}return this.dn(c)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const c=[...e],p=[];for(const v of o.arrayValue.values||[])for(const A of c){const $=new xc;$.seed(A.$e()),Ac.Te.ce(v,$.qe(t.kind)),p.push($)}return p}ln(e,t){return!!e.filters.find(o=>o instanceof vs&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=x(e),c=B(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(p=>{const v=[];return Je.forEach(p,A=>c.get([A.indexId,this.uid]).next($=>{v.push(function(K,se){const be=se?new Na(se.sequenceNumber,new Qi(Rl(se.readTime),new Jt(Cu(se.documentKey)),se.largestBatchId)):Na.empty(),et=K.fields.map(([Et,Dt])=>new qu(Si.fromServerFormat(Et),Dt));return new Ia(K.indexId,K.collectionGroup,et,be)}(A,$))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,c)=>{const p=o.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==p?p:Hn(o.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const c=x(e),p=B(e);return this._n(e).next(v=>c.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(A=>Je.forEach(A,$=>p.put(Th($.indexId,this.user,v,o)))))}updateIndexEntries(e,t){const o=new Map;return Je.forEach(t,(c,p)=>{const v=o.get(c.collectionGroup);return(v?Je.resolve(v):this.getFieldIndexes(e,c.collectionGroup)).next(A=>(o.set(c.collectionGroup,A),Je.forEach(A,$=>this.wn(e,c,$).next(K=>{const se=this.mn(p,$);return K.isEqual(se)?Je.resolve():this.gn(e,p,$,K,se)}))))})}yn(e,t,o,c){return C(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,c){return C(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const c=C(e);let p=new Nt(oc);return c.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(v,A)=>{p=p.add(new Ol(o.indexId,t,A.arrayValue,A.directionalValue))}).next(()=>p)}mn(e,t){let o=new Nt(oc);const c=this.an(t,e);if(null==c)return o;const p=Mu(t);if(null!=p){const v=e.data.field(p.fieldPath);if(Ca(v))for(const A of v.arrayValue.values||[])o=o.add(new Ol(t.indexId,e.key,this.on(A),c))}else o=o.add(new Ol(t.indexId,e.key,u,c));return o}gn(e,t,o,c,p){Ot("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const v=[];return function(A,$,K,se,be){const et=A.getIterator(),Et=$.getIterator();let Dt=Li(et),rn=Li(Et);for(;Dt||rn;){let An=!1,li=!1;if(Dt&&rn){const Bi=K(Dt,rn);Bi<0?li=!0:Bi>0&&(An=!0)}else null!=Dt?li=!0:An=!0;An?(se(rn),rn=Li(Et)):li?(be(Dt),Dt=Li(et)):(Dt=Li(et),rn=Li(Et))}}(c,p,oc,A=>{v.push(this.yn(e,t,o,A))},A=>{v.push(this.pn(e,t,o,A))}),Je.waitFor(v)}_n(e){let t=1;return B(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,c,p)=>{p.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((v,A)=>oc(v,A)).filter((v,A,$)=>!A||0!==oc(v,$[A-1]));const c=[];c.push(e);for(const v of o){const A=oc(v,e),$=oc(v,t);if(0===A)c[0]=e.Ke();else if(A>0&&$<0)c.push(v),c.push(v.Ke());else if($>0)break}c.push(t);const p=[];for(let v=0;v<c.length;v+=2)p.push(IDBKeyRange.bound([c[v].indexId,this.uid,c[v].arrayValue,c[v].directionalValue,u,[]],[c[v+1].indexId,this.uid,c[v+1].arrayValue,c[v+1].directionalValue,u,[]]));return p}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ee)}getMinOffset(e,t){return Je.mapArray(this.tn(t),o=>this.en(e,o).next(c=>c||cn())).next(ee)}}function g(i){return mi(i,"collectionParents")}function C(i){return mi(i,"indexEntries")}function x(i){return mi(i,"indexConfiguration")}function B(i){return mi(i,"indexState")}function ee(i){Un(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const c=i[o].indexState.offset;Js(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new Qi(e.readTime,e.documentKey,t)}const ue={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class we{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new we(e,we.DEFAULT_COLLECTION_PERCENTILE,we.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dt(i,e,t){const o=i.store("mutations"),c=i.store("documentMutations"),p=[],v=IDBKeyRange.only(t.batchId);let A=0;const $=o.Z({range:v},(se,be,et)=>(A++,et.delete()));p.push($.next(()=>{Un(1===A)}));const K=[];for(const se of t.mutations){const be=wh(e,se.key.path,t.batchId);p.push(c.delete(be)),K.push(se.key)}return Je.waitFor(p).next(()=>K)}function ft(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw cn();e=i.noDocument}return JSON.stringify(e).length}we.DEFAULT_COLLECTION_PERCENTILE=10,we.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,we.DEFAULT=new we(41943040,we.DEFAULT_COLLECTION_PERCENTILE,we.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),we.DISABLED=new we(-1,0,0);class wt{constructor(e,t,o,c){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=c,this.In={}}static oe(e,t,o,c){Un(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new wt(p,t,o,c)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dn(e).Z({index:"userMutationsIndex",range:o},(c,p,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,o,c){const p=Lr(e),v=Dn(e);return v.add({}).next(A=>{Un("number"==typeof A);const $=new xl(A,t,o,c),K=function(et,Et,Dt){const rn=Dt.baseMutations.map(li=>Fn(et.re,li)),An=Dt.mutations.map(li=>Fn(et.re,li));return{userId:Et,batchId:Dt.batchId,localWriteTimeMs:Dt.localWriteTime.toMillis(),baseMutations:rn,mutations:An}}(this.It,this.userId,$),se=[];let be=new Nt((et,Et)=>Hn(et.canonicalString(),Et.canonicalString()));for(const et of c){const Et=wh(this.userId,et.key.path,A);be=be.add(et.key.path.popLast()),se.push(v.put(K)),se.push(p.put(Et,_f))}return be.forEach(et=>{se.push(this.indexManager.addToCollectionParentIndex(e,et))}),e.addOnCommittedListener(()=>{this.In[A]=$.keys()}),Je.waitFor(se).next(()=>$)})}lookupMutationBatch(e,t){return Dn(e).get(t).next(o=>o?(Un(o.userId===this.userId),Nl(this.It,o)):null)}Tn(e,t){return this.In[t]?Je.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const c=o.keys();return this.In[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,c=IDBKeyRange.lowerBound([this.userId,o]);let p=null;return Dn(e).Z({index:"userMutationsIndex",range:c},(v,A,$)=>{A.userId===this.userId&&(Un(A.batchId>=o),p=Nl(this.It,A)),$.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Dn(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(c,p,v)=>{o=p.batchId,v.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dn(e).W("userMutationsIndex",t).next(o=>o.map(c=>Nl(this.It,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Gd(this.userId,t.path),c=IDBKeyRange.lowerBound(o),p=[];return Lr(e).Z({range:c},(v,A,$)=>{const[K,se,be]=v,et=Cu(se);if(K===this.userId&&t.path.isEqual(et))return Dn(e).get(be).next(Et=>{if(!Et)throw cn();Un(Et.userId===this.userId),p.push(Nl(this.It,Et))});$.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Nt(Hn);const c=[];return t.forEach(p=>{const v=Gd(this.userId,p.path),A=IDBKeyRange.lowerBound(v),$=Lr(e).Z({range:A},(K,se,be)=>{const[et,Et,Dt]=K,rn=Cu(Et);et===this.userId&&p.path.isEqual(rn)?o=o.add(Dt):be.done()});c.push($)}),Je.waitFor(c).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,c=o.length+1,p=Gd(this.userId,o),v=IDBKeyRange.lowerBound(p);let A=new Nt(Hn);return Lr(e).Z({range:v},($,K,se)=>{const[be,et,Et]=$,Dt=Cu(et);be===this.userId&&o.isPrefixOf(Dt)?Dt.length===c&&(A=A.add(Et)):se.done()}).next(()=>this.En(e,A))}En(e,t){const o=[],c=[];return t.forEach(p=>{c.push(Dn(e).get(p).next(v=>{if(null===v)throw cn();Un(v.userId===this.userId),o.push(Nl(this.It,v))}))}),Je.waitFor(c).next(()=>o)}removeMutationBatch(e,t){return dt(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Je.forEach(o,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Je.resolve();const o=IDBKeyRange.lowerBound([this.userId]),c=[];return Lr(e).Z({range:o},(p,v,A)=>{if(p[0]===this.userId){const $=Cu(p[1]);c.push($)}else A.done()}).next(()=>{Un(0===c.length)})})}containsKey(e,t){return dn(e,this.userId,t)}Rn(e){return Ws(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function dn(i,e,t){const o=Gd(e,t.path),c=o[1],p=IDBKeyRange.lowerBound(o);let v=!1;return Lr(i).Z({range:p,X:!0},(A,$,K)=>{const[se,be,et]=A;se===e&&be===c&&(v=!0),K.done()}).next(()=>v)}function Dn(i){return mi(i,"mutations")}function Lr(i){return mi(i,"documentMutations")}function Ws(i){return mi(i,"mutationQueues")}class jo{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new jo(0)}static vn(){return new jo(-1)}}class bu{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new jo(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Yt.fromTimestamp(new Br(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(c=>(c.highestListenSequenceNumber=t,o&&(c.lastRemoteSnapshotVersion=o.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.Sn(e,c)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Tu(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(Un(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let c=0;const p=[];return Tu(e).Z((v,A)=>{const $=ic(A);$.sequenceNumber<=t&&null===o.get($.targetId)&&(c++,p.push(this.removeTargetData(e,$)))}).next(()=>Je.waitFor(p)).next(()=>c)}forEachTarget(e,t){return Tu(e).Z((o,c)=>{const p=ic(c);t(p)})}Vn(e){return Sf(e).get("targetGlobalKey").next(t=>(Un(null!==t),t))}Sn(e,t){return Sf(e).put("targetGlobalKey",t)}Dn(e,t){return Tu(e).put(bh(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Nu(t),c=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let p=null;return Tu(e).Z({range:c,index:"queryTargetsIndex"},(v,A,$)=>{const K=ic(A);wc(t,K.target)&&(p=K,$.done())}).next(()=>p)}addMatchingKeys(e,t,o){const c=[],p=ac(e);return t.forEach(v=>{const A=aa(v.path);c.push(p.put({targetId:o,path:A})),c.push(this.referenceDelegate.addReference(e,o,v))}),Je.waitFor(c)}removeMatchingKeys(e,t,o){const c=ac(e);return Je.forEach(t,p=>{const v=aa(p.path);return Je.waitFor([c.delete([o,v]),this.referenceDelegate.removeReference(e,o,p)])})}removeMatchingKeysForTargetId(e,t){const o=ac(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(c)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),c=ac(e);let p=er();return c.Z({range:o,X:!0},(v,A,$)=>{const K=Cu(v[1]),se=new Jt(K);p=p.add(se)}).next(()=>p)}containsKey(e,t){const o=aa(t.path),c=IDBKeyRange.bound([o],[Lo(o)],!1,!0);let p=0;return ac(e).Z({index:"documentTargetsIndex",X:!0,range:c},([v,A],$,K)=>{0!==v&&(p++,K.done())}).next(()=>p>0)}se(e,t){return Tu(e).get(t).next(o=>o?ic(o):null)}}function Tu(i){return mi(i,"targets")}function Sf(i){return mi(i,"targetGlobal")}function ac(i){return mi(i,"targetDocuments")}function Up([i,e],[t,o]){const c=Hn(i,t);return 0===c?Hn(e,o):c}class hd{constructor(e){this.xn=e,this.buffer=new Nt(Up),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Up(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nm{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Ot("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ne.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){lo(o)?Ot("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Xs(o)}yield t.Fn(3e5)}))}}class rm{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return Je.resolve(V.at);const o=new hd(t);return this.$n.forEachTarget(e,c=>o.Mn(c.sequenceNumber)).next(()=>this.$n.Ln(e,c=>o.Mn(c))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ot("LruGarbageCollector","Garbage collection skipped; disabled"),Je.resolve(ue)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ue):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,c,p,v,A,$,K;const se=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(be=>(be>this.params.maximumSequenceNumbersToCollect?(Ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${be}`),c=this.params.maximumSequenceNumbersToCollect):c=be,v=Date.now(),this.nthSequenceNumber(e,c))).next(be=>(o=be,A=Date.now(),this.removeTargets(e,o,t))).next(be=>(p=be,$=Date.now(),this.removeOrphanedDocuments(e,o))).next(be=>(K=Date.now(),$a()<=st.in.DEBUG&&Ot("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-se}ms\n\tDetermined least recently used ${c} in `+(A-v)+`ms\n\tRemoved ${p} targets in `+($-A)+`ms\n\tRemoved ${be} documents in `+(K-$)+`ms\nTotal Duration: ${K-se}ms`),Je.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:p,documentsRemoved:be})))}}class n_{constructor(e,t){this.db=e,this.garbageCollector=new rm(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(c=>o+c))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,c)=>t(c))}addReference(e,t,o){return Bp(e,o)}removeReference(e,t,o){return Bp(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Bp(e,t)}Gn(e,t){return function(o,c){let p=!1;return Ws(o).tt(v=>dn(o,v,c).next(A=>(A&&(p=!0),Je.resolve(!A)))).next(()=>p)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let p=0;return this.Kn(e,(v,A)=>{if(A<=t){const $=this.Gn(e,v).next(K=>{if(!K)return p++,o.getEntry(e,v).next(()=>(o.removeEntry(v,Yt.min()),ac(e).delete([0,aa(v.path)])))});c.push($)}}).next(()=>Je.waitFor(c)).next(()=>o.apply(e)).next(()=>p)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Bp(e,t)}Kn(e,t){const o=ac(e);let c,p=V.at;return o.Z({index:"documentTargetsIndex"},([v,A],{path:$,sequenceNumber:K})=>{0===v?(p!==V.at&&t(new Jt(Cu(c)),p),p=K,c=$):p=V.at}).next(()=>{p!==V.at&&t(new Jt(Cu(c)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Bp(i,e){return ac(i).put((o=i.currentSequenceNumber,{targetId:0,path:aa(e.path),sequenceNumber:o}));var o}class Mh{constructor(){this.changes=new au(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ti.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?Je.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class r_{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return uc(e).put(o)}removeEntry(e,t,o){return uc(e).delete(function(c,p){const v=c.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],ld(p),v[v.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=ti.newInvalidDocument(t);return uc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Kd(t))},(c,p)=>{o=this.jn(t,p)}).next(()=>o)}Wn(e,t){let o={size:0,document:ti.newInvalidDocument(t)};return uc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Kd(t))},(c,p)=>{o={document:this.jn(t,p),size:ft(p)}}).next(()=>o)}getEntries(e,t){let o=po();return this.zn(e,t,(c,p)=>{const v=this.jn(c,p);o=o.insert(c,v)}).next(()=>o)}Hn(e,t){let o=po(),c=new Ze(Jt.comparator);return this.zn(e,t,(p,v)=>{const A=this.jn(p,v);o=o.insert(p,A),c=c.insert(p,ft(v))}).next(()=>({documents:o,Jn:c}))}zn(e,t,o){if(t.isEmpty())return Je.resolve();let c=new Nt(Nh);t.forEach($=>c=c.add($));const p=IDBKeyRange.bound(Kd(c.first()),Kd(c.last())),v=c.getIterator();let A=v.getNext();return uc(e).Z({index:"documentKeyIndex",range:p},($,K,se)=>{const be=Jt.fromSegments([...K.prefixPath,K.collectionGroup,K.documentId]);for(;A&&Nh(A,be)<0;)o(A,null),A=v.getNext();A&&A.isEqual(be)&&(o(A,K),A=v.hasNext()?v.getNext():null),A?se.j(Kd(A)):se.done()}).next(()=>{for(;A;)o(A,null),A=v.hasNext()?v.getNext():null})}getAllFromCollection(e,t,o){const c=[t.popLast().toArray(),t.lastSegment(),ld(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],p=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return uc(e).W(IDBKeyRange.bound(c,p,!0)).next(v=>{let A=po();for(const $ of v){const K=this.jn(Jt.fromSegments($.prefixPath.concat($.collectionGroup,$.documentId)),$);A=A.insert(K.key,K)}return A})}getAllFromCollectionGroup(e,t,o,c){let p=po();const v=Rh(t,o),A=Rh(t,Qi.max());return uc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,A,!0)},($,K,se)=>{const be=this.jn(Jt.fromSegments(K.prefixPath.concat(K.collectionGroup,K.documentId)),K);p=p.insert(be.key,be),p.size===c&&se.done()}).next(()=>p)}newChangeBuffer(e){return new im(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Hp(e).get("remoteDocumentGlobalKey").next(t=>(Un(!!t),t))}Qn(e,t){return Hp(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function Ml(i,e){let t;if(e.document)t=ut(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Jt.fromSegments(e.noDocument.path),c=Rl(e.noDocument.readTime);t=ti.newNoDocument(o,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return cn();{const o=Jt.fromSegments(e.unknownDocument.path),c=Rl(e.unknownDocument.version);t=ti.newUnknownDocument(o,c)}}return e.readTime&&t.setReadTime(function(o){const c=new Br(o[0],o[1]);return Yt.fromTimestamp(c)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(Yt.min()))return o}return ti.newInvalidDocument(e)}}function jp(i){return new r_(i)}class im extends Mh{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new au(o=>o.toString(),(o,c)=>o.isEqual(c))}applyChanges(e){const t=[];let o=0,c=new Nt((p,v)=>Hn(p.canonicalString(),v.canonicalString()));return this.changes.forEach((p,v)=>{const A=this.Xn.get(p);if(t.push(this.Yn.removeEntry(e,p,A.readTime)),v.isValidDocument()){const $=Cf(this.Yn.It,v);c=c.add(p.path.popLast()),o+=ft($)-A.size,t.push(this.Yn.addEntry(e,p,$))}else if(o-=A.size,this.trackRemovals){const $=Cf(this.Yn.It,v.convertToNoDocument(Yt.min()));t.push(this.Yn.addEntry(e,p,$))}}),c.forEach(p=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,p))}),t.push(this.Yn.updateMetadata(e,o)),Je.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:c})=>(c.forEach((p,v)=>{this.Xn.set(p,{size:v,readTime:o.get(p).readTime})}),o))}}function Hp(i){return mi(i,"remoteDocumentGlobal")}function uc(i){return mi(i,"remoteDocumentsV14")}function Kd(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Rh(i,e){const t=e.documentKey.path.toArray();return[i,ld(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Nh(i,e){const t=i.path.toArray(),o=e.path.toArray();let c=0;for(let p=0;p<t.length-2&&p<o.length-2;++p)if(c=Hn(t[p],o[p]),c)return c;return c=Hn(t.length,o.length),c||(c=Hn(t[t.length-2],o[o.length-2]),c||Hn(t[t.length-1],o[o.length-1]))}class sm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Af{constructor(e,t,o,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=c}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(o=c,this.getBaseDocument(e,t,o))).next(c=>(null!==o&&Ii(o.mutation,c,Ci.empty(),Br.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,er()).next(()=>o))}getLocalViewOfDocuments(e,t,o=er()){const c=Bo();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,o).next(p=>{let v=ba();return p.forEach((A,$)=>{v=v.insert(A,$.overlayedDocument)}),v}))}getOverlayedDocuments(e,t){const o=Bo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,er()))}populateOverlays(e,t,o){const c=[];return o.forEach(p=>{t.has(p)||c.push(p)}),this.documentOverlayCache.getOverlays(e,c).next(p=>{p.forEach((v,A)=>{t.set(v,A)})})}computeViews(e,t,o,c){let p=po();const v=uu(),A=uu();return t.forEach(($,K)=>{const se=o.get(K.key);c.has(K.key)&&(void 0===se||se.mutation instanceof Uo)?p=p.insert(K.key,K):void 0!==se&&(v.set(K.key,se.mutation.getFieldMask()),Ii(se.mutation,K,se.mutation.getFieldMask(),Br.now()))}),this.recalculateAndSaveOverlays(e,p).next($=>($.forEach((K,se)=>v.set(K,se)),t.forEach((K,se)=>{var be;return A.set(K,new sm(se,null!==(be=v.get(K))&&void 0!==be?be:null))}),A))}recalculateAndSaveOverlays(e,t){const o=uu();let c=new Ze((v,A)=>v-A),p=er();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(v=>{for(const A of v)A.keys().forEach($=>{const K=t.get($);if(null===K)return;let se=o.get($)||Ci.empty();se=A.applyToLocalView(K,se),o.set($,se);const be=(c.get(A.batchId)||er()).add($);c=c.insert(A.batchId,be)})}).next(()=>{const v=[],A=c.getReverseIterator();for(;A.hasNext();){const $=A.getNext(),K=$.key,se=$.value,be=Jl();se.forEach(et=>{if(!p.has(et)){const Et=el(t.get(et),o.get(et));null!==Et&&be.set(et,Et),p=p.add(et)}}),v.push(this.documentOverlayCache.saveOverlays(e,K,be))}return Je.waitFor(v)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Jt.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):zl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var c}getNextDocuments(e,t,o,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,c).next(p=>{const v=c-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,c-p.size):Je.resolve(Bo());let A=-1,$=p;return v.next(K=>Je.forEach(K,(se,be)=>(A<be.largestBatchId&&(A=be.largestBatchId),p.get(se)?Je.resolve():this.getBaseDocument(e,se,be).next(et=>{$=$.insert(se,et)}))).next(()=>this.populateOverlays(e,K,p)).next(()=>this.computeViews(e,$,K,er())).next(se=>({batchId:A,changes:bo(se)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Jt(t)).next(o=>{let c=ba();return o.isFoundDocument()&&(c=c.insert(o.key,o)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const c=t.collectionGroup;let p=ba();return this.indexManager.getCollectionParents(e,c).next(v=>Je.forEach(v,A=>{const $=(K=t,se=A.child(c),new sa(se,null,K.explicitOrderBy.slice(),K.filters.slice(),K.limit,K.limitType,K.startAt,K.endAt));var K,se;return this.getDocumentsMatchingCollectionQuery(e,$,o).next(K=>{K.forEach((se,be)=>{p=p.insert(se,be)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,t,o){let c;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(p=>(c=p,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(p=>{p.forEach((A,$)=>{const K=$.getKey();null===c.get(K)&&(c=c.insert(K,ti.newInvalidDocument(K)))});let v=ba();return c.forEach((A,$)=>{const K=p.get(A);void 0!==K&&Ii(K.mutation,$,Ci.empty(),Br.now()),Kl(t,$)&&(v=v.insert(A,$))}),v})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):Je.resolve(ti.newInvalidDocument(t))}}class om{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Je.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:xs(o.createTime)}),Je.resolve()}getNamedQuery(e,t){return Je.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:zd(o.bundledQuery),readTime:xs(o.readTime)}),Je.resolve();var o}}class $p{constructor(){this.overlays=new Ze(Jt.comparator),this.es=new Map}getOverlay(e,t){return Je.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Bo();return Je.forEach(t,c=>this.getOverlay(e,c).next(p=>{null!==p&&o.set(c,p)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((c,p)=>{this.ue(e,t,p)}),Je.resolve()}removeOverlaysForBatchId(e,t,o){const c=this.es.get(o);return void 0!==c&&(c.forEach(p=>this.overlays=this.overlays.remove(p)),this.es.delete(o)),Je.resolve()}getOverlaysForCollection(e,t,o){const c=Bo(),p=t.length+1,v=new Jt(t.child("")),A=this.overlays.getIteratorFrom(v);for(;A.hasNext();){const $=A.getNext().value,K=$.getKey();if(!t.isPrefixOf(K.path))break;K.path.length===p&&$.largestBatchId>o&&c.set($.getKey(),$)}return Je.resolve(c)}getOverlaysForCollectionGroup(e,t,o,c){let p=new Ze((K,se)=>K-se);const v=this.overlays.getIterator();for(;v.hasNext();){const K=v.getNext().value;if(K.getKey().getCollectionGroup()===t&&K.largestBatchId>o){let se=p.get(K.largestBatchId);null===se&&(se=Bo(),p=p.insert(K.largestBatchId,se)),se.set(K.getKey(),K)}}const A=Bo(),$=p.getIterator();for(;$.hasNext()&&($.getNext().value.forEach((K,se)=>A.set(K,se)),!(A.size()>=c)););return Je.resolve(A)}ue(e,t,o){const c=this.overlays.get(o.key);if(null!==c){const v=this.es.get(c.largestBatchId).delete(o.key);this.es.set(c.largestBatchId,v)}this.overlays=this.overlays.insert(o.key,new To(t,o));let p=this.es.get(t);void 0===p&&(p=er(),this.es.set(t,p)),this.es.set(t,p.add(o.key))}}class fd{constructor(){this.ns=new Nt(ua.ss),this.rs=new Nt(ua.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new ua(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new ua(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new Jt(new Or([])),o=new ua(t,e),c=new ua(t,e+1),p=[];return this.rs.forEachInRange([o,c],v=>{this.cs(v),p.push(v.key)}),p}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Jt(new Or([])),o=new ua(t,e),c=new ua(t,e+1);let p=er();return this.rs.forEachInRange([o,c],v=>{p=p.add(v.key)}),p}containsKey(e){const t=new ua(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class ua{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Jt.comparator(e.key,t.key)||Hn(e._s,t._s)}static os(e,t){return Hn(e._s,t._s)||Jt.comparator(e.key,t.key)}}class am{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Nt(ua.ss)}checkEmpty(e){return Je.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,c){const p=this.ws;this.ws++;const v=new xl(p,t,o,c);this.mutationQueue.push(v);for(const A of c)this.gs=this.gs.add(new ua(A.key,p)),this.indexManager.addToCollectionParentIndex(e,A.key.path.popLast());return Je.resolve(v)}lookupMutationBatch(e,t){return Je.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.ps(t+1),p=c<0?0:c;return Je.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return Je.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new ua(t,0),c=new ua(t,Number.POSITIVE_INFINITY),p=[];return this.gs.forEachInRange([o,c],v=>{const A=this.ys(v._s);p.push(A)}),Je.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Nt(Hn);return t.forEach(c=>{const p=new ua(c,0),v=new ua(c,Number.POSITIVE_INFINITY);this.gs.forEachInRange([p,v],A=>{o=o.add(A._s)})}),Je.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,c=o.length+1;let p=o;Jt.isDocumentKey(p)||(p=p.child(""));const v=new ua(new Jt(p),0);let A=new Nt(Hn);return this.gs.forEachWhile($=>{const K=$.key.path;return!!o.isPrefixOf(K)&&(K.length===c&&(A=A.add($._s)),!0)},v),Je.resolve(this.Is(A))}Is(e){const t=[];return e.forEach(o=>{const c=this.ys(o);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){Un(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return Je.forEach(t.mutations,c=>{const p=new ua(c.key,t.batchId);return o=o.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new ua(t,0),c=this.gs.firstAfterOrEqual(o);return Je.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return Je.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class i_{constructor(e){this.Es=e,this.docs=new Ze(Jt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,c=this.docs.get(o),p=c?c.size:0,v=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:v}),this.size+=v-p,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return Je.resolve(o?o.document.mutableCopy():ti.newInvalidDocument(t))}getEntries(e,t){let o=po();return t.forEach(c=>{const p=this.docs.get(c);o=o.insert(c,p?p.document.mutableCopy():ti.newInvalidDocument(c))}),Je.resolve(o)}getAllFromCollection(e,t,o){let c=po();const p=new Jt(t.child("")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:A,value:{document:$}}=v.getNext();if(!t.isPrefixOf(A.path))break;A.path.length>t.length+1||Js(jl($),o)<=0||(c=c.insert($.key,$.mutableCopy()))}return Je.resolve(c)}getAllFromCollectionGroup(e,t,o,c){cn()}As(e,t){return Je.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new s_(this)}getSize(e){return Je.resolve(this.size)}}class s_ extends Mh{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,c)=>{c.isValidDocument()?t.push(this.Yn.addEntry(e,c)):this.Yn.removeEntry(o)}),Je.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class um{constructor(e){this.persistence=e,this.Rs=new au(t=>Nu(t),wc),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new fd,this.targetCount=0,this.vs=jo.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,c)=>t(c)),Je.resolve()}getLastRemoteSnapshotVersion(e){return Je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Je.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),Je.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Je.resolve()}updateTargetData(e,t){return this.Dn(t),Je.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Je.resolve()}removeTargets(e,t,o){let c=0;const p=[];return this.Rs.forEach((v,A)=>{A.sequenceNumber<=t&&null===o.get(A.targetId)&&(this.Rs.delete(v),p.push(this.removeMatchingKeysForTargetId(e,A.targetId)),c++)}),Je.waitFor(p).next(()=>c)}getTargetCount(e){return Je.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return Je.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),Je.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const c=this.persistence.referenceDelegate,p=[];return c&&t.forEach(v=>{p.push(c.markPotentiallyOrphaned(e,v))}),Je.waitFor(p)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Je.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return Je.resolve(o)}containsKey(e,t){return Je.resolve(this.Ps.containsKey(t))}}class xf{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new V(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new um(this),this.indexManager=new Vp,this.remoteDocumentCache=new i_(o=>this.referenceDelegate.xs(o)),this.It=new Wd(t),this.Ns=new om(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $p,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new am(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){Ot("MemoryPersistence","Starting transaction:",e);const c=new lm(this.Ss.next());return this.referenceDelegate.ks(),o(c).next(p=>this.referenceDelegate.Ms(c).next(()=>p)).toPromise().then(p=>(c.raiseOnCommittedEvent(),p))}Os(e,t){return Je.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class lm extends Zu{constructor(e){super(),this.currentSequenceNumber=e}}class Gp{constructor(e){this.persistence=e,this.Fs=new fd,this.$s=null}static Bs(e){return new Gp(e)}get Ls(){if(this.$s)return this.$s;throw cn()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),Je.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),Je.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Je.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(c=>this.Ls.add(c.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(p=>this.Ls.add(p.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Je.forEach(this.Ls,o=>{const c=Jt.fromPath(o);return this.Us(e,c).next(p=>{p||t.removeEntry(c,Yt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return Je.or([()=>Je.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class cm{constructor(e){this.It=e}$(e,t,o,c){const p=new Ru("createOrUpgrade",t);var A;o<1&&c>=1&&(e.createObjectStore("owner"),(A=e).createObjectStore("mutationQueues",{keyPath:"userId"}),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$d,{unique:!0}),A.createObjectStore("documentMutations"),dm(e),function(A){A.createObjectStore("remoteDocuments")}(e));let v=Je.resolve();return o<3&&c>=3&&(0!==o&&(function(A){A.deleteObjectStore("targetDocuments"),A.deleteObjectStore("targets"),A.deleteObjectStore("targetGlobal")}(e),dm(e)),v=v.next(()=>function(A){const $=A.store("targetGlobal"),K={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Yt.min().toTimestamp(),targetCount:0};return $.put("targetGlobalKey",K)}(p))),o<4&&c>=4&&(0!==o&&(v=v.next(()=>function(A,$){return $.store("mutations").W().next(K=>{A.deleteObjectStore("mutations"),A.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$d,{unique:!0});const se=$.store("mutations"),be=K.map(et=>se.put(et));return Je.waitFor(be)})}(e,p))),v=v.next(()=>{!function(A){A.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&c>=5&&(v=v.next(()=>this.qs(p))),o<6&&c>=6&&(v=v.next(()=>(function(A){A.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(p)))),o<7&&c>=7&&(v=v.next(()=>this.Gs(p))),o<8&&c>=8&&(v=v.next(()=>this.Qs(e,p))),o<9&&c>=9&&(v=v.next(()=>{!function(A){A.objectStoreNames.contains("remoteDocumentChanges")&&A.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&c>=10&&(v=v.next(()=>this.js(p))),o<11&&c>=11&&(v=v.next(()=>{(function(A){A.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(A){A.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&c>=12&&(v=v.next(()=>{!function(A){const $=A.createObjectStore("documentOverlays",{keyPath:kp});$.createIndex("collectionPathOverlayIndex",Ch,{unique:!1}),$.createIndex("collectionGroupOverlayIndex",wf,{unique:!1})}(e)})),o<13&&c>=13&&(v=v.next(()=>function(A){const $=A.createObjectStore("remoteDocumentsV14",{keyPath:Eh});$.createIndex("documentKeyIndex",Mp),$.createIndex("collectionGroupIndex",Ih)}(e)).next(()=>this.Ws(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&c>=14&&(v=v.next(()=>this.zs(e,p))),o<15&&c>=15&&(v=v.next(()=>function(A){A.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),A.createObjectStore("indexState",{keyPath:vf}).createIndex("sequenceNumberIndex",em,{unique:!1}),A.createObjectStore("indexEntries",{keyPath:tm}).createIndex("documentKeyIndex",Pp,{unique:!1})}(e))),v}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,c)=>{t+=ft(c)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(c=>Je.forEach(c,p=>{const v=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",v).next(A=>Je.forEach(A,$=>{Un($.userId===p.userId);const K=Nl(this.It,$);return dt(e,p.userId,K).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const p=[];return o.Z((v,A)=>{const $=new Or(v),K=[0,aa($)];p.push(t.get(K).next(se=>se?Je.resolve():t.put({targetId:0,path:aa($),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>Je.waitFor(p))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Op});const o=t.store("collectionParents"),c=new d,p=v=>{if(c.add(v)){const A=v.lastSegment(),$=v.popLast();return o.put({collectionId:A,parent:aa($)})}};return t.store("remoteDocuments").Z({X:!0},(v,A)=>{const $=new Or(v);return p($.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([v,A,$],K)=>{const se=Cu(A);return p(se.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,c)=>{const p=ic(c),v=bh(this.It,p);return t.put(v)})}Ws(e,t){const o=t.store("remoteDocuments"),c=[];return o.Z((p,v)=>{const A=t.store("remoteDocumentsV14"),$=(K=v,K.document?new Jt(Or.fromString(K.document.name).popFirst(5)):K.noDocument?Jt.fromSegments(K.noDocument.path):K.unknownDocument?Jt.fromSegments(K.unknownDocument.path):cn()).path.toArray();var K;const se={prefixPath:$.slice(0,$.length-2),collectionGroup:$[$.length-2],documentId:$[$.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};c.push(A.put(se))}).next(()=>Je.waitFor(c))}zs(e,t){const o=t.store("mutations"),c=jp(this.It),p=new xf(Gp.Bs,this.It.re);return o.W().next(v=>{const A=new Map;return v.forEach($=>{var K;let se=null!==(K=A.get($.userId))&&void 0!==K?K:er();Nl(this.It,$).keys().forEach(be=>se=se.add(be)),A.set($.userId,se)}),Je.forEach(A,($,K)=>{const se=new zr(K),be=cd.oe(this.It,se),et=p.getIndexManager(se),Et=wt.oe(se,this.It,et,p.referenceDelegate);return new Af(c,Et,be,et).recalculateAndSaveOverlaysForDocumentKeys(new ai(t,V.at),$).next()})})}}function dm(i){i.createObjectStore("targetDocuments",{keyPath:Rp}).createIndex("documentTargetsIndex",Np,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ad,{unique:!0}),i.createObjectStore("targetGlobal")}const Mf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wp{constructor(e,t,o,c,p,v,A,$,K,se,be=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=p,this.window=v,this.document=A,this.Js=K,this.Ys=se,this.Xs=be,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=et=>Promise.resolve(),!Wp.C())throw new xt(ot.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new n_(this,c),this.ii=t+"main",this.It=new Wd($),this.ri=new ao(this.ii,this.Xs,new cm(this.It)),this.Cs=new bu(this.referenceDelegate,this.It),this.remoteDocumentCache=jp(this.It),this.Ns=new Sc,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===se&&ei("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xt(ot.FAILED_PRECONDITION,Mf);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new V(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,Ne.Z)(function*(c){if(t.started)return e(c)});return function(c){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ne.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ne.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(lo(e))return Ot("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ot("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Oh(e).get("owner").next(t=>Je.resolve(this.mi(t)))}gi(e){return cu(e).delete(this.clientId)}yi(){var e=this;return(0,Ne.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const c=mi(o,"clientMetadata");return c.W().next(p=>{const v=e.Ii(p,18e5),A=p.filter($=>-1===v.indexOf($));return Je.forEach(A,$=>c.delete($.clientId)).next(()=>A)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Je.resolve(!0):Oh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new xt(ot.FAILED_PRECONDITION,Mf);return!1}}return!(!this.networkEnabled||!this.inForeground)||cu(e).W().next(o=>void 0===this.Ii(o,5e3).find(c=>{if(this.clientId!==c.clientId){const v=!this.inForeground&&c.inForeground,A=this.networkEnabled===c.networkEnabled;if(!this.networkEnabled&&c.networkEnabled||v&&A)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ot("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ne.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new ai(t,V.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>cu(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return wt.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new l(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return cd.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){Ot("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",p=15===(v=this.Xs)?Al:14===v?If:13===v?Dh:12===v?Fp:11===v?Ef:void cn();var v;let A;return this.ri.runTransaction(e,c,p,$=>(A=new ai($,this.Ss?this.Ss.next():V.at),"readwrite-primary"===t?this.fi(A).next(K=>!!K||this.di(A)).next(K=>{if(!K)throw ei(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new xt(ot.FAILED_PRECONDITION,oo);return o(A)}).next(K=>this.wi(A).next(()=>K)):this.Vi(A).next(()=>o(A)))).then($=>(A.raiseOnCommittedEvent(),$))}Vi(e){return Oh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xt(ot.FAILED_PRECONDITION,Mf)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Oh(e).put("owner",t)}static C(){return ao.C()}_i(e){const t=Oh(e);return t.get("owner").next(o=>this.mi(o)?(Ot("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Je.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(ei(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Ge.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ot("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return ei("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){ei("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Oh(i){return mi(i,"owner")}function cu(i){return mi(i,"clientMetadata")}function zp(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Rf{constructor(e,t,o,c){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=c}static Ci(e,t){let o=er(),c=er();for(const p of t.docChanges)switch(p.type){case 0:o=o.add(p.doc.key);break;case 1:c=c.add(p.doc.key)}return new Rf(e,t.fromCache,o,c)}}class hm{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,c){return this.ki(e,t).next(p=>p||this.Mi(e,t,c,o)).next(p=>p||this.Oi(e,t))}ki(e,t){if(ho(t))return Je.resolve(null);let o=Vi(t);return this.indexManager.getIndexType(e,o).next(c=>0===c?null:(null!==t.limit&&1===c&&(t=Kc(t,null,"F"),o=Vi(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(p=>{const v=er(...p);return this.Ni.getDocuments(e,v).next(A=>this.indexManager.getMinOffset(e,o).next($=>{const K=this.Fi(t,A);return this.$i(t,K,v,$.readTime)?this.ki(e,Kc(t,null,"F")):this.Bi(e,K,t,$)}))})))}Mi(e,t,o,c){return ho(t)||c.isEqual(Yt.min())?this.Oi(e,t):this.Ni.getDocuments(e,o).next(p=>{const v=this.Fi(t,p);return this.$i(t,v,o,c)?this.Oi(e,t):($a()<=st.in.DEBUG&&Ot("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Zc(t)),this.Bi(e,v,t,Wa(c,-1)))})}Fi(e,t){let o=new Nt(Pu(e));return t.forEach((c,p)=>{Kl(e,p)&&(o=o.add(p))}),o}$i(e,t,o,c){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const p="F"===e.limitType?t.last():t.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(c)>0)}Oi(e,t){return $a()<=st.in.DEBUG&&Ot("QueryEngine","Using full collection scan to execute query:",Zc(t)),this.Ni.getDocumentsMatchingQuery(e,t,Qi.min())}Bi(e,t,o,c){return this.Ni.getDocumentsMatchingQuery(e,o,c).next(p=>(t.forEach(v=>{p=p.insert(v.key,v)}),p))}}class o_{constructor(e,t,o,c){this.persistence=e,this.Li=t,this.It=c,this.Ui=new Ze(Hn),this.qi=new au(p=>Nu(p),wc),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Af(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function fm(i,e,t,o){return new o_(i,e,t,o)}function pm(i,e){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,Ne.Z)(function*(i,e){const t=Gt(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let c;return t.mutationQueue.getAllMutationBatches(o).next(p=>(c=p,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(p=>{const v=[],A=[];let $=er();for(const K of c){v.push(K.batchId);for(const se of K.mutations)$=$.add(se.key)}for(const K of p){A.push(K.batchId);for(const se of K.mutations)$=$.add(se.key)}return t.localDocuments.getDocuments(o,$).next(K=>({ji:K,removedBatchIds:v,addedBatchIds:A}))})})}),Nf.apply(this,arguments)}function a_(i,e){const t=Gt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const c=e.batch.keys(),p=t.Gi.newChangeBuffer({trackRemovals:!0});return function(v,A,$,K){const se=$.batch,be=se.keys();let et=Je.resolve();return be.forEach(Et=>{et=et.next(()=>K.getEntry(A,Et)).next(Dt=>{const rn=$.docVersions.get(Et);Un(null!==rn),Dt.version.compareTo(rn)<0&&(se.applyToRemoteDocument(Dt,$),Dt.isValidDocument()&&(Dt.setReadTime($.commitVersion),K.addEntry(Dt)))})}),et.next(()=>v.mutationQueue.removeMutationBatch(A,se))}(t,o,e,p).next(()=>p.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(v){let A=er();for(let $=0;$<v.mutationResults.length;++$)v.mutationResults[$].transformResults.length>0&&(A=A.add(v.batch.mutations[$].key));return A}(e))).next(()=>t.localDocuments.getDocuments(o,c))})}function gm(i){const e=Gt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function u_(i,e){const t=Gt(i),o=e.snapshotVersion;let c=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const v=t.Gi.newChangeBuffer({trackRemovals:!0});c=t.Ui;const A=[];e.targetChanges.forEach((se,be)=>{const et=c.get(be);if(!et)return;A.push(t.Cs.removeMatchingKeys(p,se.removedDocuments,be).next(()=>t.Cs.addMatchingKeys(p,se.addedDocuments,be)));let Et=et.withSequenceNumber(p.currentSequenceNumber);var Dt,rn,An;e.targetMismatches.has(be)?Et=Et.withResumeToken(Fr.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):se.resumeToken.approximateByteSize()>0&&(Et=Et.withResumeToken(se.resumeToken,o)),c=c.insert(be,Et),rn=Et,An=se,(0===(Dt=et).resumeToken.approximateByteSize()||rn.snapshotVersion.toMicroseconds()-Dt.snapshotVersion.toMicroseconds()>=3e8||An.addedDocuments.size+An.modifiedDocuments.size+An.removedDocuments.size>0)&&A.push(t.Cs.updateTargetData(p,Et))});let $=po(),K=er();if(e.documentUpdates.forEach(se=>{e.resolvedLimboDocuments.has(se)&&A.push(t.persistence.referenceDelegate.updateLimboDocument(p,se))}),A.push(Cr(p,v,e.documentUpdates).next(se=>{$=se.Wi,K=se.zi})),!o.isEqual(Yt.min())){const se=t.Cs.getLastRemoteSnapshotVersion(p).next(be=>t.Cs.setTargetsMetadata(p,p.currentSequenceNumber,o));A.push(se)}return Je.waitFor(A).next(()=>v.apply(p)).next(()=>t.localDocuments.getLocalViewOfDocuments(p,$,K)).next(()=>$)}).then(p=>(t.Ui=c,p))}function Cr(i,e,t){let o=er(),c=er();return t.forEach(p=>o=o.add(p)),e.getEntries(i,o).next(p=>{let v=po();return t.forEach((A,$)=>{const K=p.get(A);$.isFoundDocument()!==K.isFoundDocument()&&(c=c.add(A)),$.isNoDocument()&&$.version.isEqual(Yt.min())?(e.removeEntry(A,$.readTime),v=v.insert(A,$)):!K.isValidDocument()||$.version.compareTo(K.version)>0||0===$.version.compareTo(K.version)&&K.hasPendingWrites?(e.addEntry($),v=v.insert(A,$)):Ot("LocalStore","Ignoring outdated watch update for ",A,". Current version:",K.version," Watch version:",$.version)}),{Wi:v,zi:c}})}function mm(i,e){const t=Gt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function pd(i,e){const t=Gt(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let c;return t.Cs.getTargetData(o,e).next(p=>p?(c=p,Je.resolve(c)):t.Cs.allocateTargetId(o).next(v=>(c=new lu(e,v,0,o.currentSequenceNumber),t.Cs.addTargetData(o,c).next(()=>c))))}).then(o=>{const c=t.Ui.get(o.targetId);return(null===c||o.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function gd(i,e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,Ne.Z)(function*(i,e,t){const o=Gt(i),c=o.Ui.get(e),p=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",p,v=>o.persistence.referenceDelegate.removeTarget(v,c)))}catch(v){if(!lo(v))throw v;Ot("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}o.Ui=o.Ui.remove(e),o.qi.delete(c.target)}),Kp.apply(this,arguments)}function Of(i,e,t){const o=Gt(i);let c=Yt.min(),p=er();return o.persistence.runTransaction("Execute query","readonly",v=>function(A,$,K){const se=Gt(A),be=se.qi.get(K);return void 0!==be?Je.resolve(se.Ui.get(be)):se.Cs.getTargetData($,K)}(o,v,Vi(e)).next(A=>{if(A)return c=A.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(v,A.targetId).next($=>{p=$})}).next(()=>o.Li.getDocumentsMatchingQuery(v,e,t?c:Yt.min(),t?p:er())).next(A=>(Zp(o,Ld(e),A),{documents:A,Hi:p})))}function qp(i,e){const t=Gt(i),o=Gt(t.Cs),c=t.Ui.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",p=>o.se(p,e).next(v=>v?v.target:null))}function ym(i,e){const t=Gt(i),o=t.Ki.get(e)||Yt.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.Gi.getAllFromCollectionGroup(c,e,Wa(o,-1),Number.MAX_SAFE_INTEGER)).then(c=>(Zp(t,e,c),c))}function Zp(i,e,t){let o=Yt.min();t.forEach((c,p)=>{p.readTime.compareTo(o)>0&&(o=p.readTime)}),i.Ki.set(e,o)}function Yp(){return Yp=(0,Ne.Z)(function*(i,e,t,o){const c=Gt(i);let p=er(),v=po();for(const K of t){const se=e.Ji(K.metadata.name);K.document&&(p=p.add(se));const be=e.Yi(K);be.setReadTime(e.Xi(K.metadata.readTime)),v=v.insert(se,be)}const A=c.Gi.newChangeBuffer({trackRemovals:!0}),$=yield pd(c,(K=o,Vi(Vo(Or.fromString(`__bundle__/docs/${K}`)))));var K;return c.persistence.runTransaction("Apply bundle documents","readwrite",K=>Cr(K,A,v).next(se=>(A.apply(K),se)).next(se=>c.Cs.removeMatchingKeysForTargetId(K,$.targetId).next(()=>c.Cs.addMatchingKeys(K,p,$.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(K,se.Wi,se.zi)).next(()=>se.Wi)))}),Yp.apply(this,arguments)}function r0(i,e){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,Ne.Z)(function*(i,e,t=er()){const o=yield pd(i,Vi(zd(e.bundledQuery))),c=Gt(i);return c.persistence.runTransaction("Save named query","readwrite",p=>{const v=xs(e.readTime);if(o.snapshotVersion.compareTo(v)>=0)return c.Ns.saveNamedQuery(p,e);const A=o.withResumeToken(Fr.EMPTY_BYTE_STRING,v);return c.Ui=c.Ui.insert(A.targetId,A),c.Cs.updateTargetData(p,A).next(()=>c.Cs.removeMatchingKeysForTargetId(p,o.targetId)).next(()=>c.Cs.addMatchingKeys(p,t,o.targetId)).next(()=>c.Ns.saveNamedQuery(p,e))})}),Pf.apply(this,arguments)}function Qp(i,e){return`firestore_clients_${i}_${e}`}function Rc(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Jp(i,e){return`firestore_targets_${i}_${e}`}class qd{constructor(e,t,o,c){this.user=e,this.batchId=t,this.state=o,this.error=c}static Zi(e,t,o){const c=JSON.parse(o);let p,v="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return v&&c.error&&(v="string"==typeof c.error.message&&"string"==typeof c.error.code,v&&(p=new xt(c.error.code,c.error.message))),v?new qd(e,t,c.state,p):(ei("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class md{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let c,p="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return p&&o.error&&(p="string"==typeof o.error.message&&"string"==typeof o.error.code,p&&(c=new xt(o.error.code,o.error.message))),p?new md(e,o.state,c):(ei("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let c="object"==typeof o&&o.activeTargetIds instanceof Array,p=Eu();for(let v=0;c&&v<o.activeTargetIds.length;++v)c=je(o.activeTargetIds[v]),p=p.add(o.activeTargetIds[v]);return c?new kf(e,p):(ei("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class _m{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new _m(t.clientId,t.onlineState):(ei("SharedClientState",`Failed to parse online state: ${e}`),null)}}class vm{constructor(){this.activeTargetIds=Eu()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wm{constructor(e,t,o,c,p){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ze(Hn),this.started=!1,this.cr=[];const v=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.ar=Qp(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new vm),this.lr=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(A){return`firestore_bundle_loaded_v2_${A}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ne.Z)(function*(){const t=yield e.syncEngine.vi();for(const c of t){if(c===e.sr)continue;const p=e.getItem(Qp(e.persistenceKey,c));if(p){const v=kf.Zi(c,p);v&&(e.ur=e.ur.insert(v.clientId,v))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const c=e.yr(o);c&&e.pr(c)}for(const c of e.cr)e.rr(c);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Jp(this.persistenceKey,e));if(o){const c=md.Zi(e,o);c&&(t=c.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jp(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(c=>{this.Er(c)}),this.currentUser=e,o.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ot("SharedClientState","READ",e,t),t}setItem(e,t){Ot("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ot("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(Ot("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void ei("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ne.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const c=t.vr(o.key);return t.Vr(c,null)}{const c=t.Sr(o.key,o.newValue);if(c)return t.Vr(c.clientId,c)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const c=t.Dr(o.key,o.newValue);if(c)return t.Cr(c)}}else if(t._r.test(o.key)){if(null!==o.newValue){const c=t.Nr(o.key,o.newValue);if(c)return t.kr(c)}}else if(o.key===t.wr){if(null!==o.newValue){const c=t.yr(o.newValue);if(c)return t.pr(c)}}else if(o.key===t.hr){const c=function(p){let v=V.at;if(null!=p)try{const A=JSON.parse(p);Un("number"==typeof A),v=A}catch(A){ei("SharedClientState","Failed to read sequence number from WebStorage",A)}return v}(o.newValue);c!==V.at&&t.sequenceNumberHandler(c)}else if(o.key===t.mr){const c=t.Mr(o.newValue);yield Promise.all(c.map(p=>t.syncEngine.Or(p)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const c=new qd(this.currentUser,e,t,o),p=Rc(this.persistenceKey,this.currentUser,e);this.setItem(p,c.tr())}Er(e){const t=Rc(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const c=Jp(this.persistenceKey,e),p=new md(e,t,o);this.setItem(c,p.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return kf.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),c=Number(o[1]);return qd.Zi(new zr(void 0!==o[2]?o[2]:null),c,t)}Nr(e,t){const o=this._r.exec(e),c=Number(o[1]);return md.Zi(c,t)}yr(e){return _m.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ne.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ot("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),c=this.Ir(this.ur),p=this.Ir(o),v=[],A=[];return p.forEach($=>{c.has($)||v.push($)}),c.forEach($=>{p.has($)||A.push($)}),this.syncEngine.Br(v,A).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Eu();return e.forEach((o,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class Em{constructor(){this.Lr=new vm,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new vm,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Im{qr(e){}shutdown(){}}class c_{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const d_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Zd{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class h_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,o,c,p){const v=this.ao(e,t);Ot("RestConnection","Sending: ",v,o);const A={};return this.ho(A,c,p),this.lo(e,v,A,o).then($=>(Ot("RestConnection","Received: ",$),$),$=>{throw Fo("RestConnection",`${e} failed with error: `,$,"url: ",v,"request:",o),$})}fo(e,t,o,c,p,v){return this.co(e,t,o,c,p)}ho(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Eo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,p)=>e[p]=c),o&&o.headers.forEach((c,p)=>e[p]=c)}ao(e,t){return`${this.oo}/v1/${t}:${d_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,o,c){return new Promise((p,v)=>{const A=new Zi;A.listenOnce(Hs.COMPLETE,()=>{try{switch(A.getLastErrorCode()){case Er.NO_ERROR:const K=A.getResponseJson();Ot("Connection","XHR received:",JSON.stringify(K)),p(K);break;case Er.TIMEOUT:Ot("Connection",'RPC "'+e+'" timed out'),v(new xt(ot.DEADLINE_EXCEEDED,"Request time out"));break;case Er.HTTP_ERROR:const se=A.getStatus();if(Ot("Connection",'RPC "'+e+'" failed with status:',se,"response text:",A.getResponseText()),se>0){const be=A.getResponseJson().error;if(be&&be.status&&be.message){const et=function(Et){const Dt=Et.toLowerCase().replace(/_/g,"-");return Object.values(ot).indexOf(Dt)>=0?Dt:ot.UNKNOWN}(be.status);v(new xt(et,be.message))}else v(new xt(ot.UNKNOWN,"Server responded with status "+A.getStatus()))}else v(new xt(ot.UNAVAILABLE,"Connection failed."));break;default:cn()}}finally{Ot("Connection",'RPC "'+e+'" completed.')}});const $=JSON.stringify(c);A.send(t,"POST",$,o,15)})}_o(e,t,o){const c=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=nu(),v=fu(),A={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(A.xmlHttpFactory=new ru({})),this.ho(A.initMessageHeaders,t,o),(0,Ge.uI)()||(0,Ge.b$)()||(0,Ge.d)()||(0,Ge.w1)()||(0,Ge.Mn)()||(0,Ge.ru)()||(A.httpHeadersOverwriteParam="$httpHeaders");const $=c.join("");Ot("Connection","Creating WebChannel: "+$,A);const K=p.createWebChannel($,A);let se=!1,be=!1;const et=new Zd({Hr:Dt=>{be?Ot("Connection","Not sending because WebChannel is closed:",Dt):(se||(Ot("Connection","Opening WebChannel transport."),K.open(),se=!0),Ot("Connection","WebChannel sending:",Dt),K.send(Dt))},Jr:()=>K.close()}),Et=(Dt,rn,An)=>{Dt.listen(rn,li=>{try{An(li)}catch(Bi){setTimeout(()=>{throw Bi},0)}})};return Et(K,gi.EventType.OPEN,()=>{be||Ot("Connection","WebChannel transport opened.")}),Et(K,gi.EventType.CLOSE,()=>{be||(be=!0,Ot("Connection","WebChannel transport closed"),et.io())}),Et(K,gi.EventType.ERROR,Dt=>{be||(be=!0,Fo("Connection","WebChannel transport errored:",Dt),et.io(new xt(ot.UNAVAILABLE,"The operation could not be completed")))}),Et(K,gi.EventType.MESSAGE,Dt=>{var rn;if(!be){const An=Dt.data[0];Un(!!An);const li=An,Bi=li.error||(null===(rn=li[0])||void 0===rn?void 0:rn.error);if(Bi){Ot("Connection","WebChannel received error:",Bi);const Ai=Bi.status;let es=function(Ni){const Ho=As[Ni];if(void 0!==Ho)return Cl(Ho)}(Ai),ni=Bi.message;void 0===es&&(es=ot.INTERNAL,ni="Unknown error status: "+Ai+" with message "+Bi.message),be=!0,et.io(new xt(es,ni)),K.close()}else Ot("Connection","WebChannel received:",An),et.ro(An)}}),Et(v,Au.STAT_EVENT,Dt=>{Dt.stat===va.PROXY?Ot("Connection","Detected buffering proxy"):Dt.stat===va.NOPROXY&&Ot("Connection","Detected no buffering proxy")}),setTimeout(()=>{et.so()},0),et}}function Xp(){return typeof window<"u"?window:null}function yd(){return typeof document<"u"?document:null}function Ph(i){return new nd(i,!0)}class Ff{constructor(e,t,o=1e3,c=1.5,p=6e4){this.Hs=e,this.timerId=t,this.wo=o,this.mo=c,this.yo=p,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),o=Math.max(0,Date.now()-this.To),c=Math.max(0,t-o);c>0&&Ot("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,c,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class Cm{constructor(e,t,o,c,p,v,A,$){this.Hs=e,this.Po=o,this.vo=c,this.Vo=p,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=A,this.listener=$,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Ff(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,Ne.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ne.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var o=this;return(0,Ne.Z)(function*(){o.Lo(),o.Uo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():t&&t.code===ot.RESOURCE_EXHAUSTED?(ei(t.toString()),ei("Using maximum backoff delay to prevent overloading the backend."),o.xo.Eo()):t&&t.code===ot.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,c])=>{this.So===t&&this.Go(o,c)},o=>{e(()=>{const c=new xt(ot.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(c)})})}Go(e,t){const o=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(c=>{o(()=>this.Qo(c))}),this.stream.onMessage(c=>{o(()=>this.onMessage(c))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,Ne.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ot("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class f_ extends Cm{constructor(e,t,o,c,p,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,c,v),this.It=p}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function _n(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===($=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===$?1:"REMOVE"===$?2:"CURRENT"===$?3:"RESET"===$?4:cn(),c=e.targetChange.targetIds||[],p=function($,K){return $.gt?(Un(void 0===K||"string"==typeof K),Fr.fromBase64String(K||"")):(Un(void 0===K||K instanceof Uint8Array),Fr.fromUint8Array(K||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,A=v&&function($){const K=void 0===$.code?ot.UNKNOWN:Cl($.code);return new xt(K,$.message||"")}(v);t=new Ui(o,c,p,A||null)}else if("documentChange"in e){const o=e.documentChange,c=f(i,o.document.name),p=xs(o.document.updateTime),v=new Ss({mapValue:{fields:o.document.fields}}),A=ti.newFoundDocument(c,p,v);t=new Dl(o.targetIds||[],o.removedTargetIds||[],A.key,A)}else if("documentDelete"in e){const o=e.documentDelete,c=f(i,o.document),p=o.readTime?xs(o.readTime):Yt.min(),v=ti.newNoDocument(c,p);t=new Dl([],o.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const o=e.documentRemove,c=f(i,o.document);t=new Dl([],o.removedTargetIds||[],c,null)}else{if(!("filter"in e))return cn();{const o=e.filter,p=new Ud(o.count||0);t=new bl(o.targetId,p)}}var $;return t}(this.It,e),o=function(c){if(!("targetChange"in c))return Yt.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?Yt.min():p.readTime?xs(p.readTime):Yt.min()}(e);return this.listener.Wo(t,o)}zo(e){const t={};t.database=W(this.It),t.addTarget=function(c,p){let v;const A=p.target;return v=yu(A)?{documents:ka(c,A)}:{query:Sl(c,A)},v.targetId=p.targetId,p.resumeToken.approximateByteSize()>0?v.resumeToken=oa(c,p.resumeToken):p.snapshotVersion.compareTo(Yt.min())>0&&(v.readTime=Tl(c,p.snapshotVersion.toTimestamp())),v}(this.It,e);const o=function ec(i,e){const t=function(o,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return cn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Bo(t)}Ho(e){const t={};t.database=W(this.It),t.removeTarget=e,this.Bo(t)}}class p_ extends Cm{constructor(e,t,o,c,p,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,c,v),this.It=p,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Un(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Gs(i,e){return i&&i.length>0?(Un(void 0!==e),i.map(t=>function(o,c){let p=xs(o.updateTime?o.updateTime:c);return p.isEqual(Yt.min())&&(p=xs(c)),new wl(p,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=xs(e.commitTime);return this.listener.Zo(o,t)}return Un(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=W(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Fn(this.It,o))};this.Bo(t)}}class g_ extends class{}{constructor(e,t,o,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=o,this.It=c,this.nu=!1}su(){if(this.nu)throw new xt(ot.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.Vo.co(e,t,o,c,p)).catch(c=>{throw"FirebaseError"===c.name?(c.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xt(ot.UNKNOWN,c.toString())})}fo(e,t,o,c){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,v])=>this.Vo.fo(e,t,o,p,v,c)).catch(p=>{throw"FirebaseError"===p.name?(p.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new xt(ot.UNKNOWN,p.toString())})}terminate(){this.nu=!0}}class m_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(ei(t),this.ou=!1):Ot("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Dm{constructor(e,t,o,c,p){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=p,this.mu.qr(A=>{o.enqueueAndForget((0,Ne.Z)(function*(){var $;lc(v)&&(Ot("RemoteStore","Restarting streams for network reachability change."),yield($=(0,Ne.Z)(function*(K){const se=Gt(K);se._u.add(4),yield _d(se),se.gu.set("Unknown"),se._u.delete(4),yield kh(se)}),function(K){return $.apply(this,arguments)})(v))}))}),this.gu=new m_(o,c)}}function kh(i){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,Ne.Z)(function*(i){if(lc(i))for(const e of i.wu)yield e(!0)}),Lf.apply(this,arguments)}function _d(i){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,Ne.Z)(function*(i){for(const e of i.wu)yield e(!1)}),Fh.apply(this,arguments)}function eg(i,e){const t=Gt(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Vf(t)?Nc(t):Yd(t).ko()&&tg(t,e))}function vd(i,e){const t=Gt(i),o=Yd(t);t.du.delete(e),o.ko()&&y_(t,e),0===t.du.size&&(o.ko()?o.Fo():lc(t)&&t.gu.set("Unknown"))}function tg(i,e){i.yu.Ot(e.targetId),Yd(i).zo(e)}function y_(i,e){i.yu.Ot(e),Yd(i).Ho(e)}function Nc(i){i.yu=new Iu({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i.du.get(e)||null}),Yd(i).start(),i.gu.uu()}function Vf(i){return lc(i)&&!Yd(i).No()&&i.du.size>0}function lc(i){return 0===Gt(i)._u.size}function Lh(i){i.yu=void 0}function il(i){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,Ne.Z)(function*(i){i.du.forEach((e,t)=>{tg(i,e)})}),Uf.apply(this,arguments)}function __(i,e){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,Ne.Z)(function*(i,e){Lh(i),Vf(i)?(i.gu.hu(e),Nc(i)):i.gu.set("Unknown")}),Vh.apply(this,arguments)}function cc(i,e,t){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,Ne.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof Ui&&2===e.state&&e.cause)try{yield(o=(0,Ne.Z)(function*(c,p){const v=p.cause;for(const A of p.targetIds)c.du.has(A)&&(yield c.remoteSyncer.rejectListen(A,v),c.du.delete(A),c.yu.removeTarget(A))}),function(c,p){return o.apply(this,arguments)})(i,e)}catch(o){Ot("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Bh(i,o)}else if(e instanceof Dl?i.yu.Gt(e):e instanceof bl?i.yu.Yt(e):i.yu.Wt(e),!t.isEqual(Yt.min()))try{const o=yield gm(i.localStore);t.compareTo(o)>=0&&(yield function(c,p){const v=c.yu.te(p);return v.targetChanges.forEach((A,$)=>{if(A.resumeToken.approximateByteSize()>0){const K=c.du.get($);K&&c.du.set($,K.withResumeToken(A.resumeToken,p))}}),v.targetMismatches.forEach(A=>{const $=c.du.get(A);if(!$)return;c.du.set(A,$.withResumeToken(Fr.EMPTY_BYTE_STRING,$.snapshotVersion)),y_(c,A);const K=new lu($.target,A,1,$.sequenceNumber);tg(c,K)}),c.remoteSyncer.applyRemoteEvent(v)}(i,t))}catch(o){Ot("RemoteStore","Failed to raise snapshot:",o),yield Bh(i,o)}var o}),Uh.apply(this,arguments)}function Bh(i,e,t){return jh.apply(this,arguments)}function jh(){return jh=(0,Ne.Z)(function*(i,e,t){if(!lo(e))throw e;i._u.add(1),yield _d(i),i.gu.set("Offline"),t||(t=()=>gm(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ne.Z)(function*(){Ot("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield kh(i)}))}),jh.apply(this,arguments)}function v_(i,e){return e().catch(t=>Bh(i,t,e))}function wd(i){return bm.apply(this,arguments)}function bm(){return bm=(0,Ne.Z)(function*(i){const e=Gt(i),t=Pl(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Bf(e);)try{const c=yield mm(e.localStore,o);if(null===c){0===e.fu.length&&t.Fo();break}o=c.batchId,jf(e,c)}catch(c){yield Bh(e,c)}Hf(e)&&$f(e)}),bm.apply(this,arguments)}function Bf(i){return lc(i)&&i.fu.length<10}function jf(i,e){i.fu.push(e);const t=Pl(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Hf(i){return lc(i)&&!Pl(i).No()&&i.fu.length>0}function $f(i){Pl(i).start()}function ng(i){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,Ne.Z)(function*(i){Pl(i).eu()}),Tm.apply(this,arguments)}function w_(i){return rg.apply(this,arguments)}function rg(){return rg=(0,Ne.Z)(function*(i){const e=Pl(i);for(const t of i.fu)e.Xo(t.mutations)}),rg.apply(this,arguments)}function E_(i,e,t){return ig.apply(this,arguments)}function ig(){return ig=(0,Ne.Z)(function*(i,e,t){const o=i.fu.shift(),c=ud.from(o,e,t);yield v_(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),yield wd(i)}),ig.apply(this,arguments)}function Sm(i,e){return Am.apply(this,arguments)}function Am(){return Am=(0,Ne.Z)(function*(i,e){var t;e&&Pl(i).Yo&&(yield(t=(0,Ne.Z)(function*(o,c){if(tl(p=c.code)&&p!==ot.ABORTED){const v=o.fu.shift();Pl(o).Oo(),yield v_(o,()=>o.remoteSyncer.rejectFailedWrite(v.batchId,c)),yield wd(o)}var p}),function(o,c){return t.apply(this,arguments)})(i,e)),Hf(i)&&$f(i)}),Am.apply(this,arguments)}function xm(i,e){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,Ne.Z)(function*(i,e){const t=Gt(i);t.asyncQueue.verifyOperationInProgress(),Ot("RemoteStore","RemoteStore received new credentials");const o=lc(t);t._u.add(3),yield _d(t),o&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield kh(t)}),Mm.apply(this,arguments)}function Gf(i,e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,Ne.Z)(function*(i,e){const t=Gt(i);e?(t._u.delete(2),yield kh(t)):e||(t._u.add(2),yield _d(t),t.gu.set("Unknown"))}),Wf.apply(this,arguments)}function Yd(i){return i.pu||(i.pu=function(e,t,o){const c=Gt(e);return c.su(),new f_(t,c.Vo,c.authCredentials,c.appCheckCredentials,c.It,o)}(i.datastore,i.asyncQueue,{Yr:il.bind(null,i),Zr:__.bind(null,i),Wo:cc.bind(null,i)}),i.wu.push(function(){var e=(0,Ne.Z)(function*(t){t?(i.pu.Oo(),Vf(i)?Nc(i):i.gu.set("Unknown")):(yield i.pu.stop(),Lh(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function Pl(i){return i.Iu||(i.Iu=function(e,t,o){const c=Gt(e);return c.su(),new p_(t,c.Vo,c.authCredentials,c.appCheckCredentials,c.It,o)}(i.datastore,i.asyncQueue,{Yr:ng.bind(null,i),Zr:Sm.bind(null,i),tu:w_.bind(null,i),Zo:E_.bind(null,i)}),i.wu.push(function(){var e=(0,Ne.Z)(function*(t){t?(i.Iu.Oo(),yield wd(i)):(yield i.Iu.stop(),i.fu.length>0&&(Ot("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class Rm{constructor(e,t,o,c,p){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=c,this.removalCallback=p,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,o,c,p){const v=Date.now()+o,A=new Rm(e,t,v,c,p);return A.start(o),A}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xt(ot.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hh(i,e){if(ei("AsyncQueue",`${e}: ${i}`),lo(i))return new xt(ot.UNAVAILABLE,`${e}: ${i}`);throw i}class $h{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Jt.comparator(t.key,o.key):(t,o)=>Jt.comparator(t.key,o.key),this.keyedMap=ba(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new $h(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $h)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,p=o.getNext().key;if(!c.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new $h;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class I_{constructor(){this.Tu=new Ze(Jt.comparator)}track(e){const t=e.doc.key,o=this.Tu.get(t);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(t):1===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):cn():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Gh{constructor(e,t,o,c,p,v,A,$){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=c,this.mutatedKeys=p,this.fromCache=v,this.syncStateChanged=A,this.excludesMetadataChanges=$}static fromInitialDocuments(e,t,o,c){const p=[];return t.forEach(v=>{p.push({type:0,doc:v})}),new Gh(e,t,$h.emptySet(t),p,o,c,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==o[c].type||!t[c].doc.isEqual(o[c].doc))return!1;return!0}}class s0{constructor(){this.Au=void 0,this.listeners=[]}}class o0{constructor(){this.queries=new au(e=>qc(e),Oa),this.onlineState="Unknown",this.Ru=new Set}}function Nm(i,e){return Om.apply(this,arguments)}function Om(){return Om=(0,Ne.Z)(function*(i,e){const t=Gt(i),o=e.query;let c=!1,p=t.queries.get(o);if(p||(c=!0,p=new s0),c)try{p.Au=yield t.onListen(o)}catch(v){const A=Hh(v,`Initialization of query '${Zc(e.query)}' failed`);return void e.onError(A)}t.queries.set(o,p),p.listeners.push(e),e.bu(t.onlineState),p.Au&&e.Pu(p.Au)&&zf(t)}),Om.apply(this,arguments)}function Pm(i,e){return kl.apply(this,arguments)}function kl(){return kl=(0,Ne.Z)(function*(i,e){const t=Gt(i),o=e.query;let c=!1;const p=t.queries.get(o);if(p){const v=p.listeners.indexOf(e);v>=0&&(p.listeners.splice(v,1),c=0===p.listeners.length)}if(c)return t.queries.delete(o),t.onUnlisten(o)}),kl.apply(this,arguments)}function sg(i,e){const t=Gt(i);let o=!1;for(const c of e){const v=t.queries.get(c.query);if(v){for(const A of v.listeners)A.Pu(c)&&(o=!0);v.Au=c}}o&&zf(t)}function C_(i,e,t){const o=Gt(i),c=o.queries.get(e);if(c)for(const p of c.listeners)p.onError(t);o.queries.delete(e)}function zf(i){i.Ru.forEach(e=>{e.next()})}class Wh{constructor(e,t,o){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const c of e.docChanges)3!==c.type&&o.push(c);e=new Gh(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Gh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class km{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class Kf{constructor(e){this.It=e}Ji(e){return f(this.It,e)}Yi(e){return e.metadata.exists?ut(this.It,e.document,!1):ti.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return xs(e)}}class D_{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dc(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Or.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,o=new Kf(this.It);for(const c of e)if(c.metadata.queries){const p=o.Ji(c.metadata.name);for(const v of c.metadata.queries){const A=(t.get(v)||er()).add(p);t.set(v,A)}}return t}complete(){var e=this;return(0,Ne.Z)(function*(){const t=yield function l_(i,e,t,o){return Yp.apply(this,arguments)}(e.localStore,new Kf(e.It),e.documents,e.Mu.id),o=e.Fu(e.documents);for(const c of e.queries)yield r0(e.localStore,c,o.get(c.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function dc(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class og{constructor(e){this.key=e}}class Fm{constructor(e){this.key=e}}class Lm{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=er(),this.mutatedKeys=er(),this.Ku=Pu(e),this.Gu=new $h(this.Ku)}get Qu(){return this.Lu}ju(e,t){const o=t?t.Wu:new I_,c=t?t.Gu:this.Gu;let p=t?t.mutatedKeys:this.mutatedKeys,v=c,A=!1;const $="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,K="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((se,be)=>{const et=c.get(se),Et=Kl(this.query,be)?be:null,Dt=!!et&&this.mutatedKeys.has(et.key),rn=!!Et&&(Et.hasLocalMutations||this.mutatedKeys.has(Et.key)&&Et.hasCommittedMutations);let An=!1;et&&Et?et.data.isEqual(Et.data)?Dt!==rn&&(o.track({type:3,doc:Et}),An=!0):this.zu(et,Et)||(o.track({type:2,doc:Et}),An=!0,($&&this.Ku(Et,$)>0||K&&this.Ku(Et,K)<0)&&(A=!0)):!et&&Et?(o.track({type:0,doc:Et}),An=!0):et&&!Et&&(o.track({type:1,doc:et}),An=!0,($||K)&&(A=!0)),An&&(Et?(v=v.add(Et),p=rn?p.add(se):p.delete(se)):(v=v.delete(se),p=p.delete(se)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const se="F"===this.query.limitType?v.last():v.first();v=v.delete(se.key),p=p.delete(se.key),o.track({type:1,doc:se})}return{Gu:v,Wu:o,$i:A,mutatedKeys:p}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const c=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const p=e.Wu.Eu();p.sort((K,se)=>function(be,et){const Et=Dt=>{switch(Dt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cn()}};return Et(be)-Et(et)}(K.type,se.type)||this.Ku(K.doc,se.doc)),this.Hu(o);const v=t?this.Ju():[],A=0===this.qu.size&&this.current?1:0,$=A!==this.Uu;return this.Uu=A,0!==p.length||$?{snapshot:new Gh(this.query,e.Gu,c,p,e.mutatedKeys,0===A,$,!1),Yu:v}:{Yu:v}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new I_,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=er(),this.Gu.forEach(o=>{this.Xu(o.key)&&(this.qu=this.qu.add(o.key))});const t=[];return e.forEach(o=>{this.qu.has(o)||t.push(new Fm(o))}),this.qu.forEach(o=>{e.has(o)||t.push(new og(o))}),t}Zu(e){this.Lu=e.Hi,this.qu=er();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Gh.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class Vm{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class b_{constructor(e){this.key=e,this.ec=!1}}class T_{constructor(e,t,o,c,p,v){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=c,this.currentUser=p,this.maxConcurrentLimboResolutions=v,this.nc={},this.sc=new au(A=>qc(A),Oa),this.ic=new Map,this.rc=new Set,this.oc=new Ze(Jt.comparator),this.uc=new Map,this.cc=new fd,this.ac={},this.hc=new Map,this.lc=jo.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function qf(i,e){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,Ne.Z)(function*(i,e){const t=yg(i);let o,c;const p=t.sc.get(e);if(p)o=p.targetId,t.sharedClientState.addLocalQueryTarget(o),c=p.view.tc();else{const v=yield pd(t.localStore,Vi(e));t.isPrimaryClient&&eg(t.remoteStore,v);const A=t.sharedClientState.addLocalQueryTarget(v.targetId);o=v.targetId,c=yield zh(t,e,o,"current"===A)}return c}),Oc.apply(this,arguments)}function zh(i,e,t,o){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,Ne.Z)(function*(i,e,t,o){i.dc=(se,be,et)=>{return(Et=(0,Ne.Z)(function*(Dt,rn,An,li){let Bi=rn.view.ju(An);Bi.$i&&(Bi=yield Of(Dt.localStore,rn.query,!1).then(({documents:ni})=>rn.view.ju(ni,Bi)));const Ai=li&&li.targetChanges.get(rn.targetId),es=rn.view.applyChanges(Bi,Dt.isPrimaryClient,Ai);return cg(Dt,rn.targetId,es.Yu),es.snapshot}),function(Dt,rn,An,li){return Et.apply(this,arguments)})(i,se,be,et);var Et};const c=yield Of(i.localStore,e,!0),p=new Lm(e,c.Hi),v=p.ju(c.documents),A=Xl.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),$=p.applyChanges(v,i.isPrimaryClient,A);cg(i,t,$.Yu);const K=new Vm(e,t,p);return i.sc.set(e,K),i.ic.has(t)?i.ic.get(t).push(e):i.ic.set(t,[e]),$.snapshot}),Pc.apply(this,arguments)}function Zf(i,e){return Ed.apply(this,arguments)}function Ed(){return Ed=(0,Ne.Z)(function*(i,e){const t=Gt(i),o=t.sc.get(e),c=t.ic.get(o.targetId);if(c.length>1)return t.ic.set(o.targetId,c.filter(p=>!Oa(p,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield gd(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),vd(t.remoteStore,o.targetId),la(t,o.targetId)}).catch(Xs))):(la(t,o.targetId),yield gd(t.localStore,o.targetId,!0))}),Ed.apply(this,arguments)}function Yf(){return Yf=(0,Ne.Z)(function*(i,e,t){const o=Yh(i);try{const c=yield function(p,v){const A=Gt(p),$=Br.now(),K=v.reduce((et,Et)=>et.add(Et.key),er());let se,be;return A.persistence.runTransaction("Locally write mutations","readwrite",et=>{let Et=po(),Dt=er();return A.Gi.getEntries(et,K).next(rn=>{Et=rn,Et.forEach((An,li)=>{li.isValidDocument()||(Dt=Dt.add(An))})}).next(()=>A.localDocuments.getOverlayedDocuments(et,Et)).next(rn=>{se=rn;const An=[];for(const li of v){const Bi=_h(li,se.get(li.key).overlayedDocument);null!=Bi&&An.push(new Uo(li.key,Bi,Yu(Bi.value.mapValue),Hr.exists(!0)))}return A.mutationQueue.addMutationBatch(et,$,An,v)}).next(rn=>{be=rn;const An=rn.applyToLocalDocumentSet(se,Dt);return A.documentOverlayCache.saveOverlays(et,rn.batchId,An)})}).then(()=>({batchId:be.batchId,changes:bo(se)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(c.batchId),function(p,v,A){let $=p.ac[p.currentUser.toKey()];$||($=new Ze(Hn)),$=$.insert(v,A),p.ac[p.currentUser.toKey()]=$}(o,c.batchId,t),yield sl(o,c.changes),yield wd(o.remoteStore)}catch(c){const p=Hh(c,"Failed to persist write");t.reject(p)}}),Yf.apply(this,arguments)}function ag(i,e){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,Ne.Z)(function*(i,e){const t=Gt(i);try{const o=yield u_(t.localStore,e);e.targetChanges.forEach((c,p)=>{const v=t.uc.get(p);v&&(Un(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?v.ec=!0:c.modifiedDocuments.size>0?Un(v.ec):c.removedDocuments.size>0&&(Un(v.ec),v.ec=!1))}),yield sl(t,o,e)}catch(o){yield Xs(o)}}),Kh.apply(this,arguments)}function Qf(i,e,t){const o=Gt(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const c=[];o.sc.forEach((p,v)=>{const A=v.view.bu(e);A.snapshot&&c.push(A.snapshot)}),function(p,v){const A=Gt(p);A.onlineState=v;let $=!1;A.queries.forEach((K,se)=>{for(const be of se.listeners)be.bu(v)&&($=!0)}),$&&zf(A)}(o.eventManager,e),c.length&&o.nc.Wo(c),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Um(i,e,t){return qh.apply(this,arguments)}function qh(){return qh=(0,Ne.Z)(function*(i,e,t){const o=Gt(i);o.sharedClientState.updateQueryState(e,"rejected",t);const c=o.uc.get(e),p=c&&c.key;if(p){let v=new Ze(Jt.comparator);v=v.insert(p,ti.newNoDocument(p,Yt.min()));const A=er().add(p),$=new Vu(Yt.min(),new Map,new Nt(Hn),v,A);yield ag(o,$),o.oc=o.oc.remove(p),o.uc.delete(e),dg(o)}else yield gd(o.localStore,e,!1).then(()=>la(o,e,t)).catch(Xs)}),qh.apply(this,arguments)}function A_(i,e){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,Ne.Z)(function*(i,e){const t=Gt(i),o=e.batch.batchId;try{const c=yield a_(t.localStore,e);ug(t,o,null),ep(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield sl(t,c)}catch(c){yield Xs(c)}}),Bm.apply(this,arguments)}function x_(i,e,t){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,Ne.Z)(function*(i,e,t){const o=Gt(i);try{const c=yield function(p,v){const A=Gt(p);return A.persistence.runTransaction("Reject batch","readwrite-primary",$=>{let K;return A.mutationQueue.lookupMutationBatch($,v).next(se=>(Un(null!==se),K=se.keys(),A.mutationQueue.removeMutationBatch($,se))).next(()=>A.mutationQueue.performConsistencyCheck($)).next(()=>A.documentOverlayCache.removeOverlaysForBatchId($,K,v)).next(()=>A.localDocuments.recalculateAndSaveOverlaysForDocumentKeys($,K)).next(()=>A.localDocuments.getDocuments($,K))})}(o.localStore,e);ug(o,e,t),ep(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield sl(o,c)}catch(c){yield Xs(c)}}),Jf.apply(this,arguments)}function Xf(){return Xf=(0,Ne.Z)(function*(i,e){const t=Gt(i);lc(t.remoteStore)||Ot("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(p){const v=Gt(p);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",A=>v.mutationQueue.getHighestUnacknowledgedBatchId(A))}(t.localStore);if(-1===o)return void e.resolve();const c=t.hc.get(o)||[];c.push(e),t.hc.set(o,c)}catch(o){const c=Hh(o,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),Xf.apply(this,arguments)}function ep(i,e){(i.hc.get(e)||[]).forEach(t=>{t.resolve()}),i.hc.delete(e)}function ug(i,e,t){const o=Gt(i);let c=o.ac[o.currentUser.toKey()];if(c){const p=c.get(e);p&&(t?p.reject(t):p.resolve(),c=c.remove(e)),o.ac[o.currentUser.toKey()]=c}}function la(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ic.get(e))i.sc.delete(o),t&&i.nc._c(o,t);i.ic.delete(e),i.isPrimaryClient&&i.cc.ls(e).forEach(o=>{i.cc.containsKey(o)||lg(i,o)})}function lg(i,e){i.rc.delete(e.path.canonicalString());const t=i.oc.get(e);null!==t&&(vd(i.remoteStore,t),i.oc=i.oc.remove(e),i.uc.delete(t),dg(i))}function cg(i,e,t){for(const o of t)o instanceof og?(i.cc.addReference(o.key,e),a0(i,o)):o instanceof Fm?(Ot("SyncEngine","Document no longer in limbo: "+o.key),i.cc.removeReference(o.key,e),i.cc.containsKey(o.key)||lg(i,o.key)):cn()}function a0(i,e){const t=e.key,o=t.path.canonicalString();i.oc.get(t)||i.rc.has(o)||(Ot("SyncEngine","New document in limbo: "+t),i.rc.add(o),dg(i))}function dg(i){for(;i.rc.size>0&&i.oc.size<i.maxConcurrentLimboResolutions;){const e=i.rc.values().next().value;i.rc.delete(e);const t=new Jt(Or.fromString(e)),o=i.lc.next();i.uc.set(o,new b_(t)),i.oc=i.oc.insert(t,o),eg(i.remoteStore,new lu(Vi(Vo(t.path)),o,2,V.at))}}function sl(i,e,t){return tp.apply(this,arguments)}function tp(){return tp=(0,Ne.Z)(function*(i,e,t){const o=Gt(i),c=[],p=[],v=[];var A;o.sc.isEmpty()||(o.sc.forEach((A,$)=>{v.push(o.dc($,e,t).then(K=>{if(K){o.isPrimaryClient&&o.sharedClientState.updateQueryState($.targetId,K.fromCache?"not-current":"current"),c.push(K);const se=Rf.Ci($.targetId,K);p.push(se)}}))}),yield Promise.all(v),o.nc.Wo(c),yield(A=(0,Ne.Z)(function*($,K){const se=Gt($);try{yield se.persistence.runTransaction("notifyLocalViewChanges","readwrite",be=>Je.forEach(K,et=>Je.forEach(et.Si,Et=>se.persistence.referenceDelegate.addReference(be,et.targetId,Et)).next(()=>Je.forEach(et.Di,Et=>se.persistence.referenceDelegate.removeReference(be,et.targetId,Et)))))}catch(be){if(!lo(be))throw be;Ot("LocalStore","Failed to update sequence numbers: "+be)}for(const be of K){const et=be.targetId;if(!be.fromCache){const Et=se.Ui.get(et),rn=Et.withLastLimboFreeSnapshotVersion(Et.snapshotVersion);se.Ui=se.Ui.insert(et,rn)}}}),function($,K){return A.apply(this,arguments)})(o.localStore,p))}),tp.apply(this,arguments)}function R_(i,e){return hg.apply(this,arguments)}function hg(){return hg=(0,Ne.Z)(function*(i,e){const t=Gt(i);if(!t.currentUser.isEqual(e)){Ot("SyncEngine","User change. New user:",e.toKey());const o=yield pm(t.localStore,e);t.currentUser=e,(c=t).hc.forEach(v=>{v.forEach(A=>{A.reject(new xt(ot.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.hc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield sl(t,o.ji)}var c}),hg.apply(this,arguments)}function N_(i,e){const t=Gt(i),o=t.uc.get(e);if(o&&o.ec)return er().add(o.key);{let c=er();const p=t.ic.get(e);if(!p)return c;for(const v of p){const A=t.sc.get(v);c=c.unionWith(A.view.Qu)}return c}}function jm(i,e){return fg.apply(this,arguments)}function fg(){return fg=(0,Ne.Z)(function*(i,e){const t=Gt(i),o=yield Of(t.localStore,e.query,!0),c=e.view.Zu(o);return t.isPrimaryClient&&cg(t,e.targetId,c.Yu),c}),fg.apply(this,arguments)}function Hm(i,e){return pg.apply(this,arguments)}function pg(){return pg=(0,Ne.Z)(function*(i,e){const t=Gt(i);return ym(t.localStore,e).then(o=>sl(t,o))}),pg.apply(this,arguments)}function O_(i,e,t,o){return np.apply(this,arguments)}function np(){return np=(0,Ne.Z)(function*(i,e,t,o){const c=Gt(i),p=yield function(v,A){const $=Gt(v),K=Gt($.mutationQueue);return $.persistence.runTransaction("Lookup mutation documents","readonly",se=>K.Tn(se,A).next(be=>be?$.localDocuments.getDocuments(se,be):Je.resolve(null)))}(c.localStore,e);var A;null!==p?("pending"===t?yield wd(c.remoteStore):"acknowledged"===t||"rejected"===t?(ug(c,e,o||null),ep(c,e),A=e,Gt(Gt(c.localStore).mutationQueue).An(A)):cn(),yield sl(c,p)):Ot("SyncEngine","Cannot apply mutation batch with id: "+e)}),np.apply(this,arguments)}function gg(){return gg=(0,Ne.Z)(function*(i,e){const t=Gt(i);if(yg(t),Yh(t),!0===e&&!0!==t.fc){const o=t.sharedClientState.getAllActiveQueryTargets(),c=yield ol(t,o.toArray());t.fc=!0,yield Gf(t.remoteStore,!0);for(const p of c)eg(t.remoteStore,p)}else if(!1===e&&!1!==t.fc){const o=[];let c=Promise.resolve();t.ic.forEach((p,v)=>{t.sharedClientState.isLocalQueryTarget(v)?o.push(v):c=c.then(()=>(la(t,v),gd(t.localStore,v,!0))),vd(t.remoteStore,v)}),yield c,yield ol(t,o),function(p){const v=Gt(p);v.uc.forEach((A,$)=>{vd(v.remoteStore,$)}),v.cc.fs(),v.uc=new Map,v.oc=new Ze(Jt.comparator)}(t),t.fc=!1,yield Gf(t.remoteStore,!1)}}),gg.apply(this,arguments)}function ol(i,e,t){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,Ne.Z)(function*(i,e,t){const o=Gt(i),c=[],p=[];for(const v of e){let A;const $=o.ic.get(v);if($&&0!==$.length){A=yield pd(o.localStore,Vi($[0]));for(const K of $){const se=o.sc.get(K),be=yield jm(o,se);be.snapshot&&p.push(be.snapshot)}}else{const K=yield qp(o.localStore,v);A=yield pd(o.localStore,K),yield zh(o,Gm(K),v,!1)}c.push(A)}return o.nc.Wo(p),c}),Zh.apply(this,arguments)}function Gm(i){return ml(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function P_(i){const e=Gt(i);return Gt(Gt(e.localStore).persistence).vi()}function u0(i,e,t,o){return rp.apply(this,arguments)}function rp(){return rp=(0,Ne.Z)(function*(i,e,t,o){const c=Gt(i);if(c.fc)return void Ot("SyncEngine","Ignoring unexpected query state notification.");const p=c.ic.get(e);if(p&&p.length>0)switch(t){case"current":case"not-current":{const v=yield ym(c.localStore,Ld(p[0])),A=Vu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield sl(c,v,A);break}case"rejected":yield gd(c.localStore,e,!0),la(c,e,o);break;default:cn()}}),rp.apply(this,arguments)}function k_(i,e,t){return mg.apply(this,arguments)}function mg(){return mg=(0,Ne.Z)(function*(i,e,t){const o=yg(i);if(o.fc){for(const c of e){if(o.ic.has(c)){Ot("SyncEngine","Adding an already active target "+c);continue}const p=yield qp(o.localStore,c),v=yield pd(o.localStore,p);yield zh(o,Gm(p),v.targetId,!1),eg(o.remoteStore,v)}for(const c of t)o.ic.has(c)&&(yield gd(o.localStore,c,!1).then(()=>{vd(o.remoteStore,c),la(o,c)}).catch(Xs))}}),mg.apply(this,arguments)}function yg(i){const e=Gt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ag.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Um.bind(null,e),e.nc.Wo=sg.bind(null,e.eventManager),e.nc._c=C_.bind(null,e.eventManager),e}function Yh(i){const e=Gt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x_.bind(null,e),e}class Wm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ne.Z)(function*(){t.It=Ph(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return fm(this.persistence,new hm,e.initialUser,this.It)}gc(e){return new xf(Gp.Bs,this.It)}mc(e){return new Em}terminate(){var e=this;return(0,Ne.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Qh extends Wm{constructor(e,t,o){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,Ne.Z)(function*(){yield t().call(o,e),yield o.Ec.initialize(o,e),yield Yh(o.Ec.syncEngine),yield wd(o.Ec.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return fm(this.persistence,new hm,e.initialUser,this.It)}Ic(e,t){return new nm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const o=new M(t,this.persistence);return new I(e.asyncQueue,o)}gc(e){const t=zp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?we.withCacheSize(this.cacheSizeBytes):we.DEFAULT;return new Wp(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,Xp(),yd(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new Em}}class _g extends Qh{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,Ne.Z)(function*(){yield t().call(o,e);const c=o.Ec.syncEngine;o.sharedClientState instanceof wm&&(o.sharedClientState.syncEngine={Fr:O_.bind(null,c),$r:u0.bind(null,c),Br:k_.bind(null,c),vi:P_.bind(null,c),Or:Hm.bind(null,c)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var p=(0,Ne.Z)(function*(v){yield function $m(i,e){return gg.apply(this,arguments)}(o.Ec.syncEngine,v),o.gcScheduler&&(v&&!o.gcScheduler.started?o.gcScheduler.start():v||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(v&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():v||o.indexBackfillerScheduler.stop())});return function(v){return p.apply(this,arguments)}}())})()}mc(e){const t=Xp();if(!wm.C(t))throw new xt(ot.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=zp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wm(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class vg{initialize(e,t){var o=this;return(0,Ne.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=c=>Qf(o.syncEngine,c,1),o.remoteStore.remoteSyncer.handleCredentialChange=R_.bind(null,o.syncEngine),yield Gf(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new o0}createDatastore(e){const t=Ph(e.databaseInfo.databaseId),o=new h_(e.databaseInfo);return new g_(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,c=e.asyncQueue,p=A=>Qf(this.syncEngine,A,0),v=c_.C()?new c_:new Im,new Dm(t,o,c,p,v);var t,o,c,p,v}createSyncEngine(e,t){return function(o,c,p,v,A,$,K){const se=new T_(o,c,p,v,A,$);return K&&(se.fc=!0),se}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ne.Z)(function*(t){const o=Gt(t);Ot("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield _d(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ip(i,e=10240){let t=0;return{read:()=>(0,Ne.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,Ne.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Jh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):ei("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class l0{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Ti,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(o=>{o&&o.ku()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.payload)}`))},o=>this.metadata.reject(o))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,Ne.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,Ne.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,Ne.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const o=e.Pc.decode(t),c=Number(o);isNaN(c)&&e.Sc(`length string (${o}) is not valid number`);const p=yield e.Dc(c);return new km(JSON.parse(p),t.length+c)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,Ne.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Dc(e){var t=this;return(0,Ne.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const o=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,Ne.Z)(function*(){const t=yield e.bc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class c0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ne.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xt(ot.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(c=(0,Ne.Z)(function*(p,v){const A=Gt(p),$=W(A.It)+"/documents",K={documents:v.map(Et=>w(A.It,Et))},se=yield A.fo("BatchGetDocuments",$,K,v.length),be=new Map;se.forEach(Et=>{const Dt=function Wt(i,e){return"found"in e?function(t,o){Un(!!o.found);const c=f(t,o.found.name),p=xs(o.found.updateTime),v=new Ss({mapValue:{fields:o.found.fields}});return ti.newFoundDocument(c,p,v)}(i,e):"missing"in e?function(t,o){Un(!!o.missing),Un(!!o.readTime);const c=f(t,o.missing),p=xs(o.readTime);return ti.newNoDocument(c,p)}(i,e):cn()}(A.It,Et);be.set(Dt.key.toString(),Dt)});const et=[];return v.forEach(Et=>{const Dt=be.get(Et.toString());Un(!!Dt),et.push(Dt)}),et}),function(p,v){return c.apply(this,arguments)})(t.datastore,e);var c;return o.forEach(c=>t.recordVersion(c)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Il(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ne.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,c)=>{const p=Jt.fromPath(c);e.mutations.push(new td(p,e.precondition(p)))}),yield(o=(0,Ne.Z)(function*(c,p){const v=Gt(c),A=W(v.It)+"/documents",$={writes:p.map(K=>Fn(v.It,K))};yield v.co("Commit",A,$)}),function(c,p){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw cn();t=Yt.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new xt(ot.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Yt.min())?Hr.exists(!1):Hr.updateTime(t):Hr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Yt.min()))throw new xt(ot.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hr.updateTime(t)}return Hr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class wg{constructor(e,t,o,c,p){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=c,this.deferred=p,this.Nc=o.maxAttempts,this.xo=new Ff(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,Ne.Z)(function*(){const t=new c0(e.datastore),o=e.Mc(t);o&&o.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(p=>{e.Oc(p)}))}).catch(c=>{e.Oc(c)})}))}Mc(e){try{const t=this.updateFunction(e);return!Q(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!tl(t)}return!1}}class d0{constructor(e,t,o,c){var p=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=c,this.user=zr.UNAUTHENTICATED,this.clientId=Ga.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var v=(0,Ne.Z)(function*(A){Ot("FirestoreClient","Received user=",A.uid),yield p.authCredentialListener(A),p.user=A});return function(A){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(o,v=>(Ot("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,Ne.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xt(ot.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ne.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const c=Hh(o,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function Eg(i,e){return sp.apply(this,arguments)}function sp(){return sp=(0,Ne.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Ot("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var c=(0,Ne.Z)(function*(p){o.isEqual(p)||(yield pm(e.localStore,p),o=p)});return function(p){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),sp.apply(this,arguments)}function Ig(i,e){return op.apply(this,arguments)}function op(){return op=(0,Ne.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Xh(i);Ot("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(c=>xm(e.remoteStore,c)),i.setAppCheckTokenChangeListener((c,p)=>xm(e.remoteStore,p)),i.onlineComponents=e}),op.apply(this,arguments)}function Xh(i){return al.apply(this,arguments)}function al(){return al=(0,Ne.Z)(function*(i){return i.offlineComponents||(Ot("FirestoreClient","Using default OfflineComponentProvider"),yield Eg(i,new Wm)),i.offlineComponents}),al.apply(this,arguments)}function Id(i){return Qd.apply(this,arguments)}function Qd(){return Qd=(0,Ne.Z)(function*(i){return i.onlineComponents||(Ot("FirestoreClient","Using default OnlineComponentProvider"),yield Ig(i,new vg)),i.onlineComponents}),Qd.apply(this,arguments)}function Jd(i){return Xh(i).then(e=>e.persistence)}function ap(i){return Xh(i).then(e=>e.localStore)}function up(i){return Id(i).then(e=>e.remoteStore)}function lp(i){return Id(i).then(e=>e.syncEngine)}function Xd(i){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,Ne.Z)(function*(i){const e=yield Id(i),t=e.eventManager;return t.onListen=qf.bind(null,e.syncEngine),t.onUnlisten=Zf.bind(null,e.syncEngine),t}),Cg.apply(this,arguments)}function zm(i,e,t={}){const o=new Ti;return i.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function(c,p,v,A,$){const K=new Jh({next:be=>{p.enqueueAndForget(()=>Pm(c,se));const et=be.docs.has(v);!et&&be.fromCache?$.reject(new xt(ot.UNAVAILABLE,"Failed to get document because the client is offline.")):et&&be.fromCache&&A&&"server"===A.source?$.reject(new xt(ot.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):$.resolve(be)},error:be=>$.reject(be)}),se=new Wh(Vo(v.path),K,{includeMetadataChanges:!0,Nu:!0});return Nm(c,se)}(yield Xd(i),i.asyncQueue,e,t,o)})),o.promise}function Km(i,e,t={}){const o=new Ti;return i.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function(c,p,v,A,$){const K=new Jh({next:be=>{p.enqueueAndForget(()=>Pm(c,se)),be.fromCache&&"server"===A.source?$.reject(new xt(ot.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):$.resolve(be)},error:be=>$.reject(be)}),se=new Wh(v,K,{includeMetadataChanges:!0,Nu:!0});return Nm(c,se)}(yield Xd(i),i.asyncQueue,e,t,o)})),o.promise}const cp=new Map;function Dg(i,e,t){if(!t)throw new xt(ot.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function dp(i,e,t,o){if(!0===e&&!0===o)throw new xt(ot.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Zm(i){if(!Jt.isDocumentKey(i))throw new xt(ot.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ym(i){if(Jt.isDocumentKey(i))throw new xt(ot.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function hp(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":cn()}function ui(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new xt(ot.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hp(i);throw new xt(ot.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Qm(i,e){if(e<=0)throw new xt(ot.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Jm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xt(ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xt(ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,dp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kc{constructor(e,t,o,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xt(ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xt(ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new zu;switch(t.type){case"gapi":return new xa(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xt(ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=cp.get(e);t&&(Ot("ComponentProvider","Removing Datastore"),cp.delete(e),t.terminate())}(this),Promise.resolve()}}class Ms{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ms(this.firestore,e,this._key)}}class So{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new So(this.firestore,e,this._query)}}class Fl extends So{constructor(e,t,o){super(e,t,Vo(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ms(this.firestore,null,new Jt(e))}withConverter(e){return new Fl(this.firestore,e,this._path)}}function Xm(i,e,...t){if(i=(0,Ge.m9)(i),Dg("collection","path",e),i instanceof kc){const o=Or.fromString(e,...t);return Ym(o),new Fl(i,null,o)}{if(!(i instanceof Ms||i instanceof Fl))throw new xt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Or.fromString(e,...t));return Ym(o),new Fl(i.firestore,null,o)}}function fp(i,e,...t){if(i=(0,Ge.m9)(i),1===arguments.length&&(e=Ga.R()),Dg("doc","path",e),i instanceof kc){const o=Or.fromString(e,...t);return Zm(o),new Ms(i,null,new Jt(o))}{if(!(i instanceof Ms||i instanceof Fl))throw new xt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Or.fromString(e,...t));return Zm(o),new Ms(i.firestore,i instanceof Fl?i.converter:null,new Jt(o))}}function ul(i,e){return i=(0,Ge.m9)(i),e=(0,Ge.m9)(e),(i instanceof Ms||i instanceof Fl)&&(e instanceof Ms||e instanceof Fl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function eh(i,e){return i=(0,Ge.m9)(i),e=(0,Ge.m9)(e),i instanceof So&&e instanceof So&&i.firestore===e.firestore&&Oa(i._query,e._query)&&i.converter===e.converter}class La{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new Ff(this,"async_queue_retry"),this.jc=()=>{const t=yd();t&&Ot("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=yd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=yd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Ti;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,Ne.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!lo(t))throw t;Ot("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(o=>{throw this.qc=o,this.Kc=!1,ei("INTERNAL UNHANDLED ERROR: ",function(p){let v=p.message||"";return p.stack&&(v=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),v}(o)),o}).then(o=>(this.Kc=!1,o))));return this.$c=t,t}enqueueAfterDelay(e,t,o){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const c=Rm.createAndSchedule(this,e,t,o,p=>this.Jc(p));return this.Uc.push(c),c}Wc(){this.qc&&cn()}verifyOperationInProgress(){}Yc(){var e=this;return(0,Ne.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function hc(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const c of["next","error","complete"])if(c in o&&"function"==typeof o[c])return!0;return!1}(i)}class pp{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ds extends kc{constructor(e,t,o,c){super(e,t,o,c),this.type="firestore",this._queue=new La,this._persistenceKey=c?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Dd(this),this._firestoreClient.terminate()}}function ws(i){return i._firestoreClient||Dd(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Dd(i){var e;const t=i._freezeSettings(),o=(p=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new k(i._databaseId,p,i._persistenceKey,(A=t).host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,A.useFetchStreams));var p,A;i._firestoreClient=new d0(i._authCredentials,i._appCheckCredentials,i._queue,o)}function bd(i,e,t){const o=new Ti;return i.asyncQueue.enqueue((0,Ne.Z)(function*(){try{yield Eg(i,t),yield Ig(i,e),o.resolve()}catch(c){const p=c;if(!("FirebaseError"===(v=p).name?v.code===ot.FAILED_PRECONDITION||v.code===ot.UNIMPLEMENTED:!(typeof DOMException<"u"&&v instanceof DOMException)||22===v.code||20===v.code||11===v.code))throw p;Fo("Error enabling offline persistence. Falling back to persistence disabled: "+p),o.reject(p)}var v})).then(()=>o.promise)}function Tg(i){if(i._initialized||i._terminated)throw new xt(ot.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ll{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xt(ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Si(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ll(Fr.fromBase64String(e))}catch(t){throw new xt(ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ll(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Td{constructor(e){this._methodName=e}}class gp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xt(ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xt(ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Hn(this._lat,e._lat)||Hn(this._long,e._long)}}const iy=/^__.*__$/;class $_{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Uo(e,this.data,this.fieldMask,t,this.fieldTransforms):new wu(e,this.data,t,this.fieldTransforms)}}class Sg{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Uo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mp(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cn()}}class sh{constructor(e,t,o,c,p,v){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=c,void 0===p&&this.ea(),this.fieldTransforms=p||[],this.fieldMask=v||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new sh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.sa({path:o,ra:!1});return c.oa(e),c}ua(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.sa({path:o,ra:!1});return c.ea(),c}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return wp(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(mp(this.na)&&iy.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class G_{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||Ph(e)}fa(e,t,o,c=!1){return new sh({na:e,methodName:t,la:o,path:Si.emptyPath(),ra:!1,ha:c},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Vl(i){const e=i._freezeSettings(),t=Ph(i._databaseId);return new G_(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Sd(i,e,t,o,c,p={}){const v=i.fa(p.merge||p.mergeFields?2:0,e,t,c);_p("Data must be an object, but it was:",v,o);const A=Mg(o,v);let $,K;if(p.merge)$=new Ci(v.fieldMask),K=v.fieldTransforms;else if(p.mergeFields){const se=[];for(const be of p.mergeFields){const et=vp(e,be,t);if(!v.contains(et))throw new xt(ot.INVALID_ARGUMENT,`Field '${et}' is specified in your field mask but missing from your input data.`);cy(se,et)||se.push(et)}$=new Ci(se),K=v.fieldTransforms.filter(be=>$.covers(be.field))}else $=null,K=v.fieldTransforms;return new $_(new Ss(A),$,K)}class Ad extends Td{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ad}}function sy(i,e,t){return new sh({na:3,la:e.settings.la,methodName:i._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class rf extends Td{_toFieldTransform(e){return new ku(e.path,new ql)}isEqual(e){return e instanceof rf}}class Ag extends Td{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=sy(this,e,!0),o=this.da.map(p=>fc(p,t)),c=new vu(o);return new ku(e.path,c)}isEqual(e){return this===e}}class oy extends Td{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=sy(this,e,!0),o=this.da.map(p=>fc(p,t)),c=new qa(o);return new ku(e.path,c)}isEqual(e){return this===e}}class ay extends Td{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new Zl(e.It,Yc(e.It,this._a));return new ku(e.path,t)}isEqual(e){return this===e}}function sf(i,e,t,o){const c=i.fa(1,e,t);_p("Data must be an object, but it was:",c,o);const p=[],v=Ss.empty();ce(o,($,K)=>{const se=af(e,$,t);K=(0,Ge.m9)(K);const be=c.ua(se);if(K instanceof Ad)p.push(se);else{const et=fc(K,be);null!=et&&(p.push(se),v.set(se,et))}});const A=new Ci(p);return new Sg(v,A,c.fieldTransforms)}function yp(i,e,t,o,c,p){const v=i.fa(1,e,t),A=[vp(e,o,t)],$=[c];if(p.length%2!=0)throw new xt(ot.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let et=0;et<p.length;et+=2)A.push(vp(e,p[et])),$.push(p[et+1]);const K=[],se=Ss.empty();for(let et=A.length-1;et>=0;--et)if(!cy(K,A[et])){const Et=A[et];let Dt=$[et];Dt=(0,Ge.m9)(Dt);const rn=v.ua(Et);if(Dt instanceof Ad)K.push(Et);else{const An=fc(Dt,rn);null!=An&&(K.push(Et),se.set(Et,An))}}const be=new Ci(K);return new Sg(se,be,v.fieldTransforms)}function xg(i,e,t,o=!1){return fc(t,i.fa(o?4:3,e))}function fc(i,e){if(uy(i=(0,Ge.m9)(i)))return _p("Unsupported field value:",e,i),Mg(i,e);if(i instanceof Td)return function(t,o){if(!mp(o.na))throw o.aa(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.aa(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,o){const c=[];let p=0;for(const v of t){let A=fc(v,o.ca(p));null==A&&(A={nullValue:"NULL_VALUE"}),c.push(A),p++}return{arrayValue:{values:c}}}(i,e)}return function(t,o){if(null===(t=(0,Ge.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yc(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=Br.fromDate(t);return{timestampValue:Tl(o.It,c)}}if(t instanceof Br){const c=new Br(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Tl(o.It,c)}}if(t instanceof gp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ll)return{bytesValue:oa(o.It,t._byteString)};if(t instanceof Ms){const c=o.databaseId,p=t.firestore._databaseId;if(!p.isEqual(c))throw o.aa(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:rd(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.aa(`Unsupported field value: ${hp(t)}`)}(i,e)}function Mg(i,e){const t={};return Ce(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ce(i,(o,c)=>{const p=fc(c,e.ia(o));null!=p&&(t[o]=p)}),{mapValue:{fields:t}}}function uy(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Br||i instanceof gp||i instanceof ll||i instanceof Ms||i instanceof Td)}function _p(i,e,t){if(!uy(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=hp(t);throw e.aa("an object"===o?i+" a custom object":i+" "+o)}var o}function vp(i,e,t){if((e=(0,Ge.m9)(e))instanceof Ll)return e._internalPath;if("string"==typeof e)return af(i,e);throw wp("Field path arguments must be of type string or ",i,!1,void 0,t)}const ly=new RegExp("[~\\*/\\[\\]]");function af(i,e,t){if(e.search(ly)>=0)throw wp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Ll(...e.split("."))._internalPath}catch{throw wp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function wp(i,e,t,o,c){const p=o&&!o.isEmpty(),v=void 0!==c;let A=`Function ${e}() called with invalid data`;t&&(A+=" (via `toFirestore()`)"),A+=". ";let $="";return(p||v)&&($+=" (found",p&&($+=` in field ${o}`),v&&($+=` in document ${c}`),$+=")"),new xt(ot.INVALID_ARGUMENT,A+i+$)}function cy(i,e){return i.some(t=>t.isEqual(e))}class uf{constructor(e,t,o,c,p){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=c,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new Ms(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(oh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dy extends uf{data(){return super.data()}}function oh(i,e){return"string"==typeof e?af(i,e):e instanceof Ll?e._internalPath:e._delegate._internalPath}class Fc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ul extends uf{constructor(e,t,o,c,p,v){super(e,t,o,c,v),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(oh("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class ah extends Ul{data(e={}){return super.data(e)}}class pc{constructor(e,t,o,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new Fc(c.hasPendingWrites,c.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new ah(this._firestore,this._userDataWriter,o.key,o,new Fc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xt(ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let p=0;return o._snapshot.docChanges.map(v=>({type:"added",doc:new ah(o._firestore,o._userDataWriter,v.doc.key,v.doc,new Fc(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:p++}))}{let p=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(v=>c||3!==v.type).map(v=>{const A=new ah(o._firestore,o._userDataWriter,v.doc.key,v.doc,new Fc(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter);let $=-1,K=-1;return 0!==v.type&&($=p.indexOf(v.doc.key),p=p.delete(v.doc.key)),1!==v.type&&(p=p.add(v.doc),K=p.indexOf(v.doc.key)),{type:hy(v.type),doc:A,oldIndex:$,newIndex:K}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cn()}}function Rg(i,e){return i instanceof Ul&&e instanceof Ul?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof pc&&e instanceof pc&&i._firestore===e._firestore&&eh(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Ng(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new xt(ot.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uh{}function xd(i,...e){for(const t of e)i=t._apply(i);return i}class W_ extends uh{constructor(e,t,o){super(),this.wa=e,this.ma=t,this.ga=o,this.type="where"}_apply(e){const t=Vl(e.firestore),o=function(c,p,v,A,$,K,se){let be;if($.isKeyField()){if("array-contains"===K||"array-contains-any"===K)throw new xt(ot.INVALID_ARGUMENT,`Invalid Query. You can't perform '${K}' queries on documentId().`);if("in"===K||"not-in"===K){Pg(se,K);const Et=[];for(const Dt of se)Et.push(vy(A,c,Dt));be={arrayValue:{values:Et}}}else be=vy(A,c,se)}else"in"!==K&&"not-in"!==K&&"array-contains-any"!==K||Pg(se,K),be=xg(v,"where",se,"in"===K||"not-in"===K);const et=vs.create($,K,be);return function(Et,Dt){if(Dt.dt()){const An=zc(Et);if(null!==An&&!An.isEqual(Dt.field))throw new xt(ot.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${An.toString()}' and '${Dt.field.toString()}'`);const li=Wl(Et);null!==li&&wy(0,Dt.field,li)}const rn=function(An,li){for(const Bi of An.filters)if(li.indexOf(Bi.op)>=0)return Bi.op;return null}(Et,function(An){switch(An){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Dt.op));if(null!==rn)throw new xt(ot.INVALID_ARGUMENT,rn===Dt.op?`Invalid query. You cannot use more than one '${Dt.op.toString()}' filter.`:`Invalid query. You cannot use '${Dt.op.toString()}' filters with '${rn.toString()}' filters.`)}(c,et),et}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new So(e.firestore,e.converter,function(c,p){const v=c.filters.concat([p]);return new sa(c.path,c.collectionGroup,c.explicitOrderBy.slice(),v,c.limit,c.limitType,c.startAt,c.endAt)}(e._query,o))}}class fy extends uh{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(o,c,p){if(null!==o.startAt)throw new xt(ot.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new xt(ot.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new Da(c,p);return function(A,$){if(null===Wl(A)){const K=zc(A);null!==K&&wy(0,K,$.field)}}(o,v),v}(e._query,this.wa,this.ya);return new So(e.firestore,e.converter,function(o,c){const p=o.explicitOrderBy.concat([c]);return new sa(o.path,o.collectionGroup,p,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class Ao extends uh{constructor(e,t,o){super(),this.type=e,this.pa=t,this.Ia=o}_apply(e){return new So(e.firestore,e.converter,Kc(e._query,this.pa,this.Ia))}}class gy extends uh{constructor(e,t,o){super(),this.type=e,this.Ta=t,this.Ea=o}_apply(e){const t=_y(e,this.type,this.Ta,this.Ea);return new So(e.firestore,e.converter,(c=t,new sa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,c,o.endAt)));var o,c}}class Og extends uh{constructor(e,t,o){super(),this.type=e,this.Ta=t,this.Ea=o}_apply(e){const t=_y(e,this.type,this.Ta,this.Ea);return new So(e.firestore,e.converter,(c=t,new sa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,c)));var o,c}}function _y(i,e,t,o){if(t[0]=(0,Ge.m9)(t[0]),t[0]instanceof uf)return function(c,p,v,A,$){if(!A)throw new xt(ot.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const K=[];for(const se of yl(c))if(se.field.isKeyField())K.push(ta(p,A.key));else{const be=A.data.field(se.field);if(fl(be))throw new xt(ot.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+se.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===be){const et=se.field.canonicalString();throw new xt(ot.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${et}' (used as the orderBy) does not exist.`)}K.push(be)}return new eo(K,$)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const c=Vl(i.firestore);return function(p,v,A,$,K,se){const be=p.explicitOrderBy;if(K.length>be.length)throw new xt(ot.INVALID_ARGUMENT,`Too many arguments provided to ${$}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const et=[];for(let Et=0;Et<K.length;Et++){const Dt=K[Et];if(be[Et].field.isKeyField()){if("string"!=typeof Dt)throw new xt(ot.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${$}(), but got a ${typeof Dt}`);if(!zl(p)&&-1!==Dt.indexOf("/"))throw new xt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${$}() must be a plain document ID, but '${Dt}' contains a slash.`);const rn=p.path.child(Or.fromString(Dt));if(!Jt.isDocumentKey(rn))throw new xt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${$}() must result in a valid document path, but '${rn}' is not because it contains an odd number of segments.`);const An=new Jt(rn);et.push(ta(v,An))}else{const rn=xg(A,$,Dt);et.push(rn)}}return new eo(et,se)}(i._query,i.firestore._databaseId,c,e,t,o)}}function vy(i,e,t){if("string"==typeof(t=(0,Ge.m9)(t))){if(""===t)throw new xt(ot.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zl(e)&&-1!==t.indexOf("/"))throw new xt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Or.fromString(t));if(!Jt.isDocumentKey(o))throw new xt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return ta(i,new Jt(o))}if(t instanceof Ms)return ta(i,t._key);throw new xt(ot.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hp(t)}.`)}function Pg(i,e){if(!Array.isArray(i)||0===i.length)throw new xt(ot.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new xt(ot.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function wy(i,e,t){if(!t.isEqual(e))throw new xt(ot.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Ey={maxAttempts:5};class Iy{convertValue(e,t="none"){switch($t(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Do(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw cn()}}convertObject(e,t){const o={};return ce(e.fields,(c,p)=>{o[c]=this.convertValue(p,t)}),o}convertGeoPoint(e){return new gp(jr(e.latitude),jr(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Xi(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(su(e));default:return null}}convertTimestamp(e){const t=Ji(e);return new Br(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Or.fromString(e);Un(od(o));const c=new U(o.get(1),o.get(3)),p=new Jt(o.popFirst(5));return c.isEqual(t)||ei(`Document ${p} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),p}}function lf(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class kg extends Iy{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ms(this.firestore,null,t)}}class cl{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vl(e)}set(e,t,o){this._verifyNotCommitted();const c=Lc(e,this._firestore),p=lf(c.converter,t,o),v=Sd(this._dataReader,"WriteBatch.set",c._key,p,null!==c.converter,o);return this._mutations.push(v.toMutation(c._key,Hr.none())),this}update(e,t,o,...c){this._verifyNotCommitted();const p=Lc(e,this._firestore);let v;return v="string"==typeof(t=(0,Ge.m9)(t))||t instanceof Ll?yp(this._dataReader,"WriteBatch.update",p._key,t,o,c):sf(this._dataReader,"WriteBatch.update",p._key,t),this._mutations.push(v.toMutation(p._key,Hr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lc(e,this._firestore);return this._mutations=this._mutations.concat(new Il(t._key,Hr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xt(ot.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lc(i,e){if((i=(0,Ge.m9)(i)).firestore!==e)throw new xt(ot.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Va extends Iy{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ms(this.firestore,null,t)}}function by(i,e,t){i=ui(i,Ms);const o=ui(i.firestore,ds),c=lf(i.converter,e,t);return Md(o,[Sd(Vl(o),"setDoc",i._key,c,null!==i.converter,t).toMutation(i._key,Hr.none())])}function Ty(i,e,t,...o){i=ui(i,Ms);const c=ui(i.firestore,ds),p=Vl(c);let v;return v="string"==typeof(e=(0,Ge.m9)(e))||e instanceof Ll?yp(p,"updateDoc",i._key,e,t,o):sf(p,"updateDoc",i._key,e),Md(c,[v.toMutation(i._key,Hr.exists(!0))])}function ch(i,...e){var t,o,c;i=(0,Ge.m9)(i);let p={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||hc(e[v])||(p=e[v],v++);const A={includeMetadataChanges:p.includeMetadataChanges};if(hc(e[v])){const be=e[v];e[v]=null===(t=be.next)||void 0===t?void 0:t.bind(be),e[v+1]=null===(o=be.error)||void 0===o?void 0:o.bind(be),e[v+2]=null===(c=be.complete)||void 0===c?void 0:c.bind(be)}let $,K,se;if(i instanceof Ms)K=ui(i.firestore,ds),se=Vo(i._key.path),$={next:be=>{e[v]&&e[v](Lg(K,i,be))},error:e[v+1],complete:e[v+2]};else{const be=ui(i,So);K=ui(be.firestore,ds),se=be._query;const et=new Va(K);$={next:Et=>{e[v]&&e[v](new pc(K,et,be,Et))},error:e[v+1],complete:e[v+2]},Ng(i._query)}return function(be,et,Et,Dt){const rn=new Jh(Dt),An=new Wh(et,rn,Et);return be.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return Nm(yield Xd(be),An)})),()=>{rn.Rc(),be.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return Pm(yield Xd(be),An)}))}}(ws(K),se,A,$)}function Md(i,e){return function(t,o){const c=new Ti;return t.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function S_(i,e,t){return Yf.apply(this,arguments)}(yield lp(t),o,c)})),c.promise}(ws(i),e)}function Lg(i,e,t){const o=t.docs.get(e._key),c=new Va(i);return new Ul(i,c,e._key,o,new Fc(t.hasPendingWrites,t.fromCache),e.converter)}class Sy extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Vl(e)}get(e){const t=Lc(e,this._firestore),o=new kg(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return cn();const p=c[0];if(p.isFoundDocument())return new uf(this._firestore,o,p.key,p,t.converter);if(p.isNoDocument())return new uf(this._firestore,o,t._key,null,t.converter);throw cn()})}set(e,t,o){const c=Lc(e,this._firestore),p=lf(c.converter,t,o),v=Sd(this._dataReader,"Transaction.set",c._key,p,null!==c.converter,o);return this._transaction.set(c._key,v),this}update(e,t,o,...c){const p=Lc(e,this._firestore);let v;return v="string"==typeof(t=(0,Ge.m9)(t))||t instanceof Ll?yp(this._dataReader,"Transaction.update",p._key,t,o,c):sf(this._dataReader,"Transaction.update",p._key,t),this._transaction.update(p._key,v),this}delete(e){const t=Lc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lc(e,this._firestore),o=new Va(this._firestore);return super.get(e).then(c=>new Ul(this._firestore,o,t._key,c._document,new Fc(!1,!1),t.converter))}}function Ip(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function jg(){if(typeof Uint8Array>"u")throw new xt("unimplemented","Uint8Arrays are not available in this environment.")}function Hg(){if(!function Ts(){return typeof atob<"u"}())throw new xt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Eo=Bt.SDK_VERSION,(0,Bt._registerComponent)(new mt.wA("firestore",(t,{instanceIdentifier:o,options:c})=>{const p=t.getProvider("app").getImmediate(),v=new ds(new xu(t.getProvider("auth-internal")),new us(t.getProvider("app-check-internal")),function(A,$){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new xt(ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new U(A.options.projectId,$)}(p,o),p);return c=Object.assign({useFetchStreams:e},c),v._setSettings(c),v},"PUBLIC").setMultipleInstances(!0)),(0,Bt.registerVersion)(Ha,"3.4.15",i),(0,Bt.registerVersion)(Ha,"3.4.15","esm2017")}();class dh{constructor(e){this._delegate=e}static fromBase64String(e){return Hg(),new dh(ll.fromBase64String(e))}static fromUint8Array(e){return jg(),new dh(ll.fromUint8Array(e))}toBase64(){return Hg(),this._delegate.toBase64()}toUint8Array(){return jg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function $g(i){return function nv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class rv{enableIndexedDbPersistence(e,t){return function th(i,e){Tg(i=ui(i,ds));const t=ws(i),o=i._freezeSettings(),c=new vg;return bd(t,c,new Qh(c,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function nh(i){Tg(i=ui(i,ds));const e=ws(i),t=i._freezeSettings(),o=new vg;return bd(e,o,new _g(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function rh(i){if(i._initialized&&!i._terminated)throw new xt(ot.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ti;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ne.Z)(function*(){try{yield(t=(0,Ne.Z)(function*(o){if(!ao.C())return Promise.resolve();const c=o+"main";yield ao.delete(c)}),function(o){return t.apply(this,arguments)})(zp(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Oy{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof U||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Fo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function Cd(i,e,t,o={}){var c;const p=(i=ui(i,kc))._getSettings();if("firestore.googleapis.com"!==p.host&&p.host!==e&&Fo("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},p),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let v,A;if("string"==typeof o.mockUserToken)v=o.mockUserToken,A=zr.MOCK_USER;else{v=(0,Ge.Sg)(o.mockUserToken,null===(c=i._app)||void 0===c?void 0:c.options.projectId);const $=o.mockUserToken.sub||o.mockUserToken.user_id;if(!$)throw new xt(ot.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new zr($)}i._authCredentials=new Yi(new Ea(v,A))}}(this._delegate,e,t,o)}enableNetwork(){return function ey(i){return function ef(i){return i.asyncQueue.enqueue((0,Ne.Z)(function*(){const e=yield Jd(i),t=yield up(i);return e.setNetworkEnabled(!0),function(o){const c=Gt(o);return c._u.delete(0),kh(c)}(t)}))}(ws(i=ui(i,ds)))}(this._delegate)}disableNetwork(){return function ty(i){return function L_(i){return i.asyncQueue.enqueue((0,Ne.Z)(function*(){const e=yield Jd(i),t=yield up(i);return e.setNetworkEnabled(!1),(o=(0,Ne.Z)(function*(c){const p=Gt(c);p._u.add(0),yield _d(p),p.gu.set("Offline")}),function(c){return o.apply(this,arguments)})(t);var o}))}(ws(i=ui(i,ds)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,dp("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ih(i){return function(e){const t=new Ti;return e.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function M_(i,e){return Xf.apply(this,arguments)}(yield lp(e),t)})),t.promise}(ws(i=ui(i,ds)))}(this._delegate)}onSnapshotsInSync(e){return function X_(i,e){return function V_(i,e){const t=new Jh(e);return i.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return o=yield Xd(i),c=t,Gt(o).Ru.add(c),void c.next();var o,c})),()=>{t.Rc(),i.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return o=yield Xd(i),c=t,void Gt(o).Ru.delete(c);var o,c}))}}(ws(i=ui(i,ds)),hc(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Nd(this,Xm(this._delegate,e))}catch(t){throw Ya(t,"collection()","Firestore.collection()")}}doc(e){try{return new Gu(this,fp(this._delegate,e))}catch(t){throw Ya(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qa(this,function bg(i,e){if(i=ui(i,kc),Dg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xt(ot.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new So(i,null,(t=e,new sa(Or.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ya(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ay(i,e,t){i=ui(i,ds);const o=Object.assign(Object.assign({},Ey),t);return function(c){if(c.maxAttempts<1)throw new xt(ot.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function U_(i,e,t){const o=new Ti;return i.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){const c=yield(p=i,Id(p).then(v=>v.datastore));var p;new wg(i.asyncQueue,c,t,e,o).run()})),o.promise}(ws(i),c=>e(new Sy(i,c)),o)}(this._delegate,t=>e(new Py(this,t)))}batch(){return ws(this._delegate),new ky(new cl(this._delegate,e=>Md(this._delegate,e)))}loadBundle(e){return function ny(i,e){const t=ws(i=ui(i,ds)),o=new pp;return function B_(i,e,t,o){const c=function(p,v){let A;return A="string"==typeof p?(new TextEncoder).encode(p):p,$=function($,K){if($ instanceof Uint8Array)return ip($,K);if($ instanceof ArrayBuffer)return ip(new Uint8Array($),K);if($ instanceof ReadableStream)return $.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(A),new l0($,v);var $}(t,Ph(e));i.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){!function F_(i,e,t){const o=Gt(i);var c;(c=(0,Ne.Z)(function*(p,v,A){try{const $=yield v.getMetadata();if(yield function(et,Et){const Dt=Gt(et),rn=xs(Et.createTime);return Dt.persistence.runTransaction("hasNewerBundle","readonly",An=>Dt.Ns.getBundleMetadata(An,Et.id)).then(An=>!!An&&An.createTime.compareTo(rn)>=0)}(p.localStore,$))return yield v.close(),A._completeWith({taskState:"Success",documentsLoaded:(et=$).totalDocuments,bytesLoaded:et.totalBytes,totalDocuments:et.totalDocuments,totalBytes:et.totalBytes}),Promise.resolve(new Set);A._updateProgress(dc($));const K=new D_($,p.localStore,v.It);let se=yield v.wc();for(;se;){const et=yield K.Ou(se);et&&A._updateProgress(et),se=yield v.wc()}const be=yield K.complete();return yield sl(p,be.Bu,void 0),yield function(et,Et){const Dt=Gt(et);return Dt.persistence.runTransaction("Save bundle","readwrite",rn=>Dt.Ns.saveBundleMetadata(rn,Et))}(p.localStore,$),A._completeWith(be.progress),Promise.resolve(be.$u)}catch($){return Fo("SyncEngine",`Loading bundle failed with ${$}`),A._failWith($),Promise.resolve(new Set)}var et}),function(p,v,A){return c.apply(this,arguments)})(o,e,t).then(c=>{o.sharedClientState.notifyBundleLoaded(c)})}(yield lp(i),c,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function ry(i,e){return function qm(i,e){return i.asyncQueue.enqueue((0,Ne.Z)(function*(){return function(t,o){const c=Gt(t);return c.persistence.runTransaction("Get named query","readonly",p=>c.Ns.getNamedQuery(p,o))}(yield ap(i),e)}))}(ws(i=ui(i,ds)),e).then(t=>t?new So(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Qa(this,t):null)}}class Cp extends Iy{constructor(e){super(),this.firestore=e}convertBytes(e){return new dh(new ll(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Gu.forKey(t,this.firestore,null)}}class Py{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Cp(e)}get(e){const t=Vc(e);return this._delegate.get(t).then(o=>new cf(this._firestore,new Ul(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const c=Vc(e);return o?(Ip("Transaction.set",o),this._delegate.set(c,t,o)):this._delegate.set(c,t),this}update(e,t,o,...c){const p=Vc(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,o,...c),this}delete(e){const t=Vc(e);return this._delegate.delete(t),this}}class ky{constructor(e){this._delegate=e}set(e,t,o){const c=Vc(e);return o?(Ip("WriteBatch.set",o),this._delegate.set(c,t,o)):this._delegate.set(c,t),this}update(e,t,o,...c){const p=Vc(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,o,...c),this}delete(e){const t=Vc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Rd{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new ah(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new df(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Rd.INSTANCES;let c=o.get(e);c||(c=new WeakMap,o.set(e,c));let p=c.get(t);return p||(p=new Rd(e,new Cp(e),t),c.set(t,p)),p}}Rd.INSTANCES=new WeakMap;class Gu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cp(e)}static forPath(e,t,o){if(e.length%2!=0)throw new xt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Gu(t,new Ms(t._delegate,o,new Jt(e)))}static forKey(e,t,o){return new Gu(t,new Ms(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Nd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Nd(this.firestore,Xm(this._delegate,e))}catch(t){throw Ya(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ge.m9)(e))instanceof Ms&&ul(this._delegate,e)}set(e,t){t=Ip("DocumentReference.set",t);try{return t?by(this._delegate,e,t):by(this._delegate,e)}catch(o){throw Ya(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Ty(this._delegate,e):Ty(this._delegate,e,t,...o)}catch(c){throw Ya(c,"updateDoc()","DocumentReference.update()")}}delete(){return function J_(i){return Md(ui(i.firestore,ds),[new Il(i._key,Hr.none())])}(this._delegate)}onSnapshot(...e){const t=Fy(e),o=Ly(e,c=>new cf(this.firestore,new Ul(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return ch(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function dl(i){i=ui(i,Ms);const e=ui(i.firestore,ds),t=ws(e),o=new Va(e);return function h0(i,e){const t=new Ti;return i.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return(o=(0,Ne.Z)(function*(c,p,v){try{const A=yield function($,K){const se=Gt($);return se.persistence.runTransaction("read document","readonly",be=>se.localDocuments.getDocument(be,K))}(c,p);A.isFoundDocument()?v.resolve(A):A.isNoDocument()?v.resolve(null):v.reject(new xt(ot.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(A){const $=Hh(A,`Failed to get document '${p} from cache`);v.reject($)}}),function(c,p,v){return o.apply(this,arguments)})(yield ap(i),e,t);var o})),t.promise}(t,i._key).then(c=>new Ul(e,o,i._key,c,new Fc(null!==c&&c.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function hl(i){i=ui(i,Ms);const e=ui(i.firestore,ds);return zm(ws(e),i._key,{source:"server"}).then(t=>Lg(e,i,t))}(this._delegate):function Y_(i){i=ui(i,Ms);const e=ui(i.firestore,ds);return zm(ws(e),i._key).then(t=>Lg(e,i,t))}(this._delegate),t.then(o=>new cf(this.firestore,new Ul(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Gu(this.firestore,this._delegate.withConverter(e?Rd.getInstance(this.firestore,e):null))}}function Ya(i,e,t){return i.message=i.message.replace(e,t),i}function Fy(i){for(const e of i)if("object"==typeof e&&!$g(e))return e;return{}}function Ly(i,e){var t,o;let c;return c=$g(i[0])?i[0]:$g(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:p=>{c.next&&c.next(e(p))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(o=c.complete)||void 0===o?void 0:o.bind(c)}}class cf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Gu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Rg(this._delegate,e._delegate)}}class df extends cf{data(e){const t=this._delegate.data(e);return function wa(i,e){i||cn()}(void 0!==t),t}}class Qa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cp(e)}where(e,t,o){try{return new Qa(this.firestore,xd(this._delegate,function z_(i,e,t){const o=e,c=oh("where",i);return new W_(c,o,t)}(e,t,o)))}catch(c){throw Ya(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Qa(this.firestore,xd(this._delegate,function K_(i,e="asc"){const t=e,o=oh("orderBy",i);return new fy(o,t)}(e,t)))}catch(o){throw Ya(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qa(this.firestore,xd(this._delegate,function py(i){return Qm("limit",i),new Ao("limit",i,"F")}(e)))}catch(t){throw Ya(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Qa(this.firestore,xd(this._delegate,function q_(i){return Qm("limitToLast",i),new Ao("limitToLast",i,"L")}(e)))}catch(t){throw Ya(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qa(this.firestore,xd(this._delegate,function my(...i){return new gy("startAt",i,!0)}(...e)))}catch(t){throw Ya(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qa(this.firestore,xd(this._delegate,function Z_(...i){return new gy("startAfter",i,!1)}(...e)))}catch(t){throw Ya(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qa(this.firestore,xd(this._delegate,function yy(...i){return new Og("endBefore",i,!1)}(...e)))}catch(t){throw Ya(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qa(this.firestore,xd(this._delegate,function lh(...i){return new Og("endAt",i,!0)}(...e)))}catch(t){throw Ya(t,"endAt()","Query.endAt()")}}isEqual(e){return eh(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Dy(i){i=ui(i,So);const e=ui(i.firestore,ds),t=ws(e),o=new Va(e);return function f0(i,e){const t=new Ti;return i.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return(o=(0,Ne.Z)(function*(c,p,v){try{const A=yield Of(c,p,!0),$=new Lm(p,A.Hi),K=$.ju(A.documents),se=$.applyChanges(K,!1);v.resolve(se.snapshot)}catch(A){const $=Hh(A,`Failed to execute query '${p} against cache`);v.reject($)}}),function(c,p,v){return o.apply(this,arguments)})(yield ap(i),e,t);var o})),t.promise}(t,i._query).then(c=>new pc(e,o,i,c))}(this._delegate):"server"===e?.source?function Q_(i){i=ui(i,So);const e=ui(i.firestore,ds),t=ws(e),o=new Va(e);return Km(t,i._query,{source:"server"}).then(c=>new pc(e,o,i,c))}(this._delegate):function Cy(i){i=ui(i,So);const e=ui(i.firestore,ds),t=ws(e),o=new Va(e);return Ng(i._query),Km(t,i._query).then(c=>new pc(e,o,i,c))}(this._delegate),t.then(o=>new Gg(this.firestore,new pc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=Fy(e),o=Ly(e,c=>new Gg(this.firestore,new pc(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return ch(this._delegate,t,o)}withConverter(e){return new Qa(this.firestore,this._delegate.withConverter(e?Rd.getInstance(this.firestore,e):null))}}class sv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new df(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Gg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new df(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sv(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new df(this._firestore,o))})}isEqual(e){return Rg(this._delegate,e._delegate)}}class Nd extends Qa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Gu(this.firestore,e):null}doc(e){try{return new Gu(this.firestore,void 0===e?fp(this._delegate):fp(this._delegate,e))}catch(t){throw Ya(t,"doc()","CollectionReference.doc()")}}add(e){return function Fg(i,e){const t=ui(i.firestore,ds),o=fp(i),c=lf(i.converter,e);return Md(t,[Sd(Vl(i.firestore),"addDoc",o._key,c,null!==i.converter,{}).toMutation(o._key,Hr.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Gu(this.firestore,t))}isEqual(e){return ul(this._delegate,e._delegate)}withConverter(e){return new Nd(this.firestore,this._delegate.withConverter(e?Rd.getInstance(this.firestore,e):null))}}function Vc(i){return ui(i,Ms)}class Dp{constructor(...e){this._delegate=new Ll(...e)}static documentId(){return new Dp(Si.keyField().canonicalString())}isEqual(e){return(e=(0,Ge.m9)(e))instanceof Ll&&this._delegate._internalPath.isEqual(e._internalPath)}}class Uc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ev(){return new rf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Uc(e)}static delete(){const e=function Ep(){return new Ad("deleteField")}();return e._methodName="FieldValue.delete",new Uc(e)}static arrayUnion(...e){const t=function xy(...i){return new Ag("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Uc(t)}static arrayRemove(...e){const t=function My(...i){return new oy("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Uc(t)}static increment(e){const t=function Vg(i){return new ay("increment",i)}(e);return t._methodName="FieldValue.increment",new Uc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Vy={Firestore:Oy,GeoPoint:gp,Timestamp:Br,Blob:dh,Transaction:Py,WriteBatch:ky,DocumentReference:Gu,DocumentSnapshot:cf,Query:Qa,QueryDocumentSnapshot:df,QuerySnapshot:Gg,CollectionReference:Nd,FieldPath:Dp,FieldValue:Uc,setLogLevel:function iv(i){!function Zo(i){$s.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function By(i){(function Uy(i,e){i.INTERNAL.registerComponent(new mt.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(o,c)},"PUBLIC").setServiceProps(Object.assign({},Vy)))})(i,(e,t)=>new Oy(e,t,new rv)),i.registerVersion("@firebase/firestore-compat","0.1.24")}(nt.Z);var gc=H(1205),jy=H(440);function Bc(i,e){return function Hy(i,e=Z.z){return new q.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(i,e)}function Wg(i,e){return Bc(i,e).pipe((0,ie.U)(t=>({payload:t,type:"query"})))}function mc(i,e){return Wg(i,e).pipe((0,Le.O)(void 0),ae(),(0,ie.U)(([t,o])=>{const c=o.payload.docChanges(),p=c.map(v=>({type:v.type,payload:v}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((v,A)=>{const $=c.find(se=>se.doc.ref.isEqual(v.ref)),K=t?.payload.docs.find(se=>se.ref.isEqual(v.ref));$&&JSON.stringify($.doc.metadata)===JSON.stringify(v.metadata)||!$&&K&&JSON.stringify(K.metadata)===JSON.stringify(v.metadata)||p.push({type:"modified",payload:{oldIndex:A,newIndex:A,type:"modified",doc:v}})}),p}))}function uv(i,e,t){return mc(i,t).pipe((0,me.R)((o,c)=>function zg(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Gy(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return $y(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return $y(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return $y(i,e.oldIndex,1)}return i}(i,o))}),i}(o,c.map(p=>p.payload),e),[]),(0,it.x)(),(0,ie.U)(o=>o.map(c=>({type:c.type,payload:c}))))}function $y(i,e,t,...o){const c=i.slice();return c.splice(e,t,...o),c}function Kg(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}H(127);class lv{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=mc(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ie.U)(o=>o.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,Le.O)(void 0),ae(),(0,tt.h)(([o,c])=>c.length>0||!o),(0,ie.U)(([o,c])=>c),Me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,me.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Kg(e);return uv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return Wg(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Me.iC)}get(e){return(0,Re.D)(this.query.get(e)).pipe(Me.iC)}add(e){return this.ref.add(e)}doc(e){return new Qn(this.ref.doc(e),this.afs)}}class Qn{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:c,query:p}=hf(o,t);return new lv(c,p,this.afs)}snapshotChanges(){return function av(i,e){return Bc(i,e).pipe((0,Le.O)(void 0),ae(),(0,ie.U)(([t,o])=>o.exists?t?.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ie.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Re.D)(this.ref.get(e)).pipe(Me.iC)}}class cv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?mc(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,tt.h)(t=>t.length>0),Me.iC):mc(this.query,this.afs.schedulers.outsideAngular).pipe(Me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,me.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Kg(e);return uv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return Wg(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(o=>o.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),Me.iC)}get(e){return(0,Re.D)(this.query.get(e)).pipe(Me.iC)}}const dv=new _.OlP("angularfire2.enableFirestorePersistence"),hv=new _.OlP("angularfire2.firestore.persistenceSettings"),hh=new _.OlP("angularfire2.firestore.settings"),fv=new _.OlP("angularfire2.firestore.use-emulator");function hf(i,e=(t=>t)){return{query:e(i),ref:i}}let bp=(()=>{class i{constructor(t,o,c,p,v,A,$,K,se,be,et,Et,Dt,rn,An,li,Bi){this.schedulers=$;const Ai=(0,Ke.on)(t,A,o),es=se;be&&(0,gc.nw)(Ai,A,et,Dt,rn,An,Et,li),[this.firestore,this.persistenceEnabled$]=(0,Ke.cc)(`${Ai.name}.firestore`,"AngularFirestore",Ai.name,()=>{const ni=A.runOutsideAngular(()=>Ai.firestore());if(p&&ni.settings(p),es&&ni.useEmulator(...es),c&&!(0,zt.PM)(v)){const Ni=()=>{try{return(0,Re.D)(ni.enablePersistence(K||void 0).then(()=>!0,()=>!1))}catch(Ho){return typeof console<"u"&&console.warn(Ho),(0,J.of)(!1)}};return[ni,A.runOutsideAngular(Ni)]}return[ni,(0,J.of)(!1)]},[p,es,c])}collection(t,o){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:p,query:v}=hf(c,o),A=this.schedulers.ngZone.run(()=>p);return new lv(A,v,this)}collectionGroup(t,o){const c=o||(v=>v),p=this.firestore.collectionGroup(t);return new cv(c(p),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>o);return new Qn(c,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(_.LFG(Ke.Dh),_.LFG(Ke.xv,8),_.LFG(dv,8),_.LFG(hh,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Me.HU),_.LFG(hv,8),_.LFG(fv,8),_.LFG(gc.zQ,8),_.LFG(gc.Qv,8),_.LFG(gc.L6,8),_.LFG(gc._Q,8),_.LFG(gc.rT,8),_.LFG(gc.lh,8),_.LFG(gc.f7,8),_.LFG(jy.nm,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})()},2011:(Kt,qe,H)=>{H.d(qe,{Dh:()=>Ve,GT:()=>Me,cc:()=>tt,hO:()=>it,on:()=>ae,pX:()=>J,xv:()=>He});var _=H(4650),Z=H(127),q=H(5813);Kt=H.hmd(Kt);const Re=["ngOnDestroy"],J=(nt,Ne,Bt,mt={})=>new Proxy(nt,{get:(st,Ge)=>Bt.runOutsideAngular(()=>{var Mt;if(nt[Ge])return!(null===(Mt=mt?.spy)||void 0===Mt)&&Mt.get&&mt.spy.get(Ge,nt[Ge]),nt[Ge];if(Re.indexOf(Ge)>-1)return()=>{};const $e=Ne.toPromise().then(P=>{const ve=P&&P[Ge];return"function"==typeof ve?ve.bind(P):ve&&ve.then?ve.then(oe=>Bt.run(()=>oe)):Bt.run(()=>ve)});return new Proxy(()=>{},{get:(P,ve)=>$e[ve],apply:(P,ve,oe)=>$e.then(Te=>{var Se;const Be=Te&&Te(...oe);return!(null===(Se=mt?.spy)||void 0===Se)&&Se.apply&&mt.spy.apply(Ge,oe,Be),Be})})})}),Me=(nt,Ne)=>{Ne.forEach(Bt=>{Object.getOwnPropertyNames(Bt.prototype||Bt).forEach(mt=>{Object.defineProperty(nt.prototype,mt,Object.getOwnPropertyDescriptor(Bt.prototype||Bt,mt))})})};class Le{constructor(Ne){return Ne}}const Ve=new _.OlP("angularfire2.app.options"),He=new _.OlP("angularfire2.app.name");function ae(nt,Ne,Bt){const st="object"==typeof Bt&&Bt||{};st.name=st.name||"string"==typeof Bt&&Bt||"[DEFAULT]";const Mt=Z.Z.apps.filter($e=>$e&&$e.name===st.name)[0]||Ne.runOutsideAngular(()=>Z.Z.initializeApp(nt,st));try{JSON.stringify(nt)!==JSON.stringify(Mt.options)&&ie("error",`${Mt.name} Firebase App already initialized with different options${Kt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Le(Mt)}const ie=(nt,...Ne)=>{(0,_.X6Q)()&&typeof console<"u"&&console[nt](...Ne)},me={provide:Le,useFactory:ae,deps:[Ve,_.R0b,[new _.FiY,He]]};let it=(()=>{class nt{constructor(Bt){Z.Z.registerVersion("angularfire",q.q4.full,"core"),Z.Z.registerVersion("angularfire",q.q4.full,"app-compat"),Z.Z.registerVersion("angular",_.q4F.full,Bt.toString())}static initializeApp(Bt,mt){return{ngModule:nt,providers:[{provide:Ve,useValue:Bt},{provide:He,useValue:mt}]}}}return nt.\u0275fac=function(Bt){return new(Bt||nt)(_.LFG(_.Lbi))},nt.\u0275mod=_.oAB({type:nt}),nt.\u0275inj=_.cJS({providers:[me]}),nt})();function tt(nt,Ne,Bt,mt,st){const[,Ge,Mt]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===nt)||[];if(Ge)return function Ke(nt,Ne){try{return nt.toString()===Ne.toString()}catch{return nt===Ne}}(st,Mt)||(at("error",`${Ne} was already initialized on the ${Bt} Firebase App with different settings.${zt?" You may need to reload as Firebase is not HMR aware.":""}`),at("warn",{is:st,was:Mt})),Ge;{const $e=mt();return globalThis.\u0275AngularfireInstanceCache.push([nt,$e,st]),$e}}const zt=!!Kt.hot,at=(nt,...Ne)=>{(0,_.X6Q)()&&typeof console<"u"&&console[nt](...Ne)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Kt,qe,H)=>{H.d(qe,{q4:()=>co,iC:()=>Do,HU:()=>Ci,vb:()=>gn,JM:()=>Ft});var _=H(4650),Z=H(5867),q=H(5861),Re=H(9681),J=H(2090),Me=H(4859),Le=H(1877),Ve=H(8766);const He="@firebase/installations",ae="0.5.12",me=`w:${ae}`,it="FIS_v2",Ne=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Bt(k){return k instanceof J.ZR&&k.code.includes("request-failed")}function mt({projectId:k}){return`https://firebaseinstallations.googleapis.com/v1/projects/${k}/installations`}function st(k){return{token:k.token,requestStatus:2,expiresIn:Te(k.expiresIn),creationTime:Date.now()}}function Ge(k,U){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,q.Z)(function*(k,U){const ge=(yield U.json()).error;return Ne.create("request-failed",{requestName:k,serverCode:ge.code,serverMessage:ge.message,serverStatus:ge.status})})).apply(this,arguments)}function $e({apiKey:k}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k})}function P(k,{refreshToken:U}){const Q=$e(k);return Q.append("Authorization",function Se(k){return`${it} ${k}`}(U)),Q}function ve(k){return oe.apply(this,arguments)}function oe(){return(oe=(0,q.Z)(function*(k){const U=yield k();return U.status>=500&&U.status<600?k():U})).apply(this,arguments)}function Te(k){return Number(k.replace("s","000"))}function Be(k,U){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,q.Z)(function*({appConfig:k,heartbeatServiceProvider:U},{fid:Q}){const ge=mt(k),je=$e(k),Xe=U.getImmediate({optional:!0});if(Xe){const Mn=yield Xe.getHeartbeatsHeader();Mn&&je.append("x-firebase-client",Mn)}const $t={method:"POST",headers:je,body:JSON.stringify({fid:Q,authVersion:it,appId:k.appId,sdkVersion:me})},vn=yield ve(()=>fetch(ge,$t));if(vn.ok){const Mn=yield vn.json();return{fid:Mn.fid||Q,registrationStatus:2,refreshToken:Mn.refreshToken,authToken:st(Mn.authToken)}}throw yield Ge("Create Installation",vn)})).apply(this,arguments)}function Rt(k){return new Promise(U=>{setTimeout(U,k)})}const Ut=/^[cdef][\w-]{21}$/;function lt(){try{const k=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(k),k[0]=112+k[0]%16;const Q=function Qt(k){return function kt(k){return btoa(String.fromCharCode(...k)).replace(/\+/g,"-").replace(/\//g,"_")}(k).substr(0,22)}(k);return Ut.test(Q)?Q:""}catch{return""}}function sn(k){return`${k.appName}!${k.appId}`}const en=new Map;function tn(k,U){const Q=sn(k);mn(Q,U),function ci(k,U){const Q=function wn(){return!Dr&&"BroadcastChannel"in self&&(Dr=new BroadcastChannel("[Firebase] FID Change"),Dr.onmessage=k=>{mn(k.data.key,k.data.fid)}),Dr}();Q&&Q.postMessage({key:k,fid:U}),function Vn(){0===en.size&&Dr&&(Dr.close(),Dr=null)}()}(Q,U)}function mn(k,U){const Q=en.get(k);if(Q)for(const ge of Q)ge(U)}let Dr=null;const pr="firebase-installations-store";let Nn=null;function sr(){return Nn||(Nn=(0,Ve.X3)("firebase-installations-database",1,{upgrade:(k,U)=>{0===U&&k.createObjectStore(pr)}})),Nn}function St(k,U){return or.apply(this,arguments)}function or(){return(or=(0,q.Z)(function*(k,U){const Q=sn(k),je=(yield sr()).transaction(pr,"readwrite"),Xe=je.objectStore(pr),bt=yield Xe.get(Q);return yield Xe.put(U,Q),yield je.done,(!bt||bt.fid!==U.fid)&&tn(k,U.fid),U})).apply(this,arguments)}function Tn(k){return cr.apply(this,arguments)}function cr(){return(cr=(0,q.Z)(function*(k){const U=sn(k),ge=(yield sr()).transaction(pr,"readwrite");yield ge.objectStore(pr).delete(U),yield ge.done})).apply(this,arguments)}function _i(k,U){return ur.apply(this,arguments)}function ur(){return(ur=(0,q.Z)(function*(k,U){const Q=sn(k),je=(yield sr()).transaction(pr,"readwrite"),Xe=je.objectStore(pr),bt=yield Xe.get(Q),$t=U(bt);return void 0===$t?yield Xe.delete(Q):yield Xe.put($t,Q),yield je.done,$t&&(!bt||bt.fid!==$t.fid)&&tn(k,$t.fid),$t})).apply(this,arguments)}function Yr(k){return zn.apply(this,arguments)}function zn(){return(zn=(0,q.Z)(function*(k){let U;const Q=yield _i(k.appConfig,ge=>{const je=Bn(ge),Xe=ln(k,je);return U=Xe.registrationPromise,Xe.installationEntry});return""===Q.fid?{installationEntry:yield U}:{installationEntry:Q,registrationPromise:U}})).apply(this,arguments)}function Bn(k){return En(k||{fid:lt(),registrationStatus:0})}function ln(k,U){if(0===U.registrationStatus){if(!navigator.onLine)return{installationEntry:U,registrationPromise:Promise.reject(Ne.create("app-offline"))};const Q={fid:U.fid,registrationStatus:1,registrationTime:Date.now()},ge=function on(k,U){return gr.apply(this,arguments)}(k,Q);return{installationEntry:Q,registrationPromise:ge}}return 1===U.registrationStatus?{installationEntry:U,registrationPromise:vr(k)}:{installationEntry:U}}function gr(){return(gr=(0,q.Z)(function*(k,U){try{const Q=yield Be(k,U);return St(k.appConfig,Q)}catch(Q){throw Bt(Q)&&409===Q.customData.serverCode?yield Tn(k.appConfig):yield St(k.appConfig,{fid:U.fid,registrationStatus:0}),Q}})).apply(this,arguments)}function vr(k){return dr.apply(this,arguments)}function dr(){return(dr=(0,q.Z)(function*(k){let U=yield Mr(k.appConfig);for(;1===U.registrationStatus;)yield Rt(100),U=yield Mr(k.appConfig);if(0===U.registrationStatus){const{installationEntry:Q,registrationPromise:ge}=yield Yr(k);return ge||Q}return U})).apply(this,arguments)}function Mr(k){return _i(k,U=>{if(!U)throw Ne.create("installation-not-found");return En(U)})}function En(k){return function Qr(k){return 1===k.registrationStatus&&k.registrationTime+1e4<Date.now()}(k)?{fid:k.fid,registrationStatus:0}:k}function Zn(k,U){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,q.Z)(function*({appConfig:k,heartbeatServiceProvider:U},Q){const ge=jn(k,Q),je=P(k,Q),Xe=U.getImmediate({optional:!0});if(Xe){const Mn=yield Xe.getHeartbeatsHeader();Mn&&je.append("x-firebase-client",Mn)}const $t={method:"POST",headers:je,body:JSON.stringify({installation:{sdkVersion:me,appId:k.appId}})},vn=yield ve(()=>fetch(ge,$t));if(vn.ok)return st(yield vn.json());throw yield Ge("Generate Auth Token",vn)})).apply(this,arguments)}function jn(k,{fid:U}){return`${mt(k)}/${U}/authTokens:generate`}function xe(k){return fe.apply(this,arguments)}function fe(){return(fe=(0,q.Z)(function*(k,U=!1){let Q;const ge=yield _i(k.appConfig,Xe=>{if(!qt(Xe))throw Ne.create("not-registered");const bt=Xe.authToken;if(!U&&lr(bt))return Xe;if(1===bt.requestStatus)return Q=Ie(k,U),Xe;{if(!navigator.onLine)throw Ne.create("app-offline");const $t=Ue(Xe);return Q=_t(k,$t),$t}});return Q?yield Q:ge.authToken})).apply(this,arguments)}function Ie(k,U){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,q.Z)(function*(k,U){let Q=yield De(k.appConfig);for(;1===Q.authToken.requestStatus;)yield Rt(100),Q=yield De(k.appConfig);const ge=Q.authToken;return 0===ge.requestStatus?xe(k,U):ge})).apply(this,arguments)}function De(k){return _i(k,U=>{if(!qt(U))throw Ne.create("not-registered");return function ye(k){return 1===k.requestStatus&&k.requestTime+1e4<Date.now()}(U.authToken)?Object.assign(Object.assign({},U),{authToken:{requestStatus:0}}):U})}function _t(k,U){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,q.Z)(function*(k,U){try{const Q=yield Zn(k,U),ge=Object.assign(Object.assign({},U),{authToken:Q});return yield St(k.appConfig,ge),Q}catch(Q){if(!Bt(Q)||401!==Q.customData.serverCode&&404!==Q.customData.serverCode){const ge=Object.assign(Object.assign({},U),{authToken:{requestStatus:0}});yield St(k.appConfig,ge)}else yield Tn(k.appConfig);throw Q}})).apply(this,arguments)}function qt(k){return void 0!==k&&2===k.registrationStatus}function lr(k){return 2===k.requestStatus&&!function Gn(k){const U=Date.now();return U<k.creationTime||k.creationTime+k.expiresIn<U+36e5}(k)}function Ue(k){const U={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},k),{authToken:U})}function yt(){return(yt=(0,q.Z)(function*(k){const U=k,{installationEntry:Q,registrationPromise:ge}=yield Yr(U);return ge?ge.catch(console.error):xe(U).catch(console.error),Q.fid})).apply(this,arguments)}function an(){return(an=(0,q.Z)(function*(k,U=!1){const Q=k;return yield On(Q),(yield xe(Q,U)).token})).apply(this,arguments)}function On(k){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,q.Z)(function*(k){const{registrationPromise:U}=yield Yr(k);U&&(yield U)})).apply(this,arguments)}function br(k){return Ne.create("missing-app-config-values",{valueName:k})}const Pn="installations",wr=k=>{const U=k.getProvider("app").getImmediate(),Q=function In(k){if(!k||!k.options)throw br("App Configuration");if(!k.name)throw br("App Name");const U=["projectId","apiKey","appId"];for(const Q of U)if(!k.options[Q])throw br(Q);return{appName:k.name,projectId:k.options.projectId,apiKey:k.options.apiKey,appId:k.options.appId}}(U);return{app:U,appConfig:Q,heartbeatServiceProvider:(0,Re._getProvider)(U,"heartbeat"),_delete:()=>Promise.resolve()}},ri=k=>{const U=k.getProvider("app").getImmediate(),Q=(0,Re._getProvider)(U,Pn).getImmediate();return{getId:()=>function _e(k){return yt.apply(this,arguments)}(Q),getToken:je=>function gt(k){return an.apply(this,arguments)}(Q,je)}};(function mo(){(0,Re._registerComponent)(new Me.wA(Pn,wr,"PUBLIC")),(0,Re._registerComponent)(new Me.wA("installations-internal",ri,"PRIVATE"))})(),(0,Re.registerVersion)(He,ae),(0,Re.registerVersion)(He,ae,"esm2017");const hs="@firebase/remote-config",Tr=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class qs{constructor(U,Q,ge,je){this.client=U,this.storage=Q,this.storageCache=ge,this.logger=je}isCachedDataFresh(U,Q){if(!Q)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ge=Date.now()-Q,je=ge<=U;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ge}. Cache max age millis (minimumFetchIntervalMillis setting): ${U}. Is cache hit: ${je}.`),je}fetch(U){var Q=this;return(0,q.Z)(function*(){const[ge,je]=yield Promise.all([Q.storage.getLastSuccessfulFetchTimestampMillis(),Q.storage.getLastSuccessfulFetchResponse()]);if(je&&Q.isCachedDataFresh(U.cacheMaxAgeMillis,ge))return je;U.eTag=je&&je.eTag;const Xe=yield Q.client.fetch(U),bt=[Q.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Xe.status&&bt.push(Q.storage.setLastSuccessfulFetchResponse(Xe)),yield Promise.all(bt),Xe})()}}function Go(k=navigator){return k.languages&&k.languages[0]||k.language}class Mo{constructor(U,Q,ge,je,Xe,bt){this.firebaseInstallations=U,this.sdkVersion=Q,this.namespace=ge,this.projectId=je,this.apiKey=Xe,this.appId=bt}fetch(U){var Q=this;return(0,q.Z)(function*(){var ge,je,Xe;const[bt,$t]=yield Promise.all([Q.firebaseInstallations.getId(),Q.firebaseInstallations.getToken()]),Mn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Q.projectId}/namespaces/${Q.namespace}:fetch?key=${Q.apiKey}`,$n={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":U.eTag||"*"},Rn={sdk_version:Q.sdkVersion,app_instance_id:bt,app_instance_id_token:$t,app_id:Q.appId,language_code:Go()},oi={method:"POST",headers:$n,body:JSON.stringify(Rn)},ls=fetch(Mn,oi),ta=new Promise((ia,ou)=>{U.signal.addEventListener(()=>{const Hl=new Error("The operation was aborted.");Hl.name="AbortError",ou(Hl)})});let na;try{yield Promise.race([ls,ta]),na=yield ls}catch(ia){let ou="fetch-client-network";throw"AbortError"===(null===(ge=ia)||void 0===ge?void 0:ge.name)&&(ou="fetch-timeout"),Tr.create(ou,{originalErrorMessage:null===(je=ia)||void 0===je?void 0:je.message})}let Ca=na.status;const gu=na.headers.get("ETag")||void 0;let za,ra;if(200===na.status){let ia;try{ia=yield na.json()}catch(ou){throw Tr.create("fetch-client-parse",{originalErrorMessage:null===(Xe=ou)||void 0===Xe?void 0:Xe.message})}za=ia.entries,ra=ia.state}if("INSTANCE_STATE_UNSPECIFIED"===ra?Ca=500:"NO_CHANGE"===ra?Ca=304:("NO_TEMPLATE"===ra||"EMPTY_CONFIG"===ra)&&(za={}),304!==Ca&&200!==Ca)throw Tr.create("fetch-status",{httpStatus:Ca});return{status:Ca,eTag:gu,config:za}})()}}class ke{constructor(U,Q){this.client=U,this.storage=Q}fetch(U){var Q=this;return(0,q.Z)(function*(){const ge=(yield Q.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Q.attemptFetch(U,ge)})()}attemptFetch(U,{throttleEndTimeMillis:Q,backoffCount:ge}){var je=this;return(0,q.Z)(function*(){yield function vi(k,U){return new Promise((Q,ge)=>{const je=Math.max(U-Date.now(),0),Xe=setTimeout(Q,je);k.addEventListener(()=>{clearTimeout(Xe),ge(Tr.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(U.signal,Q);try{const Xe=yield je.client.fetch(U);return yield je.storage.deleteThrottleMetadata(),Xe}catch(Xe){if(!function Fe(k){if(!(k instanceof J.ZR&&k.customData))return!1;const U=Number(k.customData.httpStatus);return 429===U||500===U||503===U||504===U}(Xe))throw Xe;const bt={throttleEndTimeMillis:Date.now()+(0,J.$s)(ge),backoffCount:ge+1};return yield je.storage.setThrottleMetadata(bt),je.attemptFetch(U,bt)}})()}}class vt{constructor(U,Q,ge,je,Xe){this.app=U,this._client=Q,this._storageCache=ge,this._storage=je,this._logger=Xe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function At(k,U){var Q;const ge=k.target.error||void 0;return Tr.create(U,{originalErrorMessage:ge&&(null===(Q=ge)||void 0===Q?void 0:Q.message)})}const xn="app_namespace_store";class ps{constructor(U,Q,ge,je=function ts(){return new Promise((k,U)=>{var Q;try{const ge=indexedDB.open("firebase_remote_config",1);ge.onerror=je=>{U(At(je,"storage-open"))},ge.onsuccess=je=>{k(je.target.result)},ge.onupgradeneeded=je=>{0===je.oldVersion&&je.target.result.createObjectStore(xn,{keyPath:"compositeKey"})}}catch(ge){U(Tr.create("storage-open",{originalErrorMessage:null===(Q=ge)||void 0===Q?void 0:Q.message}))}})}()){this.appId=U,this.appName=Q,this.namespace=ge,this.openDbPromise=je}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(U){return this.set("last_fetch_status",U)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(U){return this.set("last_successful_fetch_timestamp_millis",U)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(U){return this.set("last_successful_fetch_response",U)}getActiveConfig(){return this.get("active_config")}setActiveConfig(U){return this.set("active_config",U)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(U){return this.set("active_config_etag",U)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(U){return this.set("throttle_metadata",U)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(U){var Q=this;return(0,q.Z)(function*(){const ge=yield Q.openDbPromise;return new Promise((je,Xe)=>{var bt;const vn=ge.transaction([xn],"readonly").objectStore(xn),Mn=Q.createCompositeKey(U);try{const $n=vn.get(Mn);$n.onerror=Rn=>{Xe(At(Rn,"storage-get"))},$n.onsuccess=Rn=>{const oi=Rn.target.result;je(oi?oi.value:void 0)}}catch($n){Xe(Tr.create("storage-get",{originalErrorMessage:null===(bt=$n)||void 0===bt?void 0:bt.message}))}})})()}set(U,Q){var ge=this;return(0,q.Z)(function*(){const je=yield ge.openDbPromise;return new Promise((Xe,bt)=>{var $t;const Mn=je.transaction([xn],"readwrite").objectStore(xn),$n=ge.createCompositeKey(U);try{const Rn=Mn.put({compositeKey:$n,value:Q});Rn.onerror=oi=>{bt(At(oi,"storage-set"))},Rn.onsuccess=()=>{Xe()}}catch(Rn){bt(Tr.create("storage-set",{originalErrorMessage:null===($t=Rn)||void 0===$t?void 0:$t.message}))}})})()}delete(U){var Q=this;return(0,q.Z)(function*(){const ge=yield Q.openDbPromise;return new Promise((je,Xe)=>{var bt;const vn=ge.transaction([xn],"readwrite").objectStore(xn),Mn=Q.createCompositeKey(U);try{const $n=vn.delete(Mn);$n.onerror=Rn=>{Xe(At(Rn,"storage-delete"))},$n.onsuccess=()=>{je()}}catch($n){Xe(Tr.create("storage-delete",{originalErrorMessage:null===(bt=$n)||void 0===bt?void 0:bt.message}))}})})()}createCompositeKey(U){return[this.appId,this.appName,this.namespace,U].join()}}class ro{constructor(U){this.storage=U}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var U=this;return(0,q.Z)(function*(){const Q=U.storage.getLastFetchStatus(),ge=U.storage.getLastSuccessfulFetchTimestampMillis(),je=U.storage.getActiveConfig(),Xe=yield Q;Xe&&(U.lastFetchStatus=Xe);const bt=yield ge;bt&&(U.lastSuccessfulFetchTimestampMillis=bt);const $t=yield je;$t&&(U.activeConfig=$t)})()}setLastFetchStatus(U){return this.lastFetchStatus=U,this.storage.setLastFetchStatus(U)}setLastSuccessfulFetchTimestampMillis(U){return this.lastSuccessfulFetchTimestampMillis=U,this.storage.setLastSuccessfulFetchTimestampMillis(U)}setActiveConfig(U){return this.activeConfig=U,this.storage.setActiveConfig(U)}}function gs(){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,q.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch{return!1}})).apply(this,arguments)}!function rr(){(0,Re._registerComponent)(new Me.wA("remote-config",function k(U,{instanceIdentifier:Q}){const ge=U.getProvider("app").getImmediate(),je=U.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Tr.create("registration-window");if(!(0,J.hl)())throw Tr.create("indexed-db-unavailable");const{projectId:Xe,apiKey:bt,appId:$t}=ge.options;if(!Xe)throw Tr.create("registration-project-id");if(!bt)throw Tr.create("registration-api-key");if(!$t)throw Tr.create("registration-app-id");const vn=new ps($t,ge.name,Q=Q||"firebase"),Mn=new ro(vn),$n=new Le.Yd(hs);$n.logLevel=Le.in.ERROR;const Rn=new Mo(je,Re.SDK_VERSION,Q,Xe,bt,$t),oi=new ke(Rn,vn),ls=new qs(oi,vn,Mn,$n),ta=new vt(ge,ls,Mn,vn,$n);return function Vr(k){const U=(0,J.m9)(k);U._initializePromise||(U._initializePromise=U._storageCache.loadFromStorage().then(()=>{U._isInitializationComplete=!0}))}(ta),ta},"PUBLIC").setMultipleInstances(!0)),(0,Re.registerVersion)(hs,"0.3.11"),(0,Re.registerVersion)(hs,"0.3.11","esm2017")}();const hi="/firebase-messaging-sw.js",ns="/firebase-cloud-messaging-push-scope",xi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ro="google.c.a.c_id",ji="google.c.a.c_l",yo="google.c.a.ts",No="google.c.a.e";var ms=(()=>{return(k=ms||(ms={})).PUSH_RECEIVED="push-received",k.NOTIFICATION_CLICKED="notification-clicked",ms;var k})();function Mi(k){const U=new Uint8Array(k);return btoa(String.fromCharCode(...U)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Pi(k){const Q=(k+"=".repeat((4-k.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ge=atob(Q),je=new Uint8Array(ge.length);for(let Xe=0;Xe<ge.length;++Xe)je[Xe]=ge.charCodeAt(Xe);return je}const Ri="fcm_token_details_db",wi="fcm_token_object_Store";function qn(k){return Zs.apply(this,arguments)}function Zs(){return Zs=(0,q.Z)(function*(k){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Xe=>Xe.name).includes(Ri))return null;let U=null;return(yield(0,Ve.X3)(Ri,5,{upgrade:(ge=(0,q.Z)(function*(je,Xe,bt,$t){var vn;if(Xe<2||!je.objectStoreNames.contains(wi))return;const Mn=$t.objectStore(wi),$n=yield Mn.index("fcmSenderId").get(k);if(yield Mn.clear(),$n)if(2===Xe){const Rn=$n;if(!Rn.auth||!Rn.p256dh||!Rn.endpoint)return;U={token:Rn.fcmToken,createTime:null!==(vn=Rn.createTime)&&void 0!==vn?vn:Date.now(),subscriptionOptions:{auth:Rn.auth,p256dh:Rn.p256dh,endpoint:Rn.endpoint,swScope:Rn.swScope,vapidKey:"string"==typeof Rn.vapidKey?Rn.vapidKey:Mi(Rn.vapidKey)}}}else if(3===Xe){const Rn=$n;U={token:Rn.fcmToken,createTime:Rn.createTime,subscriptionOptions:{auth:Mi(Rn.auth),p256dh:Mi(Rn.p256dh),endpoint:Rn.endpoint,swScope:Rn.swScope,vapidKey:Mi(Rn.vapidKey)}}}else if(4===Xe){const Rn=$n;U={token:Rn.fcmToken,createTime:Rn.createTime,subscriptionOptions:{auth:Mi(Rn.auth),p256dh:Mi(Rn.p256dh),endpoint:Rn.endpoint,swScope:Rn.swScope,vapidKey:Mi(Rn.vapidKey)}}}}),function(Xe,bt,$t,vn){return ge.apply(this,arguments)})})).close(),yield(0,Ve.Lj)(Ri),yield(0,Ve.Lj)("fcm_vapid_details_db"),yield(0,Ve.Lj)("undefined"),$r(U)?U:null;var ge}),Zs.apply(this,arguments)}function $r(k){if(!k||!k.subscriptionOptions)return!1;const{subscriptionOptions:U}=k;return"number"==typeof k.createTime&&k.createTime>0&&"string"==typeof k.token&&k.token.length>0&&"string"==typeof U.auth&&U.auth.length>0&&"string"==typeof U.p256dh&&U.p256dh.length>0&&"string"==typeof U.endpoint&&U.endpoint.length>0&&"string"==typeof U.swScope&&U.swScope.length>0&&"string"==typeof U.vapidKey&&U.vapidKey.length>0}const Hi="firebase-messaging-store";let hr=null;function Ei(){return hr||(hr=(0,Ve.X3)("firebase-messaging-database",1,{upgrade:(k,U)=>{0===U&&k.createObjectStore(Hi)}})),hr}function Xr(k){return ys.apply(this,arguments)}function ys(){return(ys=(0,q.Z)(function*(k){const U=is(k),ge=yield(yield Ei()).transaction(Hi).objectStore(Hi).get(U);if(ge)return ge;{const je=yield qn(k.appConfig.senderId);if(je)return yield ir(k,je),je}})).apply(this,arguments)}function ir(k,U){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,q.Z)(function*(k,U){const Q=is(k),je=(yield Ei()).transaction(Hi,"readwrite");return yield je.objectStore(Hi).put(U,Q),yield je.done,U})).apply(this,arguments)}function xr(k){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,q.Z)(function*(k){const U=is(k),ge=(yield Ei()).transaction(Hi,"readwrite");yield ge.objectStore(Hi).delete(U),yield ge.done})).apply(this,arguments)}function is({appConfig:k}){return k.appId}const Nr=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Cn(k,U){return fa.apply(this,arguments)}function fa(){return(fa=(0,q.Z)(function*(k,U){var Q;const ge=yield Ys(k),je=It(U),Xe={method:"POST",headers:ge,body:JSON.stringify(je)};let bt;try{bt=yield(yield fetch(ks(k.appConfig),Xe)).json()}catch($t){throw Nr.create("token-subscribe-failed",{errorInfo:null===(Q=$t)||void 0===Q?void 0:Q.toString()})}if(bt.error)throw Nr.create("token-subscribe-failed",{errorInfo:bt.error.message});if(!bt.token)throw Nr.create("token-subscribe-no-token");return bt.token})).apply(this,arguments)}function Ua(k,U){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,q.Z)(function*(k,U){var Q;const ge=yield Ys(k),je=It(U.subscriptionOptions),Xe={method:"PATCH",headers:ge,body:JSON.stringify(je)};let bt;try{bt=yield(yield fetch(`${ks(k.appConfig)}/${U.token}`,Xe)).json()}catch($t){throw Nr.create("token-update-failed",{errorInfo:null===(Q=$t)||void 0===Q?void 0:Q.toString()})}if(bt.error)throw Nr.create("token-update-failed",{errorInfo:bt.error.message});if(!bt.token)throw Nr.create("token-update-no-token");return bt.token})).apply(this,arguments)}function Po(k,U){return tr.apply(this,arguments)}function tr(){return(tr=(0,q.Z)(function*(k,U){var Q;const je={method:"DELETE",headers:yield Ys(k)};try{const bt=yield(yield fetch(`${ks(k.appConfig)}/${U}`,je)).json();if(bt.error)throw Nr.create("token-unsubscribe-failed",{errorInfo:bt.error.message})}catch(Xe){throw Nr.create("token-unsubscribe-failed",{errorInfo:null===(Q=Xe)||void 0===Q?void 0:Q.toString()})}})).apply(this,arguments)}function ks({projectId:k}){return`https://fcmregistrations.googleapis.com/v1/projects/${k}/registrations`}function Ys(k){return ss.apply(this,arguments)}function ss(){return(ss=(0,q.Z)(function*({appConfig:k,installations:U}){const Q=yield U.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k.apiKey,"x-goog-firebase-installations-auth":`FIS ${Q}`})})).apply(this,arguments)}function It({p256dh:k,auth:U,endpoint:Q,vapidKey:ge}){const je={web:{endpoint:Q,auth:U,p256dh:k}};return ge!==xi&&(je.web.applicationPubKey=ge),je}const Wn=6048e5;function $i(k){return _s.apply(this,arguments)}function _s(){return(_s=(0,q.Z)(function*(k){const U=yield vo(k.swRegistration,k.vapidKey),Q={vapidKey:k.vapidKey,swScope:k.swRegistration.scope,endpoint:U.endpoint,auth:Mi(U.getKey("auth")),p256dh:Mi(U.getKey("p256dh"))},ge=yield Xr(k.firebaseDependencies);if(ge){if(j(ge.subscriptionOptions,Q))return Date.now()>=ge.createTime+Wn?os(k,{token:ge.token,createTime:Date.now(),subscriptionOptions:Q}):ge.token;try{yield Po(k.firebaseDependencies,ge.token)}catch(je){console.warn(je)}return Ur(k.firebaseDependencies,Q)}return Ur(k.firebaseDependencies,Q)})).apply(this,arguments)}function pn(k){return _o.apply(this,arguments)}function _o(){return(_o=(0,q.Z)(function*(k){const U=yield Xr(k.firebaseDependencies);U&&(yield Po(k.firebaseDependencies,U.token),yield xr(k.firebaseDependencies));const Q=yield k.swRegistration.pushManager.getSubscription();return!Q||Q.unsubscribe()})).apply(this,arguments)}function os(k,U){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,q.Z)(function*(k,U){try{const Q=yield Ua(k.firebaseDependencies,U),ge=Object.assign(Object.assign({},U),{token:Q,createTime:Date.now()});return yield ir(k.firebaseDependencies,ge),Q}catch(Q){throw yield pn(k),Q}})).apply(this,arguments)}function Ur(k,U){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,q.Z)(function*(k,U){const ge={token:yield Cn(k,U),createTime:Date.now(),subscriptionOptions:U};return yield ir(k,ge),ge.token})).apply(this,arguments)}function vo(k,U){return zo.apply(this,arguments)}function zo(){return(zo=(0,q.Z)(function*(k,U){return(yield k.pushManager.getSubscription())||k.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Pi(U)})})).apply(this,arguments)}function j(k,U){return U.vapidKey===k.vapidKey&&U.endpoint===k.endpoint&&U.auth===k.auth&&U.p256dh===k.p256dh}function L(k){const U={from:k.from,collapseKey:k.collapse_key,messageId:k.fcmMessageId};return function O(k,U){if(!U.notification)return;k.notification={};const Q=U.notification.title;Q&&(k.notification.title=Q);const ge=U.notification.body;ge&&(k.notification.body=ge);const je=U.notification.image;je&&(k.notification.image=je)}(U,k),function ne(k,U){!U.data||(k.data=U.data)}(U,k),function ct(k,U){var Q,ge,je,Xe,bt;if(!(U.fcmOptions||null!==(Q=U.notification)&&void 0!==Q&&Q.click_action))return;k.fcmOptions={};const $t=null!==(je=null===(ge=U.fcmOptions)||void 0===ge?void 0:ge.link)&&void 0!==je?je:null===(Xe=U.notification)||void 0===Xe?void 0:Xe.click_action;$t&&(k.fcmOptions.link=$t);const vn=null===(bt=U.fcmOptions)||void 0===bt?void 0:bt.analytics_label;vn&&(k.fcmOptions.analyticsLabel=vn)}(U,k),U}function hn(k){return"object"==typeof k&&!!k&&Ro in k}function yr(k,U){const Q=[];for(let ge=0;ge<k.length;ge++)Q.push(k.charAt(ge)),ge<U.length&&Q.push(U.charAt(ge));return Q.join("")}function fi(k){return Nr.create("missing-app-config-values",{valueName:k})}yr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),yr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Gi{constructor(U,Q,ge){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const je=function ki(k){if(!k||!k.options)throw fi("App Configuration Object");if(!k.name)throw fi("App Name");const U=["projectId","apiKey","appId","messagingSenderId"],{options:Q}=k;for(const ge of U)if(!Q[ge])throw fi(ge);return{appName:k.name,projectId:Q.projectId,apiKey:Q.apiKey,appId:Q.appId,senderId:Q.messagingSenderId}}(U);this.firebaseDependencies={app:U,appConfig:je,installations:Q,analyticsProvider:ge}}_delete(){return Promise.resolve()}}function Vs(k){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,q.Z)(function*(k){var U;try{k.swRegistration=yield navigator.serviceWorker.register(hi,{scope:ns}),k.swRegistration.update().catch(()=>{})}catch(Q){throw Nr.create("failed-service-worker-registration",{browserErrorMessage:null===(U=Q)||void 0===U?void 0:U.message})}})).apply(this,arguments)}function Us(k,U){return pa.apply(this,arguments)}function pa(){return(pa=(0,q.Z)(function*(k,U){if(!U&&!k.swRegistration&&(yield Vs(k)),U||!k.swRegistration){if(!(U instanceof ServiceWorkerRegistration))throw Nr.create("invalid-sw-registration");k.swRegistration=U}})).apply(this,arguments)}function pi(k,U){return ga.apply(this,arguments)}function ga(){return(ga=(0,q.Z)(function*(k,U){U?k.vapidKey=U:k.vapidKey||(k.vapidKey=xi)})).apply(this,arguments)}function Xa(){return(Xa=(0,q.Z)(function*(k,U){if(!navigator)throw Nr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nr.create("permission-blocked");return yield pi(k,U?.vapidKey),yield Us(k,U?.serviceWorkerRegistration),$i(k)})).apply(this,arguments)}function du(k,U,Q){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,q.Z)(function*(k,U,Q){const ge=eu(U);(yield k.firebaseDependencies.analyticsProvider.get()).logEvent(ge,{message_id:Q[Ro],message_name:Q[ji],message_time:Q[yo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function eu(k){switch(k){case ms.NOTIFICATION_CLICKED:return"notification_open";case ms.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function z(){return(z=(0,q.Z)(function*(k,U){const Q=U.data;if(!Q.isFirebaseMessaging)return;k.onMessageHandler&&Q.messageType===ms.PUSH_RECEIVED&&("function"==typeof k.onMessageHandler?k.onMessageHandler(L(Q)):k.onMessageHandler.next(L(Q)));const ge=Q.data;hn(ge)&&"1"===ge[No]&&(yield du(k,Q.messageType,ge))})).apply(this,arguments)}const F="@firebase/messaging",X="0.9.16",Ee=k=>{const U=new Gi(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),k.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Q=>function R(k,U){return z.apply(this,arguments)}(U,Q)),U},Qe=k=>{const U=k.getProvider("messaging").getImmediate();return{getToken:ge=>function Ja(k,U){return Xa.apply(this,arguments)}(U,ge)}};function nn(){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,q.Z)(function*(){try{yield(0,J.eu)()}catch{return!1}return typeof window<"u"&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function pt(){(0,Re._registerComponent)(new Me.wA("messaging",Ee,"PUBLIC")),(0,Re._registerComponent)(new Me.wA("messaging-internal",Qe,"PRIVATE")),(0,Re.registerVersion)(F,X),(0,Re.registerVersion)(F,X,"esm2017")}();const si="analytics",wo="firebase_id",as="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ma="https://www.googletagmanager.com/gtag/js",Wr=new Le.Yd("@firebase/analytics");function Ko(k){return Promise.all(k.map(U=>U.catch(Q=>Q)))}function ya(k,U){const Q=document.createElement("script");Q.src=`${ma}?l=${k}&id=${U}`,Q.async=!0,document.head.appendChild(Q)}function Wu(k,U,Q,ge,je,Xe){return _a.apply(this,arguments)}function _a(){return(_a=(0,q.Z)(function*(k,U,Q,ge,je,Xe){const bt=ge[je];try{if(bt)yield U[bt];else{const vn=(yield Ko(Q)).find(Mn=>Mn.measurementId===je);vn&&(yield U[vn.appId])}}catch($t){Wr.error($t)}k("config",je,Xe)})).apply(this,arguments)}function tu(k,U,Q,ge,je){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,q.Z)(function*(k,U,Q,ge,je){try{let Xe=[];if(je&&je.send_to){let bt=je.send_to;Array.isArray(bt)||(bt=[bt]);const $t=yield Ko(Q);for(const vn of bt){const Mn=$t.find(Rn=>Rn.measurementId===vn),$n=Mn&&U[Mn.appId];if(!$n){Xe=[];break}Xe.push($n)}}0===Xe.length&&(Xe=Object.values(U)),yield Promise.all(Xe),k("event",ge,je||{})}catch(Xe){Wr.error(Xe)}})).apply(this,arguments)}function hu(){const k=window.document.getElementsByTagName("script");for(const U of Object.values(k))if(U.src&&U.src.includes(ma))return U;return null}const qr=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Hs=new class Er{constructor(U={},Q=1e3){this.throttleMetadata=U,this.intervalMillis=Q}getThrottleMetadata(U){return this.throttleMetadata[U]}setThrottleMetadata(U,Q){this.throttleMetadata[U]=Q}deleteThrottleMetadata(U){delete this.throttleMetadata[U]}};function Au(k){return new Headers({Accept:"application/json","x-goog-api-key":k})}function va(k){return ru.apply(this,arguments)}function ru(){return(ru=(0,q.Z)(function*(k){var U;const{appId:Q,apiKey:ge}=k,je={method:"GET",headers:Au(ge)},Xe=as.replace("{app-id}",Q),bt=yield fetch(Xe,je);if(200!==bt.status&&304!==bt.status){let $t="";try{const vn=yield bt.json();null!==(U=vn.error)&&void 0!==U&&U.message&&($t=vn.error.message)}catch{}throw qr.create("config-fetch-failed",{httpStatus:bt.status,responseMessage:$t})}return bt.json()})).apply(this,arguments)}function gi(k){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,q.Z)(function*(k,U=Hs,Q){const{appId:ge,apiKey:je,measurementId:Xe}=k.options;if(!ge)throw qr.create("no-app-id");if(!je){if(Xe)return{measurementId:Xe,appId:ge};throw qr.create("no-api-key")}const bt=U.getThrottleMetadata(ge)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$t=new $a;return setTimeout((0,q.Z)(function*(){$t.abort()}),void 0!==Q?Q:6e4),Ha({appId:ge,apiKey:je,measurementId:Xe},bt,$t,U)})).apply(this,arguments)}function Ha(k,U,Q){return zr.apply(this,arguments)}function zr(){return(zr=(0,q.Z)(function*(k,{throttleEndTimeMillis:U,backoffCount:Q},ge,je=Hs){var Xe,bt;const{appId:$t,measurementId:vn}=k;try{yield Eo(ge,U)}catch(Mn){if(vn)return Wr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${vn} provided in the "measurementId" field in the local Firebase config. [${null===(Xe=Mn)||void 0===Xe?void 0:Xe.message}]`),{appId:$t,measurementId:vn};throw Mn}try{const Mn=yield va(k);return je.deleteThrottleMetadata($t),Mn}catch(Mn){const $n=Mn;if(!$s($n)){if(je.deleteThrottleMetadata($t),vn)return Wr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${vn} provided in the "measurementId" field in the local Firebase config. [${$n?.message}]`),{appId:$t,measurementId:vn};throw Mn}const Rn=503===Number(null===(bt=$n?.customData)||void 0===bt?void 0:bt.httpStatus)?(0,J.$s)(Q,je.intervalMillis,30):(0,J.$s)(Q,je.intervalMillis),oi={throttleEndTimeMillis:Date.now()+Rn,backoffCount:Q+1};return je.setThrottleMetadata($t,oi),Wr.debug(`Calling attemptFetch again in ${Rn} millis`),Ha(k,oi,ge,je)}})).apply(this,arguments)}function Eo(k,U){return new Promise((Q,ge)=>{const je=Math.max(U-Date.now(),0),Xe=setTimeout(Q,je);k.addEventListener(()=>{clearTimeout(Xe),ge(qr.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}function $s(k){if(!(k instanceof J.ZR&&k.customData))return!1;const U=Number(k.customData.httpStatus);return 429===U||500===U||503===U||504===U}class $a{constructor(){this.listeners=[]}addEventListener(U){this.listeners.push(U)}abort(){this.listeners.forEach(U=>U())}}let Zo,Ti;function ei(){return(ei=(0,q.Z)(function*(k,U,Q,ge,je){if(je&&je.global)k("event",Q,ge);else{const Xe=yield U;k("event",Q,Object.assign(Object.assign({},ge),{send_to:Xe}))}})).apply(this,arguments)}function Ea(k){Ti=k}function zu(k){Zo=k}function Yi(){return xu.apply(this,arguments)}function xu(){return(xu=(0,q.Z)(function*(){var k;if(!(0,J.hl)())return Wr.warn(qr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(U){return Wr.warn(qr.create("indexeddb-unavailable",{errorInfo:null===(k=U)||void 0===k?void 0:k.toString()}).message),!1}return!0})).apply(this,arguments)}function xa(){return(xa=(0,q.Z)(function*(k,U,Q,ge,je,Xe,bt){var $t;const vn=gi(k);vn.then(ls=>{Q[ls.measurementId]=ls.appId,k.options.measurementId&&ls.measurementId!==k.options.measurementId&&Wr.warn(`The measurement ID in the local Firebase config (${k.options.measurementId}) does not match the measurement ID fetched from the server (${ls.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ls=>Wr.error(ls)),U.push(vn);const Mn=Yi().then(ls=>{if(ls)return ge.getId()}),[$n,Rn]=yield Promise.all([vn,Mn]);hu()||ya(Xe,$n.measurementId),Ti&&(je("consent","default",Ti),Ea(void 0)),je("js",new Date);const oi=null!==($t=bt?.config)&&void 0!==$t?$t:{};return oi.origin="firebase",oi.update=!0,null!=Rn&&(oi[wo]=Rn),je("config",$n.measurementId,oi),Zo&&(je("set",Zo),zu(void 0)),$n.measurementId})).apply(this,arguments)}class Ma{constructor(U){this.app=U}_delete(){return delete us[this.app.options.appId],Promise.resolve()}}let us={},Ra=[];const Qo={};let Co,Lo,Ga="dataLayer",Br=!1;function Or(k,U,Q){!function Ku(){const k=[];if((0,J.ru)()&&k.push("This is a browser extension environment."),(0,J.zI)()||k.push("Cookies are not available."),k.length>0){const U=k.map((ge,je)=>`(${je+1}) ${ge}`).join(" "),Q=qr.create("invalid-analytics-context",{errorInfo:U});Wr.warn(Q.message)}}();const ge=k.options.appId;if(!ge)throw qr.create("no-app-id");if(!k.options.apiKey){if(!k.options.measurementId)throw qr.create("no-api-key");Wr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${k.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=us[ge])throw qr.create("already-exists",{id:ge});if(!Br){!function Ba(k){let U=[];Array.isArray(window[k])?U=window[k]:window[k]=U}(Ga);const{wrappedGtag:Xe,gtagCore:bt}=function Fi(k,U,Q,ge,je){let Xe=function(...bt){window[ge].push(arguments)};return window[je]&&"function"==typeof window[je]&&(Xe=window[je]),window[je]=function qo(k,U,Q,ge){function Xe(){return(Xe=(0,q.Z)(function*(bt,$t,vn){try{"event"===bt?yield tu(k,U,Q,$t,vn):"config"===bt?yield Wu(k,U,Q,ge,$t,vn):"consent"===bt?k("consent","update",vn):k("set",$t)}catch(Mn){Wr.error(Mn)}})).apply(this,arguments)}return function je(bt,$t,vn){return Xe.apply(this,arguments)}}(Xe,k,U,Q),{gtagCore:Xe,wrappedGtag:window[je]}}(us,Ra,Qo,Ga,"gtag");Lo=Xe,Co=bt,Br=!0}return us[ge]=function Yo(k,U,Q,ge,je,Xe,bt){return xa.apply(this,arguments)}(k,Ra,Qo,U,Co,Ga,Q),new Ma(k)}function Jt(){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,q.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch{return!1}})).apply(this,arguments)}const jl="@firebase/analytics";!function Js(){(0,Re._registerComponent)(new Me.wA(si,(U,{options:Q})=>Or(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),Q),"PUBLIC")),(0,Re._registerComponent)(new Me.wA("analytics-internal",function k(U){try{const Q=U.getProvider(si).getImmediate();return{logEvent:(ge,je,Xe)=>function Na(k,U,Q,ge){k=(0,J.m9)(k),function Ot(k,U,Q,ge,je){return ei.apply(this,arguments)}(Lo,us[k.app.options.appId],U,Q,ge).catch(je=>Wr.error(je))}(Q,ge,je,Xe)}}catch(Q){throw qr.create("interop-component-reg-failed",{reason:Q})}},"PRIVATE")),(0,Re.registerVersion)(jl,"0.8.0"),(0,Re.registerVersion)(jl,"0.8.0","esm2017")}();var oo=H(4408),Xs=H(7565);const Je=new class Jo extends Xs.v{}(class Zu extends oo.o{constructor(U,Q){super(U,Q),this.scheduler=U,this.work=Q}schedule(U,Q=0){return Q>0?super.schedule(U,Q):(this.delay=Q,this.state=U,this.scheduler.flush(this),this)}execute(U,Q){return Q>0||this.closed?super.execute(U,Q):this._execute(U,Q)}requestAsyncId(U,Q,ge=0){return null!=ge&&ge>0||null==ge&&this.delay>0?super.requestAsyncId(U,Q,ge):U.flush(this)}});var ao=H(4986),pu=H(8505),uo=H(9468),lo=H(5363);const co=new _.GfV("7.4.1"),Xo="__angularfire_symbol__analyticsIsSupportedValue",D="__angularfire_symbol__analyticsIsSupported",b="__angularfire_symbol__remoteConfigIsSupportedValue",I="__angularfire_symbol__remoteConfigIsSupported",M="__angularfire_symbol__messagingIsSupportedValue",V="__angularfire_symbol__messagingIsSupported";function Ft(k,U,Q){if(U){if(1===U.length)return U[0];const Xe=U.filter(bt=>bt.app===Q);if(1===Xe.length)return Xe[0]}return Q.container.getProvider(k).getImmediate({optional:!0})}globalThis[D]||(globalThis[D]=Jt().then(k=>globalThis[Xo]=k).catch(()=>globalThis[Xo]=!1)),globalThis[V]||(globalThis[V]=nn().then(k=>globalThis[M]=k).catch(()=>globalThis[M]=!1)),globalThis[I]||(globalThis[I]=gs().then(k=>globalThis[b]=k).catch(()=>globalThis[b]=!1));const gn=(k,U)=>{const Q=U?[U]:(0,Z.C6)(),ge=[];return Q.forEach(je=>{je.container.getProvider(k).instances.forEach(bt=>{ge.includes(bt)||ge.push(bt)})}),ge};function Nt(){}class fr{constructor(U,Q=Je){this.zone=U,this.delegate=Q}now(){return this.delegate.now()}schedule(U,Q,ge){const je=this.zone;return this.delegate.schedule(function(bt){je.runGuarded(()=>{U.apply(this,[bt])})},Q,ge)}}class Li{constructor(U){this.zone=U,this.task=null}call(U,Q){const ge=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Nt,{},Nt,Nt)),Q.pipe((0,pu.b)({next:ge,complete:ge,error:ge})).subscribe(U).add(ge)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ci=(()=>{class k{constructor(Q){this.ngZone=Q,this.outsideAngular=Q.runOutsideAngular(()=>new fr(Zone.current)),this.insideAngular=Q.run(()=>new fr(Zone.current,ao.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return k.\u0275fac=function(Q){return new(Q||k)(_.LFG(_.R0b))},k.\u0275prov=_.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function Ts(){const k=globalThis.\u0275AngularFireScheduler;if(!k)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return k}function Do(k){return Ts(),function fl(k){return function(Q){return(Q=Q.lift(new Li(k.ngZone))).pipe((0,uo.R)(k.outsideAngular),(0,lo.Q)(k.insideAngular))}}(Ts())(k)}},2090:(Kt,qe,H)=>{H.d(qe,{$s:()=>Qr,BH:()=>it,DV:()=>yn,Dv:()=>_i,G6:()=>$e,GJ:()=>tn,L:()=>Ve,LL:()=>Ct,Mn:()=>Ge,Pz:()=>Zt,Sg:()=>tt,UG:()=>at,UI:()=>ci,US:()=>Me,Wj:()=>zn,Yr:()=>Mt,ZB:()=>ie,ZR:()=>Be,b$:()=>Bt,cI:()=>Ut,d:()=>mt,dS:()=>ln,eu:()=>ve,g5:()=>q,gK:()=>ur,gQ:()=>Nn,h$:()=>Le,hl:()=>P,hu:()=>Z,jU:()=>nt,lb:()=>Bn,m9:()=>jn,ne:()=>sr,p$:()=>ae,pd:()=>pr,r3:()=>Xn,ru:()=>Ne,tV:()=>He,uI:()=>zt,ug:()=>on,vZ:()=>Dr,w1:()=>st,w9:()=>en,xO:()=>Zr,xb:()=>mn,z$:()=>Ke,zI:()=>oe,zd:()=>Ht});const Z=function(xe,fe){if(!xe)throw q(fe)},q=function(xe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+xe)},Re=function(xe){const fe=[];let Ie=0;for(let Ae=0;Ae<xe.length;Ae++){let De=xe.charCodeAt(Ae);De<128?fe[Ie++]=De:De<2048?(fe[Ie++]=De>>6|192,fe[Ie++]=63&De|128):55296==(64512&De)&&Ae+1<xe.length&&56320==(64512&xe.charCodeAt(Ae+1))?(De=65536+((1023&De)<<10)+(1023&xe.charCodeAt(++Ae)),fe[Ie++]=De>>18|240,fe[Ie++]=De>>12&63|128,fe[Ie++]=De>>6&63|128,fe[Ie++]=63&De|128):(fe[Ie++]=De>>12|224,fe[Ie++]=De>>6&63|128,fe[Ie++]=63&De|128)}return fe},Me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(xe,fe){if(!Array.isArray(xe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ie=fe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ae=[];for(let De=0;De<xe.length;De+=3){const _t=xe[De],Pt=De+1<xe.length,qt=Pt?xe[De+1]:0,lr=De+2<xe.length,Gn=lr?xe[De+2]:0;let _e=(15&qt)<<2|Gn>>6,yt=63&Gn;lr||(yt=64,Pt||(_e=64)),Ae.push(Ie[_t>>2],Ie[(3&_t)<<4|qt>>4],Ie[_e],Ie[yt])}return Ae.join("")},encodeString(xe,fe){return this.HAS_NATIVE_SUPPORT&&!fe?btoa(xe):this.encodeByteArray(Re(xe),fe)},decodeString(xe,fe){return this.HAS_NATIVE_SUPPORT&&!fe?atob(xe):function(xe){const fe=[];let Ie=0,Ae=0;for(;Ie<xe.length;){const De=xe[Ie++];if(De<128)fe[Ae++]=String.fromCharCode(De);else if(De>191&&De<224){const _t=xe[Ie++];fe[Ae++]=String.fromCharCode((31&De)<<6|63&_t)}else if(De>239&&De<365){const lr=((7&De)<<18|(63&xe[Ie++])<<12|(63&xe[Ie++])<<6|63&xe[Ie++])-65536;fe[Ae++]=String.fromCharCode(55296+(lr>>10)),fe[Ae++]=String.fromCharCode(56320+(1023&lr))}else{const _t=xe[Ie++],Pt=xe[Ie++];fe[Ae++]=String.fromCharCode((15&De)<<12|(63&_t)<<6|63&Pt)}}return fe.join("")}(this.decodeStringToByteArray(xe,fe))},decodeStringToByteArray(xe,fe){this.init_();const Ie=fe?this.charToByteMapWebSafe_:this.charToByteMap_,Ae=[];for(let De=0;De<xe.length;){const _t=Ie[xe.charAt(De++)],qt=De<xe.length?Ie[xe.charAt(De)]:0;++De;const Gn=De<xe.length?Ie[xe.charAt(De)]:64;++De;const ye=De<xe.length?Ie[xe.charAt(De)]:64;if(++De,null==_t||null==qt||null==Gn||null==ye)throw Error();Ae.push(_t<<2|qt>>4),64!==Gn&&(Ae.push(qt<<4&240|Gn>>2),64!==ye&&Ae.push(Gn<<6&192|ye))}return Ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let xe=0;xe<this.ENCODED_VALS.length;xe++)this.byteToCharMap_[xe]=this.ENCODED_VALS.charAt(xe),this.charToByteMap_[this.byteToCharMap_[xe]]=xe,this.byteToCharMapWebSafe_[xe]=this.ENCODED_VALS_WEBSAFE.charAt(xe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[xe]]=xe,xe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(xe)]=xe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(xe)]=xe)}}},Le=function(xe){const fe=Re(xe);return Me.encodeByteArray(fe,!0)},Ve=function(xe){return Le(xe).replace(/\./g,"")},He=function(xe){try{return Me.decodeString(xe,!0)}catch(fe){console.error("base64Decode failed: ",fe)}return null};function ae(xe){return ie(void 0,xe)}function ie(xe,fe){if(!(fe instanceof Object))return fe;switch(fe.constructor){case Date:return new Date(fe.getTime());case Object:void 0===xe&&(xe={});break;case Array:xe=[];break;default:return fe}for(const Ie in fe)!fe.hasOwnProperty(Ie)||!me(Ie)||(xe[Ie]=ie(xe[Ie],fe[Ie]));return xe}function me(xe){return"__proto__"!==xe}class it{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((fe,Ie)=>{this.resolve=fe,this.reject=Ie})}wrapCallback(fe){return(Ie,Ae)=>{Ie?this.reject(Ie):this.resolve(Ae),"function"==typeof fe&&(this.promise.catch(()=>{}),1===fe.length?fe(Ie):fe(Ie,Ae))}}}function tt(xe,fe){if(xe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ae=fe||"demo-project",De=xe.iat||0,_t=xe.sub||xe.user_id;if(!_t)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pt=Object.assign({iss:`https://securetoken.google.com/${Ae}`,aud:Ae,iat:De,exp:De+3600,auth_time:De,sub:_t,user_id:_t,firebase:{sign_in_provider:"custom",identities:{}}},xe);return[Ve(JSON.stringify({alg:"none",type:"JWT"})),Ve(JSON.stringify(Pt)),""].join(".")}function Ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function zt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function at(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function nt(){return"object"==typeof self&&self.self===self}function Ne(){const xe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof xe&&void 0!==xe.id}function Bt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function mt(){return Ke().indexOf("Electron/")>=0}function st(){const xe=Ke();return xe.indexOf("MSIE ")>=0||xe.indexOf("Trident/")>=0}function Ge(){return Ke().indexOf("MSAppHost/")>=0}function Mt(){return!1}function $e(){return!at()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P(){return"object"==typeof indexedDB}function ve(){return new Promise((xe,fe)=>{try{let Ie=!0;const Ae="validate-browser-context-for-indexeddb-analytics-module",De=self.indexedDB.open(Ae);De.onsuccess=()=>{De.result.close(),Ie||self.indexedDB.deleteDatabase(Ae),xe(!0)},De.onupgradeneeded=()=>{Ie=!1},De.onerror=()=>{var _t;fe((null===(_t=De.error)||void 0===_t?void 0:_t.message)||"")}}catch(Ie){fe(Ie)}})}function oe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Be extends Error{constructor(fe,Ie,Ae){super(Ie),this.code=fe,this.customData=Ae,this.name="FirebaseError",Object.setPrototypeOf(this,Be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ct.prototype.create)}}class Ct{constructor(fe,Ie,Ae){this.service=fe,this.serviceName=Ie,this.errors=Ae}create(fe,...Ie){const Ae=Ie[0]||{},De=`${this.service}/${fe}`,_t=this.errors[fe],Pt=_t?function Rt(xe,fe){return xe.replace(kt,(Ie,Ae)=>{const De=fe[Ae];return null!=De?String(De):`<${Ae}?>`})}(_t,Ae):"Error";return new Be(De,`${this.serviceName}: ${Pt} (${De}).`,Ae)}}const kt=/\{\$([^}]+)}/g;function Ut(xe){return JSON.parse(xe)}function Zt(xe){return JSON.stringify(xe)}const lt=function(xe){let fe={},Ie={},Ae={},De="";try{const _t=xe.split(".");fe=Ut(He(_t[0])||""),Ie=Ut(He(_t[1])||""),De=_t[2],Ae=Ie.d||{},delete Ie.d}catch{}return{header:fe,claims:Ie,data:Ae,signature:De}},en=function(xe){const Ie=lt(xe).claims;return!!Ie&&"object"==typeof Ie&&Ie.hasOwnProperty("iat")},tn=function(xe){const fe=lt(xe).claims;return"object"==typeof fe&&!0===fe.admin};function Xn(xe,fe){return Object.prototype.hasOwnProperty.call(xe,fe)}function yn(xe,fe){if(Object.prototype.hasOwnProperty.call(xe,fe))return xe[fe]}function mn(xe){for(const fe in xe)if(Object.prototype.hasOwnProperty.call(xe,fe))return!1;return!0}function ci(xe,fe,Ie){const Ae={};for(const De in xe)Object.prototype.hasOwnProperty.call(xe,De)&&(Ae[De]=fe.call(Ie,xe[De],De,xe));return Ae}function Dr(xe,fe){if(xe===fe)return!0;const Ie=Object.keys(xe),Ae=Object.keys(fe);for(const De of Ie){if(!Ae.includes(De))return!1;const _t=xe[De],Pt=fe[De];if(wn(_t)&&wn(Pt)){if(!Dr(_t,Pt))return!1}else if(_t!==Pt)return!1}for(const De of Ae)if(!Ie.includes(De))return!1;return!0}function wn(xe){return null!==xe&&"object"==typeof xe}function Zr(xe){const fe=[];for(const[Ie,Ae]of Object.entries(xe))Array.isArray(Ae)?Ae.forEach(De=>{fe.push(encodeURIComponent(Ie)+"="+encodeURIComponent(De))}):fe.push(encodeURIComponent(Ie)+"="+encodeURIComponent(Ae));return fe.length?"&"+fe.join("&"):""}function Ht(xe){const fe={};return xe.replace(/^\?/,"").split("&").forEach(Ae=>{if(Ae){const[De,_t]=Ae.split("=");fe[decodeURIComponent(De)]=decodeURIComponent(_t)}}),fe}function pr(xe){const fe=xe.indexOf("?");if(!fe)return"";const Ie=xe.indexOf("#",fe);return xe.substring(fe,Ie>0?Ie:void 0)}class Nn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let fe=1;fe<this.blockSize;++fe)this.pad_[fe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(fe,Ie){Ie||(Ie=0);const Ae=this.W_;if("string"==typeof fe)for(let ye=0;ye<16;ye++)Ae[ye]=fe.charCodeAt(Ie)<<24|fe.charCodeAt(Ie+1)<<16|fe.charCodeAt(Ie+2)<<8|fe.charCodeAt(Ie+3),Ie+=4;else for(let ye=0;ye<16;ye++)Ae[ye]=fe[Ie]<<24|fe[Ie+1]<<16|fe[Ie+2]<<8|fe[Ie+3],Ie+=4;for(let ye=16;ye<80;ye++){const _e=Ae[ye-3]^Ae[ye-8]^Ae[ye-14]^Ae[ye-16];Ae[ye]=4294967295&(_e<<1|_e>>>31)}let Gn,Ue,De=this.chain_[0],_t=this.chain_[1],Pt=this.chain_[2],qt=this.chain_[3],lr=this.chain_[4];for(let ye=0;ye<80;ye++){ye<40?ye<20?(Gn=qt^_t&(Pt^qt),Ue=1518500249):(Gn=_t^Pt^qt,Ue=1859775393):ye<60?(Gn=_t&Pt|qt&(_t|Pt),Ue=2400959708):(Gn=_t^Pt^qt,Ue=3395469782);const _e=(De<<5|De>>>27)+Gn+lr+Ue+Ae[ye]&4294967295;lr=qt,qt=Pt,Pt=4294967295&(_t<<30|_t>>>2),_t=De,De=_e}this.chain_[0]=this.chain_[0]+De&4294967295,this.chain_[1]=this.chain_[1]+_t&4294967295,this.chain_[2]=this.chain_[2]+Pt&4294967295,this.chain_[3]=this.chain_[3]+qt&4294967295,this.chain_[4]=this.chain_[4]+lr&4294967295}update(fe,Ie){if(null==fe)return;void 0===Ie&&(Ie=fe.length);const Ae=Ie-this.blockSize;let De=0;const _t=this.buf_;let Pt=this.inbuf_;for(;De<Ie;){if(0===Pt)for(;De<=Ae;)this.compress_(fe,De),De+=this.blockSize;if("string"==typeof fe){for(;De<Ie;)if(_t[Pt]=fe.charCodeAt(De),++Pt,++De,Pt===this.blockSize){this.compress_(_t),Pt=0;break}}else for(;De<Ie;)if(_t[Pt]=fe[De],++Pt,++De,Pt===this.blockSize){this.compress_(_t),Pt=0;break}}this.inbuf_=Pt,this.total_+=Ie}digest(){const fe=[];let Ie=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let De=this.blockSize-1;De>=56;De--)this.buf_[De]=255&Ie,Ie/=256;this.compress_(this.buf_);let Ae=0;for(let De=0;De<5;De++)for(let _t=24;_t>=0;_t-=8)fe[Ae]=this.chain_[De]>>_t&255,++Ae;return fe}}function sr(xe,fe){const Ie=new St(xe,fe);return Ie.subscribe.bind(Ie)}class St{constructor(fe,Ie){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ie,this.task.then(()=>{fe(this)}).catch(Ae=>{this.error(Ae)})}next(fe){this.forEachObserver(Ie=>{Ie.next(fe)})}error(fe){this.forEachObserver(Ie=>{Ie.error(fe)}),this.close(fe)}complete(){this.forEachObserver(fe=>{fe.complete()}),this.close()}subscribe(fe,Ie,Ae){let De;if(void 0===fe&&void 0===Ie&&void 0===Ae)throw new Error("Missing Observer.");De=function Tn(xe,fe){if("object"!=typeof xe||null===xe)return!1;for(const Ie of fe)if(Ie in xe&&"function"==typeof xe[Ie])return!0;return!1}(fe,["next","error","complete"])?fe:{next:fe,error:Ie,complete:Ae},void 0===De.next&&(De.next=cr),void 0===De.error&&(De.error=cr),void 0===De.complete&&(De.complete=cr);const _t=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?De.error(this.finalError):De.complete()}catch{}}),this.observers.push(De),_t}unsubscribeOne(fe){void 0===this.observers||void 0===this.observers[fe]||(delete this.observers[fe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(fe){if(!this.finalized)for(let Ie=0;Ie<this.observers.length;Ie++)this.sendOne(Ie,fe)}sendOne(fe,Ie){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[fe])try{Ie(this.observers[fe])}catch(Ae){typeof console<"u"&&console.error&&console.error(Ae)}})}close(fe){this.finalized||(this.finalized=!0,void 0!==fe&&(this.finalError=fe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cr(){}const _i=function(xe,fe,Ie,Ae){let De;if(Ae<fe?De="at least "+fe:Ae>Ie&&(De=0===Ie?"none":"no more than "+Ie),De)throw new Error(xe+" failed: Was called with "+Ae+(1===Ae?" argument.":" arguments.")+" Expects "+De+".")};function ur(xe,fe){return`${xe} failed: ${fe} argument `}function zn(xe,fe,Ie,Ae){if((!Ae||Ie)&&"function"!=typeof Ie)throw new Error(ur(xe,fe)+"must be a valid function.")}function Bn(xe,fe,Ie,Ae){if((!Ae||Ie)&&("object"!=typeof Ie||null===Ie))throw new Error(ur(xe,fe)+"must be a valid context object.")}const ln=function(xe){const fe=[];let Ie=0;for(let Ae=0;Ae<xe.length;Ae++){let De=xe.charCodeAt(Ae);if(De>=55296&&De<=56319){const _t=De-55296;Ae++,Z(Ae<xe.length,"Surrogate pair missing trail surrogate."),De=65536+(_t<<10)+(xe.charCodeAt(Ae)-56320)}De<128?fe[Ie++]=De:De<2048?(fe[Ie++]=De>>6|192,fe[Ie++]=63&De|128):De<65536?(fe[Ie++]=De>>12|224,fe[Ie++]=De>>6&63|128,fe[Ie++]=63&De|128):(fe[Ie++]=De>>18|240,fe[Ie++]=De>>12&63|128,fe[Ie++]=De>>6&63|128,fe[Ie++]=63&De|128)}return fe},on=function(xe){let fe=0;for(let Ie=0;Ie<xe.length;Ie++){const Ae=xe.charCodeAt(Ie);Ae<128?fe++:Ae<2048?fe+=2:Ae>=55296&&Ae<=56319?(fe+=4,Ie++):fe+=3}return fe};function Qr(xe,fe=1e3,Ie=2){const Ae=fe*Math.pow(Ie,xe),De=Math.round(.5*Ae*(Math.random()-.5)*2);return Math.min(144e5,Ae+De)}function jn(xe){return xe&&xe._delegate?xe._delegate:xe}},7238:(Kt,qe,H)=>{H.r(qe),H.d(qe,{AuthModule:()=>Mt});var _=H(6895),Z=H(7001),q=H(5861);class Re{}var J=H(4650),Me=H(2463),Le=H(4004),Ve=H(7471),He=H(7407);let ae=(()=>{class $e{constructor(ve,oe){this.db=ve,this.firestore=oe,this.dbPath="chatMensajes",this.mensajesCollection=oe.collection(this.dbPath,Te=>Te.orderBy("fecha","asc"))}getMensajes(){return this.mensajes=this.mensajesCollection.snapshotChanges().pipe((0,Le.U)(ve=>ve.map(oe=>oe.payload.doc.data()))),this.mensajes}saveMensaje(ve){this.mensajesCollection.add({emailUsuario:ve.emailUsuario,idUsuario:ve.idUsuario,fecha:ve.fecha,mensaje:ve.mensaje})}}return $e.\u0275fac=function(ve){return new(ve||$e)(J.LFG(Ve.KQ),J.LFG(He.ST))},$e.\u0275prov=J.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"root"}),$e})();var ie=H(433);function me($e,P){if(1&$e&&(J.TgZ(0,"div",13),J._uU(1),J.TgZ(2,"b"),J._uU(3),J.qZA(),J._uU(4," dice: "),J.qZA()),2&$e){const ve=J.oxw().$implicit;J.xp6(1),J.hij(" ",ve.fecha,", "),J.xp6(2),J.Oqu(ve.emailUsuario)}}function it($e,P){if(1&$e&&(J.TgZ(0,"div",10),J.YNc(1,me,5,2,"div",11),J.TgZ(2,"div",12),J._uU(3),J.qZA()()),2&$e){const ve=P.$implicit,oe=J.oxw().ngIf;J.oxw();const Te=J.MAs(5);J.xp6(1),J.Q6J("ngIf",ve.emailUsuario!=(null==oe?null:oe.email))("ngIfElse",Te),J.xp6(2),J.Oqu(ve.mensaje)}}function tt($e,P){if(1&$e){const ve=J.EpF();J.TgZ(0,"div",4),J.YNc(1,it,4,3,"div",5),J.TgZ(2,"div",6)(3,"textarea",7),J.NdJ("ngModelChange",function(Te){J.CHM(ve);const Se=J.oxw();return J.KtG(Se.msjEnviar=Te)}),J.qZA()(),J.TgZ(4,"div",8)(5,"button",9),J.NdJ("click",function(){J.CHM(ve);const Te=J.oxw();return J.KtG(Te.enviar())}),J._uU(6,"Enviar"),J.qZA()()()}if(2&$e){const ve=J.oxw();J.xp6(1),J.Q6J("ngForOf",ve.listaMensajes),J.xp6(2),J.Q6J("ngModel",ve.msjEnviar)}}function Ke($e,P){1&$e&&(J.TgZ(0,"div",14)(1,"strong"),J._uU(2," digo: "),J.qZA()())}function zt($e,P){1&$e&&(J.TgZ(0,"div",15)(1,"span",16),J._uU(2,"Inicia sesi\xf3n para acceder al chat."),J.qZA()())}let at=(()=>{class $e{constructor(ve,oe,Te){this.authSvc=ve,this.chatSvc=oe,this.router=Te,this.usuarioActual=!1,this.usuario$=this.authSvc.afAuth.user,this.listaMensajes=new Array,this.usuario$.subscribe(Se=>{this.mailUsuarioLogeado=Se.email,this.idUsuarioLogeado=Se.uid}),this.cargarMensajes()}ngOnInit(){}cargarMensajes(){var ve=this;return(0,q.Z)(function*(){ve.listaMensajes=[],ve.chatSvc.getMensajes().subscribe(oe=>{ve.listaMensajes=oe,console.log(ve.listaMensajes)})})()}enviar(){let ve=new Re;ve.idUsuario=this.idUsuarioLogeado,ve.emailUsuario=this.mailUsuarioLogeado,ve.fecha=(new Date).toLocaleString(),ve.mensaje=this.msjEnviar,console.log("mensaje a guardar en db: ",ve),this.chatSvc.saveMensaje(ve),this.msjEnviar=""}}return $e.\u0275fac=function(ve){return new(ve||$e)(J.Y36(Me.e),J.Y36(ae),J.Y36(Z.F0))},$e.\u0275cmp=J.Xpm({type:$e,selectors:[["app-chat"]],decls:8,vars:4,consts:[[1,"container","justify-content-center"],["class","card mt-3",4,"ngIf","ngIfElse"],["yo",""],["acceso",""],[1,"card","mt-3"],["class","card mt-1 mb-2",4,"ngFor","ngForOf"],[1,"form-group","px-3","pb-3","mt-3"],["rows","3","placeholder","Escriba su mensaje...",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-center"],["type","submit",1,"w-50","btn","btn-dark","mb-3","px-3",3,"click"],[1,"card","mt-1","mb-2"],["class","chat ml-2 p-1 chat-otro",4,"ngIf","ngIfElse"],[1,"chat","ml-2","p-1"],[1,"chat","ml-2","p-1","chat-otro"],[1,"chat-yo","p-1"],[1,"d-flex","justify-content-center","mt-5","p-3"],[1,"text"]],template:function(ve,oe){if(1&ve&&(J.TgZ(0,"div",0),J.YNc(1,tt,7,2,"div",1),J.ALo(2,"async"),J.qZA(),J.TgZ(3,"div"),J.YNc(4,Ke,3,0,"ng-template",null,2,J.W1O),J.YNc(6,zt,3,0,"ng-template",null,3,J.W1O),J.qZA()),2&ve){const Te=J.MAs(7);J.xp6(1),J.Q6J("ngIf",J.lcZ(2,2,oe.usuario$))("ngIfElse",Te)}},dependencies:[_.sg,_.O5,ie.Fj,ie.JJ,ie.On,_.Ov],styles:[".chat-yo[_ngcontent-%COMP%]{background-color:#bfbfbf}.chat-otro[_ngcontent-%COMP%]{background-color:#85cf85}"]}),$e})(),nt=(()=>{class $e{constructor(){}ngOnInit(){}}return $e.\u0275fac=function(ve){return new(ve||$e)},$e.\u0275cmp=J.Xpm({type:$e,selectors:[["app-forgot-password"]],decls:6,vars:0,consts:[[1,"text-center"],["src","../../../../assets/EN PROCESO.png","width","30%","height","30%"]],template:function(ve,oe){1&ve&&(J.TgZ(0,"div",0),J._UZ(1,"br"),J.TgZ(2,"h1"),J._uU(3,"Recuperar Contrase\xf1a"),J.qZA(),J._UZ(4,"br")(5,"img",1),J.qZA())}}),$e})(),Ne=(()=>{class $e{constructor(ve,oe){this.authSvc=ve,this.router=oe}ngOnInit(){}login(){var ve=this;return(0,q.Z)(function*(){yield ve.authSvc.login(ve.email,ve.password),""!=ve.authSvc.msjError?ve.msjError=ve.authSvc.msjError:(ve.msjError="",ve.router.navigate(["home"]))})()}logout(){var ve=this;return(0,q.Z)(function*(){try{console.log(ve.authSvc.logout()),ve.router.navigate(["login"])}catch(oe){console.log("Error->",oe)}})()}userA(){this.email="laplu.me.valen@gmail.com",this.password="asd123"}}return $e.\u0275fac=function(ve){return new(ve||$e)(J.Y36(Me.e),J.Y36(Z.F0))},$e.\u0275cmp=J.Xpm({type:$e,selectors:[["app-login"]],decls:19,vars:3,consts:[[1,"text-center"],[1,"form-signin","w-100","m-auto"],["src","../../../../assets/logo-nav.png","alt","logo-app","width","72","height","57",1,"mb-4"],[1,"form-floating","mb-2"],["type","email","name","email","required","required","placeholder","nombre@ejemplo.com",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingInput"],[1,"form-floating","mb-4"],["type","password","name","password","placeholder","Password","required","required",1,"form-control",3,"ngModel","ngModelChange"],["for","floatingPassword"],[1,"text-danger"],["type","submit",1,"w-100","btn","btn-lg","btn-primary","mb-1",3,"click"],["type","submit",1,"w-100","btn","btn-lg","btn-dark",3,"click"]],template:function(ve,oe){1&ve&&(J.TgZ(0,"div",0)(1,"main",1)(2,"form"),J._UZ(3,"img",2),J.TgZ(4,"div",3)(5,"input",4),J.NdJ("ngModelChange",function(Se){return oe.email=Se}),J.qZA(),J.TgZ(6,"label",5),J._uU(7,"Mail"),J.qZA()(),J.TgZ(8,"div",6)(9,"input",7),J.NdJ("ngModelChange",function(Se){return oe.password=Se}),J.qZA(),J.TgZ(10,"label",8),J._uU(11,"Contrase\xf1a"),J.qZA()(),J.TgZ(12,"div",6)(13,"span",9),J._uU(14),J.qZA()(),J.TgZ(15,"button",10),J.NdJ("click",function(){return oe.login()}),J._uU(16,"Iniciar sesi\xf3n"),J.qZA(),J.TgZ(17,"button",11),J.NdJ("click",function(){return oe.userA()}),J._uU(18,"Usuario de prueba"),J.qZA()()()()),2&ve&&(J.xp6(5),J.Q6J("ngModel",oe.email),J.xp6(4),J.Q6J("ngModel",oe.password),J.xp6(5),J.Oqu(oe.msjError))},dependencies:[ie._Y,ie.Fj,ie.JJ,ie.JL,ie.Q7,ie.On,ie.F],styles:[".form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.m-auto[_ngcontent-%COMP%]{margin:auto!important}.w-100[_ngcontent-%COMP%]{width:100%!important}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]:before{box-sizing:border-box}"]}),$e})();var Bt=H(2090);const st=[{path:"",children:[{path:"acceso",component:Ne},{path:"registro",component:(()=>{class $e{constructor(ve,oe){this.authSvc=ve,this.router=oe,this.msjError="",this.formulario=new ie.cw({email:new ie.NI,password:new ie.NI,passwordConfirm:new ie.NI})}ngOnInit(){}onSubmit(){var ve=this;return(0,q.Z)(function*(){if(console.log(ve.formulario.value),null==ve.formulario.value.email)return void(ve.msjError="Ingrese correo electr\xf3nico.");if(ve.setearMsjError(),ve.msjError=ve.ValidatePassword(ve.formulario.value.password,ve.formulario.value.passwordConfirm),""!=ve.msjError)return;const oe={email:ve.formulario.value.email,password:ve.formulario.value.password},Te={email:oe.email,password:oe.password};yield ve.authSvc.register(Te),""!=ve.authSvc.msjError?ve.msjError=ve.authSvc.msjError:(ve.setearMsjError(),ve.router.navigate(["home"]))})()}setearMsjError(){this.msjError=""}ValidatePassword(ve,oe){if(null==ve)return"Ingrese contrase\xf1a.";if(null==oe)return"Ingrese confirmaci\xf3n de contrase\xf1a.";let Te=(0,Bt.ug)(ve),Se=(0,Bt.ug)(oe);return Te<6?"La contrase\xf1a debe contener al menos 6 caracteres.":Se?ve!=oe?"Las contrase\xf1as no coinciden.":"":"Ingrese confirmaci\xf3n de contrase\xf1a."}}return $e.\u0275fac=function(ve){return new(ve||$e)(J.Y36(Me.e),J.Y36(Z.F0))},$e.\u0275cmp=J.Xpm({type:$e,selectors:[["app-register"]],decls:21,vars:2,consts:[[1,"text-center"],[1,"form-signin","w-100","m-auto"],[3,"formGroup"],["src","../../../../assets/logo-nav.png","alt","logo-app","width","72","height","57",1,"mb-4"],[1,"form-floating","mb-2"],["type","email","name","email","formControlName","email","required","required","placeholder","nombre@ejemplo.com",1,"form-control"],["for","floatingInput"],["type","password","formControlName","password","name","password","placeholder","Password","required","required",1,"form-control"],["for","floatingPassword"],[1,"form-floating","mb-4"],["type","password","formControlName","passwordConfirm","name","passwordConfirm","placeholder","passwordConfirm","required","required",1,"form-control"],[1,"text-danger"],["type","submit",1,"w-100","btn","btn-lg","btn-primary",3,"click"]],template:function(ve,oe){1&ve&&(J.TgZ(0,"div",0)(1,"main",1)(2,"form",2),J._UZ(3,"img",3),J.TgZ(4,"div",4),J._UZ(5,"input",5),J.TgZ(6,"label",6),J._uU(7,"Correo Electr\xf3nico"),J.qZA()(),J.TgZ(8,"div",4),J._UZ(9,"input",7),J.TgZ(10,"label",8),J._uU(11,"Contrase\xf1a"),J.qZA()(),J.TgZ(12,"div",9),J._UZ(13,"input",10),J.TgZ(14,"label",8),J._uU(15,"Confirma Contrase\xf1a"),J.qZA()(),J.TgZ(16,"div",9)(17,"span",11),J._uU(18),J.qZA()(),J.TgZ(19,"button",12),J.NdJ("click",function(){return oe.onSubmit()}),J._uU(20,"Registrarse"),J.qZA()()()()),2&ve&&(J.xp6(2),J.Q6J("formGroup",oe.formulario),J.xp6(16),J.Oqu(oe.msjError))},dependencies:[ie._Y,ie.Fj,ie.JJ,ie.JL,ie.Q7,ie.sg,ie.u],styles:[".form-signin[_ngcontent-%COMP%]{max-width:330px;padding:15px}.m-auto[_ngcontent-%COMP%]{margin:auto!important}.w-100[_ngcontent-%COMP%]{width:100%!important}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]:before{box-sizing:border-box}"]}),$e})()},{path:"recuperoContrase\xf1a",component:nt},{path:"chat",component:at}]}];let Ge=(()=>{class $e{}return $e.\u0275fac=function(ve){return new(ve||$e)},$e.\u0275mod=J.oAB({type:$e}),$e.\u0275inj=J.cJS({imports:[Z.Bz.forChild(st),Z.Bz]}),$e})(),Mt=(()=>{class $e{}return $e.\u0275fac=function(ve){return new(ve||$e)},$e.\u0275mod=J.oAB({type:$e}),$e.\u0275inj=J.cJS({imports:[_.ez,Ge,ie.u5,ie.UX]}),$e})()},5276:(Kt,qe,H)=>{H.r(qe),H.d(qe,{HomeModule:()=>ae});var _=H(6895),Z=H(7001),q=H(4650);function Re(ie,me){1&ie&&(q.TgZ(0,"div",1),q._UZ(1,"br"),q.TgZ(2,"h1"),q._uU(3,"HOME"),q.qZA(),q._UZ(4,"br")(5,"img",2),q.qZA())}const Le=[{path:"",children:[{path:"",component:(()=>{class ie{constructor(){}ngOnInit(){}}return ie.\u0275fac=function(it){return new(it||ie)},ie.\u0275cmp=q.Xpm({type:ie,selectors:[["app-home"]],decls:1,vars:1,consts:[["class","text-center",4,"ngIf"],[1,"text-center"],["src","../../../../assets/EN PROCESO.png","width","30%","height","30%"]],template:function(it,tt){1&it&&q.YNc(0,Re,6,0,"div",0),2&it&&q.Q6J("ngIf",!0)},dependencies:[_.O5]}),ie})()},{path:"quienSoy",component:(()=>{class ie{constructor(){}ngOnInit(){}}return ie.\u0275fac=function(it){return new(it||ie)},ie.\u0275cmp=q.Xpm({type:ie,selectors:[["app-quien-soy"]],decls:2,vars:0,template:function(it,tt){1&it&&(q.TgZ(0,"p"),q._uU(1,"quien-soy works!"),q.qZA())}}),ie})()}]}];let Ve=(()=>{class ie{}return ie.\u0275fac=function(it){return new(it||ie)},ie.\u0275mod=q.oAB({type:ie}),ie.\u0275inj=q.cJS({imports:[Z.Bz.forChild(Le),Z.Bz]}),ie})();var He=H(433);let ae=(()=>{class ie{}return ie.\u0275fac=function(it){return new(it||ie)},ie.\u0275mod=q.oAB({type:ie}),ie.\u0275inj=q.cJS({imports:[_.ez,Ve,He.u5]}),ie})()},899:(Kt,qe,H)=>{H.r(qe),H.d(qe,{JuegosModule:()=>He});var _=H(6895),Z=H(7001),q=H(4650);const Me=[{path:"",children:[{path:"ahorcado",component:(()=>{class ae{constructor(){}ngOnInit(){}}return ae.\u0275fac=function(me){return new(me||ae)},ae.\u0275cmp=q.Xpm({type:ae,selectors:[["app-ahorcado"]],decls:2,vars:0,template:function(me,it){1&me&&(q.TgZ(0,"p"),q._uU(1,"ahorcado works!"),q.qZA())}}),ae})()},{path:"mayorOMenor",component:(()=>{class ae{constructor(){}ngOnInit(){}}return ae.\u0275fac=function(me){return new(me||ae)},ae.\u0275cmp=q.Xpm({type:ae,selectors:[["app-mayor-omenor"]],decls:2,vars:0,template:function(me,it){1&me&&(q.TgZ(0,"p"),q._uU(1,"mayor-omenor works!"),q.qZA())}}),ae})()}]}];let Le=(()=>{class ae{}return ae.\u0275fac=function(me){return new(me||ae)},ae.\u0275mod=q.oAB({type:ae}),ae.\u0275inj=q.cJS({imports:[Z.Bz.forChild(Me),Z.Bz]}),ae})();var Ve=H(433);let He=(()=>{class ae{}return ae.\u0275fac=function(me){return new(me||ae)},ae.\u0275mod=q.oAB({type:ae}),ae.\u0275inj=q.cJS({imports:[_.ez,Le,Ve.u5]}),ae})()},2463:(Kt,qe,H)=>{H.d(qe,{e:()=>He});var _=H(5861);class Z{}var q=H(4650),Re=H(1205),J=H(7001),Me=H(4004),Le=H(7407);let Ve=(()=>{class ae{constructor(me){this.firestoreDb=me,this.dbPath="/usuarios",this.usuario=new Z,this.usuariosRef=me.collection(this.dbPath),this.getUsuarios()}getUsuarios(){this.usuarios=this.usuariosRef.snapshotChanges().pipe((0,Me.U)(me=>me.map(it=>it.payload.doc.data())))}getUsuarioById(me){return this.firestoreDb.collection(this.dbPath,tt=>tt.where(me,"==","id"))}registrarUsuario(me,it){this.usuariosRef.add({email:me.email,fecha:(new Date).toLocaleString(),id:it})}}return ae.\u0275fac=function(me){return new(me||ae)(q.LFG(Le.ST))},ae.\u0275prov=q.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})(),He=(()=>{class ae{constructor(me,it,tt){this.afAuth=me,this.router=it,this.usuarioSvc=tt,this.msjError=""}login(me,it){var tt=this;return(0,_.Z)(function*(){return yield tt.afAuth.signInWithEmailAndPassword(me,it).then(Ke=>{tt.msjError="",Ke.user&&(tt.usuario=new Z,tt.usuario.id=Ke.user?.uid,tt.usuario.email=Ke.user?.email,console.log(tt.usuario))}).catch(Ke=>{console.log(Ke),tt.msjError=tt.getError(Ke.code)})})()}register({email:me,password:it}){var tt=this;return(0,_.Z)(function*(){return yield tt.afAuth.createUserWithEmailAndPassword(me,it).then(Ke=>{tt.msjError="",Ke.user&&tt.usuarioSvc.registrarUsuario(Ke.user,Ke.user.uid)}).catch(Ke=>{console.log(Ke),tt.msjError=tt.getError(Ke.code)})})()}getUserLogged(){var me=this;return(0,_.Z)(function*(){return me.afAuth.onAuthStateChanged(it=>{it&&console.log("getUserLogged -> ",it)})})()}logout(){this.router.navigate(["home"]),this.afAuth.signOut()}getError(me){switch(console.log("getError ->",me),me){case"auth/user-not-found":return"No existe ning\xfan registro de usuario que corresponda al correo electr\xf3nico indicado.";case"auth/email-already-in-use":return"Otro usuario ya est\xe1 utilizando el correo electr\xf3nico indicado.";case"auth/invalid-email":return"El formato del correo electr\xf3nico no es correcto.";case"auth/invalid-password":return"El valor que se proporcion\xf3 para la contrase\xf1a no es v\xe1lido. Debe contener al menos seis caracteres.";case"auth/invalid-phone-number":return"El valor que se proporcion\xf3 para el n\xfamero de celular no es v\xe1lido. Debe no estar vac\xedo y que cumpla con el est\xe1ndar E.164."}return""}}return ae.\u0275fac=function(me){return new(me||ae)(q.LFG(Re.zQ),q.LFG(J.F0),q.LFG(Ve))},ae.\u0275prov=q.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})()},6757:(Kt,qe,H)=>{var _=H(1481),Z=H(4650),q=H(7001);const Re=[{path:"home",loadChildren:()=>Promise.resolve().then(H.bind(H,5276)).then(Ue=>Ue.HomeModule)},{path:"",loadChildren:()=>Promise.resolve().then(H.bind(H,5276)).then(Ue=>Ue.HomeModule)},{path:"auth",loadChildren:()=>Promise.resolve().then(H.bind(H,7238)).then(Ue=>Ue.AuthModule)},{path:"juegos",loadChildren:()=>Promise.resolve().then(H.bind(H,899)).then(Ue=>Ue.JuegosModule)}];let J=(()=>{class Ue{}return Ue.\u0275fac=function(_e){return new(_e||Ue)},Ue.\u0275mod=Z.oAB({type:Ue}),Ue.\u0275inj=Z.cJS({imports:[q.Bz.forRoot(Re),q.Bz]}),Ue})();var Me=H(2463),Le=H(6895);const Ve=function(){return["ahorcado"]},He=function(){return["mayorOMenor"]};function ae(Ue,ye){1&Ue&&(Z.TgZ(0,"div")(1,"li",12)(2,"a",13),Z._uU(3," Juegos "),Z.qZA(),Z.TgZ(4,"ul",14)(5,"li")(6,"a",15),Z._uU(7,"Ahorcado"),Z.qZA()(),Z.TgZ(8,"li")(9,"a",15),Z._uU(10,"Mayor o Menor"),Z.qZA()()()()()),2&Ue&&(Z.xp6(6),Z.Q6J("routerLink",Z.DdM(2,Ve)),Z.xp6(3),Z.Q6J("routerLink",Z.DdM(3,He)))}const ie=function(){return["chat"]};function me(Ue,ye){if(1&Ue){const _e=Z.EpF();Z.TgZ(0,"div")(1,"li",12)(2,"a",13),Z._uU(3),Z.qZA(),Z.TgZ(4,"ul",14)(5,"li")(6,"a",15),Z._uU(7,"Chat"),Z.qZA()(),Z.TgZ(8,"li",16),Z.NdJ("click",function(){Z.CHM(_e);const gt=Z.oxw();return Z.KtG(gt.onLogout())}),Z.TgZ(9,"a",17),Z._uU(10,"Salir"),Z.qZA()()()()()}if(2&Ue){const _e=ye.ngIf;Z.xp6(3),Z.hij(" ",null==_e?null:_e.email," "),Z.xp6(3),Z.Q6J("routerLink",Z.DdM(2,ie))}}function it(Ue,ye){1&Ue&&(Z.TgZ(0,"li",12)(1,"a",13),Z._uU(2," Acceso "),Z.qZA(),Z.TgZ(3,"ul",14)(4,"li")(5,"a",18),Z._uU(6,"Registrarse"),Z.qZA()(),Z.TgZ(7,"li")(8,"a",19),Z._uU(9,"Iniciar sesi\xf3n"),Z.qZA()()()())}const tt=function(){return["../../home"]},Ke=function(){return["quienSoy"]};let zt=(()=>{class Ue{constructor(_e,yt){this.authService=_e,this.router=yt,this.usuario$=this.authService.afAuth.user}ngOnInit(){}onLogout(){this.router.navigate(["home"]),this.authService.logout()}}return Ue.\u0275fac=function(_e){return new(_e||Ue)(Z.Y36(Me.e),Z.Y36(q.F0))},Ue.\u0275cmp=Z.Xpm({type:Ue,selectors:[["app-menu-nav"]],decls:20,vars:13,consts:[[1,"navbar","navbar-expand-sm","navbar-dark","bg-dark","align-items-center"],[1,"container-fluid"],[1,"navbar-brand",3,"routerLink"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],["routerLinkActive","active",1,"nav-item"],["aria-current","page",1,"nav-link",3,"routerLink"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["acceso",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],[1,"dropdown-item",3,"routerLink"],["role","button",1,"nav-item",3,"click"],["aria-current","page",1,"dropdown-item"],["routerLink","../../auth/registro",1,"dropdown-item"],["routerLink","../../auth/acceso",1,"dropdown-item"]],template:function(_e,yt){if(1&_e&&(Z.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),Z._uU(3,"JuegosLaplu"),Z.qZA(),Z.TgZ(4,"button",3),Z._UZ(5,"span",4),Z.qZA(),Z.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),Z._uU(10,"Inicio"),Z.qZA()(),Z.TgZ(11,"li",7)(12,"a",8),Z._uU(13,"Quien Soy"),Z.qZA()(),Z.YNc(14,ae,11,4,"div",9),Z.ALo(15,"async"),Z.YNc(16,me,11,3,"div",10),Z.ALo(17,"async"),Z.YNc(18,it,10,0,"ng-template",null,11,Z.W1O),Z.qZA()()()()),2&_e){const gt=Z.MAs(19);Z.xp6(2),Z.Q6J("routerLink",Z.DdM(10,tt)),Z.xp6(7),Z.Q6J("routerLink",Z.DdM(11,tt)),Z.xp6(3),Z.Q6J("routerLink",Z.DdM(12,Ke)),Z.xp6(2),Z.Q6J("ngIf",Z.lcZ(15,6,yt.usuario$)),Z.xp6(2),Z.Q6J("ngIf",Z.lcZ(17,8,yt.usuario$))("ngIfElse",gt)}},dependencies:[Le.O5,q.yS,q.Od,Le.Ov]}),Ue})(),at=(()=>{class Ue{constructor(){this.title="juegosLaplu"}}return Ue.\u0275fac=function(_e){return new(_e||Ue)},Ue.\u0275cmp=Z.Xpm({type:Ue,selectors:[["app-root"]],decls:2,vars:0,template:function(_e,yt){1&_e&&Z._UZ(0,"app-menu-nav")(1,"router-outlet")},dependencies:[q.lC,zt]}),Ue})();const nt_firebase={projectId:"labo4-27bce",appId:"1:197231445810:web:8b1d15de8148e85260b92b",storageBucket:"labo4-27bce.appspot.com",locationId:"us-central",apiKey:"AIzaSyBMG46Wn9GTwL7DMI2HsdQtNdV6Rv_HtAY",authDomain:"labo4-27bce.firebaseapp.com",messagingSenderId:"197231445810",measurementId:"G-K5EEFTP543"};var Ne=H(433),Bt=H(7238),mt=H(5276),st=H(7471),Ge=H(9646),Mt=H(9751),$e=H(4351),P=H(9300),ve=H(4004);class oe{}class Te{}class Se{constructor(ye){this.normalizedNames=new Map,this.lazyUpdate=null,ye?this.lazyInit="string"==typeof ye?()=>{this.headers=new Map,ye.split("\n").forEach(_e=>{const yt=_e.indexOf(":");if(yt>0){const gt=_e.slice(0,yt),an=gt.toLowerCase(),On=_e.slice(yt+1).trim();this.maybeSetNormalizedName(gt,an),this.headers.has(an)?this.headers.get(an).push(On):this.headers.set(an,[On])}})}:()=>{this.headers=new Map,Object.keys(ye).forEach(_e=>{let yt=ye[_e];const gt=_e.toLowerCase();"string"==typeof yt&&(yt=[yt]),yt.length>0&&(this.headers.set(gt,yt),this.maybeSetNormalizedName(_e,gt))})}:this.headers=new Map}has(ye){return this.init(),this.headers.has(ye.toLowerCase())}get(ye){this.init();const _e=this.headers.get(ye.toLowerCase());return _e&&_e.length>0?_e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ye){return this.init(),this.headers.get(ye.toLowerCase())||null}append(ye,_e){return this.clone({name:ye,value:_e,op:"a"})}set(ye,_e){return this.clone({name:ye,value:_e,op:"s"})}delete(ye,_e){return this.clone({name:ye,value:_e,op:"d"})}maybeSetNormalizedName(ye,_e){this.normalizedNames.has(_e)||this.normalizedNames.set(_e,ye)}init(){this.lazyInit&&(this.lazyInit instanceof Se?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ye=>this.applyUpdate(ye)),this.lazyUpdate=null))}copyFrom(ye){ye.init(),Array.from(ye.headers.keys()).forEach(_e=>{this.headers.set(_e,ye.headers.get(_e)),this.normalizedNames.set(_e,ye.normalizedNames.get(_e))})}clone(ye){const _e=new Se;return _e.lazyInit=this.lazyInit&&this.lazyInit instanceof Se?this.lazyInit:this,_e.lazyUpdate=(this.lazyUpdate||[]).concat([ye]),_e}applyUpdate(ye){const _e=ye.name.toLowerCase();switch(ye.op){case"a":case"s":let yt=ye.value;if("string"==typeof yt&&(yt=[yt]),0===yt.length)return;this.maybeSetNormalizedName(ye.name,_e);const gt=("a"===ye.op?this.headers.get(_e):void 0)||[];gt.push(...yt),this.headers.set(_e,gt);break;case"d":const an=ye.value;if(an){let On=this.headers.get(_e);if(!On)return;On=On.filter(Ln=>-1===an.indexOf(Ln)),0===On.length?(this.headers.delete(_e),this.normalizedNames.delete(_e)):this.headers.set(_e,On)}else this.headers.delete(_e),this.normalizedNames.delete(_e)}}forEach(ye){this.init(),Array.from(this.normalizedNames.keys()).forEach(_e=>ye(this.normalizedNames.get(_e),this.headers.get(_e)))}}class Ct{encodeKey(ye){return Zt(ye)}encodeValue(ye){return Zt(ye)}decodeKey(ye){return decodeURIComponent(ye)}decodeValue(ye){return decodeURIComponent(ye)}}const kt=/%(\d[a-f0-9])/gi,Ut={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Zt(Ue){return encodeURIComponent(Ue).replace(kt,(ye,_e)=>Ut[_e]??ye)}function lt(Ue){return`${Ue}`}class Qt{constructor(ye={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ye.encoder||new Ct,ye.fromString){if(ye.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Rt(Ue,ye){const _e=new Map;return Ue.length>0&&Ue.replace(/^\?/,"").split("&").forEach(gt=>{const an=gt.indexOf("="),[On,Ln]=-1==an?[ye.decodeKey(gt),""]:[ye.decodeKey(gt.slice(0,an)),ye.decodeValue(gt.slice(an+1))],he=_e.get(On)||[];he.push(Ln),_e.set(On,he)}),_e}(ye.fromString,this.encoder)}else ye.fromObject?(this.map=new Map,Object.keys(ye.fromObject).forEach(_e=>{const yt=ye.fromObject[_e],gt=Array.isArray(yt)?yt.map(lt):[lt(yt)];this.map.set(_e,gt)})):this.map=null}has(ye){return this.init(),this.map.has(ye)}get(ye){this.init();const _e=this.map.get(ye);return _e?_e[0]:null}getAll(ye){return this.init(),this.map.get(ye)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ye,_e){return this.clone({param:ye,value:_e,op:"a"})}appendAll(ye){const _e=[];return Object.keys(ye).forEach(yt=>{const gt=ye[yt];Array.isArray(gt)?gt.forEach(an=>{_e.push({param:yt,value:an,op:"a"})}):_e.push({param:yt,value:gt,op:"a"})}),this.clone(_e)}set(ye,_e){return this.clone({param:ye,value:_e,op:"s"})}delete(ye,_e){return this.clone({param:ye,value:_e,op:"d"})}toString(){return this.init(),this.keys().map(ye=>{const _e=this.encoder.encodeKey(ye);return this.map.get(ye).map(yt=>_e+"="+this.encoder.encodeValue(yt)).join("&")}).filter(ye=>""!==ye).join("&")}clone(ye){const _e=new Qt({encoder:this.encoder});return _e.cloneFrom=this.cloneFrom||this,_e.updates=(this.updates||[]).concat(ye),_e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ye=>this.map.set(ye,this.cloneFrom.map.get(ye))),this.updates.forEach(ye=>{switch(ye.op){case"a":case"s":const _e=("a"===ye.op?this.map.get(ye.param):void 0)||[];_e.push(lt(ye.value)),this.map.set(ye.param,_e);break;case"d":if(void 0===ye.value){this.map.delete(ye.param);break}{let yt=this.map.get(ye.param)||[];const gt=yt.indexOf(lt(ye.value));-1!==gt&&yt.splice(gt,1),yt.length>0?this.map.set(ye.param,yt):this.map.delete(ye.param)}}}),this.cloneFrom=this.updates=null)}}class en{constructor(){this.map=new Map}set(ye,_e){return this.map.set(ye,_e),this}get(ye){return this.map.has(ye)||this.map.set(ye,ye.defaultValue()),this.map.get(ye)}delete(ye){return this.map.delete(ye),this}has(ye){return this.map.has(ye)}keys(){return this.map.keys()}}function Xn(Ue){return typeof ArrayBuffer<"u"&&Ue instanceof ArrayBuffer}function yn(Ue){return typeof Blob<"u"&&Ue instanceof Blob}function mn(Ue){return typeof FormData<"u"&&Ue instanceof FormData}class Dr{constructor(ye,_e,yt,gt){let an;if(this.url=_e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ye.toUpperCase(),function tn(Ue){switch(Ue){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||gt?(this.body=void 0!==yt?yt:null,an=gt):an=yt,an&&(this.reportProgress=!!an.reportProgress,this.withCredentials=!!an.withCredentials,an.responseType&&(this.responseType=an.responseType),an.headers&&(this.headers=an.headers),an.context&&(this.context=an.context),an.params&&(this.params=an.params)),this.headers||(this.headers=new Se),this.context||(this.context=new en),this.params){const On=this.params.toString();if(0===On.length)this.urlWithParams=_e;else{const Ln=_e.indexOf("?");this.urlWithParams=_e+(-1===Ln?"?":Ln<_e.length-1?"&":"")+On}}else this.params=new Qt,this.urlWithParams=_e}serializeBody(){return null===this.body?null:Xn(this.body)||yn(this.body)||mn(this.body)||function ci(Ue){return typeof URLSearchParams<"u"&&Ue instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||mn(this.body)?null:yn(this.body)?this.body.type||null:Xn(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ye={}){const _e=ye.method||this.method,yt=ye.url||this.url,gt=ye.responseType||this.responseType,an=void 0!==ye.body?ye.body:this.body,On=void 0!==ye.withCredentials?ye.withCredentials:this.withCredentials,Ln=void 0!==ye.reportProgress?ye.reportProgress:this.reportProgress;let he=ye.headers||this.headers,pe=ye.params||this.params;const le=ye.context??this.context;return void 0!==ye.setHeaders&&(he=Object.keys(ye.setHeaders).reduce((ze,ht)=>ze.set(ht,ye.setHeaders[ht]),he)),ye.setParams&&(pe=Object.keys(ye.setParams).reduce((ze,ht)=>ze.set(ht,ye.setParams[ht]),pe)),new Dr(_e,yt,an,{params:pe,headers:he,context:le,reportProgress:Ln,responseType:gt,withCredentials:On})}}var wn=(()=>((wn=wn||{})[wn.Sent=0]="Sent",wn[wn.UploadProgress=1]="UploadProgress",wn[wn.ResponseHeader=2]="ResponseHeader",wn[wn.DownloadProgress=3]="DownloadProgress",wn[wn.Response=4]="Response",wn[wn.User=5]="User",wn))();class Vn{constructor(ye,_e=200,yt="OK"){this.headers=ye.headers||new Se,this.status=void 0!==ye.status?ye.status:_e,this.statusText=ye.statusText||yt,this.url=ye.url||null,this.ok=this.status>=200&&this.status<300}}class Zr extends Vn{constructor(ye={}){super(ye),this.type=wn.ResponseHeader}clone(ye={}){return new Zr({headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class Ht extends Vn{constructor(ye={}){super(ye),this.type=wn.Response,this.body=void 0!==ye.body?ye.body:null}clone(ye={}){return new Ht({body:void 0!==ye.body?ye.body:this.body,headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class pr extends Vn{constructor(ye){super(ye,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ye.url||"(unknown url)"}`:`Http failure response for ${ye.url||"(unknown url)"}: ${ye.status} ${ye.statusText}`,this.error=ye.error||null}}function Nn(Ue,ye){return{body:ye,headers:Ue.headers,context:Ue.context,observe:Ue.observe,params:Ue.params,reportProgress:Ue.reportProgress,responseType:Ue.responseType,withCredentials:Ue.withCredentials}}let sr=(()=>{class Ue{constructor(_e){this.handler=_e}request(_e,yt,gt={}){let an;if(_e instanceof Dr)an=_e;else{let he,pe;he=gt.headers instanceof Se?gt.headers:new Se(gt.headers),gt.params&&(pe=gt.params instanceof Qt?gt.params:new Qt({fromObject:gt.params})),an=new Dr(_e,yt,void 0!==gt.body?gt.body:null,{headers:he,context:gt.context,params:pe,reportProgress:gt.reportProgress,responseType:gt.responseType||"json",withCredentials:gt.withCredentials})}const On=(0,Ge.of)(an).pipe((0,$e.b)(he=>this.handler.handle(he)));if(_e instanceof Dr||"events"===gt.observe)return On;const Ln=On.pipe((0,P.h)(he=>he instanceof Ht));switch(gt.observe||"body"){case"body":switch(an.responseType){case"arraybuffer":return Ln.pipe((0,ve.U)(he=>{if(null!==he.body&&!(he.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return he.body}));case"blob":return Ln.pipe((0,ve.U)(he=>{if(null!==he.body&&!(he.body instanceof Blob))throw new Error("Response is not a Blob.");return he.body}));case"text":return Ln.pipe((0,ve.U)(he=>{if(null!==he.body&&"string"!=typeof he.body)throw new Error("Response is not a string.");return he.body}));default:return Ln.pipe((0,ve.U)(he=>he.body))}case"response":return Ln;default:throw new Error(`Unreachable: unhandled observe type ${gt.observe}}`)}}delete(_e,yt={}){return this.request("DELETE",_e,yt)}get(_e,yt={}){return this.request("GET",_e,yt)}head(_e,yt={}){return this.request("HEAD",_e,yt)}jsonp(_e,yt){return this.request("JSONP",_e,{params:(new Qt).append(yt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(_e,yt={}){return this.request("OPTIONS",_e,yt)}patch(_e,yt,gt={}){return this.request("PATCH",_e,Nn(gt,yt))}post(_e,yt,gt={}){return this.request("POST",_e,Nn(gt,yt))}put(_e,yt,gt={}){return this.request("PUT",_e,Nn(gt,yt))}}return Ue.\u0275fac=function(_e){return new(_e||Ue)(Z.LFG(oe))},Ue.\u0275prov=Z.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})();class St{constructor(ye,_e){this.next=ye,this.interceptor=_e}handle(ye){return this.interceptor.intercept(ye,this.next)}}const or=new Z.OlP("HTTP_INTERCEPTORS");let Tn=(()=>{class Ue{intercept(_e,yt){return yt.handle(_e)}}return Ue.\u0275fac=function(_e){return new(_e||Ue)},Ue.\u0275prov=Z.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})();const vr=/^\)\]\}',?\n/;let Mr=(()=>{class Ue{constructor(_e){this.xhrFactory=_e}handle(_e){if("JSONP"===_e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Mt.y(yt=>{const gt=this.xhrFactory.build();if(gt.open(_e.method,_e.urlWithParams),_e.withCredentials&&(gt.withCredentials=!0),_e.headers.forEach((Vt,Xt)=>gt.setRequestHeader(Vt,Xt.join(","))),_e.headers.has("Accept")||gt.setRequestHeader("Accept","application/json, text/plain, */*"),!_e.headers.has("Content-Type")){const Vt=_e.detectContentTypeHeader();null!==Vt&&gt.setRequestHeader("Content-Type",Vt)}if(_e.responseType){const Vt=_e.responseType.toLowerCase();gt.responseType="json"!==Vt?Vt:"text"}const an=_e.serializeBody();let On=null;const Ln=()=>{if(null!==On)return On;const Vt=gt.statusText||"OK",Xt=new Se(gt.getAllResponseHeaders()),In=function dr(Ue){return"responseURL"in Ue&&Ue.responseURL?Ue.responseURL:/^X-Request-URL:/m.test(Ue.getAllResponseHeaders())?Ue.getResponseHeader("X-Request-URL"):null}(gt)||_e.url;return On=new Zr({headers:Xt,status:gt.status,statusText:Vt,url:In}),On},he=()=>{let{headers:Vt,status:Xt,statusText:In,url:br}=Ln(),Pn=null;204!==Xt&&(Pn=typeof gt.response>"u"?gt.responseText:gt.response),0===Xt&&(Xt=Pn?200:0);let un=Xt>=200&&Xt<300;if("json"===_e.responseType&&"string"==typeof Pn){const wr=Pn;Pn=Pn.replace(vr,"");try{Pn=""!==Pn?JSON.parse(Pn):null}catch(ri){Pn=wr,un&&(un=!1,Pn={error:ri,text:Pn})}}un?(yt.next(new Ht({body:Pn,headers:Vt,status:Xt,statusText:In,url:br||void 0})),yt.complete()):yt.error(new pr({error:Pn,headers:Vt,status:Xt,statusText:In,url:br||void 0}))},pe=Vt=>{const{url:Xt}=Ln(),In=new pr({error:Vt,status:gt.status||0,statusText:gt.statusText||"Unknown Error",url:Xt||void 0});yt.error(In)};let le=!1;const ze=Vt=>{le||(yt.next(Ln()),le=!0);let Xt={type:wn.DownloadProgress,loaded:Vt.loaded};Vt.lengthComputable&&(Xt.total=Vt.total),"text"===_e.responseType&&!!gt.responseText&&(Xt.partialText=gt.responseText),yt.next(Xt)},ht=Vt=>{let Xt={type:wn.UploadProgress,loaded:Vt.loaded};Vt.lengthComputable&&(Xt.total=Vt.total),yt.next(Xt)};return gt.addEventListener("load",he),gt.addEventListener("error",pe),gt.addEventListener("timeout",pe),gt.addEventListener("abort",pe),_e.reportProgress&&(gt.addEventListener("progress",ze),null!==an&&gt.upload&&gt.upload.addEventListener("progress",ht)),gt.send(an),yt.next({type:wn.Sent}),()=>{gt.removeEventListener("error",pe),gt.removeEventListener("abort",pe),gt.removeEventListener("load",he),gt.removeEventListener("timeout",pe),_e.reportProgress&&(gt.removeEventListener("progress",ze),null!==an&&gt.upload&&gt.upload.removeEventListener("progress",ht)),gt.readyState!==gt.DONE&&gt.abort()}})}}return Ue.\u0275fac=function(_e){return new(_e||Ue)(Z.LFG(Le.JF))},Ue.\u0275prov=Z.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})();const En=new Z.OlP("XSRF_COOKIE_NAME"),Qr=new Z.OlP("XSRF_HEADER_NAME");class Zn{}let Oi=(()=>{class Ue{constructor(_e,yt,gt){this.doc=_e,this.platform=yt,this.cookieName=gt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const _e=this.doc.cookie||"";return _e!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,Le.Mx)(_e,this.cookieName),this.lastCookieString=_e),this.lastToken}}return Ue.\u0275fac=function(_e){return new(_e||Ue)(Z.LFG(Le.K0),Z.LFG(Z.Lbi),Z.LFG(En))},Ue.\u0275prov=Z.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})(),jn=(()=>{class Ue{constructor(_e,yt){this.tokenService=_e,this.headerName=yt}intercept(_e,yt){const gt=_e.url.toLowerCase();if("GET"===_e.method||"HEAD"===_e.method||gt.startsWith("http://")||gt.startsWith("https://"))return yt.handle(_e);const an=this.tokenService.getToken();return null!==an&&!_e.headers.has(this.headerName)&&(_e=_e.clone({headers:_e.headers.set(this.headerName,an)})),yt.handle(_e)}}return Ue.\u0275fac=function(_e){return new(_e||Ue)(Z.LFG(Zn),Z.LFG(Qr))},Ue.\u0275prov=Z.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})(),xe=(()=>{class Ue{constructor(_e,yt){this.backend=_e,this.injector=yt,this.chain=null}handle(_e){if(null===this.chain){const yt=this.injector.get(or,[]);this.chain=yt.reduceRight((gt,an)=>new St(gt,an),this.backend)}return this.chain.handle(_e)}}return Ue.\u0275fac=function(_e){return new(_e||Ue)(Z.LFG(Te),Z.LFG(Z.zs3))},Ue.\u0275prov=Z.Yz7({token:Ue,factory:Ue.\u0275fac}),Ue})(),Ae=(()=>{class Ue{static disable(){return{ngModule:Ue,providers:[{provide:jn,useClass:Tn}]}}static withOptions(_e={}){return{ngModule:Ue,providers:[_e.cookieName?{provide:En,useValue:_e.cookieName}:[],_e.headerName?{provide:Qr,useValue:_e.headerName}:[]]}}}return Ue.\u0275fac=function(_e){return new(_e||Ue)},Ue.\u0275mod=Z.oAB({type:Ue}),Ue.\u0275inj=Z.cJS({providers:[jn,{provide:or,useExisting:jn,multi:!0},{provide:Zn,useClass:Oi},{provide:En,useValue:"XSRF-TOKEN"},{provide:Qr,useValue:"X-XSRF-TOKEN"}]}),Ue})(),De=(()=>{class Ue{}return Ue.\u0275fac=function(_e){return new(_e||Ue)},Ue.\u0275mod=Z.oAB({type:Ue}),Ue.\u0275inj=Z.cJS({providers:[sr,{provide:oe,useClass:xe},Mr,{provide:Te,useExisting:Mr}],imports:[Ae.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),Ue})();var qt=H(2011),lr=H(899);let Gn=(()=>{class Ue{}return Ue.\u0275fac=function(_e){return new(_e||Ue)},Ue.\u0275mod=Z.oAB({type:Ue,bootstrap:[at]}),Ue.\u0275inj=Z.cJS({imports:[_.b2,J,Ne.u5,qt.hO.initializeApp(nt_firebase),st.JS,De,Bt.AuthModule,mt.HomeModule,lr.JuegosModule]}),Ue})();(0,Z.G48)(),_.q6().bootstrapModule(Gn).catch(Ue=>console.error(Ue))},5867:(Kt,qe,H)=>{H.d(qe,{C6:()=>_.getApps,Mq:()=>_.getApp});var _=H(9681);(0,_.registerVersion)("firebase","9.9.4","app")},127:(Kt,qe,H)=>{H.d(qe,{Z:()=>_.Z});var _=H(3942);_.Z.registerVersion("firebase","9.9.4","app-compat")},2274:(Kt,qe,H)=>{H.r(qe);var _=H(5861),Z=H(3942),q=H(2090),Re=H(9681),J=H(655),Me=H(1877),Le=H(4859);const Ke=function it(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},zt=function tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},at=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ne=new Me.Yd("@firebase/auth");function Bt(w,...f){Ne.logLevel<=Me.in.ERROR&&Ne.error(`Auth (${Re.SDK_VERSION}): ${w}`,...f)}function mt(w,...f){throw $e(w,...f)}function st(w,...f){return $e(w,...f)}function Ge(w,f,y){const T=Object.assign(Object.assign({},zt()),{[f]:y});return new q.LL("auth","Firebase",T).create(f,{appName:w.name})}function Mt(w,f,y){if(!(f instanceof y))throw y.name!==f.constructor.name&&mt(w,"argument-error"),Ge(w,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(w,...f){if("string"!=typeof w){const y=f[0],T=[...f.slice(1)];return T[0]&&(T[0].appName=w.name),w._errorFactory.create(y,...T)}return at.create(w,...f)}function P(w,f,...y){if(!w)throw $e(f,...y)}function ve(w){const f="INTERNAL ASSERTION FAILED: "+w;throw Bt(f),new Error(f)}function oe(w,f){w||ve(f)}const Te=new Map;function Se(w){oe(w instanceof Function,"Expected a class definition");let f=Te.get(w);return f?(oe(f instanceof w,"Instance stored in cache mismatched with class"),f):(f=new w,Te.set(w,f),f)}function Rt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function kt(){return"http:"===Ut()||"https:"===Ut()}function Ut(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Qt{constructor(f,y){this.shortDelay=f,this.longDelay=y,oe(y>f,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function Zt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(kt()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function sn(w,f){oe(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return f?`${y}${f.startsWith("/")?f.slice(1):f}`:y}class en{static initialize(f,y,T){this.fetchImpl=f,y&&(this.headersImpl=y),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xn=new Qt(3e4,6e4);function yn(w,f){return w.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:w.tenantId}):f}function mn(w,f,y,T){return ci.apply(this,arguments)}function ci(){return(ci=(0,_.Z)(function*(w,f,y,T,W={}){return Dr(w,W,(0,_.Z)(function*(){let re={},Oe={};T&&("GET"===f?Oe=T:re={body:JSON.stringify(T)});const ut=(0,q.xO)(Object.assign({key:w.config.apiKey},Oe)).slice(1),Wt=yield w._getAdditionalHeaders();return Wt["Content-Type"]="application/json",w.languageCode&&(Wt["X-Firebase-Locale"]=w.languageCode),en.fetch()(Ht(w,w.config.apiHost,y,ut),Object.assign({method:f,headers:Wt,referrerPolicy:"no-referrer"},re))}))})).apply(this,arguments)}function Dr(w,f,y){return wn.apply(this,arguments)}function wn(){return(wn=(0,_.Z)(function*(w,f,y){w._canInitEmulator=!1;const T=Object.assign(Object.assign({},tn),f);try{const W=new pr(w),re=yield Promise.race([y(),W.promise]);W.clearNetworkTimeout();const Oe=yield re.json();if("needConfirmation"in Oe)throw Nn(w,"account-exists-with-different-credential",Oe);if(re.ok&&!("errorMessage"in Oe))return Oe;{const ut=re.ok?Oe.errorMessage:Oe.error.message,[Wt,_n]=ut.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Wt)throw Nn(w,"credential-already-in-use",Oe);if("EMAIL_EXISTS"===Wt)throw Nn(w,"email-already-in-use",Oe);if("USER_DISABLED"===Wt)throw Nn(w,"user-disabled",Oe);const Fn=T[Wt]||Wt.toLowerCase().replace(/[_\s]+/g,"-");if(_n)throw Ge(w,Fn,_n);mt(w,Fn)}}catch(W){if(W instanceof q.ZR)throw W;mt(w,"network-request-failed")}})).apply(this,arguments)}function Vn(w,f,y,T){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,_.Z)(function*(w,f,y,T,W={}){const re=yield mn(w,f,y,T,W);return"mfaPendingCredential"in re&&mt(w,"multi-factor-auth-required",{_serverResponse:re}),re})).apply(this,arguments)}function Ht(w,f,y,T){const W=`${f}${y}?${T}`;return w.config.emulator?sn(w.config,W):`${w.config.apiScheme}://${W}`}class pr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((y,T)=>{this.timer=setTimeout(()=>T(st(this.auth,"network-request-failed")),Xn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nn(w,f,y){const T={appName:w.name};y.email&&(T.email=y.email),y.phoneNumber&&(T.phoneNumber=y.phoneNumber);const W=st(w,f,T);return W.customData._tokenResponse=y,W}function St(){return(St=(0,_.Z)(function*(w,f){return mn(w,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function or(w,f){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,_.Z)(function*(w,f){return mn(w,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function cr(w,f){return _i.apply(this,arguments)}function _i(){return(_i=(0,_.Z)(function*(w,f){return mn(w,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ur(w){if(w)try{const f=new Date(Number(w));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Bn(){return(Bn=(0,_.Z)(function*(w,f=!1){const y=(0,q.m9)(w),T=yield y.getIdToken(f),W=on(T);P(W&&W.exp&&W.auth_time&&W.iat,y.auth,"internal-error");const re="object"==typeof W.firebase?W.firebase:void 0,Oe=re?.sign_in_provider;return{claims:W,token:T,authTime:ur(ln(W.auth_time)),issuedAtTime:ur(ln(W.iat)),expirationTime:ur(ln(W.exp)),signInProvider:Oe||null,signInSecondFactor:re?.sign_in_second_factor||null}})).apply(this,arguments)}function ln(w){return 1e3*Number(w)}function on(w){var f;const[y,T,W]=w.split(".");if(void 0===y||void 0===T||void 0===W)return Bt("JWT malformed, contained fewer than 3 sections"),null;try{const re=(0,q.tV)(T);return re?JSON.parse(re):(Bt("Failed to decode base64 JWT payload"),null)}catch(re){return Bt("Caught error parsing JWT payload as JSON",null===(f=re)||void 0===f?void 0:f.toString()),null}}function vr(w,f){return dr.apply(this,arguments)}function dr(){return(dr=(0,_.Z)(function*(w,f,y=!1){if(y)return f;try{return yield f}catch(T){throw T instanceof q.ZR&&Mr(T)&&w.auth.currentUser===w&&(yield w.auth.signOut()),T}})).apply(this,arguments)}function Mr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class En{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var y;if(f){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const W=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,W)}}schedule(f=!1){var y=this;if(!this.isRunning)return;const T=this.getInterval(f);this.timerId=setTimeout((0,_.Z)(function*(){yield y.iteration()}),T)}iteration(){var f=this;return(0,_.Z)(function*(){var y;try{yield f.user.getIdToken(!0)}catch(T){return void("auth/network-request-failed"===(null===(y=T)||void 0===y?void 0:y.code)&&f.schedule(!0))}f.schedule()})()}}class Qr{constructor(f,y){this.createdAt=f,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=ur(this.lastLoginAt),this.creationTime=ur(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zn(w){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,_.Z)(function*(w){var f;const y=w.auth,T=yield w.getIdToken(),W=yield vr(w,cr(y,{idToken:T}));P(W?.users.length,y,"internal-error");const re=W.users[0];w._notifyReloadListener(re);const Oe=null!==(f=re.providerUserInfo)&&void 0!==f&&f.length?Ie(re.providerUserInfo):[],ut=fe(w.providerData,Oe),Fn=!!w.isAnonymous&&!(w.email&&re.passwordHash||ut?.length),kn={uid:re.localId,displayName:re.displayName||null,photoURL:re.photoUrl||null,email:re.email||null,emailVerified:re.emailVerified||!1,phoneNumber:re.phoneNumber||null,tenantId:re.tenantId||null,providerData:ut,metadata:new Qr(re.createdAt,re.lastLoginAt),isAnonymous:Fn};Object.assign(w,kn)})).apply(this,arguments)}function xe(){return(xe=(0,_.Z)(function*(w){const f=(0,q.m9)(w);yield Zn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function fe(w,f){return[...w.filter(T=>!f.some(W=>W.providerId===T.providerId)),...f]}function Ie(w){return w.map(f=>{var{providerId:y}=f,T=(0,J._T)(f,["providerId"]);return{providerId:y,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function De(){return(De=(0,_.Z)(function*(w,f){const y=yield Dr(w,{},(0,_.Z)(function*(){const T=(0,q.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:W,apiKey:re}=w.config,Oe=Ht(w,W,"/v1/token",`key=${re}`),ut=yield w._getAdditionalHeaders();return ut["Content-Type"]="application/x-www-form-urlencoded",en.fetch()(Oe,{method:"POST",headers:ut,body:T})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){P(f.idToken,"internal-error"),P(typeof f.idToken<"u","internal-error"),P(typeof f.refreshToken<"u","internal-error");const y="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function gr(w){const f=on(w);return P(f,"internal-error"),P(typeof f.exp<"u","internal-error"),P(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,y)}getToken(f,y=!1){var T=this;return(0,_.Z)(function*(){return P(!T.accessToken||T.refreshToken,f,"user-token-expired"),y||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(f,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,y){var T=this;return(0,_.Z)(function*(){const{accessToken:W,refreshToken:re,expiresIn:Oe}=yield function Ae(w,f){return De.apply(this,arguments)}(f,y);T.updateTokensAndExpiration(W,re,Number(Oe))})()}updateTokensAndExpiration(f,y,T){this.refreshToken=y||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(f,y){const{refreshToken:T,accessToken:W,expirationTime:re}=y,Oe=new _t;return T&&(P("string"==typeof T,"internal-error",{appName:f}),Oe.refreshToken=T),W&&(P("string"==typeof W,"internal-error",{appName:f}),Oe.accessToken=W),re&&(P("number"==typeof re,"internal-error",{appName:f}),Oe.expirationTime=re),Oe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return ve("not implemented")}}function Pt(w,f){P("string"==typeof w||typeof w>"u","internal-error",{appName:f})}class qt{constructor(f){var{uid:y,auth:T,stsTokenManager:W}=f,re=(0,J._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new En(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=T,this.stsTokenManager=W,this.accessToken=W.accessToken,this.displayName=re.displayName||null,this.email=re.email||null,this.emailVerified=re.emailVerified||!1,this.phoneNumber=re.phoneNumber||null,this.photoURL=re.photoURL||null,this.isAnonymous=re.isAnonymous||!1,this.tenantId=re.tenantId||null,this.providerData=re.providerData?[...re.providerData]:[],this.metadata=new Qr(re.createdAt||void 0,re.lastLoginAt||void 0)}getIdToken(f){var y=this;return(0,_.Z)(function*(){const T=yield vr(y,y.stsTokenManager.getToken(y.auth,f));return P(T,y.auth,"internal-error"),y.accessToken!==T&&(y.accessToken=T,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),T})()}getIdTokenResult(f){return function zn(w){return Bn.apply(this,arguments)}(this,f)}reload(){return function jn(w){return xe.apply(this,arguments)}(this)}_assign(f){this!==f&&(P(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(y=>Object.assign({},y)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new qt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){P(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,y=!1){var T=this;return(0,_.Z)(function*(){let W=!1;f.idToken&&f.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(f),W=!0),y&&(yield Zn(T)),yield T.auth._persistUserIfCurrent(T),W&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var f=this;return(0,_.Z)(function*(){const y=yield f.getIdToken();return yield vr(f,function sr(w,f){return St.apply(this,arguments)}(f.auth,{idToken:y})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,y){var T,W,re,Oe,ut,Wt,_n,Fn;const kn=null!==(T=y.displayName)&&void 0!==T?T:void 0,Gs=null!==(W=y.email)&&void 0!==W?W:void 0,ka=null!==(re=y.phoneNumber)&&void 0!==re?re:void 0,Sl=null!==(Oe=y.photoURL)&&void 0!==Oe?Oe:void 0,Tc=null!==(ut=y.tenantId)&&void 0!==ut?ut:void 0,ec=null!==(Wt=y._redirectEventId)&&void 0!==Wt?Wt:void 0,sd=null!==(_n=y.createdAt)&&void 0!==_n?_n:void 0,Fa=null!==(Fn=y.lastLoginAt)&&void 0!==Fn?Fn:void 0,{uid:tc,emailVerified:ju,isAnonymous:rl,providerData:nc,stsTokenManager:Hd}=y;P(tc&&Hd,f,"internal-error");const yf=_t.fromJSON(this.name,Hd);P("string"==typeof tc,f,"internal-error"),Pt(kn,f.name),Pt(Gs,f.name),P("boolean"==typeof ju,f,"internal-error"),P("boolean"==typeof rl,f,"internal-error"),Pt(ka,f.name),Pt(Sl,f.name),Pt(Tc,f.name),Pt(ec,f.name),Pt(sd,f.name),Pt(Fa,f.name);const od=new qt({uid:tc,auth:f,email:Gs,emailVerified:ju,displayName:kn,isAnonymous:rl,photoURL:Sl,phoneNumber:ka,tenantId:Tc,stsTokenManager:yf,createdAt:sd,lastLoginAt:Fa});return nc&&Array.isArray(nc)&&(od.providerData=nc.map(aa=>Object.assign({},aa))),ec&&(od._redirectEventId=ec),od}static _fromIdTokenResponse(f,y,T=!1){return(0,_.Z)(function*(){const W=new _t;W.updateFromServerResponse(y);const re=new qt({uid:y.localId,auth:f,stsTokenManager:W,isAnonymous:T});return yield Zn(re),re})()}}const Gn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(y,T){var W=this;return(0,_.Z)(function*(){W.storage[y]=T})()}_get(y){var T=this;return(0,_.Z)(function*(){const W=T.storage[y];return void 0===W?null:W})()}_remove(y){var T=this;return(0,_.Z)(function*(){delete T.storage[y]})()}_addListener(y,T){}_removeListener(y,T){}}return w.type="NONE",w})();function Ue(w,f,y){return`firebase:${w}:${f}:${y}`}class ye{constructor(f,y,T){this.persistence=f,this.auth=y,this.userKey=T;const{config:W,name:re}=this.auth;this.fullUserKey=Ue(this.userKey,W.apiKey,re),this.fullPersistenceKey=Ue("persistence",W.apiKey,re),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,_.Z)(function*(){const y=yield f.persistence._get(f.fullUserKey);return y?qt._fromJSON(f.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var y=this;return(0,_.Z)(function*(){if(y.persistence===f)return;const T=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=f,T?y.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,y,T="authUser"){return(0,_.Z)(function*(){if(!y.length)return new ye(Se(Gn),f,T);const W=(yield Promise.all(y.map(function(){var _n=(0,_.Z)(function*(Fn){if(yield Fn._isAvailable())return Fn});return function(Fn){return _n.apply(this,arguments)}}()))).filter(_n=>_n);let re=W[0]||Se(Gn);const Oe=Ue(T,f.config.apiKey,f.name);let ut=null;for(const _n of y)try{const Fn=yield _n._get(Oe);if(Fn){const kn=qt._fromJSON(f,Fn);_n!==re&&(ut=kn),re=_n;break}}catch{}const Wt=W.filter(_n=>_n._shouldAllowMigration);return re._shouldAllowMigration&&Wt.length?(re=Wt[0],ut&&(yield re._set(Oe,ut.toJSON())),yield Promise.all(y.map(function(){var _n=(0,_.Z)(function*(Fn){if(Fn!==re)try{yield Fn._remove(Oe)}catch{}});return function(Fn){return _n.apply(this,arguments)}}())),new ye(re,f,T)):new ye(re,f,T)})()}}function _e(w){const f=w.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(On(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(yt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(he(f))return"Blackberry";if(pe(f))return"Webos";if(gt(f))return"Safari";if((f.includes("chrome/")||an(f))&&!f.includes("edge/"))return"Chrome";if(Ln(f))return"Android";{const T=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function yt(w=(0,q.z$)()){return/firefox\//i.test(w)}function gt(w=(0,q.z$)()){const f=w.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function an(w=(0,q.z$)()){return/crios\//i.test(w)}function On(w=(0,q.z$)()){return/iemobile/i.test(w)}function Ln(w=(0,q.z$)()){return/android/i.test(w)}function he(w=(0,q.z$)()){return/blackberry/i.test(w)}function pe(w=(0,q.z$)()){return/webos/i.test(w)}function le(w=(0,q.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Xt(w=(0,q.z$)()){return le(w)||Ln(w)||pe(w)||he(w)||/windows phone/i.test(w)||On(w)}function br(w,f=[]){let y;switch(w){case"Browser":y=_e((0,q.z$)());break;case"Worker":y=`${_e((0,q.z$)())}-${w}`;break;default:y=w}const T=f.length?f.join(","):"FirebaseCore-web";return`${y}/JsCore/${Re.SDK_VERSION}/${T}`}class Pn{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,y){const T=re=>new Promise((Oe,ut)=>{try{Oe(f(re))}catch(Wt){ut(Wt)}});T.onAbort=y,this.queue.push(T);const W=this.queue.length-1;return()=>{this.queue[W]=()=>Promise.resolve()}}runMiddleware(f){var y=this;return(0,_.Z)(function*(){var T;if(y.auth.currentUser===f)return;const W=[];try{for(const re of y.queue)yield re(f),re.onAbort&&W.push(re.onAbort)}catch(re){W.reverse();for(const Oe of W)try{Oe()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(T=re)||void 0===T?void 0:T.message})}})()}}class un{constructor(f,y,T){this.app=f,this.heartbeatServiceProvider=y,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ri(this),this.idTokenSubscription=new ri(this),this.beforeStateQueue=new Pn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=at,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(f,y){var T=this;return y&&(this._popupRedirectResolver=Se(y)),this._initializationPromise=this.queue((0,_.Z)(function*(){var W,re;if(!T._deleted&&(T.persistenceManager=yield ye.create(T,f),!T._deleted)){if(null!==(W=T._popupRedirectResolver)&&void 0!==W&&W._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(y),T.lastNotifiedUid=(null===(re=T.currentUser)||void 0===re?void 0:re.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,_.Z)(function*(){if(f._deleted)return;const y=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||y){if(f.currentUser&&y&&f.currentUser.uid===y.uid)return f._currentUser._assign(y),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(y,!0)}})()}initializeCurrentUser(f){var y=this;return(0,_.Z)(function*(){var T;const W=yield y.assertedPersistence.getCurrentUser();let re=W,Oe=!1;if(f&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const ut=null===(T=y.redirectUser)||void 0===T?void 0:T._redirectEventId,Wt=re?._redirectEventId,_n=yield y.tryRedirectSignIn(f);(!ut||ut===Wt)&&_n?.user&&(re=_n.user,Oe=!0)}if(!re)return y.directlySetCurrentUser(null);if(!re._redirectEventId){if(Oe)try{yield y.beforeStateQueue.runMiddleware(re)}catch(ut){re=W,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(ut))}return re?y.reloadAndSetCurrentUserOrClear(re):y.directlySetCurrentUser(null)}return P(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===re._redirectEventId?y.directlySetCurrentUser(re):y.reloadAndSetCurrentUserOrClear(re)})()}tryRedirectSignIn(f){var y=this;return(0,_.Z)(function*(){let T=null;try{T=yield y._popupRedirectResolver._completeRedirectFn(y,f,!0)}catch{yield y._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(f){var y=this;return(0,_.Z)(function*(){var T;try{yield Zn(f)}catch(W){if("auth/network-request-failed"!==(null===(T=W)||void 0===T?void 0:T.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function lt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var f=this;return(0,_.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var y=this;return(0,_.Z)(function*(){const T=f?(0,q.m9)(f):null;return T&&P(T.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(T&&T._clone(y))})()}_updateCurrentUser(f,y=!1){var T=this;return(0,_.Z)(function*(){if(!T._deleted)return f&&P(T.tenantId===f.tenantId,T,"tenant-id-mismatch"),y||(yield T.beforeStateQueue.runMiddleware(f)),T.queue((0,_.Z)(function*(){yield T.directlySetCurrentUser(f),T.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,_.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var y=this;return this.queue((0,_.Z)(function*(){yield y.assertedPersistence.setPersistence(Se(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new q.LL("auth","Firebase",f())}onAuthStateChanged(f,y,T){return this.registerStateListener(this.authStateSubscription,f,y,T)}beforeAuthStateChanged(f,y){return this.beforeStateQueue.pushCallback(f,y)}onIdTokenChanged(f,y,T){return this.registerStateListener(this.idTokenSubscription,f,y,T)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,y){var T=this;return(0,_.Z)(function*(){const W=yield T.getOrInitRedirectPersistenceManager(y);return null===f?W.removeCurrentUser():W.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var y=this;return(0,_.Z)(function*(){if(!y.redirectPersistenceManager){const T=f&&Se(f)||y._popupRedirectResolver;P(T,y,"argument-error"),y.redirectPersistenceManager=yield ye.create(y,[Se(T._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(f){var y=this;return(0,_.Z)(function*(){var T,W;return y._isInitialized&&(yield y.queue((0,_.Z)(function*(){}))),(null===(T=y._currentUser)||void 0===T?void 0:T._redirectEventId)===f?y._currentUser:(null===(W=y.redirectUser)||void 0===W?void 0:W._redirectEventId)===f?y.redirectUser:null})()}_persistUserIfCurrent(f){var y=this;return(0,_.Z)(function*(){if(f===y.currentUser)return y.queue((0,_.Z)(function*(){return y.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(y=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,y,T,W){if(this._deleted)return()=>{};const re="function"==typeof y?y:y.next.bind(y),Oe=this._isInitialized?Promise.resolve():this._initializationPromise;return P(Oe,this,"internal-error"),Oe.then(()=>re(this.currentUser)),"function"==typeof y?f.addObserver(y,T,W):f.addObserver(y)}directlySetCurrentUser(f){var y=this;return(0,_.Z)(function*(){y.currentUser&&y.currentUser!==f&&y._currentUser._stopProactiveRefresh(),f&&y.isProactiveRefreshEnabled&&f._startProactiveRefresh(),y.currentUser=f,f?yield y.assertedPersistence.setCurrentUser(f):yield y.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return P(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=br(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,_.Z)(function*(){var y;const T={"X-Client-Version":f.clientVersion};f.app.options.appId&&(T["X-Firebase-gmpid"]=f.app.options.appId);const W=yield null===(y=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return W&&(T["X-Firebase-Client"]=W),T})()}}function wr(w){return(0,q.m9)(w)}class ri{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,q.ne)(y=>this.observer=y)}get next(){return P(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hs(w){const f=w.indexOf(":");return f<0?"":w.substr(0,f+1)}function to(w){if(!w)return null;const f=Number(w);return isNaN(f)?null:f}class ii{constructor(f,y){this.providerId=f,this.signInMethod=y}toJSON(){return ve("not implemented")}_getIdTokenResponse(f){return ve("not implemented")}_linkToIdToken(f,y){return ve("not implemented")}_getReauthenticationResolver(f){return ve("not implemented")}}function Tr(w,f){return zi.apply(this,arguments)}function zi(){return(zi=(0,_.Z)(function*(w,f){return mn(w,"POST","/v1/accounts:resetPassword",yn(w,f))})).apply(this,arguments)}function Sr(w,f){return $o.apply(this,arguments)}function $o(){return($o=(0,_.Z)(function*(w,f){return mn(w,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Es(w,f){return di.apply(this,arguments)}function di(){return(di=(0,_.Z)(function*(w,f){return mn(w,"POST","/v1/accounts:update",yn(w,f))})).apply(this,arguments)}function Ki(){return(Ki=(0,_.Z)(function*(w,f){return Vn(w,"POST","/v1/accounts:signInWithPassword",yn(w,f))})).apply(this,arguments)}function fs(w,f){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,_.Z)(function*(w,f){return mn(w,"POST","/v1/accounts:sendOobCode",yn(w,f))})).apply(this,arguments)}function Vr(w,f){return qi.apply(this,arguments)}function qi(){return(qi=(0,_.Z)(function*(w,f){return fs(w,f)})).apply(this,arguments)}function Jr(w,f){return Di.apply(this,arguments)}function Di(){return(Di=(0,_.Z)(function*(w,f){return fs(w,f)})).apply(this,arguments)}function Os(w,f){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,_.Z)(function*(w,f){return fs(w,f)})).apply(this,arguments)}function ca(w,f){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,_.Z)(function*(w,f){return fs(w,f)})).apply(this,arguments)}function no(){return(no=(0,_.Z)(function*(w,f){return Vn(w,"POST","/v1/accounts:signInWithEmailLink",yn(w,f))})).apply(this,arguments)}function Go(){return(Go=(0,_.Z)(function*(w,f){return Vn(w,"POST","/v1/accounts:signInWithEmailLink",yn(w,f))})).apply(this,arguments)}class Mo extends ii{constructor(f,y,T,W=null){super("password",T),this._email=f,this._password=y,this._tenantId=W}static _fromEmailAndPassword(f,y){return new Mo(f,y,"password")}static _fromEmailAndCode(f,y,T=null){return new Mo(f,y,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const y="string"==typeof f?JSON.parse(f):f;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(f){var y=this;return(0,_.Z)(function*(){switch(y.signInMethod){case"password":return function Is(w,f){return Ki.apply(this,arguments)}(f,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function xo(w,f){return no.apply(this,arguments)}(f,{email:y._email,oobCode:y._password});default:mt(f,"internal-error")}})()}_linkToIdToken(f,y){var T=this;return(0,_.Z)(function*(){switch(T.signInMethod){case"password":return Sr(f,{idToken:y,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function qs(w,f){return Go.apply(this,arguments)}(f,{idToken:y,email:T._email,oobCode:T._password});default:mt(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function vi(w,f){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,_.Z)(function*(w,f){return Vn(w,"POST","/v1/accounts:signInWithIdp",yn(w,f))})).apply(this,arguments)}class We extends ii{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const y=new We(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(y.idToken=f.idToken),f.accessToken&&(y.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(y.nonce=f.nonce),f.pendingToken&&(y.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(y.accessToken=f.oauthToken,y.secret=f.oauthTokenSecret):mt("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const y="string"==typeof f?JSON.parse(f):f,{providerId:T,signInMethod:W}=y,re=(0,J._T)(y,["providerId","signInMethod"]);if(!T||!W)return null;const Oe=new We(T,W);return Oe.idToken=re.idToken||void 0,Oe.accessToken=re.accessToken||void 0,Oe.secret=re.secret,Oe.nonce=re.nonce,Oe.pendingToken=re.pendingToken||null,Oe}_getIdTokenResponse(f){return vi(f,this.buildRequest())}_linkToIdToken(f,y){const T=this.buildRequest();return T.idToken=y,vi(f,T)}_getReauthenticationResolver(f){const y=this.buildRequest();return y.autoCreate=!1,vi(f,y)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),f.postBody=(0,q.xO)(y)}return f}}function rt(w,f){return vt.apply(this,arguments)}function vt(){return(vt=(0,_.Z)(function*(w,f){return mn(w,"POST","/v1/accounts:sendVerificationCode",yn(w,f))})).apply(this,arguments)}function xn(){return(xn=(0,_.Z)(function*(w,f){return Vn(w,"POST","/v1/accounts:signInWithPhoneNumber",yn(w,f))})).apply(this,arguments)}function mr(){return(mr=(0,_.Z)(function*(w,f){const y=yield Vn(w,"POST","/v1/accounts:signInWithPhoneNumber",yn(w,f));if(y.temporaryProof)throw Nn(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const ts={USER_NOT_FOUND:"user-not-found"};function ro(){return(ro=(0,_.Z)(function*(w,f){return Vn(w,"POST","/v1/accounts:signInWithPhoneNumber",yn(w,Object.assign(Object.assign({},f),{operation:"REAUTH"})),ts)})).apply(this,arguments)}class rr extends ii{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,y){return new rr({verificationId:f,verificationCode:y})}static _fromTokenResponse(f,y){return new rr({phoneNumber:f,temporaryProof:y})}_getIdTokenResponse(f){return function At(w,f){return xn.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,y){return function Kn(w,f){return mr.apply(this,arguments)}(f,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function ps(w,f){return ro.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:y,verificationId:T,verificationCode:W}=this.params;return f&&y?{temporaryProof:f,phoneNumber:y}:{sessionInfo:T,code:W}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:y,verificationCode:T,phoneNumber:W,temporaryProof:re}=f;return T||y||W||re?new rr({verificationId:y,verificationCode:T,phoneNumber:W,temporaryProof:re}):null}}class gs{constructor(f){var y,T,W,re,Oe,ut;const Wt=(0,q.zd)((0,q.pd)(f)),_n=null!==(y=Wt.apiKey)&&void 0!==y?y:null,Fn=null!==(T=Wt.oobCode)&&void 0!==T?T:null,kn=function Sn(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(W=Wt.mode)&&void 0!==W?W:null);P(_n&&Fn&&kn,"argument-error"),this.apiKey=_n,this.operation=kn,this.code=Fn,this.continueUrl=null!==(re=Wt.continueUrl)&&void 0!==re?re:null,this.languageCode=null!==(Oe=Wt.languageCode)&&void 0!==Oe?Oe:null,this.tenantId=null!==(ut=Wt.tenantId)&&void 0!==ut?ut:null}static parseLink(f){const y=function Pr(w){const f=(0,q.zd)((0,q.pd)(w)).link,y=f?(0,q.zd)((0,q.pd)(f)).deep_link_id:null,T=(0,q.zd)((0,q.pd)(w)).deep_link_id;return(T?(0,q.zd)((0,q.pd)(T)).link:null)||T||y||f||w}(f);try{return new gs(y)}catch{return null}}}let hi=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,T){return Mo._fromEmailAndPassword(y,T)}static credentialWithLink(y,T){const W=gs.parseLink(T);return P(W,"argument-error"),Mo._fromEmailAndCode(y,W.code,W.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class ns{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class xi extends ns{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Cs extends xi{static credentialFromJSON(f){const y="string"==typeof f?JSON.parse(f):f;return P("providerId"in y&&"signInMethod"in y,"argument-error"),We._fromParams(y)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return P(f.idToken||f.accessToken,"argument-error"),We._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Cs.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Cs.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:y,oauthAccessToken:T,oauthTokenSecret:W,pendingToken:re,nonce:Oe,providerId:ut}=f;if(!T&&!W&&!y&&!re||!ut)return null;try{return new Cs(ut)._credential({idToken:y,accessToken:T,nonce:Oe,pendingToken:re})}catch{return null}}}let Ro=(()=>{class w extends xi{constructor(){super("facebook.com")}static credential(y){return We._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),ji=(()=>{class w extends xi{constructor(){super("google.com"),this.addScope("profile")}static credential(y,T){return We._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:T})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:T,oauthAccessToken:W}=y;if(!T&&!W)return null;try{return w.credential(T,W)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),yo=(()=>{class w extends xi{constructor(){super("github.com")}static credential(y){return We._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Ds extends ii{constructor(f,y){super(f,f),this.pendingToken=y}_getIdTokenResponse(f){return vi(f,this.buildRequest())}_linkToIdToken(f,y){const T=this.buildRequest();return T.idToken=y,vi(f,T)}_getReauthenticationResolver(f){const y=this.buildRequest();return y.autoCreate=!1,vi(f,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const y="string"==typeof f?JSON.parse(f):f,{providerId:T,signInMethod:W,pendingToken:re}=y;return T&&W&&re&&T===W?new Ds(T,re):null}static _create(f,y){return new Ds(f,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Mi extends ns{constructor(f){P(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Mi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Mi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const y=Ds.fromJSON(f);return P(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:y,providerId:T}=f;if(!y||!T)return null;try{return Ds._create(T,y)}catch{return null}}}let Pi=(()=>{class w extends xi{constructor(){super("twitter.com")}static credential(y,T){return We._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:T})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:T,oauthTokenSecret:W}=y;if(!T||!W)return null;try{return w.credential(T,W)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Ri(w,f){return da.apply(this,arguments)}function da(){return(da=(0,_.Z)(function*(w,f){return Vn(w,"POST","/v1/accounts:signUp",yn(w,f))})).apply(this,arguments)}class wi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,y,T,W=!1){return(0,_.Z)(function*(){const re=yield qt._fromIdTokenResponse(f,T,W),Oe=qn(T);return new wi({user:re,providerId:Oe,_tokenResponse:T,operationType:y})})()}static _forOperation(f,y,T){return(0,_.Z)(function*(){yield f._updateTokensIfNecessary(T,!0);const W=qn(T);return new wi({user:f,providerId:W,_tokenResponse:T,operationType:y})})()}}function qn(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function $r(){return($r=(0,_.Z)(function*(w){var f;const y=wr(w);if(yield y._initializationPromise,null!==(f=y.currentUser)&&void 0!==f&&f.isAnonymous)return new wi({user:y.currentUser,providerId:null,operationType:"signIn"});const T=yield Ri(y,{returnSecureToken:!0}),W=yield wi._fromIdTokenResponse(y,"signIn",T,!0);return yield y._updateCurrentUser(W.user),W})).apply(this,arguments)}class rs extends q.ZR{constructor(f,y,T,W){var re;super(y.code,y.message),this.operationType=T,this.user=W,Object.setPrototypeOf(this,rs.prototype),this.customData={appName:f.name,tenantId:null!==(re=f.tenantId)&&void 0!==re?re:void 0,_serverResponse:y.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(f,y,T,W){return new rs(f,y,T,W)}}function bs(w,f,y,T){return("reauthenticate"===f?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(re=>{throw"auth/multi-factor-auth-required"===re.code?rs._fromErrorAndOperation(w,re,f,T):re})}function Hi(w){return new Set(w.map(({providerId:f})=>f).filter(f=>!!f))}function Ei(){return(Ei=(0,_.Z)(function*(w,f){const y=(0,q.m9)(w);yield ir(!0,y,f);const{providerUserInfo:T}=yield or(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[f]}),W=Hi(T||[]);return y.providerData=y.providerData.filter(re=>W.has(re.providerId)),W.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Xr(w,f){return ys.apply(this,arguments)}function ys(){return(ys=(0,_.Z)(function*(w,f,y=!1){const T=yield vr(w,f._linkToIdToken(w.auth,yield w.getIdToken()),y);return wi._forOperation(w,"link",T)})).apply(this,arguments)}function ir(w,f,y){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,_.Z)(function*(w,f,y){yield Zn(f);const W=!1===w?"provider-already-linked":"no-such-provider";P(Hi(f.providerData).has(y)===w,f.auth,W)})).apply(this,arguments)}function xr(w,f){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,_.Z)(function*(w,f,y=!1){var T;const{auth:W}=w,re="reauthenticate";try{const Oe=yield vr(w,bs(W,re,f,w),y);P(Oe.idToken,W,"internal-error");const ut=on(Oe.idToken);P(ut,W,"internal-error");const{sub:Wt}=ut;return P(w.uid===Wt,W,"user-mismatch"),wi._forOperation(w,re,Oe)}catch(Oe){throw"auth/user-not-found"===(null===(T=Oe)||void 0===T?void 0:T.code)&&mt(W,"user-mismatch"),Oe}})).apply(this,arguments)}function is(w,f){return ha.apply(this,arguments)}function ha(){return(ha=(0,_.Z)(function*(w,f,y=!1){const T="signIn",W=yield bs(w,T,f),re=yield wi._fromIdTokenResponse(w,T,W);return y||(yield w._updateCurrentUser(re.user)),re})).apply(this,arguments)}function Nr(w,f){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,_.Z)(function*(w,f){return is(wr(w),f)})).apply(this,arguments)}function fa(w,f){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,_.Z)(function*(w,f){const y=(0,q.m9)(w);return yield ir(!1,y,f.providerId),Xr(y,f)})).apply(this,arguments)}function Ta(w,f){return Po.apply(this,arguments)}function Po(){return(Po=(0,_.Z)(function*(w,f){return xr((0,q.m9)(w),f)})).apply(this,arguments)}function tr(w,f){return ks.apply(this,arguments)}function ks(){return(ks=(0,_.Z)(function*(w,f){return Vn(w,"POST","/v1/accounts:signInWithCustomToken",yn(w,f))})).apply(this,arguments)}function ss(){return(ss=(0,_.Z)(function*(w,f){const y=wr(w),T=yield tr(y,{token:f,returnSecureToken:!0}),W=yield wi._fromIdTokenResponse(y,"signIn",T);return yield y._updateCurrentUser(W.user),W})).apply(this,arguments)}class It{constructor(f,y){this.factorId=f,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(f,y){return"phoneInfo"in y?Wn._fromServerResponse(f,y):mt(f,"internal-error")}}class Wn extends It{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,y){return new Wn(y)}}function $i(w,f,y){var T;P((null===(T=y.url)||void 0===T?void 0:T.length)>0,w,"invalid-continue-uri"),P(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),f.continueUrl=y.url,f.dynamicLinkDomain=y.dynamicLinkDomain,f.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(P(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),f.iOSBundleId=y.iOS.bundleId),y.android&&(P(y.android.packageName.length>0,w,"missing-android-pkg-name"),f.androidInstallApp=y.android.installApp,f.androidMinimumVersionCode=y.android.minimumVersion,f.androidPackageName=y.android.packageName)}function pn(){return(pn=(0,_.Z)(function*(w,f,y){const T=(0,q.m9)(w),W={requestType:"PASSWORD_RESET",email:f};y&&$i(T,W,y),yield Jr(T,W)})).apply(this,arguments)}function os(){return(os=(0,_.Z)(function*(w,f,y){yield Tr((0,q.m9)(w),{oobCode:f,newPassword:y})})).apply(this,arguments)}function Ur(){return(Ur=(0,_.Z)(function*(w,f){yield Es((0,q.m9)(w),{oobCode:f})})).apply(this,arguments)}function Ls(w,f){return vo.apply(this,arguments)}function vo(){return(vo=(0,_.Z)(function*(w,f){const y=(0,q.m9)(w),T=yield Tr(y,{oobCode:f}),W=T.requestType;switch(P(W,y,"internal-error"),W){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":P(T.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":P(T.mfaInfo,y,"internal-error");default:P(T.email,y,"internal-error")}let re=null;return T.mfaInfo&&(re=It._fromServerResponse(wr(y),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:re},operation:W}})).apply(this,arguments)}function j(){return(j=(0,_.Z)(function*(w,f){const{data:y}=yield Ls((0,q.m9)(w),f);return y.email})).apply(this,arguments)}function O(){return(O=(0,_.Z)(function*(w,f,y){const T=wr(w),W=yield Ri(T,{returnSecureToken:!0,email:f,password:y}),re=yield wi._fromIdTokenResponse(T,"signIn",W);return yield T._updateCurrentUser(re.user),re})).apply(this,arguments)}function hn(){return(hn=(0,_.Z)(function*(w,f,y){const T=(0,q.m9)(w),W={requestType:"EMAIL_SIGNIN",email:f};P(y.handleCodeInApp,T,"argument-error"),y&&$i(T,W,y),yield Os(T,W)})).apply(this,arguments)}function fi(){return(fi=(0,_.Z)(function*(w,f,y){const T=(0,q.m9)(w),W=hi.credentialWithLink(f,y||Rt());return P(W._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),Nr(T,W)})).apply(this,arguments)}function Gi(w,f){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,_.Z)(function*(w,f){return mn(w,"POST","/v1/accounts:createAuthUri",yn(w,f))})).apply(this,arguments)}function Us(){return(Us=(0,_.Z)(function*(w,f){const T={identifier:f,continueUri:kt()?Rt():"http://localhost"},{signinMethods:W}=yield Gi((0,q.m9)(w),T);return W||[]})).apply(this,arguments)}function pi(){return(pi=(0,_.Z)(function*(w,f){const y=(0,q.m9)(w),W={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};f&&$i(y.auth,W,f);const{email:re}=yield Vr(y.auth,W);re!==w.email&&(yield w.reload())})).apply(this,arguments)}function Ja(){return(Ja=(0,_.Z)(function*(w,f,y){const T=(0,q.m9)(w),re={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:f};y&&$i(T.auth,re,y);const{email:Oe}=yield ca(T.auth,re);Oe!==w.email&&(yield w.reload())})).apply(this,arguments)}function Xa(w,f){return du.apply(this,arguments)}function du(){return(du=(0,_.Z)(function*(w,f){return mn(w,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function eu(){return(eu=(0,_.Z)(function*(w,{displayName:f,photoURL:y}){if(void 0===f&&void 0===y)return;const T=(0,q.m9)(w),re={idToken:yield T.getIdToken(),displayName:f,photoUrl:y,returnSecureToken:!0},Oe=yield vr(T,Xa(T.auth,re));T.displayName=Oe.displayName||null,T.photoURL=Oe.photoUrl||null;const ut=T.providerData.find(({providerId:Wt})=>"password"===Wt);ut&&(ut.displayName=T.displayName,ut.photoURL=T.photoURL),yield T._updateTokensIfNecessary(Oe)})).apply(this,arguments)}function F(w,f,y){return X.apply(this,arguments)}function X(){return(X=(0,_.Z)(function*(w,f,y){const{auth:T}=w,re={idToken:yield w.getIdToken(),returnSecureToken:!0};f&&(re.email=f),y&&(re.password=y);const Oe=yield vr(w,Sr(T,re));yield w._updateTokensIfNecessary(Oe,!0)})).apply(this,arguments)}class Qe{constructor(f,y,T={}){this.isNewUser=f,this.providerId=y,this.profile=T}}class pt extends Qe{constructor(f,y,T,W){super(f,y,T),this.username=W}}class nn extends Qe{constructor(f,y){super(f,"facebook.com",y)}}class Yn extends pt{constructor(f,y){super(f,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Ar extends Qe{constructor(f,y){super(f,"google.com",y)}}class _r extends pt{constructor(f,y,T){super(f,"twitter.com",y,T)}}function nr(w){const{user:f,_tokenResponse:y}=w;return f.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Ee(w){var f,y;if(!w)return null;const{providerId:T}=w,W=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},re=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!T&&w?.idToken){const Oe=null===(y=null===(f=on(w.idToken))||void 0===f?void 0:f.firebase)||void 0===y?void 0:y.sign_in_provider;if(Oe)return new Qe(re,"anonymous"!==Oe&&"custom"!==Oe?Oe:null)}if(!T)return null;switch(T){case"facebook.com":return new nn(re,W);case"github.com":return new Yn(re,W);case"google.com":return new Ar(re,W);case"twitter.com":return new _r(re,W,w.screenName||null);case"custom":case"anonymous":return new Qe(re,null);default:return new Qe(re,T,W)}}(y)}class as{constructor(f,y){this.type=f,this.credential=y}static _fromIdtoken(f){return new as("enroll",f)}static _fromMfaPendingCredential(f){return new as("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var y,T;if(f?.multiFactorSession){if(null!==(y=f.multiFactorSession)&&void 0!==y&&y.pendingCredential)return as._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(T=f.multiFactorSession)&&void 0!==T&&T.idToken)return as._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ma{constructor(f,y,T){this.session=f,this.hints=y,this.signInResolver=T}static _fromError(f,y){const T=wr(f),W=y.customData._serverResponse,re=(W.mfaInfo||[]).map(ut=>It._fromServerResponse(T,ut));P(W.mfaPendingCredential,T,"internal-error");const Oe=as._fromMfaPendingCredential(W.mfaPendingCredential);return new ma(Oe,re,function(){var ut=(0,_.Z)(function*(Wt){const _n=yield Wt._process(T,Oe);delete W.mfaInfo,delete W.mfaPendingCredential;const Fn=Object.assign(Object.assign({},W),{idToken:_n.idToken,refreshToken:_n.refreshToken});switch(y.operationType){case"signIn":const kn=yield wi._fromIdTokenResponse(T,y.operationType,Fn);return yield T._updateCurrentUser(kn.user),kn;case"reauthenticate":return P(y.user,T,"internal-error"),wi._forOperation(y.user,y.operationType,Fn);default:mt(T,"internal-error")}});return function(Wt){return ut.apply(this,arguments)}}())}resolveSignIn(f){var y=this;return(0,_.Z)(function*(){return y.signInResolver(f)})()}}function Ko(w,f){return mn(w,"POST","/v2/accounts/mfaEnrollment:start",yn(w,f))}class Wu{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(T=>It._fromServerResponse(f.auth,T)))})}static _fromUser(f){return new Wu(f)}getSession(){var f=this;return(0,_.Z)(function*(){return as._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,y){var T=this;return(0,_.Z)(function*(){const W=f,re=yield T.getSession(),Oe=yield vr(T.user,W._process(T.user.auth,re,y));return yield T.user._updateTokensIfNecessary(Oe),T.user.reload()})()}unenroll(f){var y=this;return(0,_.Z)(function*(){var T;const W="string"==typeof f?f:f.uid,re=yield y.user.getIdToken(),Oe=yield vr(y.user,function Ba(w,f){return mn(w,"POST","/v2/accounts/mfaEnrollment:withdraw",yn(w,f))}(y.user.auth,{idToken:re,mfaEnrollmentId:W}));y.enrolledFactors=y.enrolledFactors.filter(({uid:ut})=>ut!==W),yield y.user._updateTokensIfNecessary(Oe);try{yield y.user.reload()}catch(ut){if("auth/user-token-expired"!==(null===(T=ut)||void 0===T?void 0:T.code))throw ut}})()}}const _a=new WeakMap,Aa="__sak";class qo{constructor(f,y){this.storageRetriever=f,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Aa,"1"),this.storage.removeItem(Aa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,y){return this.storage.setItem(f,JSON.stringify(y)),Promise.resolve()}_get(f){const y=this.storage.getItem(f);return Promise.resolve(y?JSON.parse(y):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const nu=(()=>{class w extends qo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,T)=>this.onStorageEvent(y,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Fi(){const w=(0,q.z$)();return gt(w)||le(w)}()&&function In(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Xt(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const T of Object.keys(this.listeners)){const W=this.storage.getItem(T),re=this.localCache[T];W!==re&&y(T,re,W)}}onStorageEvent(y,T=!1){if(!y.key)return void this.forAllChangedKeys((ut,Wt,_n)=>{this.notifyListeners(ut,_n)});const W=y.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ut=this.storage.getItem(W);if(y.newValue!==ut)null!==y.newValue?this.storage.setItem(W,y.newValue):this.storage.removeItem(W);else if(this.localCache[W]===y.newValue&&!T)return}const re=()=>{const ut=this.storage.getItem(W);!T&&this.localCache[W]===ut||this.notifyListeners(W,ut)},Oe=this.storage.getItem(W);!function Vt(){return(0,q.w1)()&&10===document.documentMode}()||Oe===y.newValue||y.newValue===y.oldValue?re():setTimeout(re,10)}notifyListeners(y,T){this.localCache[y]=T;const W=this.listeners[y];if(W)for(const re of Array.from(W))re(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,T,W)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:T,newValue:W}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,T){var W=()=>super._set,re=this;return(0,_.Z)(function*(){yield W().call(re,y,T),re.localCache[y]=JSON.stringify(T)})()}_get(y){var T=()=>super._get,W=this;return(0,_.Z)(function*(){const re=yield T().call(W,y);return W.localCache[y]=JSON.stringify(re),re})()}_remove(y){var T=()=>super._remove,W=this;return(0,_.Z)(function*(){yield T().call(W,y),delete W.localCache[y]})()}}return w.type="LOCAL",w})(),Er=(()=>{class w extends qo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,T){}_removeListener(y,T){}}return w.type="SESSION",w})();let Au=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const T=this.receivers.find(re=>re.isListeningto(y));if(T)return T;const W=new w(y);return this.receivers.push(W),W}isListeningto(y){return this.eventTarget===y}handleEvent(y){var T=this;return(0,_.Z)(function*(){const W=y,{eventId:re,eventType:Oe,data:ut}=W.data,Wt=T.handlersMap[Oe];if(!Wt?.size)return;W.ports[0].postMessage({status:"ack",eventId:re,eventType:Oe});const _n=Array.from(Wt).map(function(){var kn=(0,_.Z)(function*(Gs){return Gs(W.origin,ut)});return function(Gs){return kn.apply(this,arguments)}}()),Fn=yield function Hs(w){return Promise.all(w.map(function(){var f=(0,_.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(T){return{fulfilled:!1,reason:T}}});return function(y){return f.apply(this,arguments)}}()))}(_n);W.ports[0].postMessage({status:"done",eventId:re,eventType:Oe,response:Fn})})()}_subscribe(y,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(T)}_unsubscribe(y,T){this.handlersMap[y]&&T&&this.handlersMap[y].delete(T),(!T||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function va(w="",f=10){let y="";for(let T=0;T<f;T++)y+=Math.floor(10*Math.random());return w+y}class ru{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,y,T=50){var W=this;return(0,_.Z)(function*(){const re=typeof MessageChannel<"u"?new MessageChannel:null;if(!re)throw new Error("connection_unavailable");let Oe,ut;return new Promise((Wt,_n)=>{const Fn=va("",20);re.port1.start();const kn=setTimeout(()=>{_n(new Error("unsupported_event"))},T);ut={messageChannel:re,onMessage(Gs){const ka=Gs;if(ka.data.eventId===Fn)switch(ka.data.status){case"ack":clearTimeout(kn),Oe=setTimeout(()=>{_n(new Error("timeout"))},3e3);break;case"done":clearTimeout(Oe),Wt(ka.data.response);break;default:clearTimeout(kn),clearTimeout(Oe),_n(new Error("invalid_response"))}}},W.handlers.add(ut),re.port1.addEventListener("message",ut.onMessage),W.target.postMessage({eventType:f,eventId:Fn,data:y},[re.port2])}).finally(()=>{ut&&W.removeMessageHandler(ut)})})()}}function gi(){return window}function Ha(){return typeof gi().WorkerGlobalScope<"u"&&"function"==typeof gi().importScripts}function Eo(){return(Eo=(0,_.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Zo="firebaseLocalStorageDb",ei="firebaseLocalStorage",Fo="fbase_key";class Io{constructor(f){this.request=f}toPromise(){return new Promise((f,y)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function cn(w,f){return w.transaction([ei],f?"readwrite":"readonly").objectStore(ei)}function wa(){const w=indexedDB.open(Zo,1);return new Promise((f,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const T=w.result;try{T.createObjectStore(ei,{keyPath:Fo})}catch(W){y(W)}}),w.addEventListener("success",(0,_.Z)(function*(){const T=w.result;T.objectStoreNames.contains(ei)?f(T):(T.close(),yield function Un(){const w=indexedDB.deleteDatabase(Zo);return new Io(w).toPromise()}(),f(yield wa()))}))})}function Gt(w,f,y){return ot.apply(this,arguments)}function ot(){return(ot=(0,_.Z)(function*(w,f,y){const T=cn(w,!0).put({[Fo]:f,value:y});return new Io(T).toPromise()})).apply(this,arguments)}function Ti(){return(Ti=(0,_.Z)(function*(w,f){const y=cn(w,!1).get(f),T=yield new Io(y).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function Ea(w,f){const y=cn(w,!0).delete(f);return new Io(y).toPromise()}const Yo=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,_.Z)(function*(){return y.db||(y.db=yield wa()),y.db})()}_withRetries(y){var T=this;return(0,_.Z)(function*(){let W=0;for(;;)try{const re=yield T._openDb();return yield y(re)}catch(re){if(W++>3)throw re;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,_.Z)(function*(){return Ha()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,_.Z)(function*(){y.receiver=Au._getInstance(function $a(){return Ha()?self:null}()),y.receiver._subscribe("keyChanged",function(){var T=(0,_.Z)(function*(W,re){return{keyProcessed:(yield y._poll()).includes(re.key)}});return function(W,re){return T.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var T=(0,_.Z)(function*(W,re){return["keyChanged"]});return function(W,re){return T.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,_.Z)(function*(){var T,W;if(y.activeServiceWorker=yield function zr(){return Eo.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new ru(y.activeServiceWorker);const re=yield y.sender._send("ping",{},800);!re||(null===(T=re[0])||void 0===T?void 0:T.fulfilled)&&(null===(W=re[0])||void 0===W?void 0:W.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var T=this;return(0,_.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function $s(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:y},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const y=yield wa();return yield Gt(y,Aa,"1"),yield Ea(y,Aa),!0}catch{}return!1})()}_withPendingWrite(y){var T=this;return(0,_.Z)(function*(){T.pendingWrites++;try{yield y()}finally{T.pendingWrites--}})()}_set(y,T){var W=this;return(0,_.Z)(function*(){return W._withPendingWrite((0,_.Z)(function*(){return yield W._withRetries(re=>Gt(re,y,T)),W.localCache[y]=T,W.notifyServiceWorker(y)}))})()}_get(y){var T=this;return(0,_.Z)(function*(){const W=yield T._withRetries(re=>function xt(w,f){return Ti.apply(this,arguments)}(re,y));return T.localCache[y]=W,W})()}_remove(y){var T=this;return(0,_.Z)(function*(){return T._withPendingWrite((0,_.Z)(function*(){return yield T._withRetries(W=>Ea(W,y)),delete T.localCache[y],T.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,_.Z)(function*(){const T=yield y._withRetries(Oe=>{const ut=cn(Oe,!1).getAll();return new Io(ut).toPromise()});if(!T)return[];if(0!==y.pendingWrites)return[];const W=[],re=new Set;for(const{fbase_key:Oe,value:ut}of T)re.add(Oe),JSON.stringify(y.localCache[Oe])!==JSON.stringify(ut)&&(y.notifyListeners(Oe,ut),W.push(Oe));for(const Oe of Object.keys(y.localCache))y.localCache[Oe]&&!re.has(Oe)&&(y.notifyListeners(Oe,null),W.push(Oe));return W})()}notifyListeners(y,T){this.localCache[y]=T;const W=this.listeners[y];if(W)for(const re of Array.from(W))re(T)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function xa(w,f){return mn(w,"POST","/v2/accounts/mfaSignIn:start",yn(w,f))}function Ra(){return(Ra=(0,_.Z)(function*(w){return(yield mn(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ga(w){return new Promise((f,y)=>{const T=document.createElement("script");T.setAttribute("src",w),T.onload=f,T.onerror=W=>{const re=st("internal-error");re.customData=W,y(re)},T.type="text/javascript",T.charset="UTF-8",function Qo(){var w,f;return null!==(f=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==f?f:document}().appendChild(T)})}function Hn(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Br=1e12;class Yt{constructor(f){this.auth=f,this.counter=Br,this._widgets=new Map}render(f,y){const T=this.counter;return this._widgets.set(T,new Ku(f,this.auth.name,y||{})),this.counter++,T}reset(f){var y;const T=f||Br;null===(y=this._widgets.get(T))||void 0===y||y.delete(),this._widgets.delete(T)}getResponse(f){var y;return(null===(y=this._widgets.get(f||Br))||void 0===y?void 0:y.getResponse())||""}execute(f){var y=this;return(0,_.Z)(function*(){var T;return null===(T=y._widgets.get(f||Br))||void 0===T||T.execute(),""})()}}class Ku{constructor(f,y,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const W="string"==typeof f?document.getElementById(f):f;P(W,"argument-error",{appName:y}),this.container=W,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Or(w){const f=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<w;T++)f.push(y.charAt(Math.floor(Math.random()*y.length)));return f.join("")}(50);const{callback:f,"expired-callback":y}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const iu=Hn("rcb"),Si=new Qt(3e4,6e4);class Ia{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=gi().grecaptcha)||void 0===f||!f.render)}load(f,y=""){return P(function Mu(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(y),f,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(gi().grecaptcha):new Promise((T,W)=>{const re=gi().setTimeout(()=>{W(st(f,"network-request-failed"))},Si.get());gi()[iu]=()=>{gi().clearTimeout(re),delete gi()[iu];const ut=gi().grecaptcha;if(!ut)return void W(st(f,"internal-error"));const Wt=ut.render;ut.render=(_n,Fn)=>{const kn=Wt(_n,Fn);return this.counter++,kn},this.hostLanguage=y,T(ut)},Ga(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:iu,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(re),W(st(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var y;return!(null===(y=gi().grecaptcha)||void 0===y||!y.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class so{load(f){return(0,_.Z)(function*(){return new Yt(f)})()}clearedOneInstance(){}}const _c="recaptcha",qu={theme:"light",type:"image"};class Wi{constructor(f,y=Object.assign({},qu),T){this.parameters=y,this.type=_c,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wr(T),this.isInvisible="invisible"===this.parameters.size,P(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const W="string"==typeof f?document.getElementById(f):f;P(W,this.auth,"argument-error"),this.container=W,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new so:new Ia,this.validateStartingState()}verify(){var f=this;return(0,_.Z)(function*(){f.assertNotDestroyed();const y=yield f.render(),T=f.getAssertedRecaptcha();return T.getResponse(y)||new Promise(re=>{const Oe=ut=>{!ut||(f.tokenChangeListeners.delete(Oe),re(ut))};f.tokenChangeListeners.add(Oe),f.isInvisible&&T.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){P(!this.parameters.sitekey,this.auth,"argument-error"),P(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),P(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return y=>{if(this.tokenChangeListeners.forEach(T=>T(y)),"function"==typeof f)f(y);else if("string"==typeof f){const T=gi()[f];"function"==typeof T&&T(y)}}}assertNotDestroyed(){P(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,_.Z)(function*(){if(yield f.init(),!f.widgetId){let y=f.container;if(!f.isInvisible){const T=document.createElement("div");y.appendChild(T),y=T}f.widgetId=f.getAssertedRecaptcha().render(y,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,_.Z)(function*(){P(kt()&&!Ha(),f.auth,"internal-error"),yield function Na(){let w=null;return new Promise(f=>{"complete"!==document.readyState?(w=()=>f(),window.addEventListener("load",w)):f()}).catch(f=>{throw w&&window.removeEventListener("load",w),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const y=yield function us(w){return Ra.apply(this,arguments)}(f.auth);P(y,f.auth,"internal-error"),f.parameters.sitekey=y})()}getAssertedRecaptcha(){return P(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Wa{constructor(f,y){this.verificationId=f,this.onConfirmation=y}confirm(f){const y=rr._fromVerification(this.verificationId,f);return this.onConfirmation(y)}}function Qi(){return(Qi=(0,_.Z)(function*(w,f,y){const T=wr(w),W=yield Jo(T,f,(0,q.m9)(y));return new Wa(W,re=>Nr(T,re))})).apply(this,arguments)}function oo(){return(oo=(0,_.Z)(function*(w,f,y){const T=(0,q.m9)(w);yield ir(!1,T,"phone");const W=yield Jo(T.auth,f,(0,q.m9)(y));return new Wa(W,re=>fa(T,re))})).apply(this,arguments)}function Xs(){return(Xs=(0,_.Z)(function*(w,f,y){const T=(0,q.m9)(w),W=yield Jo(T.auth,f,(0,q.m9)(y));return new Wa(W,re=>Ta(T,re))})).apply(this,arguments)}function Jo(w,f,y){return Je.apply(this,arguments)}function Je(){return(Je=(0,_.Z)(function*(w,f,y){var T;const W=yield y.verify();try{let re;if(P("string"==typeof W,w,"argument-error"),P(y.type===_c,w,"argument-error"),re="string"==typeof f?{phoneNumber:f}:f,"session"in re){const Oe=re.session;if("phoneNumber"in re)return P("enroll"===Oe.type,w,"internal-error"),(yield Ko(w,{idToken:Oe.credential,phoneEnrollmentInfo:{phoneNumber:re.phoneNumber,recaptchaToken:W}})).phoneSessionInfo.sessionInfo;{P("signin"===Oe.type,w,"internal-error");const ut=(null===(T=re.multiFactorHint)||void 0===T?void 0:T.uid)||re.multiFactorUid;return P(ut,w,"missing-multi-factor-info"),(yield xa(w,{mfaPendingCredential:Oe.credential,mfaEnrollmentId:ut,phoneSignInInfo:{recaptchaToken:W}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Oe}=yield rt(w,{phoneNumber:re.phoneNumber,recaptchaToken:W});return Oe}}finally{y._reset()}})).apply(this,arguments)}function ao(){return(ao=(0,_.Z)(function*(w,f){yield Xr((0,q.m9)(w),f)})).apply(this,arguments)}let pu=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=wr(y)}verifyPhoneNumber(y,T){return Jo(this.auth,y,(0,q.m9)(T))}static credential(y,T){return rr._fromVerification(y,T)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:T,temporaryProof:W}=y;return T&&W?rr._fromTokenResponse(T,W):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function uo(w,f){return f?Se(f):(P(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class lo extends ii{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return vi(f,this._buildIdpRequest())}_linkToIdToken(f,y){return vi(f,this._buildIdpRequest(y))}_getReauthenticationResolver(f){return vi(f,this._buildIdpRequest())}_buildIdpRequest(f){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(y.idToken=f),y}}function co(w){return is(w.auth,new lo(w),w.bypassAuthState)}function Xo(w){const{auth:f,user:y}=w;return P(y,f,"internal-error"),xr(y,new lo(w),w.bypassAuthState)}function D(w){return b.apply(this,arguments)}function b(){return(b=(0,_.Z)(function*(w){const{auth:f,user:y}=w;return P(y,f,"internal-error"),Xr(y,new lo(w),w.bypassAuthState)})).apply(this,arguments)}class I{constructor(f,y,T,W,re=!1){this.auth=f,this.resolver=T,this.user=W,this.bypassAuthState=re,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var f=this;return new Promise(function(){var y=(0,_.Z)(function*(T,W){f.pendingPromise={resolve:T,reject:W};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(re){f.reject(re)}});return function(T,W){return y.apply(this,arguments)}}())}onAuthEvent(f){var y=this;return(0,_.Z)(function*(){const{urlResponse:T,sessionId:W,postBody:re,tenantId:Oe,error:ut,type:Wt}=f;if(ut)return void y.reject(ut);const _n={auth:y.auth,requestUri:T,sessionId:W,tenantId:Oe||void 0,postBody:re||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Wt)(_n))}catch(Fn){y.reject(Fn)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return co;case"linkViaPopup":case"linkViaRedirect":return D;case"reauthViaPopup":case"reauthViaRedirect":return Xo;default:mt(this.auth,"internal-error")}}resolve(f){oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const M=new Qt(2e3,1e4);function Y(){return(Y=(0,_.Z)(function*(w,f,y){const T=wr(w);Mt(w,f,ns);const W=uo(T,y);return new gn(T,"signInViaPopup",f,W).executeNotNull()})).apply(this,arguments)}function Ce(){return(Ce=(0,_.Z)(function*(w,f,y){const T=(0,q.m9)(w);Mt(T.auth,f,ns);const W=uo(T.auth,y);return new gn(T.auth,"reauthViaPopup",f,W,T).executeNotNull()})).apply(this,arguments)}function Ft(){return(Ft=(0,_.Z)(function*(w,f,y){const T=(0,q.m9)(w);Mt(T.auth,f,ns);const W=uo(T.auth,y);return new gn(T.auth,"linkViaPopup",f,W,T).executeNotNull()})).apply(this,arguments)}let gn=(()=>{class w extends I{constructor(y,T,W,re,Oe){super(y,T,re,Oe),this.provider=W,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,_.Z)(function*(){const T=yield y.execute();return P(T,y.auth,"internal-error"),T})()}onExecution(){var y=this;return(0,_.Z)(function*(){oe(1===y.filter.length,"Popup operations only handle one event");const T=va();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],T),y.authWindow.associatedEvent=T,y.resolver._originValidation(y.auth).catch(W=>{y.reject(W)}),y.resolver._isIframeWebStorageSupported(y.auth,W=>{W||y.reject(st(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(st(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var T,W;this.pollId=null!==(W=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==W&&W.closed?window.setTimeout(()=>{this.pollId=null,this.reject(st(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,M.get())};y()}}return w.currentPopupAction=null,w})();const fr=new Map;class Li extends I{constructor(f,y,T=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,T),this.eventId=null}execute(){var f=()=>super.execute,y=this;return(0,_.Z)(function*(){let T=fr.get(y.auth._key());if(!T){try{const re=(yield function Ci(w,f){return Ts.apply(this,arguments)}(y.resolver,y.auth))?yield f().call(y):null;T=()=>Promise.resolve(re)}catch(W){T=()=>Promise.reject(W)}fr.set(y.auth._key(),T)}return y.bypassAuthState||fr.set(y.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(f){var y=()=>super.onAuthEvent,T=this;return(0,_.Z)(function*(){if("signInViaRedirect"===f.type)return y().call(T,f);if("unknown"!==f.type){if(f.eventId){const W=yield T.auth._redirectUserForId(f.eventId);if(W)return T.user=W,y().call(T,f);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Ts(){return(Ts=(0,_.Z)(function*(w,f){const y=fl(f),T=Do(w);if(!(yield T._isAvailable()))return!1;const W="true"===(yield T._get(y));return yield T._remove(y),W})).apply(this,arguments)}function Fr(w,f){return ea.apply(this,arguments)}function ea(){return(ea=(0,_.Z)(function*(w,f){return Do(w)._set(fl(f),"true")})).apply(this,arguments)}function jr(w,f){fr.set(w._key(),f)}function Do(w){return Se(w._redirectPersistence)}function fl(w){return Ue("pendingRedirect",w.config.apiKey,w.name)}function k(){return(k=(0,_.Z)(function*(w,f,y){const T=wr(w);Mt(w,f,ns);const W=uo(T,y);return yield Fr(W,T),W._openRedirect(T,f,"signInViaRedirect")})).apply(this,arguments)}function ge(){return(ge=(0,_.Z)(function*(w,f,y){const T=(0,q.m9)(w);Mt(T.auth,f,ns);const W=uo(T.auth,y);yield Fr(W,T.auth);const re=yield Rn(T);return W._openRedirect(T.auth,f,"reauthViaRedirect",re)})).apply(this,arguments)}function bt(){return(bt=(0,_.Z)(function*(w,f,y){const T=(0,q.m9)(w);Mt(T.auth,f,ns);const W=uo(T.auth,y);yield ir(!1,T,f.providerId),yield Fr(W,T.auth);const re=yield Rn(T);return W._openRedirect(T.auth,f,"linkViaRedirect",re)})).apply(this,arguments)}function vn(){return(vn=(0,_.Z)(function*(w,f){return yield wr(w)._initializationPromise,Mn(w,f,!1)})).apply(this,arguments)}function Mn(w,f){return $n.apply(this,arguments)}function $n(){return($n=(0,_.Z)(function*(w,f,y=!1){const T=wr(w),W=uo(T,f),Oe=yield new Li(T,W,y).execute();return Oe&&!y&&(delete Oe.user._redirectEventId,yield T._persistUserIfCurrent(Oe.user),yield T._setRedirectUser(null,f)),Oe})).apply(this,arguments)}function Rn(w){return oi.apply(this,arguments)}function oi(){return(oi=(0,_.Z)(function*(w){const f=va(`${w.uid}:::`);return w._redirectEventId=f,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),f})).apply(this,arguments)}class ta{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let y=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(f,T)&&(y=!0,this.sendToConsumer(f,T),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function gu(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ca(w);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=f,y=!0)),y}sendToConsumer(f,y){var T;if(f.error&&!Ca(f)){const W=(null===(T=f.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";y.onError(st(this.auth,W))}else y.onAuthEvent(f)}isEventForConsumer(f,y){const T=null===y.eventId||!!f.eventId&&f.eventId===y.eventId;return y.filter.includes(f.type)&&T}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(na(f))}saveEventToCache(f){this.cachedEventUids.add(na(f)),this.lastProcessedEventTime=Date.now()}}function na(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(f=>f).join("-")}function Ca({type:w,error:f}){return"unknown"===w&&"auth/no-auth-event"===f?.code}function za(w){return ra.apply(this,arguments)}function ra(){return(ra=(0,_.Z)(function*(w,f={}){return mn(w,"GET","/v1/projects",f)})).apply(this,arguments)}const ia=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ou=/^https?/;function Pd(){return(Pd=(0,_.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:f}=yield za(w);for(const y of f)try{if(kd(y))return}catch{}mt(w,"unauthorized-domain")})).apply(this,arguments)}function kd(w){const f=Rt(),{protocol:y,hostname:T}=new URL(f);if(w.startsWith("chrome-extension://")){const Oe=new URL(w);return""===Oe.hostname&&""===T?"chrome-extension:"===y&&w.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===y&&Oe.hostname===T}if(!ou.test(y))return!1;if(ia.test(w))return T===w;const W=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+W+"|"+W+")$","i").test(T)}const Hc=new Qt(3e4,6e4);function Ss(){const w=gi().___jsl;if(w?.H)for(const f of Object.keys(w.H))if(w.H[f].r=w.H[f].r||[],w.H[f].L=w.H[f].L||[],w.H[f].r=[...w.H[f].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let ti=null;function vc(w){return ti=ti||function Yu(w){return new Promise((f,y)=>{var T,W,re;function Oe(){Ss(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Ss(),y(st(w,"network-request-failed"))},timeout:Hc.get()})}if(null!==(W=null===(T=gi().gapi)||void 0===T?void 0:T.iframes)&&void 0!==W&&W.Iframe)f(gapi.iframes.getContext());else{if(null===(re=gi().gapi)||void 0===re||!re.load){const ut=Hn("iframefcb");return gi()[ut]=()=>{gapi.load?Oe():y(st(w,"network-request-failed"))},Ga(`https://apis.google.com/js/api.js?onload=${ut}`).catch(Wt=>y(Wt))}Oe()}}).catch(f=>{throw ti=null,f})}(w),ti}const mu=new Qt(5e3,15e3),wc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $l(w){const f=w.config;P(f.authDomain,w,"auth-domain-config-required");const y=f.emulator?sn(f,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,T={apiKey:f.apiKey,appName:w.name,v:Re.SDK_VERSION},W=yu.get(w.config.apiHost);W&&(T.eid=W);const re=w._getFrameworks();return re.length&&(T.fw=re.join(",")),`${y}?${(0,q.xO)(T).slice(1)}`}function Ka(){return Ka=(0,_.Z)(function*(w){const f=yield vc(w),y=gi().gapi;return P(y,w,"internal-error"),f.open({where:document.body,url:$l(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wc,dontclear:!0},T=>new Promise(function(){var W=(0,_.Z)(function*(re,Oe){yield T.restyle({setHideOnLeave:!1});const ut=st(w,"network-request-failed"),Wt=gi().setTimeout(()=>{Oe(ut)},mu.get());function _n(){gi().clearTimeout(Wt),re(T)}T.ping(_n).then(_n,()=>{Oe(ut)})});return function(re,Oe){return W.apply(this,arguments)}}()))}),Ka.apply(this,arguments)}const vs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ou{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Da(w,f,y,T,W,re){P(w.config.authDomain,w,"auth-domain-config-required"),P(w.config.apiKey,w,"invalid-api-key");const Oe={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:T,v:Re.SDK_VERSION,eventId:W};if(f instanceof ns){f.setDefaultLanguage(w.languageCode),Oe.providerId=f.providerId||"",(0,q.xb)(f.getCustomParameters())||(Oe.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Wt,_n]of Object.entries(re||{}))Oe[Wt]=_n}if(f instanceof xi){const Wt=f.getScopes().filter(_n=>""!==_n);Wt.length>0&&(Oe.scopes=Wt.join(","))}w.tenantId&&(Oe.tid=w.tenantId);const ut=Oe;for(const Wt of Object.keys(ut))void 0===ut[Wt]&&delete ut[Wt];return`${function mh({config:w}){return w.emulator?sn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,q.xO)(ut).slice(1)}`}const Gl="webStorageSupport";class Vo extends class ml{constructor(f){this.factorId=f}_process(f,y,T){switch(y.type){case"enroll":return this._finalizeEnroll(f,y.credential,T);case"signin":return this._finalizeSignIn(f,y.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Vo(f)}_finalizeEnroll(f,y,T){return function ya(w,f){return mn(w,"POST","/v2/accounts/mfaEnrollment:finalize",yn(w,f))}(f,{idToken:y,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,y){return function Ma(w,f){return mn(w,"POST","/v2/accounts/mfaSignIn:finalize",yn(w,f))}(f,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ho=(()=>{class w{constructor(){}static assertion(y){return Vo._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var Wl="@firebase/auth";class zl{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var y=this;return(0,_.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const y=this.auth.onIdTokenChanged(T=>{var W;f((null===(W=T)||void 0===W?void 0:W.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,y),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const y=this.internalListeners.get(f);!y||(this.internalListeners.delete(f),y(),this.updateProactiveRefresh())}assertAuthConfigured(){P(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Oa(){return window}function Kl(){return(Kl=(0,_.Z)(function*(w,f,y){var T;const{BuildInfo:W}=Oa();oe(f.sessionId,"AuthEvent did not contain a session ID");const re=yield Qu(f.sessionId),Oe={};return le()?Oe.ibi=W.packageName:Ln()?Oe.apn=W.packageName:mt(w,"operation-not-supported-in-this-environment"),W.displayName&&(Oe.appDisplayName=W.displayName),Oe.sessionId=re,Da(w,y,f.type,void 0,null!==(T=f.eventId)&&void 0!==T?T:void 0,Oe)})).apply(this,arguments)}function Pu(){return(Pu=(0,_.Z)(function*(w){const{BuildInfo:f}=Oa(),y={};le()?y.iosBundleId=f.packageName:Ln()?y.androidPackageName=f.packageName:mt(w,"operation-not-supported-in-this-environment"),yield za(w,y)})).apply(this,arguments)}function _u(){return(_u=(0,_.Z)(function*(w,f,y){const{cordova:T}=Oa();let W=()=>{};try{yield new Promise((re,Oe)=>{let ut=null;function Wt(){var kn;re();const Gs=null===(kn=T.plugins.browsertab)||void 0===kn?void 0:kn.close;"function"==typeof Gs&&Gs(),"function"==typeof y?.close&&y.close()}function _n(){ut||(ut=window.setTimeout(()=>{Oe(st(w,"redirect-cancelled-by-user"))},2e3))}function Fn(){"visible"===document?.visibilityState&&_n()}f.addPassiveListener(Wt),document.addEventListener("resume",_n,!1),Ln()&&document.addEventListener("visibilitychange",Fn,!1),W=()=>{f.removePassiveListener(Wt),document.removeEventListener("resume",_n,!1),document.removeEventListener("visibilitychange",Fn,!1),ut&&window.clearTimeout(ut)}})}finally{W()}})).apply(this,arguments)}function Qu(w){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,_.Z)(function*(w){const f=mf(w),y=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(y)).map(W=>W.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function mf(w){if(oe(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(w);const f=new ArrayBuffer(w.length),y=new Uint8Array(f);for(let T=0;T<w.length;T++)y[T]=w.charCodeAt(T);return y}!function Vi(w){(0,Re._registerComponent)(new Le.wA("auth",(f,{options:y})=>{const T=f.getProvider("app").getImmediate(),W=f.getProvider("heartbeat"),{apiKey:re,authDomain:Oe}=T.options;return((ut,Wt)=>{P(re&&!re.includes(":"),"invalid-api-key",{appName:ut.name}),P(!Oe?.includes(":"),"argument-error",{appName:ut.name});const _n={apiKey:re,authDomain:Oe,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:br(w)},Fn=new un(ut,Wt,_n);return function Ct(w,f){const y=f?.persistence||[],T=(Array.isArray(y)?y:[y]).map(Se);f?.errorMap&&w._updateErrorMap(f.errorMap),w._initializeWithPersistence(T,f?.popupRedirectResolver)}(Fn,y),Fn})(T,W)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,y,T)=>{f.getProvider("auth-internal").initialize()})),(0,Re._registerComponent)(new Le.wA("auth-internal",f=>{const y=wr(f.getProvider("auth").getImmediate());return new zl(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Re.registerVersion)(Wl,"0.20.6",function yl(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,Re.registerVersion)(Wl,"0.20.6","esm2017")}("Browser");class ql extends ta{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(f)),super.onEvent(f)}initialized(){var f=this;return(0,_.Z)(function*(){yield f.initPromise})()}}function qa(w){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,_.Z)(function*(w){const f=yield vl()._get(ku(w));return f&&(yield vl()._remove(ku(w))),f})).apply(this,arguments)}function Xc(){const w=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const T=Math.floor(Math.random()*f.length);w.push(f.charAt(T))}return w.join("")}function vl(){return Se(nu)}function ku(w){return Ue("authEvent",w.config.apiKey,w.name)}function Hr(w){if(!w?.includes("?"))return{};const[f,...y]=w.split("?");return(0,q.zd)(y.join("?"))}function Vd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:st("no-auth-event")}}function Uo(){var w;return(null===(w=self?.location)||void 0===w?void 0:w.protocol)||null}function Ql(w=(0,q.z$)()){return!("file:"!==Uo()&&"ionic:"!==Uo()&&"capacitor:"!==Uo()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function As(){try{const w=self.localStorage,f=va();if(w)return w.setItem(f,"1"),w.removeItem(f),!function Ud(w=(0,q.z$)()){return function Il(){return(0,q.w1)()&&11===document?.documentMode}()||function td(w=(0,q.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,q.hl)()}catch{return Ir()&&(0,q.hl)()}return!1}function Ir(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function tl(){return(function Yl(){return"http:"===Uo()||"https:"===Uo()}()||(0,q.ru)()||Ql())&&!function Dc(){return(0,q.b$)()||(0,q.UG)()}()&&As()&&!Ir()}function Cl(){return Ql()&&typeof document<"u"}function fo(){return(fo=(0,_.Z)(function*(){return!!Cl()&&new Promise(w=>{const f=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),w(!0)})})})).apply(this,arguments)}const cs={LOCAL:"local",NONE:"none",SESSION:"session"},ba=P,bo="persistence";function Jl(w){return uu.apply(this,arguments)}function uu(){return(uu=(0,_.Z)(function*(w){yield w._initializationPromise;const f=Bd(),y=Ue(bo,w.config.apiKey,w.name);f&&f.setItem(y,w._getPersistence())})).apply(this,arguments)}function Bd(){var w;try{return(null===(w=function po(){return typeof window<"u"?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch{return null}}const er=P;class Lu{constructor(){this.browserResolver=Se(class Ic{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Er,this._completeRedirectFn=Mn,this._overrideRedirectResult=jr}_openPopup(f,y,T,W){var re=this;return(0,_.Z)(function*(){var Oe;oe(null===(Oe=re.eventManagers[f._key()])||void 0===Oe?void 0:Oe.manager,"_initialize() not called before _openPopup()");const ut=Da(f,y,T,Rt(),W);return function Ec(w,f,y,T=500,W=600){const re=Math.max((window.screen.availHeight-W)/2,0).toString(),Oe=Math.max((window.screen.availWidth-T)/2,0).toString();let ut="";const Wt=Object.assign(Object.assign({},vs),{width:T.toString(),height:W.toString(),top:re,left:Oe}),_n=(0,q.z$)().toLowerCase();y&&(ut=an(_n)?"_blank":y),yt(_n)&&(f=f||"http://localhost",Wt.scrollbars="yes");const Fn=Object.entries(Wt).reduce((Gs,[ka,Sl])=>`${Gs}${ka}=${Sl},`,"");if(function ht(w=(0,q.z$)()){var f;return le(w)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(_n)&&"_self"!==ut)return function Fd(w,f){const y=document.createElement("a");y.href=w,y.target=f;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(T)}(f||"",ut),new Ou(null);const kn=window.open(f||"",ut,Fn);P(kn,w,"popup-blocked");try{kn.focus()}catch{}return new Ou(kn)}(f,ut,va())})()}_openRedirect(f,y,T,W){var re=this;return(0,_.Z)(function*(){return yield re._originValidation(f),function Zi(w){gi().location.href=w}(Da(f,y,T,Rt(),W)),new Promise(()=>{})})()}_initialize(f){const y=f._key();if(this.eventManagers[y]){const{manager:W,promise:re}=this.eventManagers[y];return W?Promise.resolve(W):(oe(re,"If manager is not set, promise should be"),re)}const T=this.initAndGetManager(f);return this.eventManagers[y]={promise:T},T.catch(()=>{delete this.eventManagers[y]}),T}initAndGetManager(f){var y=this;return(0,_.Z)(function*(){const T=yield function Gc(w){return Ka.apply(this,arguments)}(f),W=new ta(f);return T.register("authEvent",re=>(P(re?.authEvent,f,"invalid-auth-event"),{status:W.onEvent(re.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[f._key()]={manager:W},y.iframes[f._key()]=T,W})()}_isIframeWebStorageSupported(f,y){this.iframes[f._key()].send(Gl,{type:Gl},W=>{var re;const Oe=null===(re=W?.[0])||void 0===re?void 0:re[Gl];void 0!==Oe&&y(!!Oe),mt(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const y=f._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Hl(w){return Pd.apply(this,arguments)}(f)),this.originValidationPromises[y]}get _shouldInitProactively(){return Xt()||gt()||le()}}),this.cordovaResolver=Se(class El{constructor(){this._redirectPersistence=Er,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mn,this._overrideRedirectResult=jr}_initialize(f){var y=this;return(0,_.Z)(function*(){const T=f._key();let W=y.eventManagers.get(T);return W||(W=new ql(f),y.eventManagers.set(T,W),y.attachCallbackListeners(f,W)),W})()}_openPopup(f){mt(f,"operation-not-supported-in-this-environment")}_openRedirect(f,y,T,W){var re=this;return(0,_.Z)(function*(){!function Yc(w){var f,y,T,W,re,Oe,ut,Wt,_n,Fn;const kn=Oa();P("function"==typeof(null===(f=kn?.universalLinks)||void 0===f?void 0:f.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),P(typeof(null===(y=kn?.BuildInfo)||void 0===y?void 0:y.packageName)<"u",w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),P("function"==typeof(null===(re=null===(W=null===(T=kn?.cordova)||void 0===T?void 0:T.plugins)||void 0===W?void 0:W.browsertab)||void 0===re?void 0:re.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),P("function"==typeof(null===(Wt=null===(ut=null===(Oe=kn?.cordova)||void 0===Oe?void 0:Oe.plugins)||void 0===ut?void 0:ut.browsertab)||void 0===Wt?void 0:Wt.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),P("function"==typeof(null===(Fn=null===(_n=kn?.cordova)||void 0===_n?void 0:_n.InAppBrowser)||void 0===Fn?void 0:Fn.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Oe=yield re._initialize(f);yield Oe.initialized(),Oe.resetRedirect(),function Ji(){fr.clear()}(),yield re._originValidation(f);const ut=function vu(w,f,y=null){return{type:f,eventId:y,urlResponse:null,sessionId:Xc(),postBody:null,tenantId:w.tenantId,error:st(w,"no-auth-event")}}(f,T,W);yield function Cc(w,f){return vl()._set(ku(w),f)}(f,ut);const Wt=yield function Zc(w,f,y){return Kl.apply(this,arguments)}(f,ut,y),_n=yield function _l(w){const{cordova:f}=Oa();return new Promise(y=>{f.plugins.browsertab.isAvailable(T=>{let W=null;T?f.plugins.browsertab.openUrl(w):W=f.InAppBrowser.open(w,function ze(w=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),y(W)})})}(Wt);return function Pa(w,f,y){return _u.apply(this,arguments)}(f,Oe,_n)})()}_isIframeWebStorageSupported(f,y){throw new Error("Method not implemented.")}_originValidation(f){const y=f._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Ld(w){return Pu.apply(this,arguments)}(f)),this.originValidationPromises[y]}attachCallbackListeners(f,y){const{universalLinks:T,handleOpenURL:W,BuildInfo:re}=Oa(),Oe=setTimeout((0,_.Z)(function*(){yield qa(f),y.onEvent(Vd())}),500),ut=function(){var Fn=(0,_.Z)(function*(kn){clearTimeout(Oe);const Gs=yield qa(f);let ka=null;Gs&&kn?.url&&(ka=function Zl(w,f){var y,T;const W=function wl(w){const f=Hr(w),y=f.link?decodeURIComponent(f.link):void 0,T=Hr(y).link,W=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Hr(W).link||W||T||y||w}(f);if(W.includes("/__/auth/callback")){const re=Hr(W),Oe=re.firebaseError?function yh(w){try{return JSON.parse(w)}catch{return null}}(decodeURIComponent(re.firebaseError)):null,ut=null===(T=null===(y=Oe?.code)||void 0===y?void 0:y.split("auth/"))||void 0===T?void 0:T[1],Wt=ut?st(ut):null;return Wt?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:Wt,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:W,postBody:null}}return null}(Gs,kn.url)),y.onEvent(ka||Vd())});return function(Gs){return Fn.apply(this,arguments)}}();typeof T<"u"&&"function"==typeof T.subscribe&&T.subscribe(null,ut);const Wt=W,_n=`${re.packageName.toLowerCase()}://`;Oa().handleOpenURL=function(){var Fn=(0,_.Z)(function*(kn){if(kn.toLowerCase().startsWith(_n)&&ut({url:kn}),"function"==typeof Wt)try{Wt(kn)}catch(Gs){console.error(Gs)}});return function(kn){return Fn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Er,this._completeRedirectFn=Mn,this._overrideRedirectResult=jr}_initialize(f){var y=this;return(0,_.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,y,T,W){var re=this;return(0,_.Z)(function*(){return yield re.selectUnderlyingResolver(),re.assertedUnderlyingResolver._openPopup(f,y,T,W)})()}_openRedirect(f,y,T,W){var re=this;return(0,_.Z)(function*(){return yield re.selectUnderlyingResolver(),re.assertedUnderlyingResolver._openRedirect(f,y,T,W)})()}_isIframeWebStorageSupported(f,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,y)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Cl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return er(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,_.Z)(function*(){if(f.underlyingResolver)return;const y=yield function au(){return fo.apply(this,arguments)}();f.underlyingResolver=y?f.cordovaResolver:f.browserResolver})()}}function Eu(w){return w.unwrap()}function Xl(w){return bl(w)}function bl(w){const{_tokenResponse:f}=w instanceof q.ZR?w.customData:w;if(!f)return null;if(!(w instanceof q.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return pu.credentialFromResult(w);const y=f.providerId;if(!y||"password"===y)return null;let T;switch(y){case"google.com":T=ji;break;case"facebook.com":T=Ro;break;case"github.com":T=yo;break;case"twitter.com":T=Pi;break;default:const{oauthIdToken:W,oauthAccessToken:re,oauthTokenSecret:Oe,pendingToken:ut,nonce:Wt}=f;return re||Oe||W||ut?ut?y.startsWith("saml.")?Ds._create(y,ut):We._fromParams({providerId:y,signInMethod:y,pendingToken:ut,idToken:W,accessToken:re}):new Cs(y).credential({idToken:W,accessToken:re,rawNonce:Wt}):null}return w instanceof q.ZR?T.credentialFromError(w):T.credentialFromResult(w)}function Ui(w,f){return f.catch(y=>{throw y instanceof q.ZR&&function Dl(w,f){var y,T;const W=null===(y=f.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===(null===(T=f)||void 0===T?void 0:T.code))f.resolver=new bc(w,function Wr(w,f){var y;const T=(0,q.m9)(w),W=f;return P(f.customData.operationType,T,"argument-error"),P(null===(y=W.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,T,"argument-error"),ma._fromError(T,W)}(w,f));else if(W){const re=bl(f),Oe=f;re&&(Oe.credential=re,Oe.tenantId=W.tenantId||void 0,Oe.email=W.email||void 0,Oe.phoneNumber=W.phoneNumber||void 0)}}(w,y),y}).then(y=>{const W=y.user;return{operationType:y.operationType,credential:Xl(y),additionalUserInfo:nr(y),user:Za.getOrCreate(W)}})}function Uu(w,f){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,_.Z)(function*(w,f){const y=yield f;return{verificationId:y.verificationId,confirm:T=>Ui(w,y.confirm(T))}})).apply(this,arguments)}class bc{constructor(f,y){this.resolver=y,this.auth=function Vu(w){return w.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ui(Eu(this.auth),this.resolver.resolveSignIn(f))}}class Za{constructor(f){this._delegate=f,this.multiFactor=function tu(w){const f=(0,q.m9)(w);return _a.has(f)||_a.set(f,Wu._fromUser(f)),_a.get(f)}(f)}static getOrCreate(f){return Za.USER_MAP.has(f)||Za.USER_MAP.set(f,new Za(f)),Za.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var y=this;return(0,_.Z)(function*(){return Ui(y.auth,fa(y._delegate,f))})()}linkWithPhoneNumber(f,y){var T=this;return(0,_.Z)(function*(){return Uu(T.auth,function Js(w,f,y){return oo.apply(this,arguments)}(T._delegate,f,y))})()}linkWithPopup(f){var y=this;return(0,_.Z)(function*(){return Ui(y.auth,function Ze(w,f,y){return Ft.apply(this,arguments)}(y._delegate,f,Lu))})()}linkWithRedirect(f){var y=this;return(0,_.Z)(function*(){return yield Jl(wr(y.auth)),function je(w,f,y){return function Xe(w,f,y){return bt.apply(this,arguments)}(w,f,y)}(y._delegate,f,Lu)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var y=this;return(0,_.Z)(function*(){return Ui(y.auth,Ta(y._delegate,f))})()}reauthenticateWithPhoneNumber(f,y){return Uu(this.auth,function Zu(w,f,y){return Xs.apply(this,arguments)}(this._delegate,f,y))}reauthenticateWithPopup(f){return Ui(this.auth,function ce(w,f,y){return Ce.apply(this,arguments)}(this._delegate,f,Lu))}reauthenticateWithRedirect(f){var y=this;return(0,_.Z)(function*(){return yield Jl(wr(y.auth)),function U(w,f,y){return function Q(w,f,y){return ge.apply(this,arguments)}(w,f,y)}(y._delegate,f,Lu)})()}sendEmailVerification(f){return function pa(w,f){return pi.apply(this,arguments)}(this._delegate,f)}unlink(f){var y=this;return(0,_.Z)(function*(){return yield function hr(w,f){return Ei.apply(this,arguments)}(y._delegate,f),y})()}updateEmail(f){return function R(w,f){return F((0,q.m9)(w),f,null)}(this._delegate,f)}updatePassword(f){return function z(w,f){return F((0,q.m9)(w),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Ru(w,f){return ao.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Sa(w,f){return eu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,y){return function ga(w,f,y){return Ja.apply(this,arguments)}(this._delegate,f,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Za.USER_MAP=new WeakMap;const nl=P;let Bu=(()=>{class w{constructor(y,T){if(this.app=y,T.isInitialized())return this._delegate=T.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:W}=y.options;nl(W,"invalid-api-key",{appName:y.name}),nl(W,"invalid-api-key",{appName:y.name});const re=typeof window<"u"?Lu:void 0;this._delegate=T.initialize({options:{persistence:Tl(W,y.name),popupRedirectResolver:re}}),this._delegate._updateErrorMap(Ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Za.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,T){!function mo(w,f,y){const T=wr(w);P(T._canInitEmulator,T,"emulator-config-failed"),P(/^https?:\/\//.test(f),T,"invalid-emulator-scheme");const W=!!y?.disableWarnings,re=hs(f),{host:Oe,port:ut}=function Kr(w){const f=hs(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(f.length));if(!y)return{host:"",port:null};const T=y[2].split("@").pop()||"",W=/^(\[[^\]]+\])(:|$)/.exec(T);if(W){const re=W[1];return{host:re,port:to(T.substr(re.length+1))}}{const[re,Oe]=T.split(":");return{host:re,port:to(Oe)}}}(f);T.config.emulator={url:`${re}//${Oe}${null===ut?"":`:${ut}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:Oe,port:ut,protocol:re.replace(":",""),options:Object.freeze({disableWarnings:W})}),W||function Rs(){function w(){const f=document.createElement("p"),y=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(this._delegate,y,T)}applyActionCode(y){return function Fs(w,f){return Ur.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return Ls(this._delegate,y)}confirmPasswordReset(y,T){return function _o(w,f,y){return os.apply(this,arguments)}(this._delegate,y,T)}createUserWithEmailAndPassword(y,T){var W=this;return(0,_.Z)(function*(){return Ui(W._delegate,function L(w,f,y){return O.apply(this,arguments)}(W._delegate,y,T))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function Qs(w,f){return Us.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function yr(w,f){return"EMAIL_SIGNIN"===gs.parseLink(f)?.operation}(0,y)}getRedirectResult(){var y=this;return(0,_.Z)(function*(){nl(tl(),y._delegate,"operation-not-supported-in-this-environment");const T=yield function $t(w,f){return vn.apply(this,arguments)}(y._delegate,Lu);return T?Ui(y._delegate,Promise.resolve(T)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function Ii(w,f){wr(w)._logFramework(f)}(this._delegate,y)}onAuthStateChanged(y,T,W){const{next:re,error:Oe,complete:ut}=nd(y,T,W);return this._delegate.onAuthStateChanged(re,Oe,ut)}onIdTokenChanged(y,T,W){const{next:re,error:Oe,complete:ut}=nd(y,T,W);return this._delegate.onIdTokenChanged(re,Oe,ut)}sendSignInLinkToEmail(y,T){return function ct(w,f,y){return hn.apply(this,arguments)}(this._delegate,y,T)}sendPasswordResetEmail(y,T){return function _s(w,f,y){return pn.apply(this,arguments)}(this._delegate,y,T||void 0)}setPersistence(y){var T=this;return(0,_.Z)(function*(){let W;switch(function Bo(w,f){ba(Object.values(cs).includes(f),w,"invalid-persistence-type"),(0,q.b$)()?ba(f!==cs.SESSION,w,"unsupported-persistence-type"):(0,q.UG)()?ba(f===cs.NONE,w,"unsupported-persistence-type"):Ir()?ba(f===cs.NONE||f===cs.LOCAL&&(0,q.hl)(),w,"unsupported-persistence-type"):ba(f===cs.NONE||As(),w,"unsupported-persistence-type")}(T._delegate,y),y){case cs.SESSION:W=Er;break;case cs.LOCAL:W=(yield Se(Yo)._isAvailable())?Yo:nu;break;case cs.NONE:W=Gn;break;default:return mt("argument-error",{appName:T._delegate.name})}return T._delegate.setPersistence(W)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return Ui(this._delegate,function Zs(w){return $r.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return Ui(this._delegate,Nr(this._delegate,y))}signInWithCustomToken(y){return Ui(this._delegate,function Ys(w,f){return ss.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,T){return Ui(this._delegate,function ne(w,f,y){return Nr((0,q.m9)(w),hi.credential(f,y))}(this._delegate,y,T))}signInWithEmailLink(y,T){return Ui(this._delegate,function ki(w,f,y){return fi.apply(this,arguments)}(this._delegate,y,T))}signInWithPhoneNumber(y,T){return Uu(this._delegate,function jl(w,f,y){return Qi.apply(this,arguments)}(this._delegate,y,T))}signInWithPopup(y){var T=this;return(0,_.Z)(function*(){return nl(tl(),T._delegate,"operation-not-supported-in-this-environment"),Ui(T._delegate,function V(w,f,y){return Y.apply(this,arguments)}(T._delegate,y,Lu))})()}signInWithRedirect(y){var T=this;return(0,_.Z)(function*(){return nl(tl(),T._delegate,"operation-not-supported-in-this-environment"),yield Jl(T._delegate),function Xi(w,f,y){return function su(w,f,y){return k.apply(this,arguments)}(w,f,y)}(T._delegate,y,Lu)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function zo(w,f){return j.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=cs,w})();function nd(w,f,y){let T=w;"function"!=typeof w&&({next:T,error:f,complete:y}=w);const W=T;return{next:Oe=>W(Oe&&Za.getOrCreate(Oe)),error:f,complete:y}}function Tl(w,f){const y=function Fu(w,f){const y=Bd();if(!y)return[];const T=Ue(bo,w,f);switch(y.getItem(T)){case cs.NONE:return[Gn];case cs.LOCAL:return[Yo,Er];case cs.SESSION:return[Er];default:return[]}}(w,f);if(typeof self<"u"&&!y.includes(Yo)&&y.push(Yo),typeof window<"u")for(const T of[nu,Er])y.includes(T)||y.push(T);return y.includes(Gn)||y.push(Gn),y}class oa{constructor(){this.providerId="phone",this._delegate=new pu(Eu(Z.Z.auth()))}static credential(f,y){return pu.credential(f,y)}verifyPhoneNumber(f,y){return this._delegate.verifyPhoneNumber(f,y)}unwrap(){return this._delegate}}oa.PHONE_SIGN_IN_METHOD=pu.PHONE_SIGN_IN_METHOD,oa.PROVIDER_ID=pu.PROVIDER_ID;const jd=P;class xs{constructor(f,y,T=Z.Z.app()){var W;jd(null===(W=T.options)||void 0===W?void 0:W.apiKey,"invalid-api-key",{appName:T.name}),this._delegate=new Wi(f,y,T.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function id(w){w.INTERNAL.registerComponent(new Le.wA("auth-compat",f=>{const y=f.getProvider("app-compat").getImmediate(),T=f.getProvider("auth");return new Bu(y,T)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:hi,FacebookAuthProvider:Ro,GithubAuthProvider:yo,GoogleAuthProvider:ji,OAuthProvider:Cs,SAMLAuthProvider:Mi,PhoneAuthProvider:oa,PhoneMultiFactorGenerator:ho,RecaptchaVerifier:xs,TwitterAuthProvider:Pi,Auth:Bu,AuthCredential:ii,Error:q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.2.19")}(Z.Z)},9751:(Kt,qe,H)=>{H.d(qe,{y:()=>Ve});var _=H(930),Z=H(727),q=H(8822),Re=H(9635),J=H(2416),Me=H(576),Le=H(2806);let Ve=(()=>{class me{constructor(tt){tt&&(this._subscribe=tt)}lift(tt){const Ke=new me;return Ke.source=this,Ke.operator=tt,Ke}subscribe(tt,Ke,zt){const at=function ie(me){return me&&me instanceof _.Lv||function ae(me){return me&&(0,Me.m)(me.next)&&(0,Me.m)(me.error)&&(0,Me.m)(me.complete)}(me)&&(0,Z.Nn)(me)}(tt)?tt:new _.Hp(tt,Ke,zt);return(0,Le.x)(()=>{const{operator:nt,source:Ne}=this;at.add(nt?nt.call(at,Ne):Ne?this._subscribe(at):this._trySubscribe(at))}),at}_trySubscribe(tt){try{return this._subscribe(tt)}catch(Ke){tt.error(Ke)}}forEach(tt,Ke){return new(Ke=He(Ke))((zt,at)=>{const nt=new _.Hp({next:Ne=>{try{tt(Ne)}catch(Bt){at(Bt),nt.unsubscribe()}},error:at,complete:zt});this.subscribe(nt)})}_subscribe(tt){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(tt)}[q.L](){return this}pipe(...tt){return(0,Re.U)(tt)(this)}toPromise(tt){return new(tt=He(tt))((Ke,zt)=>{let at;this.subscribe(nt=>at=nt,nt=>zt(nt),()=>Ke(at))})}}return me.create=it=>new me(it),me})();function He(me){var it;return null!==(it=me??J.v.Promise)&&void 0!==it?it:Promise}},7579:(Kt,qe,H)=>{H.d(qe,{x:()=>Le});var _=H(9751),Z=H(727);const Re=(0,H(3888).d)(He=>function(){He(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=H(8737),Me=H(2806);let Le=(()=>{class He extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ie){const me=new Ve(this,this);return me.operator=ie,me}_throwIfClosed(){if(this.closed)throw new Re}next(ie){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const me of this.currentObservers)me.next(ie)}})}error(ie){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ie;const{observers:me}=this;for(;me.length;)me.shift().error(ie)}})}complete(){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ie}=this;for(;ie.length;)ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ie;return(null===(ie=this.observers)||void 0===ie?void 0:ie.length)>0}_trySubscribe(ie){return this._throwIfClosed(),super._trySubscribe(ie)}_subscribe(ie){return this._throwIfClosed(),this._checkFinalizedStatuses(ie),this._innerSubscribe(ie)}_innerSubscribe(ie){const{hasError:me,isStopped:it,observers:tt}=this;return me||it?Z.Lc:(this.currentObservers=null,tt.push(ie),new Z.w0(()=>{this.currentObservers=null,(0,J.P)(tt,ie)}))}_checkFinalizedStatuses(ie){const{hasError:me,thrownError:it,isStopped:tt}=this;me?ie.error(it):tt&&ie.complete()}asObservable(){const ie=new _.y;return ie.source=this,ie}}return He.create=(ae,ie)=>new Ve(ae,ie),He})();class Ve extends Le{constructor(ae,ie){super(),this.destination=ae,this.source=ie}next(ae){var ie,me;null===(me=null===(ie=this.destination)||void 0===ie?void 0:ie.next)||void 0===me||me.call(ie,ae)}error(ae){var ie,me;null===(me=null===(ie=this.destination)||void 0===ie?void 0:ie.error)||void 0===me||me.call(ie,ae)}complete(){var ae,ie;null===(ie=null===(ae=this.destination)||void 0===ae?void 0:ae.complete)||void 0===ie||ie.call(ae)}_subscribe(ae){var ie,me;return null!==(me=null===(ie=this.source)||void 0===ie?void 0:ie.subscribe(ae))&&void 0!==me?me:Z.Lc}}},930:(Kt,qe,H)=>{H.d(qe,{Hp:()=>zt,Lv:()=>me});var _=H(576),Z=H(727),q=H(2416),Re=H(7849),J=H(5032);const Me=He("C",void 0,void 0);function He(mt,st,Ge){return{kind:mt,value:st,error:Ge}}var ae=H(3410),ie=H(2806);class me extends Z.w0{constructor(st){super(),this.isStopped=!1,st?(this.destination=st,(0,Z.Nn)(st)&&st.add(this)):this.destination=Bt}static create(st,Ge,Mt){return new zt(st,Ge,Mt)}next(st){this.isStopped?Ne(function Ve(mt){return He("N",mt,void 0)}(st),this):this._next(st)}error(st){this.isStopped?Ne(function Le(mt){return He("E",void 0,mt)}(st),this):(this.isStopped=!0,this._error(st))}complete(){this.isStopped?Ne(Me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(st){this.destination.next(st)}_error(st){try{this.destination.error(st)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const it=Function.prototype.bind;function tt(mt,st){return it.call(mt,st)}class Ke{constructor(st){this.partialObserver=st}next(st){const{partialObserver:Ge}=this;if(Ge.next)try{Ge.next(st)}catch(Mt){at(Mt)}}error(st){const{partialObserver:Ge}=this;if(Ge.error)try{Ge.error(st)}catch(Mt){at(Mt)}else at(st)}complete(){const{partialObserver:st}=this;if(st.complete)try{st.complete()}catch(Ge){at(Ge)}}}class zt extends me{constructor(st,Ge,Mt){let $e;if(super(),(0,_.m)(st)||!st)$e={next:st??void 0,error:Ge??void 0,complete:Mt??void 0};else{let P;this&&q.v.useDeprecatedNextContext?(P=Object.create(st),P.unsubscribe=()=>this.unsubscribe(),$e={next:st.next&&tt(st.next,P),error:st.error&&tt(st.error,P),complete:st.complete&&tt(st.complete,P)}):$e=st}this.destination=new Ke($e)}}function at(mt){q.v.useDeprecatedSynchronousErrorHandling?(0,ie.O)(mt):(0,Re.h)(mt)}function Ne(mt,st){const{onStoppedNotification:Ge}=q.v;Ge&&ae.z.setTimeout(()=>Ge(mt,st))}const Bt={closed:!0,next:J.Z,error:function nt(mt){throw mt},complete:J.Z}},727:(Kt,qe,H)=>{H.d(qe,{Lc:()=>Me,w0:()=>J,Nn:()=>Le});var _=H(576);const q=(0,H(3888).d)(He=>function(ie){He(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((me,it)=>`${it+1}) ${me.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie});var Re=H(8737);class J{constructor(ae){this.initialTeardown=ae,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ae;if(!this.closed){this.closed=!0;const{_parentage:ie}=this;if(ie)if(this._parentage=null,Array.isArray(ie))for(const tt of ie)tt.remove(this);else ie.remove(this);const{initialTeardown:me}=this;if((0,_.m)(me))try{me()}catch(tt){ae=tt instanceof q?tt.errors:[tt]}const{_finalizers:it}=this;if(it){this._finalizers=null;for(const tt of it)try{Ve(tt)}catch(Ke){ae=ae??[],Ke instanceof q?ae=[...ae,...Ke.errors]:ae.push(Ke)}}if(ae)throw new q(ae)}}add(ae){var ie;if(ae&&ae!==this)if(this.closed)Ve(ae);else{if(ae instanceof J){if(ae.closed||ae._hasParent(this))return;ae._addParent(this)}(this._finalizers=null!==(ie=this._finalizers)&&void 0!==ie?ie:[]).push(ae)}}_hasParent(ae){const{_parentage:ie}=this;return ie===ae||Array.isArray(ie)&&ie.includes(ae)}_addParent(ae){const{_parentage:ie}=this;this._parentage=Array.isArray(ie)?(ie.push(ae),ie):ie?[ie,ae]:ae}_removeParent(ae){const{_parentage:ie}=this;ie===ae?this._parentage=null:Array.isArray(ie)&&(0,Re.P)(ie,ae)}remove(ae){const{_finalizers:ie}=this;ie&&(0,Re.P)(ie,ae),ae instanceof J&&ae._removeParent(this)}}J.EMPTY=(()=>{const He=new J;return He.closed=!0,He})();const Me=J.EMPTY;function Le(He){return He instanceof J||He&&"closed"in He&&(0,_.m)(He.remove)&&(0,_.m)(He.add)&&(0,_.m)(He.unsubscribe)}function Ve(He){(0,_.m)(He)?He():He.unsubscribe()}},2416:(Kt,qe,H)=>{H.d(qe,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Kt,qe,H)=>{H.d(qe,{z:()=>J});var _=H(8189),q=H(7669),Re=H(8996);function J(...Me){return function Z(){return(0,_.J)(1)}()((0,Re.D)(Me,(0,q.yG)(Me)))}},515:(Kt,qe,H)=>{H.d(qe,{E:()=>Z});const Z=new(H(9751).y)(J=>J.complete())},8996:(Kt,qe,H)=>{H.d(qe,{D:()=>st});var _=H(8421),Z=H(5363),q=H(9468),Me=H(9751),Ve=H(2202),He=H(576),ae=H(9672);function me(Ge,Mt){if(!Ge)throw new Error("Iterable cannot be null");return new Me.y($e=>{(0,ae.f)($e,Mt,()=>{const P=Ge[Symbol.asyncIterator]();(0,ae.f)($e,Mt,()=>{P.next().then(ve=>{ve.done?$e.complete():$e.next(ve.value)})},0,!0)})})}var it=H(3670),tt=H(8239),Ke=H(1144),zt=H(6495),at=H(2206),nt=H(4532),Ne=H(3260);function st(Ge,Mt){return Mt?function mt(Ge,Mt){if(null!=Ge){if((0,it.c)(Ge))return function Re(Ge,Mt){return(0,_.Xf)(Ge).pipe((0,q.R)(Mt),(0,Z.Q)(Mt))}(Ge,Mt);if((0,Ke.z)(Ge))return function Le(Ge,Mt){return new Me.y($e=>{let P=0;return Mt.schedule(function(){P===Ge.length?$e.complete():($e.next(Ge[P++]),$e.closed||this.schedule())})})}(Ge,Mt);if((0,tt.t)(Ge))return function J(Ge,Mt){return(0,_.Xf)(Ge).pipe((0,q.R)(Mt),(0,Z.Q)(Mt))}(Ge,Mt);if((0,at.D)(Ge))return me(Ge,Mt);if((0,zt.T)(Ge))return function ie(Ge,Mt){return new Me.y($e=>{let P;return(0,ae.f)($e,Mt,()=>{P=Ge[Ve.h](),(0,ae.f)($e,Mt,()=>{let ve,oe;try{({value:ve,done:oe}=P.next())}catch(Te){return void $e.error(Te)}oe?$e.complete():$e.next(ve)},0,!0)}),()=>(0,He.m)(P?.return)&&P.return()})}(Ge,Mt);if((0,Ne.L)(Ge))return function Bt(Ge,Mt){return me((0,Ne.Q)(Ge),Mt)}(Ge,Mt)}throw(0,nt.z)(Ge)}(Ge,Mt):(0,_.Xf)(Ge)}},8421:(Kt,qe,H)=>{H.d(qe,{Xf:()=>it});var _=H(655),Z=H(1144),q=H(8239),Re=H(9751),J=H(3670),Me=H(2206),Le=H(4532),Ve=H(6495),He=H(3260),ae=H(576),ie=H(7849),me=H(8822);function it(mt){if(mt instanceof Re.y)return mt;if(null!=mt){if((0,J.c)(mt))return function tt(mt){return new Re.y(st=>{const Ge=mt[me.L]();if((0,ae.m)(Ge.subscribe))return Ge.subscribe(st);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(mt);if((0,Z.z)(mt))return function Ke(mt){return new Re.y(st=>{for(let Ge=0;Ge<mt.length&&!st.closed;Ge++)st.next(mt[Ge]);st.complete()})}(mt);if((0,q.t)(mt))return function zt(mt){return new Re.y(st=>{mt.then(Ge=>{st.closed||(st.next(Ge),st.complete())},Ge=>st.error(Ge)).then(null,ie.h)})}(mt);if((0,Me.D)(mt))return nt(mt);if((0,Ve.T)(mt))return function at(mt){return new Re.y(st=>{for(const Ge of mt)if(st.next(Ge),st.closed)return;st.complete()})}(mt);if((0,He.L)(mt))return function Ne(mt){return nt((0,He.Q)(mt))}(mt)}throw(0,Le.z)(mt)}function nt(mt){return new Re.y(st=>{(function Bt(mt,st){var Ge,Mt,$e,P;return(0,_.mG)(this,void 0,void 0,function*(){try{for(Ge=(0,_.KL)(mt);!(Mt=yield Ge.next()).done;)if(st.next(Mt.value),st.closed)return}catch(ve){$e={error:ve}}finally{try{Mt&&!Mt.done&&(P=Ge.return)&&(yield P.call(Ge))}finally{if($e)throw $e.error}}st.complete()})})(mt,st).catch(Ge=>st.error(Ge))})}},6451:(Kt,qe,H)=>{H.d(qe,{T:()=>Me});var _=H(8189),Z=H(8421),q=H(515),Re=H(7669),J=H(8996);function Me(...Le){const Ve=(0,Re.yG)(Le),He=(0,Re._6)(Le,1/0),ae=Le;return ae.length?1===ae.length?(0,Z.Xf)(ae[0]):(0,_.J)(He)((0,J.D)(ae,Ve)):q.E}},9646:(Kt,qe,H)=>{H.d(qe,{of:()=>q});var _=H(7669),Z=H(8996);function q(...Re){const J=(0,_.yG)(Re);return(0,Z.D)(Re,J)}},5403:(Kt,qe,H)=>{H.d(qe,{x:()=>Z});var _=H(930);function Z(Re,J,Me,Le,Ve){return new q(Re,J,Me,Le,Ve)}class q extends _.Lv{constructor(J,Me,Le,Ve,He,ae){super(J),this.onFinalize=He,this.shouldUnsubscribe=ae,this._next=Me?function(ie){try{Me(ie)}catch(me){J.error(me)}}:super._next,this._error=Ve?function(ie){try{Ve(ie)}catch(me){J.error(me)}finally{this.unsubscribe()}}:super._error,this._complete=Le?function(){try{Le()}catch(ie){J.error(ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Me}=this;super.unsubscribe(),!Me&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4351:(Kt,qe,H)=>{H.d(qe,{b:()=>q});var _=H(5577),Z=H(576);function q(Re,J){return(0,Z.m)(J)?(0,_.z)(Re,J,1):(0,_.z)(Re,1)}},6590:(Kt,qe,H)=>{H.d(qe,{d:()=>q});var _=H(4482),Z=H(5403);function q(Re){return(0,_.e)((J,Me)=>{let Le=!1;J.subscribe((0,Z.x)(Me,Ve=>{Le=!0,Me.next(Ve)},()=>{Le||Me.next(Re),Me.complete()}))})}},1884:(Kt,qe,H)=>{H.d(qe,{x:()=>Re});var _=H(4671),Z=H(4482),q=H(5403);function Re(Me,Le=_.y){return Me=Me??J,(0,Z.e)((Ve,He)=>{let ae,ie=!0;Ve.subscribe((0,q.x)(He,me=>{const it=Le(me);(ie||!Me(ae,it))&&(ie=!1,ae=it,He.next(me))}))})}function J(Me,Le){return Me===Le}},9300:(Kt,qe,H)=>{H.d(qe,{h:()=>q});var _=H(4482),Z=H(5403);function q(Re,J){return(0,_.e)((Me,Le)=>{let Ve=0;Me.subscribe((0,Z.x)(Le,He=>Re.call(J,He,Ve++)&&Le.next(He)))})}},590:(Kt,qe,H)=>{H.d(qe,{P:()=>Le});var _=H(6805),Z=H(9300),q=H(5698),Re=H(6590),J=H(8068),Me=H(4671);function Le(Ve,He){const ae=arguments.length>=2;return ie=>ie.pipe(Ve?(0,Z.h)((me,it)=>Ve(me,it,ie)):Me.y,(0,q.q)(1),ae?(0,Re.d)(He):(0,J.T)(()=>new _.K))}},4004:(Kt,qe,H)=>{H.d(qe,{U:()=>q});var _=H(4482),Z=H(5403);function q(Re,J){return(0,_.e)((Me,Le)=>{let Ve=0;Me.subscribe((0,Z.x)(Le,He=>{Le.next(Re.call(J,He,Ve++))}))})}},8189:(Kt,qe,H)=>{H.d(qe,{J:()=>q});var _=H(5577),Z=H(4671);function q(Re=1/0){return(0,_.z)(Z.y,Re)}},5577:(Kt,qe,H)=>{H.d(qe,{z:()=>Ve});var _=H(4004),Z=H(8421),q=H(4482),Re=H(9672),J=H(5403),Le=H(576);function Ve(He,ae,ie=1/0){return(0,Le.m)(ae)?Ve((me,it)=>(0,_.U)((tt,Ke)=>ae(me,tt,it,Ke))((0,Z.Xf)(He(me,it))),ie):("number"==typeof ae&&(ie=ae),(0,q.e)((me,it)=>function Me(He,ae,ie,me,it,tt,Ke,zt){const at=[];let nt=0,Ne=0,Bt=!1;const mt=()=>{Bt&&!at.length&&!nt&&ae.complete()},st=Mt=>nt<me?Ge(Mt):at.push(Mt),Ge=Mt=>{tt&&ae.next(Mt),nt++;let $e=!1;(0,Z.Xf)(ie(Mt,Ne++)).subscribe((0,J.x)(ae,P=>{it?.(P),tt?st(P):ae.next(P)},()=>{$e=!0},void 0,()=>{if($e)try{for(nt--;at.length&&nt<me;){const P=at.shift();Ke?(0,Re.f)(ae,Ke,()=>Ge(P)):Ge(P)}mt()}catch(P){ae.error(P)}}))};return He.subscribe((0,J.x)(ae,st,()=>{Bt=!0,mt()})),()=>{zt?.()}}(me,it,He,ie)))}},5363:(Kt,qe,H)=>{H.d(qe,{Q:()=>Re});var _=H(9672),Z=H(4482),q=H(5403);function Re(J,Me=0){return(0,Z.e)((Le,Ve)=>{Le.subscribe((0,q.x)(Ve,He=>(0,_.f)(Ve,J,()=>Ve.next(He),Me),()=>(0,_.f)(Ve,J,()=>Ve.complete(),Me),He=>(0,_.f)(Ve,J,()=>Ve.error(He),Me)))})}},5026:(Kt,qe,H)=>{H.d(qe,{R:()=>Re});var _=H(4482),Z=H(5403);function q(J,Me,Le,Ve,He){return(ae,ie)=>{let me=Le,it=Me,tt=0;ae.subscribe((0,Z.x)(ie,Ke=>{const zt=tt++;it=me?J(it,Ke,zt):(me=!0,Ke),Ve&&ie.next(it)},He&&(()=>{me&&ie.next(it),ie.complete()})))}}function Re(J,Me){return(0,_.e)(q(J,Me,arguments.length>=2,!0))}},3099:(Kt,qe,H)=>{H.d(qe,{B:()=>J});var _=H(8421),Z=H(7579),q=H(930),Re=H(4482);function J(Le={}){const{connector:Ve=(()=>new Z.x),resetOnError:He=!0,resetOnComplete:ae=!0,resetOnRefCountZero:ie=!0}=Le;return me=>{let it,tt,Ke,zt=0,at=!1,nt=!1;const Ne=()=>{tt?.unsubscribe(),tt=void 0},Bt=()=>{Ne(),it=Ke=void 0,at=nt=!1},mt=()=>{const st=it;Bt(),st?.unsubscribe()};return(0,Re.e)((st,Ge)=>{zt++,!nt&&!at&&Ne();const Mt=Ke=Ke??Ve();Ge.add(()=>{zt--,0===zt&&!nt&&!at&&(tt=Me(mt,ie))}),Mt.subscribe(Ge),!it&&zt>0&&(it=new q.Hp({next:$e=>Mt.next($e),error:$e=>{nt=!0,Ne(),tt=Me(Bt,He,$e),Mt.error($e)},complete:()=>{at=!0,Ne(),tt=Me(Bt,ae),Mt.complete()}}),(0,_.Xf)(st).subscribe(it))})(me)}}function Me(Le,Ve,...He){if(!0===Ve)return void Le();if(!1===Ve)return;const ae=new q.Hp({next:()=>{ae.unsubscribe(),Le()}});return Ve(...He).subscribe(ae)}},8675:(Kt,qe,H)=>{H.d(qe,{O:()=>Re});var _=H(7272),Z=H(7669),q=H(4482);function Re(...J){const Me=(0,Z.yG)(J);return(0,q.e)((Le,Ve)=>{(Me?(0,_.z)(J,Le,Me):(0,_.z)(J,Le)).subscribe(Ve)})}},9468:(Kt,qe,H)=>{H.d(qe,{R:()=>Z});var _=H(4482);function Z(q,Re=0){return(0,_.e)((J,Me)=>{Me.add(q.schedule(()=>J.subscribe(Me),Re))})}},3900:(Kt,qe,H)=>{H.d(qe,{w:()=>Re});var _=H(8421),Z=H(4482),q=H(5403);function Re(J,Me){return(0,Z.e)((Le,Ve)=>{let He=null,ae=0,ie=!1;const me=()=>ie&&!He&&Ve.complete();Le.subscribe((0,q.x)(Ve,it=>{He?.unsubscribe();let tt=0;const Ke=ae++;(0,_.Xf)(J(it,Ke)).subscribe(He=(0,q.x)(Ve,zt=>Ve.next(Me?Me(it,zt,Ke,tt++):zt),()=>{He=null,me()}))},()=>{ie=!0,me()}))})}},5698:(Kt,qe,H)=>{H.d(qe,{q:()=>Re});var _=H(515),Z=H(4482),q=H(5403);function Re(J){return J<=0?()=>_.E:(0,Z.e)((Me,Le)=>{let Ve=0;Me.subscribe((0,q.x)(Le,He=>{++Ve<=J&&(Le.next(He),J<=Ve&&Le.complete())}))})}},8505:(Kt,qe,H)=>{H.d(qe,{b:()=>J});var _=H(576),Z=H(4482),q=H(5403),Re=H(4671);function J(Me,Le,Ve){const He=(0,_.m)(Me)||Le||Ve?{next:Me,error:Le,complete:Ve}:Me;return He?(0,Z.e)((ae,ie)=>{var me;null===(me=He.subscribe)||void 0===me||me.call(He);let it=!0;ae.subscribe((0,q.x)(ie,tt=>{var Ke;null===(Ke=He.next)||void 0===Ke||Ke.call(He,tt),ie.next(tt)},()=>{var tt;it=!1,null===(tt=He.complete)||void 0===tt||tt.call(He),ie.complete()},tt=>{var Ke;it=!1,null===(Ke=He.error)||void 0===Ke||Ke.call(He,tt),ie.error(tt)},()=>{var tt,Ke;it&&(null===(tt=He.unsubscribe)||void 0===tt||tt.call(He)),null===(Ke=He.finalize)||void 0===Ke||Ke.call(He)}))}):Re.y}},8068:(Kt,qe,H)=>{H.d(qe,{T:()=>Re});var _=H(6805),Z=H(4482),q=H(5403);function Re(Me=J){return(0,Z.e)((Le,Ve)=>{let He=!1;Le.subscribe((0,q.x)(Ve,ae=>{He=!0,Ve.next(ae)},()=>He?Ve.complete():Ve.error(Me())))})}function J(){return new _.K}},4408:(Kt,qe,H)=>{H.d(qe,{o:()=>J});var _=H(727);class Z extends _.w0{constructor(Le,Ve){super()}schedule(Le,Ve=0){return this}}const q={setInterval(Me,Le,...Ve){const{delegate:He}=q;return He?.setInterval?He.setInterval(Me,Le,...Ve):setInterval(Me,Le,...Ve)},clearInterval(Me){const{delegate:Le}=q;return(Le?.clearInterval||clearInterval)(Me)},delegate:void 0};var Re=H(8737);class J extends Z{constructor(Le,Ve){super(Le,Ve),this.scheduler=Le,this.work=Ve,this.pending=!1}schedule(Le,Ve=0){if(this.closed)return this;this.state=Le;const He=this.id,ae=this.scheduler;return null!=He&&(this.id=this.recycleAsyncId(ae,He,Ve)),this.pending=!0,this.delay=Ve,this.id=this.id||this.requestAsyncId(ae,this.id,Ve),this}requestAsyncId(Le,Ve,He=0){return q.setInterval(Le.flush.bind(Le,this),He)}recycleAsyncId(Le,Ve,He=0){if(null!=He&&this.delay===He&&!1===this.pending)return Ve;q.clearInterval(Ve)}execute(Le,Ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const He=this._execute(Le,Ve);if(He)return He;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Le,Ve){let ae,He=!1;try{this.work(Le)}catch(ie){He=!0,ae=ie||new Error("Scheduled action threw falsy error")}if(He)return this.unsubscribe(),ae}unsubscribe(){if(!this.closed){const{id:Le,scheduler:Ve}=this,{actions:He}=Ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Re.P)(He,this),null!=Le&&(this.id=this.recycleAsyncId(Ve,Le,null)),this.delay=null,super.unsubscribe()}}}},7565:(Kt,qe,H)=>{H.d(qe,{v:()=>q});var _=H(6063);class Z{constructor(J,Me=Z.now){this.schedulerActionCtor=J,this.now=Me}schedule(J,Me=0,Le){return new this.schedulerActionCtor(this,J).schedule(Le,Me)}}Z.now=_.l.now;class q extends Z{constructor(J,Me=Z.now){super(J,Me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:Me}=this;if(this._active)return void Me.push(J);let Le;this._active=!0;do{if(Le=J.execute(J.state,J.delay))break}while(J=Me.shift());if(this._active=!1,Le){for(;J=Me.shift();)J.unsubscribe();throw Le}}}},4986:(Kt,qe,H)=>{H.d(qe,{z:()=>q});var _=H(4408);const q=new(H(7565).v)(_.o)},6063:(Kt,qe,H)=>{H.d(qe,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(Kt,qe,H)=>{H.d(qe,{z:()=>_});const _={setTimeout(Z,q,...Re){const{delegate:J}=_;return J?.setTimeout?J.setTimeout(Z,q,...Re):setTimeout(Z,q,...Re)},clearTimeout(Z){const{delegate:q}=_;return(q?.clearTimeout||clearTimeout)(Z)},delegate:void 0}},2202:(Kt,qe,H)=>{H.d(qe,{h:()=>Z});const Z=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Kt,qe,H)=>{H.d(qe,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Kt,qe,H)=>{H.d(qe,{K:()=>Z});const Z=(0,H(3888).d)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Kt,qe,H)=>{H.d(qe,{_6:()=>Me,jO:()=>Re,yG:()=>J});var _=H(576);function q(Le){return Le[Le.length-1]}function Re(Le){return(0,_.m)(q(Le))?Le.pop():void 0}function J(Le){return function Z(Le){return Le&&(0,_.m)(Le.schedule)}(q(Le))?Le.pop():void 0}function Me(Le,Ve){return"number"==typeof q(Le)?Le.pop():Ve}},4742:(Kt,qe,H)=>{H.d(qe,{D:()=>J});const{isArray:_}=Array,{getPrototypeOf:Z,prototype:q,keys:Re}=Object;function J(Le){if(1===Le.length){const Ve=Le[0];if(_(Ve))return{args:Ve,keys:null};if(function Me(Le){return Le&&"object"==typeof Le&&Z(Le)===q}(Ve)){const He=Re(Ve);return{args:He.map(ae=>Ve[ae]),keys:He}}}return{args:Le,keys:null}}},8737:(Kt,qe,H)=>{function _(Z,q){if(Z){const Re=Z.indexOf(q);0<=Re&&Z.splice(Re,1)}}H.d(qe,{P:()=>_})},3888:(Kt,qe,H)=>{function _(Z){const Re=Z(J=>{Error.call(J),J.stack=(new Error).stack});return Re.prototype=Object.create(Error.prototype),Re.prototype.constructor=Re,Re}H.d(qe,{d:()=>_})},1810:(Kt,qe,H)=>{function _(Z,q){return Z.reduce((Re,J,Me)=>(Re[J]=q[Me],Re),{})}H.d(qe,{n:()=>_})},2806:(Kt,qe,H)=>{H.d(qe,{O:()=>Re,x:()=>q});var _=H(2416);let Z=null;function q(J){if(_.v.useDeprecatedSynchronousErrorHandling){const Me=!Z;if(Me&&(Z={errorThrown:!1,error:null}),J(),Me){const{errorThrown:Le,error:Ve}=Z;if(Z=null,Le)throw Ve}}else J()}function Re(J){_.v.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=J)}},9672:(Kt,qe,H)=>{function _(Z,q,Re,J=0,Me=!1){const Le=q.schedule(function(){Re(),Me?Z.add(this.schedule(null,J)):this.unsubscribe()},J);if(Z.add(Le),!Me)return Le}H.d(qe,{f:()=>_})},4671:(Kt,qe,H)=>{function _(Z){return Z}H.d(qe,{y:()=>_})},1144:(Kt,qe,H)=>{H.d(qe,{z:()=>_});const _=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},2206:(Kt,qe,H)=>{H.d(qe,{D:()=>Z});var _=H(576);function Z(q){return Symbol.asyncIterator&&(0,_.m)(q?.[Symbol.asyncIterator])}},576:(Kt,qe,H)=>{function _(Z){return"function"==typeof Z}H.d(qe,{m:()=>_})},3670:(Kt,qe,H)=>{H.d(qe,{c:()=>q});var _=H(8822),Z=H(576);function q(Re){return(0,Z.m)(Re[_.L])}},6495:(Kt,qe,H)=>{H.d(qe,{T:()=>q});var _=H(2202),Z=H(576);function q(Re){return(0,Z.m)(Re?.[_.h])}},8239:(Kt,qe,H)=>{H.d(qe,{t:()=>Z});var _=H(576);function Z(q){return(0,_.m)(q?.then)}},3260:(Kt,qe,H)=>{H.d(qe,{L:()=>Re,Q:()=>q});var _=H(655),Z=H(576);function q(J){return(0,_.FC)(this,arguments,function*(){const Le=J.getReader();try{for(;;){const{value:Ve,done:He}=yield(0,_.qq)(Le.read());if(He)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(Ve)}}finally{Le.releaseLock()}})}function Re(J){return(0,Z.m)(J?.getReader)}},4482:(Kt,qe,H)=>{H.d(qe,{A:()=>Z,e:()=>q});var _=H(576);function Z(Re){return(0,_.m)(Re?.lift)}function q(Re){return J=>{if(Z(J))return J.lift(function(Me){try{return Re(Me,this)}catch(Le){this.error(Le)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Kt,qe,H)=>{H.d(qe,{Z:()=>Re});var _=H(4004);const{isArray:Z}=Array;function Re(J){return(0,_.U)(Me=>function q(J,Me){return Z(Me)?J(...Me):J(Me)}(J,Me))}},5032:(Kt,qe,H)=>{function _(){}H.d(qe,{Z:()=>_})},9635:(Kt,qe,H)=>{H.d(qe,{U:()=>q,z:()=>Z});var _=H(4671);function Z(...Re){return q(Re)}function q(Re){return 0===Re.length?_.y:1===Re.length?Re[0]:function(Me){return Re.reduce((Le,Ve)=>Ve(Le),Me)}}},7849:(Kt,qe,H)=>{H.d(qe,{h:()=>q});var _=H(2416),Z=H(3410);function q(Re){Z.z.setTimeout(()=>{const{onUnhandledError:J}=_.v;if(!J)throw Re;J(Re)})}},4532:(Kt,qe,H)=>{function _(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(qe,{z:()=>_})},655:(Kt,qe,H)=>{function Re(oe,Te){var Se={};for(var Be in oe)Object.prototype.hasOwnProperty.call(oe,Be)&&Te.indexOf(Be)<0&&(Se[Be]=oe[Be]);if(null!=oe&&"function"==typeof Object.getOwnPropertySymbols){var Ct=0;for(Be=Object.getOwnPropertySymbols(oe);Ct<Be.length;Ct++)Te.indexOf(Be[Ct])<0&&Object.prototype.propertyIsEnumerable.call(oe,Be[Ct])&&(Se[Be[Ct]]=oe[Be[Ct]])}return Se}function Ve(oe,Te,Se,Be){return new(Se||(Se=Promise))(function(Rt,kt){function Ut(Qt){try{lt(Be.next(Qt))}catch(sn){kt(sn)}}function Zt(Qt){try{lt(Be.throw(Qt))}catch(sn){kt(sn)}}function lt(Qt){Qt.done?Rt(Qt.value):function Ct(Rt){return Rt instanceof Se?Rt:new Se(function(kt){kt(Rt)})}(Qt.value).then(Ut,Zt)}lt((Be=Be.apply(oe,Te||[])).next())})}function at(oe){return this instanceof at?(this.v=oe,this):new at(oe)}function nt(oe,Te,Se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ct,Be=Se.apply(oe,Te||[]),Rt=[];return Ct={},kt("next"),kt("throw"),kt("return"),Ct[Symbol.asyncIterator]=function(){return this},Ct;function kt(en){Be[en]&&(Ct[en]=function(tn){return new Promise(function(Xn,yn){Rt.push([en,tn,Xn,yn])>1||Ut(en,tn)})})}function Ut(en,tn){try{!function Zt(en){en.value instanceof at?Promise.resolve(en.value.v).then(lt,Qt):sn(Rt[0][2],en)}(Be[en](tn))}catch(Xn){sn(Rt[0][3],Xn)}}function lt(en){Ut("next",en)}function Qt(en){Ut("throw",en)}function sn(en,tn){en(tn),Rt.shift(),Rt.length&&Ut(Rt[0][0],Rt[0][1])}}function Bt(oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,Te=oe[Symbol.asyncIterator];return Te?Te.call(oe):(oe=function me(oe){var Te="function"==typeof Symbol&&Symbol.iterator,Se=Te&&oe[Te],Be=0;if(Se)return Se.call(oe);if(oe&&"number"==typeof oe.length)return{next:function(){return oe&&Be>=oe.length&&(oe=void 0),{value:oe&&oe[Be++],done:!oe}}};throw new TypeError(Te?"Object is not iterable.":"Symbol.iterator is not defined.")}(oe),Se={},Be("next"),Be("throw"),Be("return"),Se[Symbol.asyncIterator]=function(){return this},Se);function Be(Rt){Se[Rt]=oe[Rt]&&function(kt){return new Promise(function(Ut,Zt){!function Ct(Rt,kt,Ut,Zt){Promise.resolve(Zt).then(function(lt){Rt({value:lt,done:Ut})},kt)}(Ut,Zt,(kt=oe[Rt](kt)).done,kt.value)})}}}H.d(qe,{FC:()=>nt,KL:()=>Bt,_T:()=>Re,mG:()=>Ve,qq:()=>at})},6895:(Kt,qe,H)=>{H.d(qe,{Do:()=>Bt,EM:()=>rs,HT:()=>J,JF:()=>Xr,K0:()=>Le,Mx:()=>zi,O5:()=>Vr,Ov:()=>vt,PM:()=>wi,S$:()=>at,V_:()=>ae,Ye:()=>mt,b0:()=>Ne,bD:()=>ms,ez:()=>Ds,q:()=>q,sg:()=>Ki,w_:()=>Me});var _=H(4650);let Z=null;function q(){return Z}function J(R){Z||(Z=R)}class Me{}const Le=new _.OlP("DocumentToken");let Ve=(()=>{class R{historyGo(F){throw new Error("Not implemented")}}return R.\u0275fac=function(F){return new(F||R)},R.\u0275prov=_.Yz7({token:R,factory:function(){return function He(){return(0,_.LFG)(ie)}()},providedIn:"platform"}),R})();const ae=new _.OlP("Location Initialized");let ie=(()=>{class R extends Ve{constructor(F){super(),this._doc=F,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(F){const X=q().getGlobalEventTarget(this._doc,"window");return X.addEventListener("popstate",F,!1),()=>X.removeEventListener("popstate",F)}onHashChange(F){const X=q().getGlobalEventTarget(this._doc,"window");return X.addEventListener("hashchange",F,!1),()=>X.removeEventListener("hashchange",F)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(F){this.location.pathname=F}pushState(F,X,Ee){me()?this._history.pushState(F,X,Ee):this.location.hash=Ee}replaceState(F,X,Ee){me()?this._history.replaceState(F,X,Ee):this.location.hash=Ee}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}}return R.\u0275fac=function(F){return new(F||R)(_.LFG(Le))},R.\u0275prov=_.Yz7({token:R,factory:function(){return function it(){return new ie((0,_.LFG)(Le))}()},providedIn:"platform"}),R})();function me(){return!!window.history.pushState}function tt(R,z){if(0==R.length)return z;if(0==z.length)return R;let F=0;return R.endsWith("/")&&F++,z.startsWith("/")&&F++,2==F?R+z.substring(1):1==F?R+z:R+"/"+z}function Ke(R){const z=R.match(/#|\?|$/),F=z&&z.index||R.length;return R.slice(0,F-("/"===R[F-1]?1:0))+R.slice(F)}function zt(R){return R&&"?"!==R[0]?"?"+R:R}let at=(()=>{class R{historyGo(F){throw new Error("Not implemented")}}return R.\u0275fac=function(F){return new(F||R)},R.\u0275prov=_.Yz7({token:R,factory:function(){return(0,_.f3M)(Ne)},providedIn:"root"}),R})();const nt=new _.OlP("appBaseHref");let Ne=(()=>{class R extends at{constructor(F,X){super(),this._platformLocation=F,this._removeListenerFns=[],this._baseHref=X??this._platformLocation.getBaseHrefFromDOM()??(0,_.f3M)(Le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return tt(this._baseHref,F)}path(F=!1){const X=this._platformLocation.pathname+zt(this._platformLocation.search),Ee=this._platformLocation.hash;return Ee&&F?`${X}${Ee}`:X}pushState(F,X,Ee,Qe){const pt=this.prepareExternalUrl(Ee+zt(Qe));this._platformLocation.pushState(F,X,pt)}replaceState(F,X,Ee,Qe){const pt=this.prepareExternalUrl(Ee+zt(Qe));this._platformLocation.replaceState(F,X,pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){this._platformLocation.historyGo?.(F)}}return R.\u0275fac=function(F){return new(F||R)(_.LFG(Ve),_.LFG(nt,8))},R.\u0275prov=_.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})(),Bt=(()=>{class R extends at{constructor(F,X){super(),this._platformLocation=F,this._baseHref="",this._removeListenerFns=[],null!=X&&(this._baseHref=X)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}path(F=!1){let X=this._platformLocation.hash;return null==X&&(X="#"),X.length>0?X.substring(1):X}prepareExternalUrl(F){const X=tt(this._baseHref,F);return X.length>0?"#"+X:X}pushState(F,X,Ee,Qe){let pt=this.prepareExternalUrl(Ee+zt(Qe));0==pt.length&&(pt=this._platformLocation.pathname),this._platformLocation.pushState(F,X,pt)}replaceState(F,X,Ee,Qe){let pt=this.prepareExternalUrl(Ee+zt(Qe));0==pt.length&&(pt=this._platformLocation.pathname),this._platformLocation.replaceState(F,X,pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){this._platformLocation.historyGo?.(F)}}return R.\u0275fac=function(F){return new(F||R)(_.LFG(Ve),_.LFG(nt,8))},R.\u0275prov=_.Yz7({token:R,factory:R.\u0275fac}),R})(),mt=(()=>{class R{constructor(F){this._subject=new _.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=F;const X=this._locationStrategy.getBaseHref();this._baseHref=Ke(Mt(X)),this._locationStrategy.onPopState(Ee=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ee.state,type:Ee.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(F=!1){return this.normalize(this._locationStrategy.path(F))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(F,X=""){return this.path()==this.normalize(F+zt(X))}normalize(F){return R.stripTrailingSlash(function Ge(R,z){return R&&z.startsWith(R)?z.substring(R.length):z}(this._baseHref,Mt(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._locationStrategy.prepareExternalUrl(F)}go(F,X="",Ee=null){this._locationStrategy.pushState(Ee,"",F,X),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+zt(X)),Ee)}replaceState(F,X="",Ee=null){this._locationStrategy.replaceState(Ee,"",F,X),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+zt(X)),Ee)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(F=0){this._locationStrategy.historyGo?.(F)}onUrlChange(F){return this._urlChangeListeners.push(F),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(X=>{this._notifyUrlChangeListeners(X.url,X.state)})),()=>{const X=this._urlChangeListeners.indexOf(F);this._urlChangeListeners.splice(X,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(F="",X){this._urlChangeListeners.forEach(Ee=>Ee(F,X))}subscribe(F,X,Ee){return this._subject.subscribe({next:F,error:X,complete:Ee})}}return R.normalizeQueryParams=zt,R.joinWithSlash=tt,R.stripTrailingSlash=Ke,R.\u0275fac=function(F){return new(F||R)(_.LFG(at))},R.\u0275prov=_.Yz7({token:R,factory:function(){return function st(){return new mt((0,_.LFG)(at))}()},providedIn:"root"}),R})();function Mt(R){return R.replace(/\/index.html$/,"")}function zi(R,z){z=encodeURIComponent(z);for(const F of R.split(";")){const X=F.indexOf("="),[Ee,Qe]=-1==X?[F,""]:[F.slice(0,X),F.slice(X+1)];if(Ee.trim()===z)return decodeURIComponent(Qe)}return null}class Is{constructor(z,F,X,Ee){this.$implicit=z,this.ngForOf=F,this.index=X,this.count=Ee}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ki=(()=>{class R{constructor(F,X,Ee){this._viewContainer=F,this._template=X,this._differs=Ee,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(F){this._ngForOf=F,this._ngForOfDirty=!0}set ngForTrackBy(F){this._trackByFn=F}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(F){F&&(this._template=F)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const F=this._ngForOf;!this._differ&&F&&(this._differ=this._differs.find(F).create(this.ngForTrackBy))}if(this._differ){const F=this._differ.diff(this._ngForOf);F&&this._applyChanges(F)}}_applyChanges(F){const X=this._viewContainer;F.forEachOperation((Ee,Qe,pt)=>{if(null==Ee.previousIndex)X.createEmbeddedView(this._template,new Is(Ee.item,this._ngForOf,-1,-1),null===pt?void 0:pt);else if(null==pt)X.remove(null===Qe?void 0:Qe);else if(null!==Qe){const nn=X.get(Qe);X.move(nn,pt),fs(nn,Ee)}});for(let Ee=0,Qe=X.length;Ee<Qe;Ee++){const nn=X.get(Ee).context;nn.index=Ee,nn.count=Qe,nn.ngForOf=this._ngForOf}F.forEachIdentityChange(Ee=>{fs(X.get(Ee.currentIndex),Ee)})}static ngTemplateContextGuard(F,X){return!0}}return R.\u0275fac=function(F){return new(F||R)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},R.\u0275dir=_.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),R})();function fs(R,z){R.context.$implicit=z.item}let Vr=(()=>{class R{constructor(F,X){this._viewContainer=F,this._context=new qi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=X}set ngIf(F){this._context.$implicit=this._context.ngIf=F,this._updateView()}set ngIfThen(F){Jr("ngIfThen",F),this._thenTemplateRef=F,this._thenViewRef=null,this._updateView()}set ngIfElse(F){Jr("ngIfElse",F),this._elseTemplateRef=F,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(F,X){return!0}}return R.\u0275fac=function(F){return new(F||R)(_.Y36(_.s_b),_.Y36(_.Rgc))},R.\u0275dir=_.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),R})();class qi{constructor(){this.$implicit=null,this.ngIf=null}}function Jr(R,z){if(z&&!z.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,_.AaK)(z)}'.`)}class Fe{createSubscription(z,F){return z.subscribe({next:F,error:X=>{throw X}})}dispose(z){z.unsubscribe()}}class ke{createSubscription(z,F){return z.then(F,X=>{throw X})}dispose(z){}}const We=new ke,rt=new Fe;let vt=(()=>{class R{constructor(F){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=F}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(F){return this._obj?F!==this._obj?(this._dispose(),this.transform(F)):this._latestValue:(F&&this._subscribe(F),this._latestValue)}_subscribe(F){this._obj=F,this._strategy=this._selectStrategy(F),this._subscription=this._strategy.createSubscription(F,X=>this._updateLatestValue(F,X))}_selectStrategy(F){if((0,_.QGY)(F))return We;if((0,_.F4k)(F))return rt;throw function vi(R,z){return new _.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(F,X){F===this._obj&&(this._latestValue=X,this._ref.markForCheck())}}return R.\u0275fac=function(F){return new(F||R)(_.Y36(_.sBO,16))},R.\u0275pipe=_.Yjl({name:"async",type:R,pure:!1,standalone:!0}),R})(),Ds=(()=>{class R{}return R.\u0275fac=function(F){return new(F||R)},R.\u0275mod=_.oAB({type:R}),R.\u0275inj=_.cJS({}),R})();const ms="browser";function wi(R){return"server"===R}let rs=(()=>{class R{}return R.\u0275prov=(0,_.Yz7)({token:R,providedIn:"root",factory:()=>new bs((0,_.LFG)(Le),window)}),R})();class bs{constructor(z,F){this.document=z,this.window=F,this.offset=()=>[0,0]}setOffset(z){this.offset=Array.isArray(z)?()=>z:z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(z){this.supportsScrolling()&&this.window.scrollTo(z[0],z[1])}scrollToAnchor(z){if(!this.supportsScrolling())return;const F=function hr(R,z){const F=R.getElementById(z)||R.getElementsByName(z)[0];if(F)return F;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const X=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let Ee=X.currentNode;for(;Ee;){const Qe=Ee.shadowRoot;if(Qe){const pt=Qe.getElementById(z)||Qe.querySelector(`[name="${z}"]`);if(pt)return pt}Ee=X.nextNode()}}return null}(this.document,z);F&&(this.scrollToElement(F),F.focus())}setHistoryScrollRestoration(z){if(this.supportScrollRestoration()){const F=this.window.history;F&&F.scrollRestoration&&(F.scrollRestoration=z)}}scrollToElement(z){const F=z.getBoundingClientRect(),X=F.left+this.window.pageXOffset,Ee=F.top+this.window.pageYOffset,Qe=this.offset();this.window.scrollTo(X-Qe[0],Ee-Qe[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const z=Hi(this.window.history)||Hi(Object.getPrototypeOf(this.window.history));return!(!z||!z.writable&&!z.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Hi(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class Xr{}},4650:(Kt,qe,H)=>{H.d(qe,{$8M:()=>Ma,$Z:()=>Vf,AFp:()=>Tw,ALo:()=>K0,AaK:()=>Ve,CHM:()=>$i,CRH:()=>nw,CZH:()=>Yy,CqO:()=>xg,D6c:()=>kC,DdM:()=>j0,EJc:()=>YI,EpF:()=>ay,F4k:()=>yp,FYo:()=>Fn,FiY:()=>$t,G48:()=>yC,GfV:()=>Sl,Gpc:()=>ie,JOm:()=>Du,KtG:()=>_s,LFG:()=>Xi,LSH:()=>wu,Lbi:()=>KI,Lck:()=>jE,MAs:()=>Sg,MMx:()=>Ev,NdJ:()=>fc,OlP:()=>Yt,Oqu:()=>Vg,PXZ:()=>dC,Q6J:()=>mp,QGY:()=>sf,QP$:()=>an,Qsj:()=>kn,R0b:()=>Bl,RDi:()=>$l,Rgc:()=>Qg,SBq:()=>ut,Sil:()=>JI,Suo:()=>tw,TTD:()=>xi,TgZ:()=>Vl,W1O:()=>ow,X6Q:()=>mC,XFs:()=>St,Xpm:()=>Ae,Xts:()=>tl,Y36:()=>Nc,YKP:()=>N0,YNc:()=>iy,Yjl:()=>ye,Yz7:()=>tn,Z0I:()=>ci,ZZ4:()=>zv,_Bn:()=>R0,_UZ:()=>Ad,_Vd:()=>W,_c5:()=>OC,_uU:()=>My,aQg:()=>Kv,c2e:()=>qI,cJS:()=>yn,cg1:()=>zg,dDg:()=>aC,dqk:()=>gr,eFA:()=>Uw,ekj:()=>kg,eoX:()=>Fw,f3M:()=>k,g9A:()=>Aw,h0i:()=>Sp,hGG:()=>PC,hij:()=>Ug,iGM:()=>ew,ifc:()=>on,ip1:()=>bw,jDz:()=>P0,kL8:()=>Gy,lG2:()=>Ue,lcZ:()=>q0,lqb:()=>Ui,lri:()=>Pw,n5z:()=>Yi,oAB:()=>qt,oxw:()=>af,q4F:()=>Tc,qLn:()=>ad,qOj:()=>cp,qZA:()=>Sd,rWj:()=>kw,sBO:()=>_C,sIi:()=>So,s_b:()=>Ky,soG:()=>Qy,tb:()=>xw,tp0:()=>Mn,uIk:()=>ds,vHH:()=>Ke,vpe:()=>jc,wAp:()=>Qn,xp6:()=>mm,z2F:()=>Jy,zSh:()=>Eu,zs3:()=>Rc});var _=H(7579),Z=H(727),q=H(9751),Re=H(6451),J=H(3099);function Me(n){for(let r in n)if(n[r]===Me)return r;throw Error("Could not find renamed property on target object.")}function Le(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Ve(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ve).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function He(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ae=Me({__forward_ref__:Me});function ie(n){return n.__forward_ref__=ie,n.toString=function(){return Ve(this())},n}function me(n){return it(n)?n():n}function it(n){return"function"==typeof n&&n.hasOwnProperty(ae)&&n.__forward_ref__===ie}class Ke extends Error{constructor(r,s){super(function zt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function at(n){return"string"==typeof n?n:null==n?"":String(n)}function st(n,r){throw new Ke(-201,!1)}function Zt(n,r){null==n&&function lt(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function tn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function yn(n){return{providers:n.providers||[],imports:n.imports||[]}}function mn(n){return Dr(n,Ht)||Dr(n,Nn)}function ci(n){return null!==mn(n)}function Dr(n,r){return n.hasOwnProperty(r)?n[r]:null}function Zr(n){return n&&(n.hasOwnProperty(pr)||n.hasOwnProperty(sr))?n[pr]:null}const Ht=Me({\u0275prov:Me}),pr=Me({\u0275inj:Me}),Nn=Me({ngInjectableDef:Me}),sr=Me({ngInjectorDef:Me});var St=(()=>((St=St||{})[St.Default=0]="Default",St[St.Host=1]="Host",St[St.Self=2]="Self",St[St.SkipSelf=4]="SkipSelf",St[St.Optional=8]="Optional",St))();let or;function cr(n){const r=or;return or=n,r}function _i(n,r,s){const a=mn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&St.Optional?null:void 0!==r?r:void st(Ve(n))}function Yr(n){return{toString:n}.toString()}var zn=(()=>((zn=zn||{})[zn.OnPush=0]="OnPush",zn[zn.Default=1]="Default",zn))(),on=(()=>{return(n=on||(on={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",on;var n})();const gr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Mr={},En=[],Qr=Me({\u0275cmp:Me}),Zn=Me({\u0275dir:Me}),Oi=Me({\u0275pipe:Me}),jn=Me({\u0275mod:Me}),xe=Me({\u0275fac:Me}),fe=Me({__NG_ELEMENT_ID__:Me});let Ie=0;function Ae(n){return Yr(()=>{const s=!0===n.standalone,a={},h={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===zn.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||En,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||on.Emulated,id:"c"+Ie++,styles:n.styles||En,_:null,setInput:null,schemas:n.schemas||null,tView:null},m=n.dependencies,E=n.features;return h.inputs=Gn(n.inputs,a),h.outputs=Gn(n.outputs),E&&E.forEach(S=>S(h)),h.directiveDefs=m?()=>("function"==typeof m?m():m).map(_t).filter(Pt):null,h.pipeDefs=m?()=>("function"==typeof m?m():m).map(gt).filter(Pt):null,h})}function _t(n){return _e(n)||yt(n)}function Pt(n){return null!==n}function qt(n){return Yr(()=>({type:n.type,bootstrap:n.bootstrap||En,declarations:n.declarations||En,imports:n.imports||En,exports:n.exports||En,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Gn(n,r){if(null==n)return Mr;const s={};for(const a in n)if(n.hasOwnProperty(a)){let h=n[a],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),s[h]=a,r&&(r[h]=m)}return s}const Ue=Ae;function ye(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function _e(n){return n[Qr]||null}function yt(n){return n[Zn]||null}function gt(n){return n[Oi]||null}function an(n){const r=_e(n)||yt(n)||gt(n);return null!==r&&r.standalone}function On(n,r){const s=n[jn]||null;if(!s&&!0===r)throw new Error(`Type ${Ve(n)} does not have '\u0275mod' property.`);return s}function Jr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Di(n){return Array.isArray(n)&&!0===n[1]}function Os(n){return 0!=(8&n.flags)}function Ks(n){return 2==(2&n.flags)}function ca(n){return 1==(1&n.flags)}function Rr(n){return null!==n.template}function xo(n){return 0!=(256&n[2])}function hi(n,r){return n.hasOwnProperty(xe)?n[xe]:null}class ns{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function xi(){return Cs}function Cs(n){return n.type.prototype.ngOnChanges&&(n.setInput=ji),Ro}function Ro(){const n=No(this),r=n?.current;if(r){const s=n.previous;if(s===Mr)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function ji(n,r,s,a){const h=No(n)||function Ds(n,r){return n[yo]=r}(n,{previous:Mr,current:null}),m=h.current||(h.current={}),E=h.previous,S=this.declaredInputs[s],N=E[S];m[S]=new ns(N&&N.currentValue,r,E===Mr),n[a]=r}xi.ngInherit=!0;const yo="__ngSimpleChanges__";function No(n){return n[yo]||null}function $r(n){for(;Array.isArray(n);)n=n[0];return n}function Hi(n,r){return $r(r[n])}function hr(n,r){return $r(r[n.index])}function Xr(n,r){return n.data[r]}function ys(n,r){return n[r]}function ir(n,r){const s=r[n];return Jr(s)?s:s[0]}function Ps(n){return 4==(4&n[2])}function xr(n){return 64==(64&n[2])}function is(n,r){return null==r?null:n[r]}function ha(n){n[18]=0}function Nr(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const Cn={lFrame:Sa(null),bindingsEnabled:!0};function ks(){return Cn.bindingsEnabled}function It(){return Cn.lFrame.lView}function Wn(){return Cn.lFrame.tView}function $i(n){return Cn.lFrame.contextLView=n,n[8]}function _s(n){return Cn.lFrame.contextLView=null,n}function pn(){let n=_o();for(;null!==n&&64===n.type;)n=n.parent;return n}function _o(){return Cn.lFrame.currentTNode}function Fs(n,r){const s=Cn.lFrame;s.currentTNode=n,s.isParent=r}function Ur(){return Cn.lFrame.isParent}function O(){const n=Cn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function hn(){return Cn.lFrame.bindingIndex++}function Gi(n,r){const s=Cn.lFrame;s.bindingIndex=s.bindingRootIndex=n,Qs(r)}function Qs(n){Cn.lFrame.currentDirectiveIndex=n}function pa(){return Cn.lFrame.currentQueryIndex}function pi(n){Cn.lFrame.currentQueryIndex=n}function ga(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Ja(n,r,s){if(s&St.SkipSelf){let h=r,m=n;for(;!(h=h.parent,null!==h||s&St.Host||(h=ga(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;r=h,n=m}const a=Cn.lFrame=du();return a.currentTNode=r,a.lView=n,!0}function Xa(n){const r=du(),s=n[1];Cn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function du(){const n=Cn.lFrame,r=null===n?null:n.child;return null===r?Sa(n):r}function Sa(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function eu(){const n=Cn.lFrame;return Cn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const R=eu;function z(){const n=eu();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ee(){return Cn.lFrame.selectedIndex}function Qe(n){Cn.lFrame.selectedIndex=n}function pt(){const n=Cn.lFrame;return Xr(n.tView,n.selectedIndex)}function kr(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const m=n.data[s].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:S,ngAfterViewInit:N,ngAfterViewChecked:G,ngOnDestroy:te}=m;E&&(n.contentHooks||(n.contentHooks=[])).push(-s,E),S&&((n.contentHooks||(n.contentHooks=[])).push(s,S),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,S)),N&&(n.viewHooks||(n.viewHooks=[])).push(-s,N),G&&((n.viewHooks||(n.viewHooks=[])).push(s,G),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,G)),null!=te&&(n.destroyHooks||(n.destroyHooks=[])).push(s,te)}}function Gr(n,r,s){si(n,r,3,s)}function ko(n,r,s,a){(3&n[2])===s&&si(n,r,s,a)}function io(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function si(n,r,s,a){const m=a??-1,E=r.length-1;let S=0;for(let N=void 0!==a?65535&n[18]:0;N<E;N++)if("number"==typeof r[N+1]){if(S=r[N],null!=a&&S>=a)break}else r[N]<0&&(n[18]+=65536),(S<m||-1==m)&&(wo(n,s,r,N),n[18]=(4294901760&n[18])+N+2),N++}function wo(n,r,s,a){const h=s[a]<0,m=s[a+1],S=n[h?-s[a]:s[a]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{m.call(S)}finally{}}}else try{m.call(S)}finally{}}class js{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function tu(n,r,s){let a=0;for(;a<s.length;){const h=s[a];if("number"==typeof h){if(0!==h)break;a++;const m=s[a++],E=s[a++],S=s[a++];n.setAttribute(r,E,S,m)}else{const m=h,E=s[++a];qo(m)?n.setProperty(r,m,E):n.setAttribute(r,m,E),a++}}return a}function Aa(n){return 3===n||4===n||6===n}function qo(n){return 64===n.charCodeAt(0)}function Fi(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const h=r[a];"number"==typeof h?s=h:0===s||hu(n,s,h,null,-1===s||2===s?r[++a]:null)}}return n}function hu(n,r,s,a,h){let m=0,E=n.length;if(-1===r)E=-1;else for(;m<n.length;){const S=n[m++];if("number"==typeof S){if(S===r){E=-1;break}if(S>r){E=m-1;break}}}for(;m<n.length;){const S=n[m];if("number"==typeof S)break;if(S===s){if(null===a)return void(null!==h&&(n[m+1]=h));if(a===n[m+1])return void(n[m+2]=h)}m++,null!==a&&m++,null!==h&&m++}-1!==E&&(n.splice(E,0,r),m=E+1),n.splice(m++,0,s),null!==a&&n.splice(m++,0,a),null!==h&&n.splice(m++,0,h)}function ja(n){return-1!==n}function qr(n){return 32767&n}function fu(n,r){let s=function nu(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let Er=!0;function Hs(n){const r=Er;return Er=n,r}let gi=0;const Zi={};function zr(n,r){const s=$s(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Eo(a.data,n),Eo(r,null),Eo(a.blueprint,null));const h=$a(n,r),m=n.injectorIndex;if(ja(h)){const E=qr(h),S=fu(h,r),N=S[1].data;for(let G=0;G<8;G++)r[m+G]=S[E+G]|N[E+G]}return r[m+8]=h,m}function Eo(n,r){n.push(0,0,0,0,0,0,0,0,r)}function $s(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function $a(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,h=r;for(;null!==h;){if(a=xa(h),null===a)return-1;if(s++,h=h[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function Zo(n,r,s){!function Ha(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(fe)&&(a=s[fe]),null==a&&(a=s[fe]=gi++);const h=255&a;r.data[n+(h>>5)]|=1<<h}(n,r,s)}function ei(n,r,s){if(s&St.Optional)return n;st()}function Fo(n,r,s,a){if(s&St.Optional&&void 0===a&&(a=null),0==(s&(St.Self|St.Host))){const h=n[9],m=cr(void 0);try{return h?h.get(r,a,s&St.Optional):_i(r,a,s&St.Optional)}finally{cr(m)}}return ei(a,0,s)}function Io(n,r,s,a=St.Default,h){if(null!==n){if(1024&r[2]){const E=function Yo(n,r,s,a,h){let m=n,E=r;for(;null!==m&&null!==E&&1024&E[2]&&!(256&E[2]);){const S=cn(m,E,s,a|St.Self,Zi);if(S!==Zi)return S;let N=m.parent;if(!N){const G=E[21];if(G){const te=G.get(s,Zi,a);if(te!==Zi)return te}N=xa(E),E=E[15]}m=N}return h}(n,r,s,a,Zi);if(E!==Zi)return E}const m=cn(n,r,s,a,Zi);if(m!==Zi)return m}return Fo(r,s,a,h)}function cn(n,r,s,a,h){const m=function ot(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(fe)?n[fe]:void 0;return"number"==typeof r?r>=0?255&r:zu:r}(s);if("function"==typeof m){if(!Ja(r,n,a))return a&St.Host?ei(h,0,a):Fo(r,s,a,h);try{const E=m(a);if(null!=E||a&St.Optional)return E;st()}finally{R()}}else if("number"==typeof m){let E=null,S=$s(n,r),N=-1,G=a&St.Host?r[16][6]:null;for((-1===S||a&St.SkipSelf)&&(N=-1===S?$a(n,r):r[S+8],-1!==N&&Ti(a,!1)?(E=r[1],S=qr(N),r=fu(N,r)):S=-1);-1!==S;){const te=r[1];if(xt(m,S,te.data)){const de=Un(S,r,s,E,a,G);if(de!==Zi)return de}N=r[S+8],-1!==N&&Ti(a,r[1].data[S+8]===G)&&xt(m,S,r)?(E=te,S=qr(N),r=fu(N,r)):S=-1}}return h}function Un(n,r,s,a,h,m){const E=r[1],S=E.data[n+8],te=wa(S,E,s,null==a?Ks(S)&&Er:a!=E&&0!=(3&S.type),h&St.Host&&m===S);return null!==te?Gt(r,E,te,S):Zi}function wa(n,r,s,a,h){const m=n.providerIndexes,E=r.data,S=1048575&m,N=n.directiveStart,te=m>>20,Pe=h?S+te:n.directiveEnd;for(let Ye=a?S:S+te;Ye<Pe;Ye++){const Tt=E[Ye];if(Ye<N&&s===Tt||Ye>=N&&Tt.type===s)return Ye}if(h){const Ye=E[N];if(Ye&&Rr(Ye)&&Ye.type===s)return N}return null}function Gt(n,r,s,a){let h=n[s];const m=r.data;if(function as(n){return n instanceof js}(h)){const E=h;E.resolving&&function Ne(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ke(-200,`Circular dependency in DI detected for ${n}${s}`)}(function nt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():at(n)}(m[s]));const S=Hs(E.canSeeViewProviders);E.resolving=!0;const N=E.injectImpl?cr(E.injectImpl):null;Ja(n,a,St.Default);try{h=n[s]=E.factory(void 0,m,n,a),r.firstCreatePass&&s>=a.directiveStart&&function bi(n,r,s){const{ngOnChanges:a,ngOnInit:h,ngDoCheck:m}=r.type.prototype;if(a){const E=Cs(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,E),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,E)}h&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,h),m&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,m),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,m))}(s,m[s],r)}finally{null!==N&&cr(N),Hs(S),E.resolving=!1,R()}}return h}function xt(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Ti(n,r){return!(n&St.Self||n&St.Host&&r)}class Ea{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return Io(this._tNode,this._lView,r,a,s)}}function zu(){return new Ea(pn(),It())}function Yi(n){return Yr(()=>{const r=n.prototype.constructor,s=r[xe]||xu(r),a=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==a;){const m=h[xe]||xu(h);if(m&&m!==s)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function xu(n){return it(n)?()=>{const r=xu(me(n));return r&&r()}:hi(n)}function xa(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function Ma(n){return function Ot(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let h=0;for(;h<a;){const m=s[h];if(Aa(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<a&&"string"==typeof s[h];)h++;else{if(m===r)return s[h+1];h+=2}}}return null}(pn(),n)}const Ra="__parameters__";function Co(n,r,s){return Yr(()=>{const a=function Hn(n){return function(...s){if(n){const a=n(...s);for(const h in a)this[h]=a[h]}}}(r);function h(...m){if(this instanceof h)return a.apply(this,m),this;const E=new h(...m);return S.annotation=E,S;function S(N,G,te){const de=N.hasOwnProperty(Ra)?N[Ra]:Object.defineProperty(N,Ra,{value:[]})[Ra];for(;de.length<=te;)de.push(null);return(de[te]=de[te]||[]).push(E),N}}return s&&(h.prototype=Object.create(s.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class Yt{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=tn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Js(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),Js(a,r)):r!==n&&r.push(a)}return r}function oo(n,r){n.forEach(s=>Array.isArray(s)?oo(s,r):r(s))}function Zu(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Xs(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function co(n,r,s){let a=D(n,r);return a>=0?n[1|a]=s:(a=~a,function ao(n,r,s,a){let h=n.length;if(h==r)n.push(s,a);else if(1===h)n.push(a,n[0]),n[0]=s;else{for(h--,n.push(n[h-1],n[h]);h>r;)n[h]=n[h-2],h--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function Xo(n,r){const s=D(n,r);if(s>=0)return n[1|s]}function D(n,r){return function I(n,r,s){let a=0,h=n.length>>s;for(;h!==a;){const m=a+(h-a>>1),E=n[m<<s];if(r===E)return m<<s;E>r?h=m:a=m+1}return~(h<<s)}(n,r,1)}const fr={},Li="__NG_DI_FLAG__",Ci="ngTempTokenPath",Fr=/\n/gm,Ji="__source";let jr;function Do(n){const r=jr;return jr=n,r}function fl(n,r=St.Default){if(void 0===jr)throw new Ke(-203,!1);return null===jr?_i(n,void 0,r):jr.get(n,r&St.Optional?null:void 0,r)}function Xi(n,r=St.Default){return(function Tn(){return or}()||fl)(me(n),r)}function k(n,r=St.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Xi(n,r)}function U(n){const r=[];for(let s=0;s<n.length;s++){const a=me(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Ke(900,!1);let h,m=St.Default;for(let E=0;E<a.length;E++){const S=a[E],N=ge(S);"number"==typeof N?-1===N?h=S.token:m|=N:h=S}r.push(Xi(h,m))}else r.push(Xi(a))}return r}function Q(n,r){return n[Li]=r,n.prototype[Li]=r,n}function ge(n){return n[Li]}const $t=Q(Co("Optional"),8),Mn=Q(Co("SkipSelf"),4);let yu;function $l(n){yu=n}class Da{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Vo(n){return n instanceof Da?n.changingThisBreaksApplicationSecurity:n}const Ld=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ii=(()=>((Ii=Ii||{})[Ii.NONE=0]="NONE",Ii[Ii.HTML=1]="HTML",Ii[Ii.STYLE=2]="STYLE",Ii[Ii.SCRIPT=3]="SCRIPT",Ii[Ii.URL=4]="URL",Ii[Ii.RESOURCE_URL=5]="RESOURCE_URL",Ii))();function wu(n){const r=function Ir(){const n=It();return n&&n[12]}();return r?r.sanitize(Ii.URL,n)||"":function ho(n,r){const s=function Wl(n){return n instanceof Da&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?Vo(n):function Pu(n){return(n=String(n)).match(Ld)?n:"unsafe:"+n}(at(n))}const tl=new Yt("ENVIRONMENT_INITIALIZER"),Cl=new Yt("INJECTOR",-1),au=new Yt("INJECTOR_DEF_TYPES");class fo{get(r,s=fr){if(s===fr){const a=new Error(`NullInjectorError: No provider for ${Ve(r)}!`);throw a.name="NullInjectorError",a}return s}}function po(...n){return{\u0275providers:cs(0,n)}}function cs(n,...r){const s=[],a=new Set;let h;return oo(r,m=>{const E=m;bo(E,s,[],a)&&(h||(h=[]),h.push(E))}),void 0!==h&&ba(h,s),s}function ba(n,r){for(let s=0;s<n.length;s++){const{providers:h}=n[s];oo(h,m=>{r.push(m)})}}function bo(n,r,s,a){if(!(n=me(n)))return!1;let h=null,m=Zr(n);const E=!m&&_e(n);if(m||E){if(E&&!E.standalone)return!1;h=n}else{const N=n.ngModule;if(m=Zr(N),!m)return!1;h=N}const S=a.has(h);if(E){if(S)return!1;if(a.add(h),E.dependencies){const N="function"==typeof E.dependencies?E.dependencies():E.dependencies;for(const G of N)bo(G,r,s,a)}}else{if(!m)return!1;{if(null!=m.imports&&!S){let G;a.add(h);try{oo(m.imports,te=>{bo(te,r,s,a)&&(G||(G=[]),G.push(te))})}finally{}void 0!==G&&ba(G,r)}if(!S){const G=hi(h)||(()=>new h);r.push({provide:h,useFactory:G,deps:En},{provide:au,useValue:h,multi:!0},{provide:tl,useValue:()=>Xi(h),multi:!0})}const N=m.providers;null==N||S||oo(N,te=>{r.push(te)})}}return h!==n&&void 0!==n.providers}const Jl=Me({provide:String,useValue:Me});function uu(n){return null!==n&&"object"==typeof n&&Jl in n}function er(n){return"function"==typeof n}const Eu=new Yt("Set Injector scope."),Vu={},Xl={};let Dl;function bl(){return void 0===Dl&&(Dl=new fo),Dl}class Ui{}class Uu extends Ui{constructor(r,s,a,h){super(),this.parent=s,this.source=a,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xs(r,E=>this.processProvider(E)),this.records.set(Cl,Bu(void 0,this)),h.has("environment")&&this.records.set(Ui,Bu(void 0,this));const m=this.records.get(Eu);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(au.multi,En,St.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=Do(this),a=cr(void 0);try{return r()}finally{Do(s),cr(a)}}get(r,s=fr,a=St.Default){this.assertNotDestroyed();const h=Do(this),m=cr(void 0);try{if(!(a&St.SkipSelf)){let S=this.records.get(r);if(void 0===S){const N=function oa(n){return"function"==typeof n||"object"==typeof n&&n instanceof Yt}(r)&&mn(r);S=N&&this.injectableDefInScope(N)?Bu(Iu(r),Vu):null,this.records.set(r,S)}if(null!=S)return this.hydrate(r,S)}return(a&St.Self?bl():this.parent).get(r,s=a&St.Optional&&s===fr?null:s)}catch(E){if("NullInjectorError"===E.name){if((E[Ci]=E[Ci]||[]).unshift(Ve(r)),h)throw E;return function je(n,r,s,a){const h=n[Ci];throw r[Ji]&&h.unshift(r[Ji]),n.message=function Xe(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let h=Ve(r);if(Array.isArray(r))h=r.map(Ve).join(" -> ");else if("object"==typeof r){let m=[];for(let E in r)if(r.hasOwnProperty(E)){let S=r[E];m.push(E+":"+("string"==typeof S?JSON.stringify(S):Ve(S)))}h=`{${m.join(", ")}}`}return`${s}${a?"("+a+")":""}[${h}]: ${n.replace(Fr,"\n  ")}`}("\n"+n.message,h,s,a),n.ngTokenPath=h,n[Ci]=null,n}(E,r,"R3InjectorError",this.source)}throw E}finally{cr(m),Do(h)}}resolveInjectorInitializers(){const r=Do(this),s=cr(void 0);try{const a=this.get(tl.multi,En,St.Self);for(const h of a)h()}finally{Do(r),cr(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(Ve(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ke(205,!1)}processProvider(r){let s=er(r=me(r))?r:me(r&&r.provide);const a=function Za(n){return uu(n)?Bu(void 0,n.useValue):Bu(nl(n),Vu)}(r);if(er(r)||!0!==r.multi)this.records.get(s);else{let h=this.records.get(s);h||(h=Bu(void 0,Vu,!0),h.factory=()=>U(h.multi),this.records.set(s,h)),s=r,h.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Vu&&(s.value=Xl,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Tl(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=me(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Iu(n){const r=mn(n),s=null!==r?r.factory:hi(n);if(null!==s)return s;if(n instanceof Yt)throw new Ke(204,!1);if(n instanceof Function)return function bc(n){const r=n.length;if(r>0)throw function Jo(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new Ke(204,!1);const s=function wn(n){const r=n&&(n[Ht]||n[Nn]);if(r){const s=function Vn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Ke(204,!1)}function nl(n,r,s){let a;if(er(n)){const h=me(n);return hi(h)||Iu(h)}if(uu(n))a=()=>me(n.useValue);else if(function Bd(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...U(n.deps||[]));else if(function Fu(n){return!(!n||!n.useExisting)}(n))a=()=>Xi(me(n.useExisting));else{const h=me(n&&(n.useClass||n.provide));if(!function nd(n){return!!n.deps}(n))return hi(h)||Iu(h);a=()=>new h(...U(n.deps))}return a}function Bu(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function jd(n){return!!n.\u0275providers}function xs(n,r){for(const s of n)Array.isArray(s)?xs(s,r):jd(s)?xs(s.\u0275providers,r):r(s)}class id{}class T{resolveComponentFactory(r){throw function w(n){const r=Error(`No component factory found for ${Ve(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let W=(()=>{class n{}return n.NULL=new T,n})();function re(){return Oe(pn(),It())}function Oe(n,r){return new ut(hr(n,r))}let ut=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=re,n})();function Wt(n){return n instanceof ut?n.nativeElement:n}class Fn{}let kn=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Gs(){const n=It(),s=ir(pn().index,n);return(Jr(s)?s:n)[11]}(),n})(),ka=(()=>{class n{}return n.\u0275prov=tn({token:n,providedIn:"root",factory:()=>null}),n})();class Sl{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Tc=new Sl("14.2.1"),ec={};function Ih(n){return n.ngOriginalError}class ad{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Ih(r);for(;s&&Ih(s);)s=Ih(s);return s||null}}const Ch=new Map;let wf=0;const ud="__ngContext__";function To(n,r){Jr(r)?(n[ud]=r[20],function Fp(n){Ch.set(n[20],n)}(r)):n[ud]=r}function lu(n){const r=n[ud];return"number"==typeof r?function Dh(n){return Ch.get(n)||null}(r):r||null}function Wd(n){const r=lu(n);return r?Jr(r)?r:r.lView:null}function Hu(n){return n instanceof Function?n():n}var Du=(()=>((Du=Du||{})[Du.Important=1]="Important",Du[Du.DashCase=2]="DashCase",Du))();function xh(n,r){return undefined(n,r)}function Mc(n){const r=n[3];return Di(r)?r[3]:r}function d(n){return l(n[13])}function u(n){return l(n[4])}function l(n){for(;null!==n&&!Di(n);)n=n[4];return n}function C(n,r,s,a,h){if(null!=a){let m,E=!1;Di(a)?m=a:Jr(a)&&(E=!0,a=a[0]);const S=$r(a);0===n&&null!==s?null==h?nm(r,s,S):hd(r,s,S,h||null,!0):1===n&&null!==s?hd(r,s,S,h||null,!0):2===n?function om(n,r,s){const a=Mh(n,r);a&&function n_(n,r,s,a){n.removeChild(r,s,a)}(n,a,r,s)}(r,S,E):3===n&&r.destroyNode(S),null!=m&&function i_(n,r,s,a,h){const m=s[7];m!==$r(s)&&C(r,n,a,m,h);for(let S=10;S<s.length;S++){const N=s[S];fd(N[1],N,n,r,a,m)}}(r,n,m,s,h)}}function ue(n,r,s){return n.createElement(r,s)}function Lr(n,r){const s=n[9],a=s.indexOf(r),h=r[3];512&r[2]&&(r[2]&=-513,Nr(h,-1)),s.splice(a,1)}function Ws(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const h=a[17];null!==h&&h!==n&&Lr(h,a),r>0&&(n[s-1][4]=a[4]);const m=Xs(n,10+r);!function we(n,r){fd(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const E=m[19];null!==E&&E.detachView(m[1]),a[3]=null,a[4]=null,a[2]&=-65}return a}function jo(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&fd(n,r,s,3,null,null),function wt(n){let r=n[13];if(!r)return bu(n[1],n);for(;r;){let s=null;if(Jr(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)Jr(r)&&bu(r[1],r),r=r[3];null===r&&(r=n),Jr(r)&&bu(r[1],r),s=r&&r[4]}r=s}}(r)}}function bu(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Sf(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const h=r[s[a]];if(!(h instanceof js)){const m=s[a+1];if(Array.isArray(m))for(let E=0;E<m.length;E+=2){const S=h[m[E]],N=m[E+1];try{N.call(S)}finally{}}else try{m.call(h)}finally{}}}}(n,r),function Tu(n,r){const s=n.cleanup,a=r[7];let h=-1;if(null!==s)for(let m=0;m<s.length-1;m+=2)if("string"==typeof s[m]){const E=s[m+1],S="function"==typeof E?E(r):$r(r[E]),N=a[h=s[m+2]],G=s[m+3];"boolean"==typeof G?S.removeEventListener(s[m],N,G):G>=0?a[h=G]():a[h=-G].unsubscribe(),m+=2}else{const E=a[h=s[m+1]];s[m].call(E)}if(null!==a){for(let m=h+1;m<a.length;m++)(0,a[m])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&Di(r[3])){s!==r[3]&&Lr(s,r);const a=r[19];null!==a&&a.detachView(n)}!function If(n){Ch.delete(n[20])}(r)}}function ac(n,r,s){return function Up(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const h=n.data[a.directiveStart].encapsulation;if(h===on.None||h===on.Emulated)return null}return hr(a,s)}(n,r.parent,s)}function hd(n,r,s,a,h){n.insertBefore(r,s,a,h)}function nm(n,r,s){n.appendChild(r,s)}function rm(n,r,s,a,h){null!==a?hd(n,r,s,a,h):nm(n,r,s)}function Mh(n,r){return n.parentNode(r)}let Hp=function im(n,r,s){return 40&n.type?hr(n,s):null};function Rh(n,r,s,a){const h=ac(n,a,r),m=r[11],S=function jp(n,r,s){return Hp(n,r,s)}(a.parent||r[6],a,r);if(null!=h)if(Array.isArray(s))for(let N=0;N<s.length;N++)rm(m,h,s[N],S,!1);else rm(m,h,s,S,!1)}function Nh(n,r){if(null!==r){const s=r.type;if(3&s)return hr(r,n);if(4&s)return Af(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return Nh(n,a);{const h=n[r.index];return Di(h)?Af(-1,h):$r(h)}}if(32&s)return xh(r,n)()||$r(n[r.index]);{const a=sm(n,r);return null!==a?Array.isArray(a)?a[0]:Nh(Mc(n[16]),a):Nh(n,r.next)}}return null}function sm(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Af(n,r){const s=10+n+1;if(s<r.length){const a=r[s],h=a[1].firstChild;if(null!==h)return Nh(a,h)}return r[7]}function $p(n,r,s,a,h,m,E){for(;null!=s;){const S=a[s.index],N=s.type;if(E&&0===r&&(S&&To($r(S),a),s.flags|=4),64!=(64&s.flags))if(8&N)$p(n,r,s.child,a,h,m,!1),C(r,n,h,S,m);else if(32&N){const G=xh(s,a);let te;for(;te=G();)C(r,n,h,te,m);C(r,n,h,S,m)}else 16&N?am(n,r,a,s,h,m):C(r,n,h,S,m);s=E?s.projectionNext:s.next}}function fd(n,r,s,a,h,m){$p(s,a,n.firstChild,r,h,m,!1)}function am(n,r,s,a,h,m){const E=s[16],N=E[6].projection[a.projection];if(Array.isArray(N))for(let G=0;G<N.length;G++)C(r,n,h,N[G],m);else $p(n,r,N,E[3],h,m,!0)}function um(n,r,s){n.setAttribute(r,"style",s)}function xf(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function lm(n,r,s){let a=n.length;for(;;){const h=n.indexOf(r,s);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const m=r.length;if(h+m===a||n.charCodeAt(h+m)<=32)return h}s=h+1}}const cm="ng-template";function dm(n,r,s){let a=0;for(;a<n.length;){let h=n[a++];if(s&&"class"===h){if(h=n[a],-1!==lm(h.toLowerCase(),r,0))return!0}else if(1===h){for(;a<n.length&&"string"==typeof(h=n[a++]);)if(h.toLowerCase()===r)return!0;return!1}}return!1}function Mf(n){return 4===n.type&&n.value!==cm}function Wp(n,r,s){return r===(4!==n.type||s?n.value:cm)}function Oh(n,r,s){let a=4;const h=n.attrs||[],m=function o_(n){for(let r=0;r<n.length;r++)if(Aa(n[r]))return r;return n.length}(h);let E=!1;for(let S=0;S<r.length;S++){const N=r[S];if("number"!=typeof N){if(!E)if(4&a){if(a=2|1&a,""!==N&&!Wp(n,N,s)||""===N&&1===r.length){if(cu(a))return!1;E=!0}}else{const G=8&a?N:r[++S];if(8&a&&null!==n.attrs){if(!dm(n.attrs,G,s)){if(cu(a))return!1;E=!0}continue}const de=zp(8&a?"class":N,h,Mf(n),s);if(-1===de){if(cu(a))return!1;E=!0;continue}if(""!==G){let Pe;Pe=de>m?"":h[de+1].toLowerCase();const Ye=8&a?Pe:null;if(Ye&&-1!==lm(Ye,G,0)||2&a&&G!==Pe){if(cu(a))return!1;E=!0}}}}else{if(!E&&!cu(a)&&!cu(N))return!1;if(E&&cu(N))continue;E=!1,a=N|1&a}}return cu(a)||E}function cu(n){return 0==(1&n)}function zp(n,r,s,a){if(null===r)return-1;let h=0;if(a||!s){let m=!1;for(;h<r.length;){const E=r[h];if(E===n)return h;if(3===E||6===E)m=!0;else{if(1===E||2===E){let S=r[++h];for(;"string"==typeof S;)S=r[++h];continue}if(4===E)break;if(0===E){h+=4;continue}}h+=m?1:2}return-1}return function fm(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function Rf(n,r,s=!1){for(let a=0;a<r.length;a++)if(Oh(n,r[a],s))return!0;return!1}function Nf(n,r){return n?":not("+r.trim()+")":r}function a_(n){let r=n[0],s=1,a=2,h="",m=!1;for(;s<n.length;){let E=n[s];if("string"==typeof E)if(2&a){const S=n[++s];h+="["+E+(S.length>0?'="'+S+'"':"")+"]"}else 8&a?h+="."+E:4&a&&(h+=" "+E);else""!==h&&!cu(E)&&(r+=Nf(m,h),h=""),a=E,m=m||!cu(a);s++}return""!==h&&(r+=Nf(m,h)),r}const Cr={};function mm(n){pd(Wn(),It(),Ee()+n,!1)}function pd(n,r,s,a){if(!a)if(3==(3&r[2])){const m=n.preOrderCheckHooks;null!==m&&Gr(r,m,s)}else{const m=n.preOrderHooks;null!==m&&ko(r,m,0,s)}Qe(s)}function Pf(n,r=null,s=null,a){const h=Qp(n,r,s,a);return h.resolveInjectorInitializers(),h}function Qp(n,r=null,s=null,a,h=new Set){const m=[s||En,po(n)];return a=a||("object"==typeof n?void 0:Ve(n)),new Uu(m,r||bl(),a||null,h)}let Rc=(()=>{class n{static create(s,a){if(Array.isArray(s))return Pf({name:""},a,s,"");{const h=s.name??"";return Pf({name:h},s.parent,s.providers,h)}}}return n.THROW_IF_NOT_FOUND=fr,n.NULL=new fo,n.\u0275prov=tn({token:n,providedIn:"any",factory:()=>Xi(Cl)}),n.__NG_ELEMENT_ID__=-1,n})();function Nc(n,r=St.Default){const s=It();return null===s?Xi(n,r):Io(pn(),s,me(n),r)}function Vf(){throw new Error("invalid")}function Lh(n,r){return n<<17|r<<2}function il(n){return n>>17&32767}function Vh(n){return 2|n}function cc(n){return(131068&n)>>2}function Uh(n,r){return-131069&n|r<<2}function jh(n){return 1|n}function Vm(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const h=s[a],m=s[a+1];if(-1!==m){const E=n.data[m];pi(h),E.contentQueries(2,r[m],m)}}}function qf(n,r,s,a,h,m,E,S,N,G,te){const de=r.blueprint.slice();return de[0]=h,de[2]=76|a,(null!==te||n&&1024&n[2])&&(de[2]|=1024),ha(de),de[3]=de[15]=n,de[8]=s,de[10]=E||n&&n[10],de[11]=S||n&&n[11],de[12]=N||n&&n[12]||null,de[9]=G||n&&n[9]||null,de[6]=m,de[20]=function Ef(){return wf++}(),de[21]=te,de[16]=2==r.type?n[16]:de,de}function Oc(n,r,s,a,h){let m=n.data[r];if(null===m)m=function zh(n,r,s,a,h){const m=_o(),E=Ur(),N=n.data[r]=function M_(n,r,s,a,h,m){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?m:m&&m.parent,s,r,a,h);return null===n.firstChild&&(n.firstChild=N),null!==m&&(E?null==m.child&&null!==N.parent&&(m.child=N):null===m.next&&(m.next=N)),N}(n,r,s,a,h),function ki(){return Cn.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=s,m.value=a,m.attrs=h;const E=function os(){const n=Cn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();m.injectorIndex=null===E?-1:E.injectorIndex}return Fs(m,!0),m}function Pc(n,r,s,a){if(0===s)return-1;const h=r.length;for(let m=0;m<s;m++)r.push(a),n.blueprint.push(a),n.data.push(null);return h}function Zf(n,r,s){Xa(r);try{const a=n.viewQuery;null!==a&&wg(1,a,s);const h=n.template;null!==h&&Yf(n,r,h,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Vm(n,r),n.staticViewQueries&&wg(2,n.viewQuery,s);const m=n.components;null!==m&&function T_(n,r){for(let s=0;s<r.length;s++)F_(n,r[s])}(r,m)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,z()}}function Ed(n,r,s,a){const h=r[2];if(128!=(128&h)){Xa(r);try{ha(r),function ct(n){return Cn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Yf(n,r,s,2,a);const E=3==(3&h);if(E){const G=n.preOrderCheckHooks;null!==G&&Gr(r,G,null)}else{const G=n.preOrderHooks;null!==G&&ko(r,G,0,null),io(r,0)}if(function mg(n){for(let r=d(n);null!==r;r=u(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const h=s[a],m=h[3];0==(512&h[2])&&Nr(m,1),h[2]|=512}}}(r),function k_(n){for(let r=d(n);null!==r;r=u(r))for(let s=10;s<r.length;s++){const a=r[s],h=a[1];xr(a)&&Ed(h,a,h.template,a[8])}}(r),null!==n.contentQueries&&Vm(n,r),E){const G=n.contentCheckHooks;null!==G&&Gr(r,G)}else{const G=n.contentHooks;null!==G&&ko(r,G,1),io(r,1)}!function Lm(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const h=s[a];if(h<0)Qe(~h);else{const m=h,E=s[++a],S=s[++a];Gi(E,m),S(2,r[m])}}}finally{Qe(-1)}}(n,r);const S=n.components;null!==S&&function b_(n,r){for(let s=0;s<r.length;s++)yg(n,r[s])}(r,S);const N=n.viewQuery;if(null!==N&&wg(2,N,a),E){const G=n.viewCheckHooks;null!==G&&Gr(r,G)}else{const G=n.viewHooks;null!==G&&ko(r,G,2),io(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Nr(r[3],-1))}finally{z()}}}function S_(n,r,s,a){const h=r[10],E=Ps(r);try{!E&&h.begin&&h.begin(),E&&Zf(n,r,a),Ed(n,r,s,a)}finally{!E&&h.end&&h.end()}}function Yf(n,r,s,a,h){const m=Ee(),E=2&a;try{Qe(-1),E&&r.length>22&&pd(n,r,22,!1),s(a,h)}finally{Qe(m)}}function Kh(n,r,s){!ks()||(function hg(n,r,s,a){const h=s.directiveStart,m=s.directiveEnd;n.firstCreatePass||zr(s,r),To(a,r);const E=s.initialInputs;for(let S=h;S<m;S++){const N=n.data[S],G=Rr(N);G&&gg(r,s,N);const te=Gt(r,n,S,s);To(te,r),null!==E&&Gm(0,S-h,te,N,0,E),G&&(ir(s.index,r)[8]=te)}}(n,r,s,hr(s,r)),128==(128&s.flags)&&function N_(n,r,s){const a=s.directiveStart,h=s.directiveEnd,m=s.index,E=function Vs(){return Cn.lFrame.currentDirectiveIndex}();try{Qe(m);for(let S=a;S<h;S++){const N=n.data[S],G=r[S];Qs(S),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&jm(N,G)}}finally{Qe(-1),Qs(E)}}(n,r,s))}function Qf(n,r,s=hr){const a=r.localNames;if(null!==a){let h=r.index+1;for(let m=0;m<a.length;m+=2){const E=a[m+1],S=-1===E?s(r,n):n[E];n[h++]=S}}}function Um(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=qh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function qh(n,r,s,a,h,m,E,S,N,G){const te=22+a,de=te+h,Pe=function A_(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:Cr);return s}(te,de),Ye="function"==typeof G?G():G;return Pe[1]={type:n,blueprint:Pe,template:s,queries:null,viewQuery:S,declTNode:r,data:Pe.slice().fill(null,te),bindingStartIndex:te,expandoStartIndex:de,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:N,consts:Ye,incompleteFirstPass:!1}}function Jf(n,r,s,a){const h=Eg(r);null===s?h.push(a):(h.push(s),n.firstCreatePass&&sp(n).push(a,h.length-1))}function Xf(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const h=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,h):s[a]=[r,h]}return s}function ep(n,r){const a=r.directiveEnd,h=n.data,m=r.attrs,E=[];let S=null,N=null;for(let G=r.directiveStart;G<a;G++){const te=h[G],de=te.inputs,Pe=null===m||Mf(r)?null:P_(de,m);E.push(Pe),S=Xf(de,G,S),N=Xf(te.outputs,G,N)}null!==S&&(S.hasOwnProperty("class")&&(r.flags|=16),S.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=E,r.inputs=S,r.outputs=N}function lg(n,r){const s=ir(r,n);16&s[2]||(s[2]|=32)}function sl(n,r,s,a){let h=!1;if(ks()){const m=function fg(n,r,s){const a=n.directiveRegistry;let h=null;if(a)for(let m=0;m<a.length;m++){const E=a[m];Rf(s,E.selectors,!1)&&(h||(h=[]),Zo(zr(s,r),n,E.type),Rr(E)?(Hm(n,s),h.unshift(E)):h.push(E))}return h}(n,r,s),E=null===a?null:{"":-1};if(null!==m){h=!0,np(s,n.data.length,m.length);for(let te=0;te<m.length;te++){const de=m[te];de.providersResolver&&de.providersResolver(de)}let S=!1,N=!1,G=Pc(n,r,m.length,null);for(let te=0;te<m.length;te++){const de=m[te];s.mergedAttrs=Fi(s.mergedAttrs,de.hostAttrs),$m(n,s,r,G,de),O_(G,de,E),null!==de.contentQueries&&(s.flags|=8),(null!==de.hostBindings||null!==de.hostAttrs||0!==de.hostVars)&&(s.flags|=128);const Pe=de.type.prototype;!S&&(Pe.ngOnChanges||Pe.ngOnInit||Pe.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),S=!0),!N&&(Pe.ngOnChanges||Pe.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),N=!0),G++}ep(n,s)}E&&function pg(n,r,s){if(r){const a=n.localNames=[];for(let h=0;h<r.length;h+=2){const m=s[r[h+1]];if(null==m)throw new Ke(-301,!1);a.push(r[h],m)}}}(s,a,E)}return s.mergedAttrs=Fi(s.mergedAttrs,s.attrs),h}function tp(n,r,s,a,h,m){const E=m.hostBindings;if(E){let S=n.hostBindingOpCodes;null===S&&(S=n.hostBindingOpCodes=[]);const N=~r.index;(function R_(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(S)!=N&&S.push(N),S.push(a,h,E)}}function jm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Hm(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function O_(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;Rr(r)&&(s[""]=n)}}function np(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function $m(n,r,s,a,h){n.data[a]=h;const m=h.factory||(h.factory=hi(h.type)),E=new js(m,Rr(h),Nc);n.blueprint[a]=E,s[a]=E,tp(n,r,0,a,Pc(n,s,h.hostVars,Cr),h)}function gg(n,r,s){const a=hr(r,n),h=Um(s),m=n[10],E=Qh(n,qf(n,h,null,s.onPush?32:16,a,r,m,m.createRenderer(a,s),null,null,null));n[r.index]=E}function ol(n,r,s,a,h,m){const E=hr(n,r);!function Zh(n,r,s,a,h,m,E){if(null==m)n.removeAttribute(r,h,s);else{const S=null==E?at(m):E(m,a||"",h);n.setAttribute(r,h,S,s)}}(r[11],E,m,n.value,s,a,h)}function Gm(n,r,s,a,h,m){const E=m[r];if(null!==E){const S=a.setInput;for(let N=0;N<E.length;){const G=E[N++],te=E[N++],de=E[N++];null!==S?a.setInput(s,de,G,te):s[te]=de}}}function P_(n,r){let s=null,a=0;for(;a<r.length;){const h=r[a];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===s&&(s=[]),s.push(h,n[h],r[a+1])),a+=2}else a+=2;else a+=4}return s}function rp(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function yg(n,r){const s=ir(r,n);if(xr(s)){const a=s[1];48&s[2]?Ed(a,s,a.template,s[8]):s[5]>0&&Yh(s)}}function Yh(n){for(let a=d(n);null!==a;a=u(a))for(let h=10;h<a.length;h++){const m=a[h];if(xr(m))if(512&m[2]){const E=m[1];Ed(E,m,E.template,m[8])}else m[5]>0&&Yh(m)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const h=ir(s[a],n);xr(h)&&h[5]>0&&Yh(h)}}function F_(n,r){const s=ir(r,n),a=s[1];(function Wm(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Zf(a,s,s[8])}function Qh(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function _g(n){for(;n;){n[2]|=32;const r=Mc(n);if(xo(n)&&!r)return n;n=r}return null}function wg(n,r,s){pi(0),r(n,s)}function Eg(n){return n[7]||(n[7]=[])}function sp(n){return n.cleanup||(n.cleanup=[])}function op(n,r){const s=n[9],a=s?s.get(ad,null):null;a&&a.handleError(r)}function Xh(n,r,s,a,h){for(let m=0;m<s.length;){const E=s[m++],S=s[m++],N=r[E],G=n.data[E];null!==G.setInput?G.setInput(N,h,a,S):N[S]=h}}function Id(n,r,s){let a=s?n.styles:null,h=s?n.classes:null,m=0;if(null!==r)for(let E=0;E<r.length;E++){const S=r[E];"number"==typeof S?m=S:1==m?h=He(h,S):2==m&&(a=He(a,S+": "+r[++E]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=h:n.classesWithoutHost=h}function Qd(n,r,s,a,h=!1){for(;null!==s;){const m=r[s.index];if(null!==m&&a.push($r(m)),Di(m))for(let S=10;S<m.length;S++){const N=m[S],G=N[1].firstChild;null!==G&&Qd(N[1],N,G,a)}const E=s.type;if(8&E)Qd(n,r,s.child,a);else if(32&E){const S=xh(s,r);let N;for(;N=S();)a.push(N)}else if(16&E){const S=sm(r,s);if(Array.isArray(S))a.push(...S);else{const N=Mc(r[16]);Qd(N[1],N,S,a,!0)}}s=h?s.projectionNext:s.next}return a}class Jd{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Qd(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Di(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Ws(r,a),Xs(s,a))}this._attachedToViewContainer=!1}jo(this._lView[1],this._lView)}onDestroy(r){Jf(this._lView[1],this._lView,null,r)}markForCheck(){_g(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function ip(n,r,s){const a=r[10];a.begin&&a.begin();try{Ed(n,r,n.template,s)}catch(h){throw op(r,h),h}finally{a.end&&a.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ft(n,r){fd(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ke(902,!1);this._appRef=r}}class ap extends Jd{constructor(r){super(r),this._view=r}detectChanges(){!function Jh(n){!function vg(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=Wd(s);if(null!==a){const h=a[1];S_(h,a,h.template,s)}}}(n[8])}(this._view)}checkNoChanges(){}get context(){return null}}class up extends W{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=_e(r);return new ef(s,this.ngModule)}}function lp(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class Cg{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){const h=this.injector.get(r,ec,a);return h!==ec||s===ec?h:this.parentInjector.get(r,s,a)}}class ef extends id{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function gm(n){return n.map(a_).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return lp(this.componentDef.inputs)}get outputs(){return lp(this.componentDef.outputs)}create(r,s,a,h){let m=(h=h||this.ngModule)instanceof Ui?h:h?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const E=m?new Cg(r,m):r,S=E.get(Fn,null);if(null===S)throw new Ke(407,!1);const N=E.get(ka,null),G=S.createRenderer(null,this.componentDef),te=this.componentDef.selectors[0][0]||"div",de=a?function x_(n,r,s){return n.selectRootElement(r,s===on.ShadowDom)}(G,a,this.componentDef.encapsulation):ue(S.createRenderer(null,this.componentDef),te,function Xd(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(te)),Pe=this.componentDef.onPush?288:272,Ye={components:[]},Tt=qh(0,null,null,1,0,null,null,null,null,null),jt=qf(null,Tt,Ye,Pe,null,null,S,G,N,E,null);let fn,bn;Xa(jt);try{const ar=function Km(n,r,s,a,h,m){const E=s[1];s[22]=n;const N=Oc(E,22,2,"#host",null),G=N.mergedAttrs=r.hostAttrs;null!==G&&(Id(N,G,!0),null!==n&&(tu(h,n,G),null!==N.classes&&xf(h,n,N.classes),null!==N.styles&&um(h,n,N.styles)));const te=a.createRenderer(n,r),de=qf(s,Um(r),null,r.onPush?32:16,s[22],N,a,te,m||null,null,null);return E.firstCreatePass&&(Zo(zr(N,s),E,r.type),Hm(E,N),np(N,s.length,1)),Qh(s,de),s[22]=de}(de,this.componentDef,jt,S,G);if(de)if(a)tu(G,de,["ng-version",Tc.full]);else{const{attrs:Lt,classes:Jn}=function u_(n){const r=[],s=[];let a=1,h=2;for(;a<n.length;){let m=n[a];if("string"==typeof m)2===h?""!==m&&r.push(m,n[++a]):8===h&&s.push(m);else{if(!cu(h))break;h=m}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Lt&&tu(G,de,Lt),Jn&&Jn.length>0&&xf(G,de,Jn.join(" "))}if(bn=Xr(Tt,22),void 0!==s){const Lt=bn.projection=[];for(let Jn=0;Jn<this.ngContentSelectors.length;Jn++){const yi=s[Jn];Lt.push(null!=yi?Array.from(yi):null)}}fn=function V_(n,r,s,a,h){const m=s[1],E=function dg(n,r,s){const a=pn();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),$m(n,a,r,Pc(n,r,1,null),s),ep(n,a));const h=Gt(r,n,a.directiveStart,a);To(h,r);const m=hr(a,r);return m&&To(m,r),h}(m,s,r);if(a.components.push(E),n[8]=E,null!==h)for(const N of h)N(E,r);if(r.contentQueries){const N=pn();r.contentQueries(1,E,N.directiveStart)}const S=pn();return!m.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Qe(S.index),tp(s[1],S,0,S.directiveStart,S.directiveEnd,r),jm(r,E)),E}(ar,this.componentDef,jt,Ye,[B_]),Zf(Tt,jt,null)}finally{z()}return new zm(this.componentType,fn,Oe(bn,jt),jt,bn)}}class zm extends class rd{}{constructor(r,s,a,h,m){super(),this.location=a,this._rootLView=h,this._tNode=m,this.instance=s,this.hostView=this.changeDetectorRef=new ap(h),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let h;if(null!==a&&(h=a[r])){const m=this._rootLView;Xh(m[1],m,h,r,s),lg(m,this._tNode.index)}}get injector(){return new Ea(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function B_(){const n=pn();kr(It()[1],n)}function cp(n){let r=function qm(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let h;if(Rr(n))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ke(903,!1);h=r.\u0275dir}if(h){if(s){a.push(h);const E=n;E.inputs=dp(n.inputs),E.declaredInputs=dp(n.declaredInputs),E.outputs=dp(n.outputs);const S=h.hostBindings;S&&hp(n,S);const N=h.viewQuery,G=h.contentQueries;if(N&&Zm(n,N),G&&Ym(n,G),Le(n.inputs,h.inputs),Le(n.declaredInputs,h.declaredInputs),Le(n.outputs,h.outputs),Rr(h)&&h.data.animation){const te=n.data;te.animation=(te.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let E=0;E<m.length;E++){const S=m[E];S&&S.ngInherit&&S(n),S===cp&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Dg(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const h=n[a];h.hostVars=r+=h.hostVars,h.hostAttrs=Fi(h.hostAttrs,s=Fi(s,h.hostAttrs))}}(a)}function dp(n){return n===Mr?{}:n===En?[]:n}function Zm(n,r){const s=n.viewQuery;n.viewQuery=s?(a,h)=>{r(a,h),s(a,h)}:r}function Ym(n,r){const s=n.contentQueries;n.contentQueries=s?(a,h,m)=>{r(a,h,m),s(a,h,m)}:r}function hp(n,r){const s=n.hostBindings;n.hostBindings=s?(a,h)=>{r(a,h),s(a,h)}:r}let kc=null;function Cd(){if(!kc){const n=gr.Symbol;if(n&&n.iterator)kc=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(kc=a)}}}return kc}function So(n){return!!bg(n)&&(Array.isArray(n)||!(n instanceof Map)&&Cd()in n)}function bg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ul(n,r,s){return n[r]=s}function La(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function ds(n,r,s,a){const h=It();return La(h,hn(),r)&&(Wn(),ol(pt(),h,n,r,s,a)),ds}function iy(n,r,s,a,h,m,E,S){const N=It(),G=Wn(),te=n+22,de=G.firstCreatePass?function gp(n,r,s,a,h,m,E,S,N){const G=r.consts,te=Oc(r,n,4,E||null,is(G,S));sl(r,s,te,is(G,N)),kr(r,te);const de=te.tViews=qh(2,te,a,h,m,r.directiveRegistry,r.pipeRegistry,null,r.schemas,G);return null!==r.queries&&(r.queries.template(r,te),de.queries=r.queries.embeddedTView(te)),te}(te,G,N,r,s,a,h,m,E):G.data[te];Fs(de,!1);const Pe=N[11].createComment("");Rh(G,N,Pe,de),To(Pe,N),Qh(N,N[te]=rp(Pe,N,Pe,de)),ca(de)&&Kh(G,N,de),null!=E&&Qf(N,de,S)}function Sg(n){return ys(function zo(){return Cn.lFrame.contextLView}(),22+n)}function mp(n,r,s){const a=It();return La(a,hn(),r)&&function la(n,r,s,a,h,m,E,S){const N=hr(r,s);let te,G=r.inputs;!S&&null!=G&&(te=G[a])?(Xh(n,s,te,a,h),Ks(r)&&lg(s,r.index)):3&r.type&&(a=function ug(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),h=null!=E?E(h,r.value||"",a):h,m.setProperty(N,a,h))}(Wn(),pt(),a,n,r,a[11],s,!1),mp}function sh(n,r,s,a,h){const E=h?"class":"style";Xh(n,s,r.inputs[E],E,a)}function Vl(n,r,s,a){const h=It(),m=Wn(),E=22+n,S=h[11],N=h[E]=ue(S,r,function nr(){return Cn.lFrame.currentNamespace}()),G=m.firstCreatePass?function G_(n,r,s,a,h,m,E){const S=r.consts,G=Oc(r,n,2,h,is(S,m));return sl(r,s,G,is(S,E)),null!==G.attrs&&Id(G,G.attrs,!1),null!==G.mergedAttrs&&Id(G,G.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,G),G}(E,m,h,0,r,s,a):m.data[E];Fs(G,!0);const te=G.mergedAttrs;null!==te&&tu(S,N,te);const de=G.classes;null!==de&&xf(S,N,de);const Pe=G.styles;return null!==Pe&&um(S,N,Pe),64!=(64&G.flags)&&Rh(m,h,N,G),0===function Ta(){return Cn.lFrame.elementDepthCount}()&&To(N,h),function Po(){Cn.lFrame.elementDepthCount++}(),ca(G)&&(Kh(m,h,G),function ag(n,r,s){if(Os(r)){const h=r.directiveEnd;for(let m=r.directiveStart;m<h;m++){const E=n.data[m];E.contentQueries&&E.contentQueries(1,s[m],m)}}}(m,G,h)),null!==a&&Qf(h,G),Vl}function Sd(){let n=pn();Ur()?function Ls(){Cn.lFrame.isParent=!1}():(n=n.parent,Fs(n,!1));const r=n;!function tr(){Cn.lFrame.elementDepthCount--}();const s=Wn();return s.firstCreatePass&&(kr(s,n),Os(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function ya(n){return 0!=(16&n.flags)}(r)&&sh(s,r,It(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Ba(n){return 0!=(32&n.flags)}(r)&&sh(s,r,It(),r.stylesWithoutHost,!1),Sd}function Ad(n,r,s,a){return Vl(n,r,s,a),Sd(),Ad}function ay(){return It()}function sf(n){return!!n&&"function"==typeof n.then}function yp(n){return!!n&&"function"==typeof n.subscribe}const xg=yp;function fc(n,r,s,a){const h=It(),m=Wn(),E=pn();return function _p(n,r,s,a,h,m,E,S){const N=ca(a),te=n.firstCreatePass&&sp(n),de=r[8],Pe=Eg(r);let Ye=!0;if(3&a.type||S){const fn=hr(a,r),bn=S?S(fn):fn,ar=Pe.length,Lt=S?yi=>S($r(yi[a.index])):a.index;let Jn=null;if(!S&&N&&(Jn=function uy(n,r,s,a){const h=n.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const E=h[m];if(E===s&&h[m+1]===a){const S=r[7],N=h[m+2];return S.length>N?S[N]:null}"string"==typeof E&&(m+=2)}return null}(n,r,h,a.index)),null!==Jn)(Jn.__ngLastListenerFn__||Jn).__ngNextListenerFn__=m,Jn.__ngLastListenerFn__=m,Ye=!1;else{m=ly(a,r,de,m,!1);const yi=s.listen(bn,h,m);Pe.push(m,yi),te&&te.push(h,Lt,ar,ar+1)}}else m=ly(a,r,de,m,!1);const Tt=a.outputs;let jt;if(Ye&&null!==Tt&&(jt=Tt[h])){const fn=jt.length;if(fn)for(let bn=0;bn<fn;bn+=2){const zs=r[jt[bn]][jt[bn+1]].subscribe(m),gf=Pe.length;Pe.push(m,zs),te&&te.push(h,a.index,gf,-(gf+1))}}}(m,h,h[11],E,n,r,0,a),fc}function vp(n,r,s,a){try{return!1!==s(a)}catch(h){return op(n,h),!1}}function ly(n,r,s,a,h){return function m(E){if(E===Function)return a;_g(2&n.flags?ir(n.index,r):r);let N=vp(r,0,a,E),G=m.__ngNextListenerFn__;for(;G;)N=vp(r,0,G,E)&&N,G=G.__ngNextListenerFn__;return h&&!1===N&&(E.preventDefault(),E.returnValue=!1),N}}function af(n=1){return function F(n){return(Cn.lFrame.contextLView=function X(n,r){for(;n>0;)r=r[15],n--;return r}(n,Cn.lFrame.contextLView))[8]}(n)}function fy(n,r,s,a,h){const m=n[s+1],E=null===r;let S=a?il(m):cc(m),N=!1;for(;0!==S&&(!1===N||E);){const te=n[S+1];K_(n[S],r)&&(N=!0,n[S+1]=a?jh(te):Vh(te)),S=a?il(te):cc(te)}N&&(n[s+1]=a?Vh(m):jh(m))}function K_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&D(n,r)>=0}function kg(n,r){return function dl(n,r,s,a){const h=It(),m=Wn(),E=function yr(n){const r=Cn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);m.firstUpdatePass&&function Dy(n,r,s,a){const h=n.data;if(null===h[s+1]){const m=h[Ee()],E=function Cy(n,r){return r>=n.expandoStartIndex}(n,s);(function xy(n,r){return 0!=(n.flags&(r?16:32))})(m,a)&&null===r&&!E&&(r=!1),r=function Q_(n,r,s,a){const h=function Us(n){const r=Cn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let m=a?r.residualClasses:r.residualStyles;if(null===h)0===(a?r.classBindings:r.styleBindings)&&(s=ch(s=Fg(null,n,r,s,a),r.attrs,a),m=null);else{const E=r.directiveStylingLast;if(-1===E||n[E]!==h)if(s=Fg(h,n,r,s,a),null===m){let N=function by(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==cc(a))return n[il(a)]}(n,r,a);void 0!==N&&Array.isArray(N)&&(N=Fg(null,n,r,N[1],a),N=ch(N,r.attrs,a),function Ty(n,r,s,a){n[il(s?r.classBindings:r.styleBindings)]=a}(n,r,a,N))}else m=function J_(n,r,s){let a;const h=r.directiveEnd;for(let m=1+r.directiveStylingLast;m<h;m++)a=ch(a,n[m].hostAttrs,s);return ch(a,r.attrs,s)}(n,r,a)}return void 0!==m&&(a?r.residualClasses=m:r.residualStyles=m),s}(h,m,r,a),function W_(n,r,s,a,h,m){let E=m?r.classBindings:r.styleBindings,S=il(E),N=cc(E);n[a]=s;let te,G=!1;if(Array.isArray(s)){const de=s;te=de[1],(null===te||D(de,te)>0)&&(G=!0)}else te=s;if(h)if(0!==N){const Pe=il(n[S+1]);n[a+1]=Lh(Pe,S),0!==Pe&&(n[Pe+1]=Uh(n[Pe+1],a)),n[S+1]=function __(n,r){return 131071&n|r<<17}(n[S+1],a)}else n[a+1]=Lh(S,0),0!==S&&(n[S+1]=Uh(n[S+1],a)),S=a;else n[a+1]=Lh(N,0),0===S?S=a:n[N+1]=Uh(n[N+1],a),N=a;G&&(n[a+1]=Vh(n[a+1])),fy(n,te,a,!0),fy(n,te,a,!1),function z_(n,r,s,a,h){const m=h?n.residualClasses:n.residualStyles;null!=m&&"string"==typeof r&&D(m,r)>=0&&(s[a+1]=jh(s[a+1]))}(r,te,n,a,m),E=Lh(S,N),m?r.classBindings=E:r.styleBindings=E}(h,m,r,s,E,a)}}(m,n,E,a),r!==Cr&&La(h,E,r)&&function Sy(n,r,s,a,h,m,E,S){if(!(3&r.type))return;const N=n.data,G=N[S+1];Ep(function Bh(n){return 1==(1&n)}(G)?Ay(N,r,s,h,cc(G),E):void 0)||(Ep(m)||function Uf(n){return 2==(2&n)}(G)&&(m=Ay(N,null,s,h,S,E)),function s_(n,r,s,a,h){if(r)h?n.addClass(s,a):n.removeClass(s,a);else{let m=-1===a.indexOf("-")?void 0:Du.DashCase;null==h?n.removeStyle(s,a,m):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),m|=Du.Important),n.setStyle(s,a,h,m))}}(a,E,Hi(Ee(),s),h,m))}(m,m.data[Ee()],h,h[11],n,h[E+1]=function ev(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Ve(Vo(n)))),n}(r,s),a,E)}(n,r,null,!0),kg}function Fg(n,r,s,a,h){let m=null;const E=s.directiveEnd;let S=s.directiveStylingLast;for(-1===S?S=s.directiveStart:S++;S<E&&(m=r[S],a=ch(a,m.hostAttrs,h),m!==n);)S++;return null!==n&&(s.directiveStylingLast=S),a}function ch(n,r,s){const a=s?1:2;let h=-1;if(null!==r)for(let m=0;m<r.length;m++){const E=r[m];"number"==typeof E?h=E:h===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),co(n,E,!!s||r[++m]))}return void 0===n?null:n}function Ay(n,r,s,a,h,m){const E=null===r;let S;for(;h>0;){const N=n[h],G=Array.isArray(N),te=G?N[1]:N,de=null===te;let Pe=s[h+1];Pe===Cr&&(Pe=de?En:void 0);let Ye=de?Xo(Pe,a):te===a?Pe:void 0;if(G&&!Ep(Ye)&&(Ye=Xo(N,a)),Ep(Ye)&&(S=Ye,E))return S;const Tt=n[h+1];h=E?il(Tt):cc(Tt)}if(null!==r){let N=m?r.residualClasses:r.residualStyles;null!=N&&(S=Xo(N,a))}return S}function Ep(n){return void 0!==n}function My(n,r=""){const s=It(),a=Wn(),h=n+22,m=a.firstCreatePass?Oc(a,h,1,r,null):a.data[h],E=s[h]=function x(n,r){return n.createText(r)}(s[11],r);Rh(a,s,E,m),Fs(m,!1)}function Vg(n){return Ug("",n,""),Vg}function Ug(n,r,s){const a=It(),h=function nf(n,r,s,a){return La(n,hn(),s)?r+at(s)+a:Cr}(a,n,r,s);return h!==Cr&&function al(n,r,s){const a=Hi(r,n);!function B(n,r,s){n.setValue(r,s)}(n[11],a,s)}(a,Ee(),h),Ug}const Bc=void 0;var Wg=["en",[["a","p"],["AM","PM"],Bc],[["AM","PM"],Bc,Bc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bc,"{1} 'at' {0}",Bc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function av(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let mc={};function zg(n){const r=function cv(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Kg(r);if(s)return s;const a=r.split("-")[0];if(s=Kg(a),s)return s;if("en"===a)return Wg;throw new Ke(701,!1)}function Gy(n){return zg(n)[Qn.PluralCase]}function Kg(n){return n in mc||(mc[n]=gr.ng&&gr.ng.common&&gr.ng.common.locales&&gr.ng.common.locales[n]),mc[n]}var Qn=(()=>((Qn=Qn||{})[Qn.LocaleId=0]="LocaleId",Qn[Qn.DayPeriodsFormat=1]="DayPeriodsFormat",Qn[Qn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qn[Qn.DaysFormat=3]="DaysFormat",Qn[Qn.DaysStandalone=4]="DaysStandalone",Qn[Qn.MonthsFormat=5]="MonthsFormat",Qn[Qn.MonthsStandalone=6]="MonthsStandalone",Qn[Qn.Eras=7]="Eras",Qn[Qn.FirstDayOfWeek=8]="FirstDayOfWeek",Qn[Qn.WeekendRange=9]="WeekendRange",Qn[Qn.DateFormat=10]="DateFormat",Qn[Qn.TimeFormat=11]="TimeFormat",Qn[Qn.DateTimeFormat=12]="DateTimeFormat",Qn[Qn.NumberSymbols=13]="NumberSymbols",Qn[Qn.NumberFormats=14]="NumberFormats",Qn[Qn.CurrencyCode=15]="CurrencyCode",Qn[Qn.CurrencySymbol=16]="CurrencySymbol",Qn[Qn.CurrencyName=17]="CurrencyName",Qn[Qn.Currencies=18]="Currencies",Qn[Qn.Directionality=19]="Directionality",Qn[Qn.PluralCase=20]="PluralCase",Qn[Qn.ExtraData=21]="ExtraData",Qn))();const hh="en-US";let e=hh;function mv(n,r,s,a,h){if(n=me(n),Array.isArray(n))for(let m=0;m<n.length;m++)mv(n[m],r,s,a,h);else{const m=Wn(),E=It();let S=er(n)?n:me(n.provide),N=nl(n);const G=pn(),te=1048575&G.providerIndexes,de=G.directiveStart,Pe=G.providerIndexes>>20;if(er(n)||!n.multi){const Ye=new js(N,h,Nc),Tt=_v(S,r,h?te:te+Pe,de);-1===Tt?(Zo(zr(G,E),m,S),yv(m,n,r.length),r.push(S),G.directiveStart++,G.directiveEnd++,h&&(G.providerIndexes+=1048576),s.push(Ye),E.push(Ye)):(s[Tt]=Ye,E[Tt]=Ye)}else{const Ye=_v(S,r,te+Pe,de),Tt=_v(S,r,te,te+Pe),jt=Ye>=0&&s[Ye],fn=Tt>=0&&s[Tt];if(h&&!fn||!h&&!jt){Zo(zr(G,E),m,S);const bn=function BE(n,r,s,a,h){const m=new js(n,s,Nc);return m.multi=[],m.index=r,m.componentProviders=0,M0(m,h,a&&!s),m}(h?UE:VE,s.length,h,a,N);!h&&fn&&(s[Tt].providerFactory=bn),yv(m,n,r.length,0),r.push(S),G.directiveStart++,G.directiveEnd++,h&&(G.providerIndexes+=1048576),s.push(bn),E.push(bn)}else yv(m,n,Ye>-1?Ye:Tt,M0(s[h?Tt:Ye],N,!h&&a));!h&&a&&fn&&s[Tt].componentProviders++}}}function yv(n,r,s,a){const h=er(r),m=function Lu(n){return!!n.useClass}(r);if(h||m){const N=(m?me(r.useClass):r).prototype.ngOnDestroy;if(N){const G=n.destroyHooks||(n.destroyHooks=[]);if(!h&&r.multi){const te=G.indexOf(s);-1===te?G.push(s,[a,N]):G[te+1].push(a,N)}else G.push(s,N)}}}function M0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function _v(n,r,s,a){for(let h=s;h<a;h++)if(r[h]===n)return h;return-1}function VE(n,r,s,a){return vv(this.multi,[])}function UE(n,r,s,a){const h=this.multi;let m;if(this.providerFactory){const E=this.providerFactory.componentProviders,S=Gt(s,s[1],this.providerFactory.index,a);m=S.slice(0,E),vv(h,m);for(let N=E;N<S.length;N++)m.push(S[N])}else m=[],vv(h,m);return m}function vv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function R0(n,r=[]){return s=>{s.providersResolver=(a,h)=>function LE(n,r,s){const a=Wn();if(a.firstCreatePass){const h=Rr(n);mv(s,a.data,a.blueprint,h,!0),mv(r,a.data,a.blueprint,h,!1)}}(a,h?h(n):n,r)}}class Sp{}class N0{}function jE(n,r){return new O0(n,r??null)}class O0 extends Sp{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new up(this);const a=On(r);this._bootstrapComponents=Hu(a.bootstrap),this._r3Injector=Qp(r,s,[{provide:Sp,useValue:this},{provide:W,useValue:this.componentFactoryResolver}],Ve(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class wv extends N0{constructor(r){super(),this.moduleType=r}create(r){return new O0(this.moduleType,r)}}class HE extends Sp{constructor(r,s,a){super(),this.componentFactoryResolver=new up(this),this.instance=null;const h=new Uu([...r,{provide:Sp,useValue:this},{provide:W,useValue:this.componentFactoryResolver}],s||bl(),a,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Ev(n,r,s=null){return new HE(n,r,s).injector}let $E=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=cs(0,s.type),h=a.length>0?Ev([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,h)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=tn({token:n,providedIn:"environment",factory:()=>new n(Xi(Ui))}),n})();function P0(n){n.getStandaloneInjector=r=>r.get($E).getOrCreateStandaloneInjector(n)}function j0(n,r,s){const a=O()+n,h=It();return h[a]===Cr?ul(h,a,s?r.call(s):r()):function eh(n,r){return n[r]}(h,a)}function H0(n,r,s,a,h,m){const E=r+s;return La(n,E,h)?ul(n,E+1,m?a.call(m,h):a(h)):function Zg(n,r){const s=n[r];return s===Cr?void 0:s}(n,E+1)}function K0(n,r){const s=Wn();let a;const h=n+22;s.firstCreatePass?(a=function aI(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[h]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(h,a.onDestroy)):a=s.data[h];const m=a.factory||(a.factory=hi(a.type)),E=cr(Nc);try{const S=Hs(!1),N=m();return Hs(S),function $_(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,It(),h,N),N}finally{cr(E)}}function q0(n,r,s){const a=n+22,h=It(),m=ys(h,a);return function Yg(n,r){return n[1].data[r].pure}(h,a)?H0(h,O(),r,m.transform,s,m):m.transform(s)}function Cv(n){return r=>{setTimeout(n,void 0,r)}}const jc=class hI extends _.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let h=r,m=s||(()=>null),E=a;if(r&&"object"==typeof r){const N=r;h=N.next?.bind(N),m=N.error?.bind(N),E=N.complete?.bind(N)}this.__isAsync&&(m=Cv(m),h&&(h=Cv(h)),E&&(E=Cv(E)));const S=super.subscribe({next:h,error:m,complete:E});return r instanceof Z.w0&&r.add(S),S}};function fI(){return this._results[Cd()]()}class Dv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Cd(),a=Dv.prototype;a[s]||(a[s]=fI)}get changes(){return this._changes||(this._changes=new jc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const h=Js(r);(this._changesDetected=!function Qi(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let h=n[a],m=r[a];if(s&&(h=s(h),m=s(m)),m!==h)return!1}return!0}(a._results,h,s))&&(a._results=h,a.length=h.length,a.last=h[this.length-1],a.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Qg=(()=>{class n{}return n.__NG_ELEMENT_ID__=mI,n})();const pI=Qg,gI=class extends pI{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tViews,h=qf(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);h[17]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[19];return null!==E&&(h[19]=E.createEmbeddedView(a)),Zf(a,h,r),new Jd(h)}};function mI(){return zy(pn(),It())}function zy(n,r){return 4&n.type?new gI(r,n,Oe(n,r)):null}let Ky=(()=>{class n{}return n.__NG_ELEMENT_ID__=yI,n})();function yI(){return Q0(pn(),It())}const _I=Ky,Z0=class extends _I{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Oe(this._hostTNode,this._hostLView)}get injector(){return new Ea(this._hostTNode,this._hostLView)}get parentInjector(){const r=$a(this._hostTNode,this._hostLView);if(ja(r)){const s=fu(r,this._hostLView),a=qr(r);return new Ea(s[1].data[a+8],s)}return new Ea(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Y0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){let h,m;"number"==typeof a?h=a:null!=a&&(h=a.index,m=a.injector);const E=r.createEmbeddedView(s||{},m);return this.insert(E,h),E}createComponent(r,s,a,h,m){const E=r&&!function Wa(n){return"function"==typeof n}(r);let S;if(E)S=s;else{const de=s||{};S=de.index,a=de.injector,h=de.projectableNodes,m=de.environmentInjector||de.ngModuleRef}const N=E?r:new ef(_e(r)),G=a||this.parentInjector;if(!m&&null==N.ngModule){const Pe=(E?G:this.parentInjector).get(Ui,null);Pe&&(m=Pe)}const te=N.create(G,h,void 0,m);return this.insert(te.hostView,S),te}insert(r,s){const a=r._lView,h=a[1];if(function Oo(n){return Di(n[3])}(a)){const te=this.indexOf(r);if(-1!==te)this.detach(te);else{const de=a[3],Pe=new Z0(de,de[6],de[3]);Pe.detach(Pe.indexOf(r))}}const m=this._adjustIndex(s),E=this._lContainer;!function dn(n,r,s,a){const h=10+a,m=s.length;a>0&&(s[h-1][4]=r),a<m-10?(r[4]=s[h],Zu(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const E=r[17];null!==E&&s!==E&&function Dn(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(E,r);const S=r[19];null!==S&&S.insertView(n),r[2]|=64}(h,a,E,m);const S=Af(m,E),N=a[11],G=Mh(N,E[7]);return null!==G&&function dt(n,r,s,a,h,m){a[0]=h,a[6]=r,fd(n,a,s,1,h,m)}(h,E[6],N,a,G,S),r.attachToViewContainerRef(),Zu(bv(E),m,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Y0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Ws(this._lContainer,s);a&&(Xs(bv(this._lContainer),s),jo(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Ws(this._lContainer,s);return a&&null!=Xs(bv(this._lContainer),s)?new Jd(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function Y0(n){return n[8]}function bv(n){return n[8]||(n[8]=[])}function Q0(n,r){let s;const a=r[n.index];if(Di(a))s=a;else{let h;if(8&n.type)h=$r(a);else{const m=r[11];h=m.createComment("");const E=hr(n,r);hd(m,Mh(m,E),h,function r_(n,r){return n.nextSibling(r)}(m,E),!1)}r[n.index]=s=rp(a,r,h,n),Qh(r,s)}return new Z0(s,n,r)}class Tv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Tv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,h=[];for(let m=0;m<a;m++){const E=s.getByIndex(m);h.push(this.queries[E.indexInDeclarationView].clone())}return new Sv(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==sw(r,s).matches&&this.queries[s].setDirty()}}class J0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class Av{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const h=null!==s?s.length:0,m=this.getByIndex(a).embeddedTView(r,h);m&&(m.indexInDeclarationView=a,null!==s?s.push(m):s=[m])}return null!==s?new Av(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class xv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new xv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let h=0;h<a.length;h++){const m=a[h];this.matchTNodeWithReadOption(r,s,EI(s,m)),this.matchTNodeWithReadOption(r,s,wa(s,r,m,!1,!1))}else a===Qg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,wa(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const h=this.metadata.read;if(null!==h)if(h===ut||h===Ky||h===Qg&&4&s.type)this.addMatch(s.index,-2);else{const m=wa(s,r,h,!1,!1);null!==m&&this.addMatch(s.index,m)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function EI(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function CI(n,r,s,a){return-1===s?function II(n,r){return 11&n.type?Oe(n,r):4&n.type?zy(n,r):null}(r,n):-2===s?function DI(n,r,s){return s===ut?Oe(r,n):s===Qg?zy(r,n):s===Ky?Q0(r,n):void 0}(n,r,a):Gt(n,n[1],s,r)}function X0(n,r,s,a){const h=r[19].queries[a];if(null===h.matches){const m=n.data,E=s.matches,S=[];for(let N=0;N<E.length;N+=2){const G=E[N];S.push(G<0?null:CI(r,m[G],E[N+1],s.metadata.read))}h.matches=S}return h.matches}function Mv(n,r,s,a){const h=n.queries.getByIndex(s),m=h.matches;if(null!==m){const E=X0(n,r,h,s);for(let S=0;S<m.length;S+=2){const N=m[S];if(N>0)a.push(E[S/2]);else{const G=m[S+1],te=r[-N];for(let de=10;de<te.length;de++){const Pe=te[de];Pe[17]===Pe[3]&&Mv(Pe[1],Pe,G,a)}if(null!==te[9]){const de=te[9];for(let Pe=0;Pe<de.length;Pe++){const Ye=de[Pe];Mv(Ye[1],Ye,G,a)}}}}}return a}function ew(n){const r=It(),s=Wn(),a=pa();pi(a+1);const h=sw(s,a);if(n.dirty&&Ps(r)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const m=h.crossesNgTemplate?Mv(s,r,a,[]):X0(s,r,h,a);n.reset(m,Wt),n.notifyOnChanges()}return!0}return!1}function tw(n,r,s,a){const h=Wn();if(h.firstCreatePass){const m=pn();(function iw(n,r,s){null===n.queries&&(n.queries=new Av),n.queries.track(new xv(r,s))})(h,new J0(r,s,a),m.index),function SI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(h,n),2==(2&s)&&(h.staticContentQueries=!0)}!function rw(n,r,s){const a=new Dv(4==(4&s));Jf(n,r,a,a.destroy),null===r[19]&&(r[19]=new Sv),r[19].queries.push(new Tv(a))}(h,It(),s)}function nw(){return function TI(n,r){return n[19].queries[r].queryList}(It(),pa())}function sw(n,r){return n.queries.getByIndex(r)}function ow(n,r){return zy(n,r)}function Zy(...n){}const bw=new Yt("Application Initializer");let Yy=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Zy,this.reject=Zy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,h)=>{this.resolve=a,this.reject=h})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(sf(m))s.push(m);else if(xg(m)){const E=new Promise((S,N)=>{m.subscribe({complete:S,error:N})});s.push(E)}}Promise.all(s).then(()=>{a()}).catch(h=>{this.reject(h)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Xi(bw,8))},n.\u0275prov=tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Tw=new Yt("AppId",{providedIn:"root",factory:function Sw(){return`${kv()}${kv()}${kv()}`}});function kv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Aw=new Yt("Platform Initializer"),KI=new Yt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),xw=new Yt("appBootstrapListener");let qI=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=tn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Qy=new Yt("LocaleId",{providedIn:"root",factory:()=>k(Qy,St.Optional|St.SkipSelf)||function ZI(){return typeof $localize<"u"&&$localize.locale||hh}()}),YI=new Yt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class QI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let JI=(()=>{class n{compileModuleSync(s){return new wv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),m=Hu(On(s).declarations).reduce((E,S)=>{const N=_e(S);return N&&E.push(new ef(N)),E},[]);return new QI(a,m)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tC=(()=>Promise.resolve(0))();function Fv(n){typeof Zone>"u"?tC.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Bl{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jc(!1),this.onMicrotaskEmpty=new jc(!1),this.onStable=new jc(!1),this.onError=new jc(!1),typeof Zone>"u")throw new Ke(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!a&&s,h.shouldCoalesceRunChangeDetection=a,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function nC(){let n=gr.requestAnimationFrame,r=gr.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function sC(n){const r=()=>{!function iC(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(gr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Vv(n),n.isCheckStableRunning=!0,Lv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Vv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,h,m,E,S)=>{try{return Nw(n),s.invokeTask(h,m,E,S)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||n.shouldCoalesceRunChangeDetection)&&r(),Ow(n)}},onInvoke:(s,a,h,m,E,S,N)=>{try{return Nw(n),s.invoke(h,m,E,S,N)}finally{n.shouldCoalesceRunChangeDetection&&r(),Ow(n)}},onHasTask:(s,a,h,m)=>{s.hasTask(h,m),a===h&&("microTask"==m.change?(n._hasPendingMicrotasks=m.microTask,Vv(n),Lv(n)):"macroTask"==m.change&&(n.hasPendingMacrotasks=m.macroTask))},onHandleError:(s,a,h,m)=>(s.handleError(h,m),n.runOutsideAngular(()=>n.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bl.isInAngularZone())throw new Ke(909,!1)}static assertNotInAngularZone(){if(Bl.isInAngularZone())throw new Ke(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,h){const m=this._inner,E=m.scheduleEventTask("NgZoneEvent: "+h,r,rC,Zy,Zy);try{return m.runTask(E,s,a)}finally{m.cancelTask(E)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const rC={};function Lv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Vv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Nw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Ow(n){n._nesting--,Lv(n)}class oC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jc,this.onMicrotaskEmpty=new jc,this.onStable=new jc,this.onError=new jc}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,h){return r.apply(s,a)}}const Pw=new Yt(""),kw=new Yt("");let Uv,aC=(()=>{class n{constructor(s,a,h){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Uv||(function uC(n){Uv=n}(h),h.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bl.assertNotInAngularZone(),Fv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Fv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,h){let m=-1;a&&a>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==m),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:m,updateCb:h})}whenStable(s,a,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,h){return[]}}return n.\u0275fac=function(s){return new(s||n)(Xi(Bl),Xi(Fw),Xi(kw))},n.\u0275prov=tn({token:n,factory:n.\u0275fac}),n})(),Fw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Uv?.findTestabilityInTree(this,s,a)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=tn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),fh=null;const Lw=new Yt("AllowMultipleToken"),Bv=new Yt("PlatformDestroyListeners");class dC{constructor(r,s){this.name=r,this.token=s}}function Uw(n,r,s=[]){const a=`Platform: ${r}`,h=new Yt(a);return(m=[])=>{let E=jv();if(!E||E.injector.get(Lw,!1)){const S=[...s,...m,{provide:h,useValue:!0}];n?n(S):function hC(n){if(fh&&!fh.get(Lw,!1))throw new Ke(400,!1);fh=n;const r=n.get(jw);(function Vw(n){const r=n.get(Aw,null);r&&r.forEach(s=>s())})(n)}(function Bw(n=[],r){return Rc.create({name:r,providers:[{provide:Eu,useValue:"platform"},{provide:Bv,useValue:new Set([()=>fh=null])},...n]})}(S,a))}return function pC(n){const r=jv();if(!r)throw new Ke(401,!1);return r}()}}function jv(){return fh?.get(jw)??null}let jw=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const h=function $w(n,r){let s;return s="noop"===n?new oC:("zone.js"===n?void 0:n)||new Bl(r),s}(a?.ngZone,function Hw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),m=[{provide:Bl,useValue:h}];return h.run(()=>{const E=Rc.create({providers:m,parent:this.injector,name:s.moduleType.name}),S=s.create(E),N=S.injector.get(ad,null);if(!N)throw new Ke(402,!1);return h.runOutsideAngular(()=>{const G=h.onError.subscribe({next:te=>{N.handleError(te)}});S.onDestroy(()=>{Xy(this._modules,S),G.unsubscribe()})}),function Gw(n,r,s){try{const a=s();return sf(a)?a.catch(h=>{throw r.runOutsideAngular(()=>n.handleError(h)),h}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(N,h,()=>{const G=S.injector.get(Yy);return G.runInitializers(),G.donePromise.then(()=>(function t(n){Zt(n,"Expected localeId to be defined"),"string"==typeof n&&(e=n.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Qy,hh)||hh),this._moduleDoBootstrap(S),S))})})}bootstrapModule(s,a=[]){const h=Ww({},a);return function lC(n,r,s){const a=new wv(s);return Promise.resolve(a)}(0,0,s).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(s){const a=s.injector.get(Jy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(h=>a.bootstrap(h));else{if(!s.instance.ngDoBootstrap)throw new Ke(403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ke(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(Bv,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Xi(Rc))},n.\u0275prov=tn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Ww(n,r){return Array.isArray(r)?r.reduce(Ww,n):{...n,...r}}let Jy=(()=>{class n{constructor(s,a,h){this._zone=s,this._injector=a,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new q.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),E=new q.y(S=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{Bl.assertNotInAngularZone(),Fv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const G=this._zone.onUnstable.subscribe(()=>{Bl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{N.unsubscribe(),G.unsubscribe()}});this.isStable=(0,Re.T)(m,E.pipe((0,J.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const h=s instanceof id;if(!this._injector.get(Yy).done)throw!h&&an(s),new Ke(405,false);let E;E=h?s:this._injector.get(W).resolveComponentFactory(s),this.componentTypes.push(E.componentType);const S=function cC(n){return n.isBoundToModule}(E)?void 0:this._injector.get(Sp),G=E.create(Rc.NULL,[],a||E.selector,S),te=G.location.nativeElement,de=G.injector.get(Pw,null);return de?.registerApplication(te),G.onDestroy(()=>{this.detachView(G.hostView),Xy(this.components,G),de?.unregisterApplication(te)}),this._loadComponent(G),G}tick(){if(this._runningTick)throw new Ke(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Xy(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(xw,[]).concat(this._bootstrapListeners).forEach(h=>h(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Xy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Ke(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(Xi(Bl),Xi(Ui),Xi(ad))},n.\u0275prov=tn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Xy(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let Kw=!0,qw=!1;function mC(){return qw=!0,Kw}function yC(){if(qw)throw new Error("Cannot enable prod mode after platform setup.");Kw=!1}let _C=(()=>{class n{}return n.__NG_ELEMENT_ID__=vC,n})();function vC(n){return function wC(n,r,s){if(Ks(n)&&!s){const a=ir(n.index,r);return new Jd(a,a)}return 47&n.type?new Jd(r[16],r):null}(pn(),It(),16==(16&n))}class Jw{constructor(){}supports(r){return So(r)}create(r){return new TC(r)}}const bC=(n,r)=>r;class TC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||bC}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,h=0,m=null;for(;s||a;){const E=!a||s&&s.currentIndex<eE(a,h,m)?s:a,S=eE(E,h,m),N=E.currentIndex;if(E===a)h--,a=a._nextRemoved;else if(s=s._next,null==E.previousIndex)h++;else{m||(m=[]);const G=S-h,te=N-h;if(G!=te){for(let Pe=0;Pe<G;Pe++){const Ye=Pe<m.length?m[Pe]:m[Pe]=0,Tt=Ye+Pe;te<=Tt&&Tt<G&&(m[Pe]=Ye+1)}m[E.previousIndex]=te-G}}S!==N&&r(E,S,N)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!So(r))throw new Ke(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,m,E,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let S=0;S<this.length;S++)m=r[S],E=this._trackByFn(S,m),null!==s&&Object.is(s.trackById,E)?(a&&(s=this._verifyReinsertion(s,m,E,S)),Object.is(s.item,m)||this._addIdentityChange(s,m)):(s=this._mismatch(s,m,E,S),a=!0),s=s._next}else h=0,function Xm(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Cd()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,S=>{E=this._trackByFn(h,S),null!==s&&Object.is(s.trackById,E)?(a&&(s=this._verifyReinsertion(s,S,E,h)),Object.is(s.item,S)||this._addIdentityChange(s,S)):(s=this._mismatch(s,S,E,h),a=!0),s=s._next,h++}),this.length=h;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,h){let m;return null===r?m=this._itTail:(m=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,m,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,h))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,m,h)):r=this._addAfter(new SC(s,a),m,h),r}_verifyReinsertion(r,s,a,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==m?r=this._reinsertAfter(m,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,m=r._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const h=null===s?this._itHead:s._next;return r._next=h,r._prev=s,null===h?this._itTail=r:h._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new Xw),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Xw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class SC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class Xw{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new AC,this.map.set(s,a)),a.add(r)}get(r,s){const h=this.map.get(r);return h?h.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function eE(n,r,s){const a=n.previousIndex;if(null===a)return a;let h=0;return s&&a<s.length&&(h=s[a]),a+r+h}class tE{constructor(){}supports(r){return r instanceof Map||bg(r)}create(){return new xC}}class xC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||bg(r)))throw new Ke(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,h)=>{if(s&&s.key===h)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const m=this._getOrCreateRecordForKey(h,a);s=this._insertBeforeOrAppend(s,m)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,s);const m=h._prev,E=h._next;return m&&(m._next=E),E&&(E._prev=m),h._next=null,h._prev=null,h}const a=new MC(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class MC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function nE(){return new zv([new Jw])}let zv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const h=a.factories.slice();s=s.concat(h)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||nE()),deps:[[n,new Mn,new $t]]}}find(s){const a=this.factories.find(h=>h.supports(s));if(null!=a)return a;throw new Ke(901,!1)}}return n.\u0275prov=tn({token:n,providedIn:"root",factory:nE}),n})();function rE(){return new Kv([new tE])}let Kv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const h=a.factories.slice();s=s.concat(h)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||rE()),deps:[[n,new Mn,new $t]]}}find(s){const a=this.factories.find(h=>h.supports(s));if(a)return a;throw new Ke(901,!1)}}return n.\u0275prov=tn({token:n,providedIn:"root",factory:rE}),n})();const OC=Uw(null,"core",[]);let PC=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Xi(Jy))},n.\u0275mod=qt({type:n}),n.\u0275inj=yn({}),n})();function kC(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(Kt,qe,H)=>{H.d(qe,{Fj:()=>mt,NI:()=>Ks,u:()=>Ds,cw:()=>pe,sg:()=>ns,u5:()=>$i,JJ:()=>zn,JL:()=>Bn,F:()=>Jr,On:()=>rt,UX:()=>_s,Q7:()=>is,_Y:()=>vt});var _=H(4650),Z=H(6895),q=H(8996),Re=H(9751),J=H(4742),Me=H(8421),Le=H(7669),Ve=H(5403),He=H(3268),ae=H(1810),me=H(4004);let it=(()=>{class j{constructor(O,ne){this._renderer=O,this._elementRef=ne,this.onChange=ct=>{},this.onTouched=()=>{}}setProperty(O,ne){this._renderer.setProperty(this._elementRef.nativeElement,O,ne)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}}return j.\u0275fac=function(O){return new(O||j)(_.Y36(_.Qsj),_.Y36(_.SBq))},j.\u0275dir=_.lG2({type:j}),j})(),tt=(()=>{class j extends it{}return j.\u0275fac=function(){let L;return function(ne){return(L||(L=_.n5z(j)))(ne||j)}}(),j.\u0275dir=_.lG2({type:j,features:[_.qOj]}),j})();const Ke=new _.OlP("NgValueAccessor"),nt={provide:Ke,useExisting:(0,_.Gpc)(()=>mt),multi:!0},Bt=new _.OlP("CompositionEventMode");let mt=(()=>{class j extends it{constructor(O,ne,ct){super(O,ne),this._compositionMode=ct,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ne(){const j=(0,Z.q)()?(0,Z.q)().getUserAgent():"";return/android (\d+)/.test(j.toLowerCase())}())}writeValue(O){this.setProperty("value",O??"")}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}}return j.\u0275fac=function(O){return new(O||j)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(Bt,8))},j.\u0275dir=_.lG2({type:j,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(O,ne){1&O&&_.NdJ("input",function(hn){return ne._handleInput(hn.target.value)})("blur",function(){return ne.onTouched()})("compositionstart",function(){return ne._compositionStart()})("compositionend",function(hn){return ne._compositionEnd(hn.target.value)})},features:[_._Bn([nt]),_.qOj]}),j})();const $e=new _.OlP("NgValidators"),P=new _.OlP("NgAsyncValidators");function Be(j){return function Ge(j){return null==j||("string"==typeof j||Array.isArray(j))&&0===j.length}(j.value)?{required:!0}:null}function lt(j){return null}function Qt(j){return null!=j}function sn(j){return(0,_.QGY)(j)?(0,q.D)(j):j}function en(j){let L={};return j.forEach(O=>{L=null!=O?{...L,...O}:L}),0===Object.keys(L).length?null:L}function tn(j,L){return L.map(O=>O(j))}function yn(j){return j.map(L=>function Xn(j){return!j.validate}(L)?L:O=>L.validate(O))}function ci(j){return null!=j?function mn(j){if(!j)return null;const L=j.filter(Qt);return 0==L.length?null:function(O){return en(tn(O,L))}}(yn(j)):null}function wn(j){return null!=j?function Dr(j){if(!j)return null;const L=j.filter(Qt);return 0==L.length?null:function(O){return function ie(...j){const L=(0,Le.jO)(j),{args:O,keys:ne}=(0,J.D)(j),ct=new Re.y(hn=>{const{length:yr}=O;if(!yr)return void hn.complete();const ki=new Array(yr);let fi=yr,Gi=yr;for(let Vs=0;Vs<yr;Vs++){let Qs=!1;(0,Me.Xf)(O[Vs]).subscribe((0,Ve.x)(hn,Us=>{Qs||(Qs=!0,Gi--),ki[Vs]=Us},()=>fi--,void 0,()=>{(!fi||!Qs)&&(Gi||hn.next(ne?(0,ae.n)(ne,ki):ki),hn.complete())}))}});return L?ct.pipe((0,He.Z)(L)):ct}(tn(O,L).map(sn)).pipe((0,me.U)(en))}}(yn(j)):null}function Vn(j,L){return null===j?[L]:Array.isArray(j)?[...j,L]:[j,L]}function Zr(j){return j._rawValidators}function Ht(j){return j._rawAsyncValidators}function pr(j){return j?Array.isArray(j)?j:[j]:[]}function Nn(j,L){return Array.isArray(j)?j.includes(L):j===L}function sr(j,L){const O=pr(L);return pr(j).forEach(ct=>{Nn(O,ct)||O.push(ct)}),O}function St(j,L){return pr(L).filter(O=>!Nn(j,O))}class or{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(L){this._rawValidators=L||[],this._composedValidatorFn=ci(this._rawValidators)}_setAsyncValidators(L){this._rawAsyncValidators=L||[],this._composedAsyncValidatorFn=wn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(L){this._onDestroyCallbacks.push(L)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(L=>L()),this._onDestroyCallbacks=[]}reset(L){this.control&&this.control.reset(L)}hasError(L,O){return!!this.control&&this.control.hasError(L,O)}getError(L,O){return this.control?this.control.getError(L,O):null}}class Tn extends or{get formDirective(){return null}get path(){return null}}class cr extends or{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _i{constructor(L){this._cd=L}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let zn=(()=>{class j extends _i{constructor(O){super(O)}}return j.\u0275fac=function(O){return new(O||j)(_.Y36(cr,2))},j.\u0275dir=_.lG2({type:j,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(O,ne){2&O&&_.ekj("ng-untouched",ne.isUntouched)("ng-touched",ne.isTouched)("ng-pristine",ne.isPristine)("ng-dirty",ne.isDirty)("ng-valid",ne.isValid)("ng-invalid",ne.isInvalid)("ng-pending",ne.isPending)},features:[_.qOj]}),j})(),Bn=(()=>{class j extends _i{constructor(O){super(O)}}return j.\u0275fac=function(O){return new(O||j)(_.Y36(Tn,10))},j.\u0275dir=_.lG2({type:j,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(O,ne){2&O&&_.ekj("ng-untouched",ne.isUntouched)("ng-touched",ne.isTouched)("ng-pristine",ne.isPristine)("ng-dirty",ne.isDirty)("ng-valid",ne.isValid)("ng-invalid",ne.isInvalid)("ng-pending",ne.isPending)("ng-submitted",ne.isSubmitted)},features:[_.qOj]}),j})();const qt="VALID",lr="INVALID",Gn="PENDING",Ue="DISABLED";function ye(j){return(an(j)?j.validators:j)||null}function _e(j){return Array.isArray(j)?ci(j):j||null}function yt(j,L){return(an(L)?L.asyncValidators:j)||null}function gt(j){return Array.isArray(j)?wn(j):j||null}function an(j){return null!=j&&!Array.isArray(j)&&"object"==typeof j}class he{constructor(L,O){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=L,this._rawAsyncValidators=O,this._composedValidatorFn=_e(this._rawValidators),this._composedAsyncValidatorFn=gt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(L){this._rawValidators=this._composedValidatorFn=L}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(L){this._rawAsyncValidators=this._composedAsyncValidatorFn=L}get parent(){return this._parent}get valid(){return this.status===qt}get invalid(){return this.status===lr}get pending(){return this.status==Gn}get disabled(){return this.status===Ue}get enabled(){return this.status!==Ue}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(L){this._rawValidators=L,this._composedValidatorFn=_e(L)}setAsyncValidators(L){this._rawAsyncValidators=L,this._composedAsyncValidatorFn=gt(L)}addValidators(L){this.setValidators(sr(L,this._rawValidators))}addAsyncValidators(L){this.setAsyncValidators(sr(L,this._rawAsyncValidators))}removeValidators(L){this.setValidators(St(L,this._rawValidators))}removeAsyncValidators(L){this.setAsyncValidators(St(L,this._rawAsyncValidators))}hasValidator(L){return Nn(this._rawValidators,L)}hasAsyncValidator(L){return Nn(this._rawAsyncValidators,L)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(L={}){this.touched=!0,this._parent&&!L.onlySelf&&this._parent.markAsTouched(L)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(L=>L.markAllAsTouched())}markAsUntouched(L={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!L.onlySelf&&this._parent._updateTouched(L)}markAsDirty(L={}){this.pristine=!1,this._parent&&!L.onlySelf&&this._parent.markAsDirty(L)}markAsPristine(L={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!L.onlySelf&&this._parent._updatePristine(L)}markAsPending(L={}){this.status=Gn,!1!==L.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!L.onlySelf&&this._parent.markAsPending(L)}disable(L={}){const O=this._parentMarkedDirty(L.onlySelf);this.status=Ue,this.errors=null,this._forEachChild(ne=>{ne.disable({...L,onlySelf:!0})}),this._updateValue(),!1!==L.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...L,skipPristineCheck:O}),this._onDisabledChange.forEach(ne=>ne(!0))}enable(L={}){const O=this._parentMarkedDirty(L.onlySelf);this.status=qt,this._forEachChild(ne=>{ne.enable({...L,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent}),this._updateAncestors({...L,skipPristineCheck:O}),this._onDisabledChange.forEach(ne=>ne(!1))}_updateAncestors(L){this._parent&&!L.onlySelf&&(this._parent.updateValueAndValidity(L),L.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(L){this._parent=L}getRawValue(){return this.value}updateValueAndValidity(L={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qt||this.status===Gn)&&this._runAsyncValidator(L.emitEvent)),!1!==L.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!L.onlySelf&&this._parent.updateValueAndValidity(L)}_updateTreeValidity(L={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(L)),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ue:qt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(L){if(this.asyncValidator){this.status=Gn,this._hasOwnPendingAsyncValidator=!0;const O=sn(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(ne=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ne,{emitEvent:L})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(L,O={}){this.errors=L,this._updateControlsErrors(!1!==O.emitEvent)}get(L){let O=L;return null==O||(Array.isArray(O)||(O=O.split(".")),0===O.length)?null:O.reduce((ne,ct)=>ne&&ne._find(ct),this)}getError(L,O){const ne=O?this.get(O):this;return ne&&ne.errors?ne.errors[L]:null}hasError(L,O){return!!this.getError(L,O)}get root(){let L=this;for(;L._parent;)L=L._parent;return L}_updateControlsErrors(L){this.status=this._calculateStatus(),L&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(L)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Ue:this.errors?lr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gn)?Gn:this._anyControlsHaveStatus(lr)?lr:qt}_anyControlsHaveStatus(L){return this._anyControls(O=>O.status===L)}_anyControlsDirty(){return this._anyControls(L=>L.dirty)}_anyControlsTouched(){return this._anyControls(L=>L.touched)}_updatePristine(L={}){this.pristine=!this._anyControlsDirty(),this._parent&&!L.onlySelf&&this._parent._updatePristine(L)}_updateTouched(L={}){this.touched=this._anyControlsTouched(),this._parent&&!L.onlySelf&&this._parent._updateTouched(L)}_registerOnCollectionChange(L){this._onCollectionChange=L}_setUpdateStrategy(L){an(L)&&null!=L.updateOn&&(this._updateOn=L.updateOn)}_parentMarkedDirty(L){return!L&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(L){return null}}class pe extends he{constructor(L,O,ne){super(ye(O),yt(ne,O)),this.controls=L,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(L,O){return this.controls[L]?this.controls[L]:(this.controls[L]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(L,O,ne={}){this.registerControl(L,O),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}removeControl(L,O={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),delete this.controls[L],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(L,O,ne={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),delete this.controls[L],O&&this.registerControl(L,O),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}contains(L){return this.controls.hasOwnProperty(L)&&this.controls[L].enabled}setValue(L,O={}){(function Ln(j,L,O){j._forEachChild((ne,ct)=>{if(void 0===O[ct])throw new _.vHH(1002,"")})})(this,0,L),Object.keys(L).forEach(ne=>{(function On(j,L,O){const ne=j.controls;if(!(L?Object.keys(ne):ne).length)throw new _.vHH(1e3,"");if(!ne[O])throw new _.vHH(1001,"")})(this,!0,ne),this.controls[ne].setValue(L[ne],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(L,O={}){null!=L&&(Object.keys(L).forEach(ne=>{const ct=this.controls[ne];ct&&ct.patchValue(L[ne],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(L={},O={}){this._forEachChild((ne,ct)=>{ne.reset(L[ct],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(L,O,ne)=>(L[ne]=O.getRawValue(),L))}_syncPendingControls(){let L=this._reduceChildren(!1,(O,ne)=>!!ne._syncPendingControls()||O);return L&&this.updateValueAndValidity({onlySelf:!0}),L}_forEachChild(L){Object.keys(this.controls).forEach(O=>{const ne=this.controls[O];ne&&L(ne,O)})}_setUpControls(){this._forEachChild(L=>{L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(L){for(const[O,ne]of Object.entries(this.controls))if(this.contains(O)&&L(ne))return!0;return!1}_reduceValue(){return this._reduceChildren({},(O,ne,ct)=>((ne.enabled||this.disabled)&&(O[ct]=ne.value),O))}_reduceChildren(L,O){let ne=L;return this._forEachChild((ct,hn)=>{ne=O(ne,ct,hn)}),ne}_allControlsDisabled(){for(const L of Object.keys(this.controls))if(this.controls[L].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(L){return this.controls.hasOwnProperty(L)?this.controls[L]:null}}function Xt(j,L){return[...L.path,j]}function In(j,L){wr(j,L),L.valueAccessor.writeValue(j.value),j.disabled&&L.valueAccessor.setDisabledState?.(!0),function mo(j,L){L.valueAccessor.registerOnChange(O=>{j._pendingValue=O,j._pendingChange=!0,j._pendingDirty=!0,"change"===j.updateOn&&Kr(j,L)})}(j,L),function to(j,L){const O=(ne,ct)=>{L.valueAccessor.writeValue(ne),ct&&L.viewToModelUpdate(ne)};j.registerOnChange(O),L._registerOnDestroy(()=>{j._unregisterOnChange(O)})}(j,L),function hs(j,L){L.valueAccessor.registerOnTouched(()=>{j._pendingTouched=!0,"blur"===j.updateOn&&j._pendingChange&&Kr(j,L),"submit"!==j.updateOn&&j.markAsTouched()})}(j,L),function un(j,L){if(L.valueAccessor.setDisabledState){const O=ne=>{L.valueAccessor.setDisabledState(ne)};j.registerOnDisabledChange(O),L._registerOnDestroy(()=>{j._unregisterOnDisabledChange(O)})}}(j,L)}function br(j,L,O=!0){const ne=()=>{};L.valueAccessor&&(L.valueAccessor.registerOnChange(ne),L.valueAccessor.registerOnTouched(ne)),ri(j,L),j&&(L._invokeOnDestroyCallbacks(),j._registerOnCollectionChange(()=>{}))}function Pn(j,L){j.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(L)})}function wr(j,L){const O=Zr(j);null!==L.validator?j.setValidators(Vn(O,L.validator)):"function"==typeof O&&j.setValidators([O]);const ne=Ht(j);null!==L.asyncValidator?j.setAsyncValidators(Vn(ne,L.asyncValidator)):"function"==typeof ne&&j.setAsyncValidators([ne]);const ct=()=>j.updateValueAndValidity();Pn(L._rawValidators,ct),Pn(L._rawAsyncValidators,ct)}function ri(j,L){let O=!1;if(null!==j){if(null!==L.validator){const ct=Zr(j);if(Array.isArray(ct)&&ct.length>0){const hn=ct.filter(yr=>yr!==L.validator);hn.length!==ct.length&&(O=!0,j.setValidators(hn))}}if(null!==L.asyncValidator){const ct=Ht(j);if(Array.isArray(ct)&&ct.length>0){const hn=ct.filter(yr=>yr!==L.asyncValidator);hn.length!==ct.length&&(O=!0,j.setAsyncValidators(hn))}}}const ne=()=>{};return Pn(L._rawValidators,ne),Pn(L._rawAsyncValidators,ne),O}function Kr(j,L){j._pendingDirty&&j.markAsDirty(),j.setValue(j._pendingValue,{emitModelToViewChange:!1}),L.viewToModelUpdate(j._pendingValue),j._pendingChange=!1}function Rs(j,L){wr(j,L)}function Es(j,L){if(!j.hasOwnProperty("model"))return!1;const O=j.model;return!!O.isFirstChange()||!Object.is(L,O.currentValue)}function Is(j,L){j._syncPendingControls(),L.forEach(O=>{const ne=O.control;"submit"===ne.updateOn&&ne._pendingChange&&(O.viewToModelUpdate(ne._pendingValue),ne._pendingChange=!1)})}function Ki(j,L){if(!L)return null;let O,ne,ct;return Array.isArray(L),L.forEach(hn=>{hn.constructor===mt?O=hn:function di(j){return Object.getPrototypeOf(j.constructor)===tt}(hn)?ne=hn:ct=hn}),ct||ne||O||null}const Vr={provide:Tn,useExisting:(0,_.Gpc)(()=>Jr)},qi=(()=>Promise.resolve())();let Jr=(()=>{class j extends Tn{constructor(O,ne){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new _.vpe,this.form=new pe({},ci(O),wn(ne))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(O){qi.then(()=>{const ne=this._findContainer(O.path);O.control=ne.registerControl(O.name,O.control),In(O.control,O),O.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(O)})}getControl(O){return this.form.get(O.path)}removeControl(O){qi.then(()=>{const ne=this._findContainer(O.path);ne&&ne.removeControl(O.name),this._directives.delete(O)})}addFormGroup(O){qi.then(()=>{const ne=this._findContainer(O.path),ct=new pe({});Rs(ct,O),ne.registerControl(O.name,ct),ct.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(O){qi.then(()=>{const ne=this._findContainer(O.path);ne&&ne.removeControl(O.name)})}getFormGroup(O){return this.form.get(O.path)}updateModel(O,ne){qi.then(()=>{this.form.get(O.path).setValue(ne)})}setValue(O){this.control.setValue(O)}onSubmit(O){return this.submitted=!0,Is(this.form,this._directives),this.ngSubmit.emit(O),!1}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(O){return O.pop(),O.length?this.form.get(O):this.form}}return j.\u0275fac=function(O){return new(O||j)(_.Y36($e,10),_.Y36(P,10))},j.\u0275dir=_.lG2({type:j,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(O,ne){1&O&&_.NdJ("submit",function(hn){return ne.onSubmit(hn)})("reset",function(){return ne.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([Vr]),_.qOj]}),j})();function Di(j,L){const O=j.indexOf(L);O>-1&&j.splice(O,1)}function Os(j){return"object"==typeof j&&null!==j&&2===Object.keys(j).length&&"value"in j&&"disabled"in j}const Ks=class extends he{constructor(L=null,O,ne){super(ye(O),yt(ne,O)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(L),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),an(O)&&(O.nonNullable||O.initialValueIsDefault)&&(this.defaultValue=Os(L)?L.value:L)}setValue(L,O={}){this.value=this._pendingValue=L,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(ne=>ne(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(L,O={}){this.setValue(L,O)}reset(L=this.defaultValue,O={}){this._applyFormState(L),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(L){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(L){this._onChange.push(L)}_unregisterOnChange(L){Di(this._onChange,L)}registerOnDisabledChange(L){this._onDisabledChange.push(L)}_unregisterOnDisabledChange(L){Di(this._onDisabledChange,L)}_forEachChild(L){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(L){Os(L)?(this.value=this._pendingValue=L.value,L.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=L}},ke={provide:cr,useExisting:(0,_.Gpc)(()=>rt)},We=(()=>Promise.resolve())();let rt=(()=>{class j extends cr{constructor(O,ne,ct,hn,yr){super(),this._changeDetectorRef=yr,this.control=new Ks,this._registered=!1,this.update=new _.vpe,this._parent=O,this._setValidators(ne),this._setAsyncValidators(ct),this.valueAccessor=Ki(0,hn)}ngOnChanges(O){if(this._checkForErrors(),!this._registered||"name"in O){if(this._registered&&(this._checkName(),this.formDirective)){const ne=O.name.previousValue;this.formDirective.removeControl({name:ne,path:this._getPath(ne)})}this._setUpControl()}"isDisabled"in O&&this._updateDisabled(O),Es(O,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){In(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(O){We.then(()=>{this.control.setValue(O,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(O){const ne=O.isDisabled.currentValue,ct=0!==ne&&(0,_.D6c)(ne);We.then(()=>{ct&&!this.control.disabled?this.control.disable():!ct&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(O){return this._parent?Xt(O,this._parent):[O]}}return j.\u0275fac=function(O){return new(O||j)(_.Y36(Tn,9),_.Y36($e,10),_.Y36(P,10),_.Y36(Ke,10),_.Y36(_.sBO,8))},j.\u0275dir=_.lG2({type:j,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_._Bn([ke]),_.qOj,_.TTD]}),j})(),vt=(()=>{class j{}return j.\u0275fac=function(O){return new(O||j)},j.\u0275dir=_.lG2({type:j,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),j})(),ts=(()=>{class j{}return j.\u0275fac=function(O){return new(O||j)},j.\u0275mod=_.oAB({type:j}),j.\u0275inj=_.cJS({}),j})();const Pr=new _.OlP("NgModelWithFormControlWarning"),hi={provide:Tn,useExisting:(0,_.Gpc)(()=>ns)};let ns=(()=>{class j extends Tn{constructor(O,ne){super(),this.validators=O,this.asyncValidators=ne,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(O),this._setAsyncValidators(ne)}ngOnChanges(O){this._checkFormPresent(),O.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ri(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(O){const ne=this.form.get(O.path);return In(ne,O),ne.updateValueAndValidity({emitEvent:!1}),this.directives.push(O),ne}getControl(O){return this.form.get(O.path)}removeControl(O){br(O.control||null,O,!1),function fs(j,L){const O=j.indexOf(L);O>-1&&j.splice(O,1)}(this.directives,O)}addFormGroup(O){this._setUpFormContainer(O)}removeFormGroup(O){this._cleanUpFormContainer(O)}getFormGroup(O){return this.form.get(O.path)}addFormArray(O){this._setUpFormContainer(O)}removeFormArray(O){this._cleanUpFormContainer(O)}getFormArray(O){return this.form.get(O.path)}updateModel(O,ne){this.form.get(O.path).setValue(ne)}onSubmit(O){return this.submitted=!0,Is(this.form,this.directives),this.ngSubmit.emit(O),!1}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_updateDomValue(){this.directives.forEach(O=>{const ne=O.control,ct=this.form.get(O.path);ne!==ct&&(br(ne||null,O),(j=>j instanceof Ks)(ct)&&(In(ct,O),O.control=ct))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(O){const ne=this.form.get(O.path);Rs(ne,O),ne.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(O){if(this.form){const ne=this.form.get(O.path);ne&&function ii(j,L){return ri(j,L)}(ne,O)&&ne.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wr(this.form,this),this._oldForm&&ri(this._oldForm,this)}_checkFormPresent(){}}return j.\u0275fac=function(O){return new(O||j)(_.Y36($e,10),_.Y36(P,10))},j.\u0275dir=_.lG2({type:j,selectors:[["","formGroup",""]],hostBindings:function(O,ne){1&O&&_.NdJ("submit",function(hn){return ne.onSubmit(hn)})("reset",function(){return ne.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([hi]),_.qOj,_.TTD]}),j})();const No={provide:cr,useExisting:(0,_.Gpc)(()=>Ds)};let Ds=(()=>{class j extends cr{constructor(O,ne,ct,hn,yr){super(),this._ngModelWarningConfig=yr,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=O,this._setValidators(ne),this._setAsyncValidators(ct),this.valueAccessor=Ki(0,hn)}set isDisabled(O){}ngOnChanges(O){this._added||this._setUpControl(),Es(O,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}get path(){return Xt(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return j._ngModelWarningSentOnce=!1,j.\u0275fac=function(O){return new(O||j)(_.Y36(Tn,13),_.Y36($e,10),_.Y36(P,10),_.Y36(Ke,10),_.Y36(Pr,8))},j.\u0275dir=_.lG2({type:j,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([No]),_.qOj,_.TTD]}),j})(),Ei=(()=>{class j{constructor(){this._validator=lt}ngOnChanges(O){if(this.inputName in O){const ne=this.normalizeInput(O[this.inputName].currentValue);this._enabled=this.enabled(ne),this._validator=this._enabled?this.createValidator(ne):lt,this._onChange&&this._onChange()}}validate(O){return this._validator(O)}registerOnValidatorChange(O){this._onChange=O}enabled(O){return null!=O}}return j.\u0275fac=function(O){return new(O||j)},j.\u0275dir=_.lG2({type:j,features:[_.TTD]}),j})();const xr={provide:$e,useExisting:(0,_.Gpc)(()=>is),multi:!0};let is=(()=>{class j extends Ei{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=_.D6c,this.createValidator=O=>Be}enabled(O){return O}}return j.\u0275fac=function(){let L;return function(ne){return(L||(L=_.n5z(j)))(ne||j)}}(),j.\u0275dir=_.lG2({type:j,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(O,ne){2&O&&_.uIk("required",ne._enabled?"":null)},inputs:{required:"required"},features:[_._Bn([xr]),_.qOj]}),j})(),Wn=(()=>{class j{}return j.\u0275fac=function(O){return new(O||j)},j.\u0275mod=_.oAB({type:j}),j.\u0275inj=_.cJS({imports:[ts]}),j})(),$i=(()=>{class j{}return j.\u0275fac=function(O){return new(O||j)},j.\u0275mod=_.oAB({type:j}),j.\u0275inj=_.cJS({imports:[Wn]}),j})(),_s=(()=>{class j{static withConfig(O){return{ngModule:j,providers:[{provide:Pr,useValue:O.warnOnNgModelWithFormControl}]}}}return j.\u0275fac=function(O){return new(O||j)},j.\u0275mod=_.oAB({type:j}),j.\u0275inj=_.cJS({imports:[Wn]}),j})()},1481:(Kt,qe,H)=>{H.d(qe,{Dx:()=>zn,b2:()=>Tn,q6:()=>Nn});var _=H(6895),Z=H(4650);class q extends _.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Re extends q{static makeCurrent(){(0,_.HT)(new Re)}onAndCancel(pe,le,ze){return pe.addEventListener(le,ze,!1),()=>{pe.removeEventListener(le,ze,!1)}}dispatchEvent(pe,le){pe.dispatchEvent(le)}remove(pe){pe.parentNode&&pe.parentNode.removeChild(pe)}createElement(pe,le){return(le=le||this.getDefaultDocument()).createElement(pe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(pe){return pe.nodeType===Node.ELEMENT_NODE}isShadowRoot(pe){return pe instanceof DocumentFragment}getGlobalEventTarget(pe,le){return"window"===le?window:"document"===le?pe:"body"===le?pe.body:null}getBaseHref(pe){const le=function Me(){return J=J||document.querySelector("base"),J?J.getAttribute("href"):null}();return null==le?null:function Ve(he){Le=Le||document.createElement("a"),Le.setAttribute("href",he);const pe=Le.pathname;return"/"===pe.charAt(0)?pe:`/${pe}`}(le)}resetBaseElement(){J=null}getUserAgent(){return window.navigator.userAgent}getCookie(pe){return(0,_.Mx)(document.cookie,pe)}}let Le,J=null;const He=new Z.OlP("TRANSITION_ID"),ie=[{provide:Z.ip1,useFactory:function ae(he,pe,le){return()=>{le.get(Z.CZH).donePromise.then(()=>{const ze=(0,_.q)(),ht=pe.querySelectorAll(`style[ng-transition="${he}"]`);for(let Vt=0;Vt<ht.length;Vt++)ze.remove(ht[Vt])})}},deps:[He,_.K0,Z.zs3],multi:!0}];let it=(()=>{class he{build(){return new XMLHttpRequest}}return he.\u0275fac=function(le){return new(le||he)},he.\u0275prov=Z.Yz7({token:he,factory:he.\u0275fac}),he})();const tt=new Z.OlP("EventManagerPlugins");let Ke=(()=>{class he{constructor(le,ze){this._zone=ze,this._eventNameToPlugin=new Map,le.forEach(ht=>ht.manager=this),this._plugins=le.slice().reverse()}addEventListener(le,ze,ht){return this._findPluginFor(ze).addEventListener(le,ze,ht)}addGlobalEventListener(le,ze,ht){return this._findPluginFor(ze).addGlobalEventListener(le,ze,ht)}getZone(){return this._zone}_findPluginFor(le){const ze=this._eventNameToPlugin.get(le);if(ze)return ze;const ht=this._plugins;for(let Vt=0;Vt<ht.length;Vt++){const Xt=ht[Vt];if(Xt.supports(le))return this._eventNameToPlugin.set(le,Xt),Xt}throw new Error(`No event manager plugin found for event ${le}`)}}return he.\u0275fac=function(le){return new(le||he)(Z.LFG(tt),Z.LFG(Z.R0b))},he.\u0275prov=Z.Yz7({token:he,factory:he.\u0275fac}),he})();class zt{constructor(pe){this._doc=pe}addGlobalEventListener(pe,le,ze){const ht=(0,_.q)().getGlobalEventTarget(this._doc,pe);if(!ht)throw new Error(`Unsupported event target ${ht} for event ${le}`);return this.addEventListener(ht,le,ze)}}let at=(()=>{class he{constructor(){this._stylesSet=new Set}addStyles(le){const ze=new Set;le.forEach(ht=>{this._stylesSet.has(ht)||(this._stylesSet.add(ht),ze.add(ht))}),this.onStylesAdded(ze)}onStylesAdded(le){}getAllStyles(){return Array.from(this._stylesSet)}}return he.\u0275fac=function(le){return new(le||he)},he.\u0275prov=Z.Yz7({token:he,factory:he.\u0275fac}),he})(),nt=(()=>{class he extends at{constructor(le){super(),this._doc=le,this._hostNodes=new Map,this._hostNodes.set(le.head,[])}_addStylesToHost(le,ze,ht){le.forEach(Vt=>{const Xt=this._doc.createElement("style");Xt.textContent=Vt,ht.push(ze.appendChild(Xt))})}addHost(le){const ze=[];this._addStylesToHost(this._stylesSet,le,ze),this._hostNodes.set(le,ze)}removeHost(le){const ze=this._hostNodes.get(le);ze&&ze.forEach(Ne),this._hostNodes.delete(le)}onStylesAdded(le){this._hostNodes.forEach((ze,ht)=>{this._addStylesToHost(le,ht,ze)})}ngOnDestroy(){this._hostNodes.forEach(le=>le.forEach(Ne))}}return he.\u0275fac=function(le){return new(le||he)(Z.LFG(_.K0))},he.\u0275prov=Z.Yz7({token:he,factory:he.\u0275fac}),he})();function Ne(he){(0,_.q)().remove(he)}const Bt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mt=/%COMP%/g;function oe(he,pe,le){for(let ze=0;ze<pe.length;ze++){let ht=pe[ze];Array.isArray(ht)?oe(he,ht,le):(ht=ht.replace(mt,he),le.push(ht))}return le}function Te(he){return pe=>{if("__ngUnwrap__"===pe)return he;!1===he(pe)&&(pe.preventDefault(),pe.returnValue=!1)}}let Be=(()=>{class he{constructor(le,ze,ht){this.eventManager=le,this.sharedStylesHost=ze,this.appId=ht,this.rendererByCompId=new Map,this.defaultRenderer=new Ct(le)}createRenderer(le,ze){if(!le||!ze)return this.defaultRenderer;switch(ze.encapsulation){case Z.ifc.Emulated:{let ht=this.rendererByCompId.get(ze.id);return ht||(ht=new Zt(this.eventManager,this.sharedStylesHost,ze,this.appId),this.rendererByCompId.set(ze.id,ht)),ht.applyToHost(le),ht}case 1:case Z.ifc.ShadowDom:return new lt(this.eventManager,this.sharedStylesHost,le,ze);default:if(!this.rendererByCompId.has(ze.id)){const ht=oe(ze.id,ze.styles,[]);this.sharedStylesHost.addStyles(ht),this.rendererByCompId.set(ze.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return he.\u0275fac=function(le){return new(le||he)(Z.LFG(Ke),Z.LFG(nt),Z.LFG(Z.AFp))},he.\u0275prov=Z.Yz7({token:he,factory:he.\u0275fac}),he})();class Ct{constructor(pe){this.eventManager=pe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(pe,le){return le?document.createElementNS(Bt[le]||le,pe):document.createElement(pe)}createComment(pe){return document.createComment(pe)}createText(pe){return document.createTextNode(pe)}appendChild(pe,le){(Ut(pe)?pe.content:pe).appendChild(le)}insertBefore(pe,le,ze){pe&&(Ut(pe)?pe.content:pe).insertBefore(le,ze)}removeChild(pe,le){pe&&pe.removeChild(le)}selectRootElement(pe,le){let ze="string"==typeof pe?document.querySelector(pe):pe;if(!ze)throw new Error(`The selector "${pe}" did not match any elements`);return le||(ze.textContent=""),ze}parentNode(pe){return pe.parentNode}nextSibling(pe){return pe.nextSibling}setAttribute(pe,le,ze,ht){if(ht){le=ht+":"+le;const Vt=Bt[ht];Vt?pe.setAttributeNS(Vt,le,ze):pe.setAttribute(le,ze)}else pe.setAttribute(le,ze)}removeAttribute(pe,le,ze){if(ze){const ht=Bt[ze];ht?pe.removeAttributeNS(ht,le):pe.removeAttribute(`${ze}:${le}`)}else pe.removeAttribute(le)}addClass(pe,le){pe.classList.add(le)}removeClass(pe,le){pe.classList.remove(le)}setStyle(pe,le,ze,ht){ht&(Z.JOm.DashCase|Z.JOm.Important)?pe.style.setProperty(le,ze,ht&Z.JOm.Important?"important":""):pe.style[le]=ze}removeStyle(pe,le,ze){ze&Z.JOm.DashCase?pe.style.removeProperty(le):pe.style[le]=""}setProperty(pe,le,ze){pe[le]=ze}setValue(pe,le){pe.nodeValue=le}listen(pe,le,ze){return"string"==typeof pe?this.eventManager.addGlobalEventListener(pe,le,Te(ze)):this.eventManager.addEventListener(pe,le,Te(ze))}}function Ut(he){return"TEMPLATE"===he.tagName&&void 0!==he.content}class Zt extends Ct{constructor(pe,le,ze,ht){super(pe),this.component=ze;const Vt=oe(ht+"-"+ze.id,ze.styles,[]);le.addStyles(Vt),this.contentAttr=function P(he){return"_ngcontent-%COMP%".replace(mt,he)}(ht+"-"+ze.id),this.hostAttr=function ve(he){return"_nghost-%COMP%".replace(mt,he)}(ht+"-"+ze.id)}applyToHost(pe){super.setAttribute(pe,this.hostAttr,"")}createElement(pe,le){const ze=super.createElement(pe,le);return super.setAttribute(ze,this.contentAttr,""),ze}}class lt extends Ct{constructor(pe,le,ze,ht){super(pe),this.sharedStylesHost=le,this.hostEl=ze,this.shadowRoot=ze.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Vt=oe(ht.id,ht.styles,[]);for(let Xt=0;Xt<Vt.length;Xt++){const In=document.createElement("style");In.textContent=Vt[Xt],this.shadowRoot.appendChild(In)}}nodeOrShadowRoot(pe){return pe===this.hostEl?this.shadowRoot:pe}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(pe,le){return super.appendChild(this.nodeOrShadowRoot(pe),le)}insertBefore(pe,le,ze){return super.insertBefore(this.nodeOrShadowRoot(pe),le,ze)}removeChild(pe,le){return super.removeChild(this.nodeOrShadowRoot(pe),le)}parentNode(pe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(pe)))}}let Qt=(()=>{class he extends zt{constructor(le){super(le)}supports(le){return!0}addEventListener(le,ze,ht){return le.addEventListener(ze,ht,!1),()=>this.removeEventListener(le,ze,ht)}removeEventListener(le,ze,ht){return le.removeEventListener(ze,ht)}}return he.\u0275fac=function(le){return new(le||he)(Z.LFG(_.K0))},he.\u0275prov=Z.Yz7({token:he,factory:he.\u0275fac}),he})();const sn=["alt","control","meta","shift"],en={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tn={alt:he=>he.altKey,control:he=>he.ctrlKey,meta:he=>he.metaKey,shift:he=>he.shiftKey};let Xn=(()=>{class he extends zt{constructor(le){super(le)}supports(le){return null!=he.parseEventName(le)}addEventListener(le,ze,ht){const Vt=he.parseEventName(ze),Xt=he.eventCallback(Vt.fullKey,ht,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.q)().onAndCancel(le,Vt.domEventName,Xt))}static parseEventName(le){const ze=le.toLowerCase().split("."),ht=ze.shift();if(0===ze.length||"keydown"!==ht&&"keyup"!==ht)return null;const Vt=he._normalizeKey(ze.pop());let Xt="",In=ze.indexOf("code");if(In>-1&&(ze.splice(In,1),Xt="code."),sn.forEach(Pn=>{const un=ze.indexOf(Pn);un>-1&&(ze.splice(un,1),Xt+=Pn+".")}),Xt+=Vt,0!=ze.length||0===Vt.length)return null;const br={};return br.domEventName=ht,br.fullKey=Xt,br}static matchEventFullKeyCode(le,ze){let ht=en[le.key]||le.key,Vt="";return ze.indexOf("code.")>-1&&(ht=le.code,Vt="code."),!(null==ht||!ht)&&(ht=ht.toLowerCase()," "===ht?ht="space":"."===ht&&(ht="dot"),sn.forEach(Xt=>{Xt!==ht&&(0,tn[Xt])(le)&&(Vt+=Xt+".")}),Vt+=ht,Vt===ze)}static eventCallback(le,ze,ht){return Vt=>{he.matchEventFullKeyCode(Vt,le)&&ht.runGuarded(()=>ze(Vt))}}static _normalizeKey(le){return"esc"===le?"escape":le}}return he.\u0275fac=function(le){return new(le||he)(Z.LFG(_.K0))},he.\u0275prov=Z.Yz7({token:he,factory:he.\u0275fac}),he})();const Nn=(0,Z.eFA)(Z._c5,"browser",[{provide:Z.Lbi,useValue:_.bD},{provide:Z.g9A,useValue:function Vn(){Re.makeCurrent()},multi:!0},{provide:_.K0,useFactory:function Ht(){return(0,Z.RDi)(document),document},deps:[]}]),sr=new Z.OlP(""),St=[{provide:Z.rWj,useClass:class me{addToWindow(pe){Z.dqk.getAngularTestability=(ze,ht=!0)=>{const Vt=pe.findTestabilityInTree(ze,ht);if(null==Vt)throw new Error("Could not find testability for element.");return Vt},Z.dqk.getAllAngularTestabilities=()=>pe.getAllTestabilities(),Z.dqk.getAllAngularRootElements=()=>pe.getAllRootElements(),Z.dqk.frameworkStabilizers||(Z.dqk.frameworkStabilizers=[]),Z.dqk.frameworkStabilizers.push(ze=>{const ht=Z.dqk.getAllAngularTestabilities();let Vt=ht.length,Xt=!1;const In=function(br){Xt=Xt||br,Vt--,0==Vt&&ze(Xt)};ht.forEach(function(br){br.whenStable(In)})})}findTestabilityInTree(pe,le,ze){return null==le?null:pe.getTestability(le)??(ze?(0,_.q)().isShadowRoot(le)?this.findTestabilityInTree(pe,le.host,!0):this.findTestabilityInTree(pe,le.parentElement,!0):null)}},deps:[]},{provide:Z.lri,useClass:Z.dDg,deps:[Z.R0b,Z.eoX,Z.rWj]},{provide:Z.dDg,useClass:Z.dDg,deps:[Z.R0b,Z.eoX,Z.rWj]}],or=[{provide:Z.zSh,useValue:"root"},{provide:Z.qLn,useFactory:function Zr(){return new Z.qLn},deps:[]},{provide:tt,useClass:Qt,multi:!0,deps:[_.K0,Z.R0b,Z.Lbi]},{provide:tt,useClass:Xn,multi:!0,deps:[_.K0]},{provide:Be,useClass:Be,deps:[Ke,nt,Z.AFp]},{provide:Z.FYo,useExisting:Be},{provide:at,useExisting:nt},{provide:nt,useClass:nt,deps:[_.K0]},{provide:Ke,useClass:Ke,deps:[tt,Z.R0b]},{provide:_.JF,useClass:it,deps:[]},[]];let Tn=(()=>{class he{constructor(le){}static withServerTransition(le){return{ngModule:he,providers:[{provide:Z.AFp,useValue:le.appId},{provide:He,useExisting:Z.AFp},ie]}}}return he.\u0275fac=function(le){return new(le||he)(Z.LFG(sr,12))},he.\u0275mod=Z.oAB({type:he}),he.\u0275inj=Z.cJS({providers:[...or,...St],imports:[_.ez,Z.hGG]}),he})(),zn=(()=>{class he{constructor(le){this._doc=le}getTitle(){return this._doc.title}setTitle(le){this._doc.title=le||""}}return he.\u0275fac=function(le){return new(le||he)(Z.LFG(_.K0))},he.\u0275prov=Z.Yz7({token:he,factory:function(le){let ze=null;return ze=le?new le:function Yr(){return new zn((0,Z.LFG)(_.K0))}(),ze},providedIn:"root"}),he})();typeof window<"u"&&window},7001:(Kt,qe,H)=>{H.d(qe,{F0:()=>Yi,Od:()=>us,yS:()=>Ma,Bz:()=>Jo,lC:()=>Xr});var _=H(4650),Z=H(8996),q=H(9646),Re=H(7579);class J extends Re.x{constructor(b){super(),this._value=b}get value(){return this.getValue()}_subscribe(b){const I=super._subscribe(b);return!I.closed&&b.next(this._value),I}getValue(){const{hasError:b,thrownError:I,_value:M}=this;if(b)throw I;return this._throwIfClosed(),M}next(b){super.next(this._value=b)}}var Me=H(6805),Le=H(9751),Ve=H(4742),He=H(4671),ae=H(3268),ie=H(7669),me=H(1810),it=H(5403),tt=H(9672);function Ke(...D){const b=(0,ie.yG)(D),I=(0,ie.jO)(D),{args:M,keys:V}=(0,Ve.D)(D);if(0===M.length)return(0,Z.D)([],b);const Y=new Le.y(function zt(D,b,I=He.y){return M=>{at(b,()=>{const{length:V}=D,Y=new Array(V);let ce=V,Ce=V;for(let Ze=0;Ze<V;Ze++)at(b,()=>{const Ft=(0,Z.D)(D[Ze],b);let gn=!1;Ft.subscribe((0,it.x)(M,Nt=>{Y[Ze]=Nt,gn||(gn=!0,Ce--),Ce||M.next(I(Y.slice()))},()=>{--ce||M.complete()}))},M)},M)}}(M,b,V?ce=>(0,me.n)(V,ce):He.y));return I?Y.pipe((0,ae.Z)(I)):Y}function at(D,b,I){D?(0,tt.f)(I,D,b):b()}var nt=H(7272),Ne=H(8421);function Bt(D){return new Le.y(b=>{(0,Ne.Xf)(D()).subscribe(b)})}var mt=H(9635),st=H(576);function Ge(D,b){const I=(0,st.m)(D)?D:()=>D,M=V=>V.error(I());return new Le.y(b?V=>b.schedule(M,0,V):M)}var Mt=H(515),$e=H(727),P=H(4482);function ve(){return(0,P.e)((D,b)=>{let I=null;D._refCount++;const M=(0,it.x)(b,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(I=null);const V=D._connection,Y=I;I=null,V&&(!Y||V===Y)&&V.unsubscribe(),b.unsubscribe()});D.subscribe(M),M.closed||(I=D.connect())})}class oe extends Le.y{constructor(b,I){super(),this.source=b,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,P.A)(b)&&(this.lift=b.lift)}_subscribe(b){return this.getSubject().subscribe(b)}getSubject(){const b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:b}=this;this._subject=this._connection=null,b?.unsubscribe()}connect(){let b=this._connection;if(!b){b=this._connection=new $e.w0;const I=this.getSubject();b.add(this.source.subscribe((0,it.x)(I,void 0,()=>{this._teardown(),I.complete()},M=>{this._teardown(),I.error(M)},()=>this._teardown()))),b.closed&&(this._connection=null,b=$e.w0.EMPTY)}return b}refCount(){return ve()(this)}}var Te=H(6895),Se=H(4004),Be=H(3900),Ct=H(5698),Rt=H(8675),kt=H(9300),Ut=H(5577),Zt=H(590),lt=H(4351),Qt=H(8505);function sn(D){return(0,P.e)((b,I)=>{let Y,M=null,V=!1;M=b.subscribe((0,it.x)(I,void 0,void 0,ce=>{Y=(0,Ne.Xf)(D(ce,sn(D)(b))),M?(M.unsubscribe(),M=null,Y.subscribe(I)):V=!0})),V&&(M.unsubscribe(),M=null,Y.subscribe(I))})}var en=H(5026);function tn(D){return D<=0?()=>Mt.E:(0,P.e)((b,I)=>{let M=[];b.subscribe((0,it.x)(I,V=>{M.push(V),D<M.length&&M.shift()},()=>{for(const V of M)I.next(V);I.complete()},void 0,()=>{M=null}))})}var Xn=H(8068),yn=H(6590);function mn(D,b){const I=arguments.length>=2;return M=>M.pipe(D?(0,kt.h)((V,Y)=>D(V,Y,M)):He.y,tn(1),I?(0,yn.d)(b):(0,Xn.T)(()=>new Me.K))}function wn(D){return(0,P.e)((b,I)=>{try{b.subscribe(I)}finally{I.add(D)}})}var Vn=H(8189),Zr=H(1481);const Ht="primary",pr=Symbol("RouteTitle");class Nn{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const I=this.params[b];return Array.isArray(I)?I[0]:I}return null}getAll(b){if(this.has(b)){const I=this.params[b];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function sr(D){return new Nn(D)}function St(D,b,I){const M=I.path.split("/");if(M.length>D.length||"full"===I.pathMatch&&(b.hasChildren()||M.length<D.length))return null;const V={};for(let Y=0;Y<M.length;Y++){const ce=M[Y],Ce=D[Y];if(ce.startsWith(":"))V[ce.substring(1)]=Ce;else if(ce!==Ce.path)return null}return{consumed:D.slice(0,M.length),posParams:V}}function Tn(D,b){const I=D?Object.keys(D):void 0,M=b?Object.keys(b):void 0;if(!I||!M||I.length!=M.length)return!1;let V;for(let Y=0;Y<I.length;Y++)if(V=I[Y],!cr(D[V],b[V]))return!1;return!0}function cr(D,b){if(Array.isArray(D)&&Array.isArray(b)){if(D.length!==b.length)return!1;const I=[...D].sort(),M=[...b].sort();return I.every((V,Y)=>M[Y]===V)}return D===b}function _i(D){return Array.prototype.concat.apply([],D)}function ur(D){return D.length>0?D[D.length-1]:null}function zn(D,b){for(const I in D)D.hasOwnProperty(I)&&b(D[I],I)}function Bn(D){return(0,_.CqO)(D)?D:(0,_.QGY)(D)?(0,Z.D)(Promise.resolve(D)):(0,q.of)(D)}const gr={exact:function En(D,b,I){if(!De(D.segments,b.segments)||!jn(D.segments,b.segments,I)||D.numberOfChildren!==b.numberOfChildren)return!1;for(const M in b.children)if(!D.children[M]||!En(D.children[M],b.children[M],I))return!1;return!0},subset:Zn},vr={exact:function Mr(D,b){return Tn(D,b)},subset:function Qr(D,b){return Object.keys(b).length<=Object.keys(D).length&&Object.keys(b).every(I=>cr(D[I],b[I]))},ignored:()=>!0};function dr(D,b,I){return gr[I.paths](D.root,b.root,I.matrixParams)&&vr[I.queryParams](D.queryParams,b.queryParams)&&!("exact"===I.fragment&&D.fragment!==b.fragment)}function Zn(D,b,I){return Oi(D,b,b.segments,I)}function Oi(D,b,I,M){if(D.segments.length>I.length){const V=D.segments.slice(0,I.length);return!(!De(V,I)||b.hasChildren()||!jn(V,I,M))}if(D.segments.length===I.length){if(!De(D.segments,I)||!jn(D.segments,I,M))return!1;for(const V in b.children)if(!D.children[V]||!Zn(D.children[V],b.children[V],M))return!1;return!0}{const V=I.slice(0,D.segments.length),Y=I.slice(D.segments.length);return!!(De(D.segments,V)&&jn(D.segments,V,M)&&D.children[Ht])&&Oi(D.children[Ht],b,Y,M)}}function jn(D,b,I){return b.every((M,V)=>vr[I](D[V].parameters,M.parameters))}class xe{constructor(b,I,M){this.root=b,this.queryParams=I,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sr(this.queryParams)),this._queryParamMap}toString(){return lr.serialize(this)}}class fe{constructor(b,I){this.segments=b,this.children=I,this.parent=null,zn(I,(M,V)=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gn(this)}}class Ie{constructor(b,I){this.path=b,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=sr(this.parameters)),this._parameterMap}toString(){return Ln(this)}}function De(D,b){return D.length===b.length&&D.every((I,M)=>I.path===b[M].path)}let Pt=(()=>{class D{}return D.\u0275fac=function(I){return new(I||D)},D.\u0275prov=_.Yz7({token:D,factory:function(){return new qt},providedIn:"root"}),D})();class qt{parse(b){const I=new br(b);return new xe(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(b){const I=`/${Ue(b.root,!0)}`,M=function pe(D){const b=Object.keys(D).map(I=>{const M=D[I];return Array.isArray(M)?M.map(V=>`${_e(I)}=${_e(V)}`).join("&"):`${_e(I)}=${_e(M)}`}).filter(I=>!!I);return b.length?`?${b.join("&")}`:""}(b.queryParams);return`${I}${M}${"string"==typeof b.fragment?`#${function yt(D){return encodeURI(D)}(b.fragment)}`:""}`}}const lr=new qt;function Gn(D){return D.segments.map(b=>Ln(b)).join("/")}function Ue(D,b){if(!D.hasChildren())return Gn(D);if(b){const I=D.children[Ht]?Ue(D.children[Ht],!1):"",M=[];return zn(D.children,(V,Y)=>{Y!==Ht&&M.push(`${Y}:${Ue(V,!1)}`)}),M.length>0?`${I}(${M.join("//")})`:I}{const I=function _t(D,b){let I=[];return zn(D.children,(M,V)=>{V===Ht&&(I=I.concat(b(M,V)))}),zn(D.children,(M,V)=>{V!==Ht&&(I=I.concat(b(M,V)))}),I}(D,(M,V)=>V===Ht?[Ue(D.children[Ht],!1)]:[`${V}:${Ue(M,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[Ht]?`${Gn(D)}/${I[0]}`:`${Gn(D)}/(${I.join("//")})`}}function ye(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _e(D){return ye(D).replace(/%3B/gi,";")}function gt(D){return ye(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function an(D){return decodeURIComponent(D)}function On(D){return an(D.replace(/\+/g,"%20"))}function Ln(D){return`${gt(D.path)}${function he(D){return Object.keys(D).map(b=>`;${gt(b)}=${gt(D[b])}`).join("")}(D.parameters)}`}const le=/^[^\/()?;=#]+/;function ze(D){const b=D.match(le);return b?b[0]:""}const ht=/^[^=?&#]+/,Xt=/^[^&#]+/;class br{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(b.length>0||Object.keys(I).length>0)&&(M[Ht]=new fe(b,I)),M}parseSegment(){const b=ze(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new _.vHH(4009,!1);return this.capture(b),new Ie(an(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const I=ze(this.remaining);if(!I)return;this.capture(I);let M="";if(this.consumeOptional("=")){const V=ze(this.remaining);V&&(M=V,this.capture(M))}b[an(I)]=an(M)}parseQueryParam(b){const I=function Vt(D){const b=D.match(ht);return b?b[0]:""}(this.remaining);if(!I)return;this.capture(I);let M="";if(this.consumeOptional("=")){const ce=function In(D){const b=D.match(Xt);return b?b[0]:""}(this.remaining);ce&&(M=ce,this.capture(M))}const V=On(I),Y=On(M);if(b.hasOwnProperty(V)){let ce=b[V];Array.isArray(ce)||(ce=[ce],b[V]=ce),ce.push(Y)}else b[V]=Y}parseParens(b){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=ze(this.remaining),V=this.remaining[M.length];if("/"!==V&&")"!==V&&";"!==V)throw new _.vHH(4010,!1);let Y;M.indexOf(":")>-1?(Y=M.slice(0,M.indexOf(":")),this.capture(Y),this.capture(":")):b&&(Y=Ht);const ce=this.parseChildren();I[Y]=1===Object.keys(ce).length?ce[Ht]:new fe([],ce),this.consumeOptional("//")}return I}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new _.vHH(4011,!1)}}function Pn(D){return D.segments.length>0?new fe([],{[Ht]:D}):D}function un(D){const b={};for(const M of Object.keys(D.children)){const Y=un(D.children[M]);(Y.segments.length>0||Y.hasChildren())&&(b[M]=Y)}return function wr(D){if(1===D.numberOfChildren&&D.children[Ht]){const b=D.children[Ht];return new fe(D.segments.concat(b.segments),b.children)}return D}(new fe(D.segments,b))}function ri(D){return D instanceof xe}function Rs(D,b,I,M,V){if(0===I.length)return zi(b.root,b.root,b.root,M,V);const Y=function Es(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new $o(!0,0,D);let b=0,I=!1;const M=D.reduce((V,Y,ce)=>{if("object"==typeof Y&&null!=Y){if(Y.outlets){const Ce={};return zn(Y.outlets,(Ze,Ft)=>{Ce[Ft]="string"==typeof Ze?Ze.split("/"):Ze}),[...V,{outlets:Ce}]}if(Y.segmentPath)return[...V,Y.segmentPath]}return"string"!=typeof Y?[...V,Y]:0===ce?(Y.split("/").forEach((Ce,Ze)=>{0==Ze&&"."===Ce||(0==Ze&&""===Ce?I=!0:".."===Ce?b++:""!=Ce&&V.push(Ce))}),V):[...V,Y]},[]);return new $o(I,b,M)}(I);return Y.toRoot()?zi(b.root,b.root,new fe([],{}),M,V):function ce(Ze){const Ft=function Ki(D,b,I,M){if(D.isAbsolute)return new di(b.root,!0,0);if(-1===M)return new di(I,I===b.root,0);return function fs(D,b,I){let M=D,V=b,Y=I;for(;Y>V;){if(Y-=V,M=M.parent,!M)throw new _.vHH(4005,!1);V=M.segments.length}return new di(M,!1,V-Y)}(I,M+(ii(D.commands[0])?0:1),D.numberOfDoubleDots)}(Y,b,D.snapshot?._urlSegment,Ze),gn=Ft.processChildren?qi(Ft.segmentGroup,Ft.index,Y.commands):Vr(Ft.segmentGroup,Ft.index,Y.commands);return zi(b.root,Ft.segmentGroup,gn,M,V)}(D.snapshot?._lastPathIndex)}function ii(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function Tr(D){return"object"==typeof D&&null!=D&&D.outlets}function zi(D,b,I,M,V){let ce,Y={};M&&zn(M,(Ze,Ft)=>{Y[Ft]=Array.isArray(Ze)?Ze.map(gn=>`${gn}`):`${Ze}`}),ce=D===b?I:Sr(D,b,I);const Ce=Pn(un(ce));return new xe(Ce,Y,V)}function Sr(D,b,I){const M={};return zn(D.children,(V,Y)=>{M[Y]=V===b?I:Sr(V,b,I)}),new fe(D.segments,M)}class $o{constructor(b,I,M){if(this.isAbsolute=b,this.numberOfDoubleDots=I,this.commands=M,b&&M.length>0&&ii(M[0]))throw new _.vHH(4003,!1);const V=M.find(Tr);if(V&&V!==ur(M))throw new _.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class di{constructor(b,I,M){this.segmentGroup=b,this.processChildren=I,this.index=M}}function Vr(D,b,I){if(D||(D=new fe([],{})),0===D.segments.length&&D.hasChildren())return qi(D,b,I);const M=function Jr(D,b,I){let M=0,V=b;const Y={match:!1,pathIndex:0,commandIndex:0};for(;V<D.segments.length;){if(M>=I.length)return Y;const ce=D.segments[V],Ce=I[M];if(Tr(Ce))break;const Ze=`${Ce}`,Ft=M<I.length-1?I[M+1]:null;if(V>0&&void 0===Ze)break;if(Ze&&Ft&&"object"==typeof Ft&&void 0===Ft.outlets){if(!ca(Ze,Ft,ce))return Y;M+=2}else{if(!ca(Ze,{},ce))return Y;M++}V++}return{match:!0,pathIndex:V,commandIndex:M}}(D,b,I),V=I.slice(M.commandIndex);if(M.match&&M.pathIndex<D.segments.length){const Y=new fe(D.segments.slice(0,M.pathIndex),{});return Y.children[Ht]=new fe(D.segments.slice(M.pathIndex),D.children),qi(Y,0,V)}return M.match&&0===V.length?new fe(D.segments,{}):M.match&&!D.hasChildren()?Di(D,b,I):M.match?qi(D,0,V):Di(D,b,I)}function qi(D,b,I){if(0===I.length)return new fe(D.segments,{});{const M=function Ns(D){return Tr(D[0])?D[0].outlets:{[Ht]:D}}(I),V={};return zn(M,(Y,ce)=>{"string"==typeof Y&&(Y=[Y]),null!==Y&&(V[ce]=Vr(D.children[ce],b,Y))}),zn(D.children,(Y,ce)=>{void 0===M[ce]&&(V[ce]=Y)}),new fe(D.segments,V)}}function Di(D,b,I){const M=D.segments.slice(0,b);let V=0;for(;V<I.length;){const Y=I[V];if(Tr(Y)){const Ze=Os(Y.outlets);return new fe(M,Ze)}if(0===V&&ii(I[0])){M.push(new Ie(D.segments[b].path,Ks(I[0]))),V++;continue}const ce=Tr(Y)?Y.outlets[Ht]:`${Y}`,Ce=V<I.length-1?I[V+1]:null;ce&&Ce&&ii(Ce)?(M.push(new Ie(ce,Ks(Ce))),V+=2):(M.push(new Ie(ce,{})),V++)}return new fe(M,{})}function Os(D){const b={};return zn(D,(I,M)=>{"string"==typeof I&&(I=[I]),null!==I&&(b[M]=Di(new fe([],{}),0,I))}),b}function Ks(D){const b={};return zn(D,(I,M)=>b[M]=`${I}`),b}function ca(D,b,I){return D==I.path&&Tn(b,I.parameters)}class Rr{constructor(b,I){this.id=b,this.url=I}}class xo extends Rr{constructor(b,I,M="imperative",V=null){super(b,I),this.type=0,this.navigationTrigger=M,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class no extends Rr{constructor(b,I,M){super(b,I),this.urlAfterRedirects=M,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qs extends Rr{constructor(b,I,M,V){super(b,I),this.reason=M,this.code=V,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Go extends Rr{constructor(b,I,M,V){super(b,I),this.error=M,this.target=V,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Mo extends Rr{constructor(b,I,M,V){super(b,I),this.urlAfterRedirects=M,this.state=V,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vi extends Rr{constructor(b,I,M,V){super(b,I),this.urlAfterRedirects=M,this.state=V,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fe extends Rr{constructor(b,I,M,V,Y){super(b,I),this.urlAfterRedirects=M,this.state=V,this.shouldActivate=Y,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ke extends Rr{constructor(b,I,M,V){super(b,I),this.urlAfterRedirects=M,this.state=V,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class We extends Rr{constructor(b,I,M,V){super(b,I),this.urlAfterRedirects=M,this.state=V,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rt{constructor(b){this.route=b,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vt{constructor(b){this.route=b,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class At{constructor(b){this.snapshot=b,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xn{constructor(b){this.snapshot=b,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kn{constructor(b){this.snapshot=b,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mr{constructor(b){this.snapshot=b,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ts{constructor(b,I,M){this.routerEvent=b,this.position=I,this.anchor=M,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ro{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const I=this.pathFromRoot(b);return I.length>1?I[I.length-2]:null}children(b){const I=rr(b,this._root);return I?I.children.map(M=>M.value):[]}firstChild(b){const I=rr(b,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(b){const I=Sn(b,this._root);return I.length<2?[]:I[I.length-2].children.map(V=>V.value).filter(V=>V!==b)}pathFromRoot(b){return Sn(b,this._root).map(I=>I.value)}}function rr(D,b){if(D===b.value)return b;for(const I of b.children){const M=rr(D,I);if(M)return M}return null}function Sn(D,b){if(D===b.value)return[b];for(const I of b.children){const M=Sn(D,I);if(M.length)return M.unshift(b),M}return[]}class Pr{constructor(b,I){this.value=b,this.children=I}toString(){return`TreeNode(${this.value})`}}function gs(D){const b={};return D&&D.children.forEach(I=>b[I.value.outlet]=I),b}class Wo extends ro{constructor(b,I){super(b),this.snapshot=I,No(this,b)}toString(){return this.snapshot.toString()}}function hi(D,b){const I=function ns(D,b){const ce=new ji([],{},{},"",{},Ht,b,null,D.root,-1,{});return new yo("",new Pr(ce,[]))}(D,b),M=new J([new Ie("",{})]),V=new J({}),Y=new J({}),ce=new J({}),Ce=new J(""),Ze=new xi(M,V,ce,Ce,Y,Ht,b,I.root);return Ze.snapshot=I.root,new Wo(new Pr(Ze,[]),I)}class xi{constructor(b,I,M,V,Y,ce,Ce,Ze){this.url=b,this.params=I,this.queryParams=M,this.fragment=V,this.data=Y,this.outlet=ce,this.component=Ce,this.title=this.data?.pipe((0,Se.U)(Ft=>Ft[pr]))??(0,q.of)(void 0),this._futureSnapshot=Ze}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Se.U)(b=>sr(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Se.U)(b=>sr(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Cs(D,b="emptyOnly"){const I=D.pathFromRoot;let M=0;if("always"!==b)for(M=I.length-1;M>=1;){const V=I[M],Y=I[M-1];if(V.routeConfig&&""===V.routeConfig.path)M--;else{if(Y.component)break;M--}}return function Ro(D){return D.reduce((b,I)=>({params:{...b.params,...I.params},data:{...b.data,...I.data},resolve:{...I.data,...b.resolve,...I.routeConfig?.data,...I._resolvedData}}),{params:{},data:{},resolve:{}})}(I.slice(M))}class ji{constructor(b,I,M,V,Y,ce,Ce,Ze,Ft,gn,Nt,fr){this.url=b,this.params=I,this.queryParams=M,this.fragment=V,this.data=Y,this.outlet=ce,this.component=Ce,this.title=this.data?.[pr],this.routeConfig=Ze,this._urlSegment=Ft,this._lastPathIndex=gn,this._correctedLastPathIndex=fr??gn,this._resolve=Nt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class yo extends ro{constructor(b,I){super(I),this.url=b,No(this,I)}toString(){return Ds(this._root)}}function No(D,b){b.value._routerState=D,b.children.forEach(I=>No(D,I))}function Ds(D){const b=D.children.length>0?` { ${D.children.map(Ds).join(", ")} } `:"";return`${D.value}${b}`}function ms(D){if(D.snapshot){const b=D.snapshot,I=D._futureSnapshot;D.snapshot=I,Tn(b.queryParams,I.queryParams)||D.queryParams.next(I.queryParams),b.fragment!==I.fragment&&D.fragment.next(I.fragment),Tn(b.params,I.params)||D.params.next(I.params),function or(D,b){if(D.length!==b.length)return!1;for(let I=0;I<D.length;++I)if(!Tn(D[I],b[I]))return!1;return!0}(b.url,I.url)||D.url.next(I.url),Tn(b.data,I.data)||D.data.next(I.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function Mi(D,b){const I=Tn(D.params,b.params)&&function Ae(D,b){return De(D,b)&&D.every((I,M)=>Tn(I.parameters,b[M].parameters))}(D.url,b.url);return I&&!(!D.parent!=!b.parent)&&(!D.parent||Mi(D.parent,b.parent))}function Ri(D,b,I){if(I&&D.shouldReuseRoute(b.value,I.value.snapshot)){const M=I.value;M._futureSnapshot=b.value;const V=function da(D,b,I){return b.children.map(M=>{for(const V of I.children)if(D.shouldReuseRoute(M.value,V.value.snapshot))return Ri(D,M,V);return Ri(D,M)})}(D,b,I);return new Pr(M,V)}{if(D.shouldAttach(b.value)){const Y=D.retrieve(b.value);if(null!==Y){const ce=Y.route;return ce.value._futureSnapshot=b.value,ce.children=b.children.map(Ce=>Ri(D,Ce)),ce}}const M=function wi(D){return new xi(new J(D.url),new J(D.params),new J(D.queryParams),new J(D.fragment),new J(D.data),D.outlet,D.component,D)}(b.value),V=b.children.map(Y=>Ri(D,Y));return new Pr(M,V)}}const qn="ngNavigationCancelingError";function Zs(D,b){const{redirectTo:I,navigationBehaviorOptions:M}=ri(b)?{redirectTo:b,navigationBehaviorOptions:void 0}:b,V=$r(!1,0,b);return V.url=I,V.navigationBehaviorOptions=M,V}function $r(D,b,I){const M=new Error("NavigationCancelingError: "+(D||""));return M[qn]=!0,M.cancellationCode=b,I&&(M.url=I),M}function rs(D){return bs(D)&&ri(D.url)}function bs(D){return D&&D[qn]}class Hi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new hr,this.attachRef=null}}let hr=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(I,M){const V=this.getOrCreateContext(I);V.outlet=M,this.contexts.set(I,V)}onChildOutletDestroyed(I){const M=this.getContext(I);M&&(M.outlet=null,M.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let M=this.getContext(I);return M||(M=new Hi,this.contexts.set(I,M)),M}getContext(I){return this.contexts.get(I)||null}}return D.\u0275fac=function(I){return new(I||D)},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const Ei=!1;let Xr=(()=>{class D{constructor(I,M,V,Y,ce){this.parentContexts=I,this.location=M,this.changeDetector=Y,this.environmentInjector=ce,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=V||Ht,I.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const I=this.parentContexts.getContext(this.name);I&&I.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.vHH(4012,Ei);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.vHH(4012,Ei);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.vHH(4012,Ei);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,M){this.activated=I,this._activatedRoute=M,this.location.insert(I.hostView),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,M){if(this.isActivated)throw new _.vHH(4013,Ei);this._activatedRoute=I;const V=this.location,ce=I._futureSnapshot.component,Ce=this.parentContexts.getOrCreateContext(this.name).children,Ze=new ys(I,Ce,V.injector);if(M&&function ir(D){return!!D.resolveComponentFactory}(M)){const Ft=M.resolveComponentFactory(ce);this.activated=V.createComponent(Ft,V.length,Ze)}else this.activated=V.createComponent(ce,{index:V.length,injector:Ze,environmentInjector:M??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(I){return new(I||D)(_.Y36(hr),_.Y36(_.s_b),_.$8M("name"),_.Y36(_.sBO),_.Y36(_.lqb))},D.\u0275dir=_.lG2({type:D,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),D})();class ys{constructor(b,I,M){this.route=b,this.childContexts=I,this.parent=M}get(b,I){return b===xi?this.route:b===hr?this.childContexts:this.parent.get(b,I)}}let Ps=(()=>{class D{}return D.\u0275fac=function(I){return new(I||D)},D.\u0275cmp=_.Xpm({type:D,selectors:[["ng-component"]],standalone:!0,features:[_.jDz],decls:1,vars:0,template:function(I,M){1&I&&_._UZ(0,"router-outlet")},dependencies:[Xr],encapsulation:2}),D})();function xr(D,b){return D.providers&&!D._injector&&(D._injector=(0,_.MMx)(D.providers,b,`Route: ${D.path}`)),D._injector??b}function Po(D){const b=D.children&&D.children.map(Po),I=b?{...D,children:b}:{...D};return!I.component&&!I.loadComponent&&(b||I.loadChildren)&&I.outlet&&I.outlet!==Ht&&(I.component=Ps),I}function tr(D){return D.outlet||Ht}function ks(D,b){const I=D.filter(M=>tr(M)===b);return I.push(...D.filter(M=>tr(M)!==b)),I}function Ys(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let b=D.parent;b;b=b.parent){const I=b.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class It{constructor(b,I,M,V){this.routeReuseStrategy=b,this.futureState=I,this.currState=M,this.forwardEvent=V}activate(b){const I=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,M,b),ms(this.futureState.root),this.activateChildRoutes(I,M,b)}deactivateChildRoutes(b,I,M){const V=gs(I);b.children.forEach(Y=>{const ce=Y.value.outlet;this.deactivateRoutes(Y,V[ce],M),delete V[ce]}),zn(V,(Y,ce)=>{this.deactivateRouteAndItsChildren(Y,M)})}deactivateRoutes(b,I,M){const V=b.value,Y=I?I.value:null;if(V===Y)if(V.component){const ce=M.getContext(V.outlet);ce&&this.deactivateChildRoutes(b,I,ce.children)}else this.deactivateChildRoutes(b,I,M);else Y&&this.deactivateRouteAndItsChildren(I,M)}deactivateRouteAndItsChildren(b,I){b.value.component&&this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,I):this.deactivateRouteAndOutlet(b,I)}detachAndStoreRouteSubtree(b,I){const M=I.getContext(b.value.outlet),V=M&&b.value.component?M.children:I,Y=gs(b);for(const ce of Object.keys(Y))this.deactivateRouteAndItsChildren(Y[ce],V);if(M&&M.outlet){const ce=M.outlet.detach(),Ce=M.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:ce,route:b,contexts:Ce})}}deactivateRouteAndOutlet(b,I){const M=I.getContext(b.value.outlet),V=M&&b.value.component?M.children:I,Y=gs(b);for(const ce of Object.keys(Y))this.deactivateRouteAndItsChildren(Y[ce],V);M&&M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated(),M.attachRef=null,M.resolver=null,M.route=null)}activateChildRoutes(b,I,M){const V=gs(I);b.children.forEach(Y=>{this.activateRoutes(Y,V[Y.value.outlet],M),this.forwardEvent(new mr(Y.value.snapshot))}),b.children.length&&this.forwardEvent(new xn(b.value.snapshot))}activateRoutes(b,I,M){const V=b.value,Y=I?I.value:null;if(ms(V),V===Y)if(V.component){const ce=M.getOrCreateContext(V.outlet);this.activateChildRoutes(b,I,ce.children)}else this.activateChildRoutes(b,I,M);else if(V.component){const ce=M.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const Ce=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),ce.children.onOutletReAttached(Ce.contexts),ce.attachRef=Ce.componentRef,ce.route=Ce.route.value,ce.outlet&&ce.outlet.attach(Ce.componentRef,Ce.route.value),ms(Ce.route.value),this.activateChildRoutes(b,null,ce.children)}else{const Ce=Ys(V.snapshot),Ze=Ce?.get(_._Vd)??null;ce.attachRef=null,ce.route=V,ce.resolver=Ze,ce.injector=Ce,ce.outlet&&ce.outlet.activateWith(V,ce.injector),this.activateChildRoutes(b,null,ce.children)}}else this.activateChildRoutes(b,null,M)}}class Wn{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class $i{constructor(b,I){this.component=b,this.route=I}}function _s(D,b,I){const M=D._root;return os(M,b?b._root:null,I,[M.value])}function _o(D,b){const I=Symbol(),M=b.get(D,I);return M===I?"function"!=typeof D||(0,_.Z0I)(D)?b.get(D):D:M}function os(D,b,I,M,V={canDeactivateChecks:[],canActivateChecks:[]}){const Y=gs(b);return D.children.forEach(ce=>{(function Fs(D,b,I,M,V={canDeactivateChecks:[],canActivateChecks:[]}){const Y=D.value,ce=b?b.value:null,Ce=I?I.getContext(D.value.outlet):null;if(ce&&Y.routeConfig===ce.routeConfig){const Ze=function Ur(D,b,I){if("function"==typeof I)return I(D,b);switch(I){case"pathParamsChange":return!De(D.url,b.url);case"pathParamsOrQueryParamsChange":return!De(D.url,b.url)||!Tn(D.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mi(D,b)||!Tn(D.queryParams,b.queryParams);default:return!Mi(D,b)}}(ce,Y,Y.routeConfig.runGuardsAndResolvers);Ze?V.canActivateChecks.push(new Wn(M)):(Y.data=ce.data,Y._resolvedData=ce._resolvedData),os(D,b,Y.component?Ce?Ce.children:null:I,M,V),Ze&&Ce&&Ce.outlet&&Ce.outlet.isActivated&&V.canDeactivateChecks.push(new $i(Ce.outlet.component,ce))}else ce&&Ls(b,Ce,V),V.canActivateChecks.push(new Wn(M)),os(D,null,Y.component?Ce?Ce.children:null:I,M,V)})(ce,Y[ce.value.outlet],I,M.concat([ce.value]),V),delete Y[ce.value.outlet]}),zn(Y,(ce,Ce)=>Ls(ce,I.getContext(Ce),V)),V}function Ls(D,b,I){const M=gs(D),V=D.value;zn(M,(Y,ce)=>{Ls(Y,V.component?b?b.children.getContext(ce):null:b,I)}),I.canDeactivateChecks.push(new $i(V.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,V))}function vo(D){return"function"==typeof D}function ki(D){return D instanceof Me.K||"EmptyError"===D?.name}const fi=Symbol("INITIAL_VALUE");function Gi(){return(0,Be.w)(D=>Ke(D.map(b=>b.pipe((0,Ct.q)(1),(0,Rt.O)(fi)))).pipe((0,Se.U)(b=>{for(const I of b)if(!0!==I){if(I===fi)return fi;if(!1===I||I instanceof xe)return I}return!0}),(0,kt.h)(b=>b!==fi),(0,Ct.q)(1)))}function Sa(D){return(0,mt.z)((0,Qt.b)(b=>{if(ri(b))throw Zs(0,b)}),(0,Se.U)(b=>!0===b))}const R={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function z(D,b,I,M,V){const Y=F(D,b,I);return Y.matched?function eu(D,b,I,M){const V=b.canMatch;if(!V||0===V.length)return(0,q.of)(!0);const Y=V.map(ce=>{const Ce=_o(ce,D);return Bn(function ct(D){return D&&vo(D.canMatch)}(Ce)?Ce.canMatch(b,I):D.runInContext(()=>Ce(b,I)))});return(0,q.of)(Y).pipe(Gi(),Sa())}(M=xr(b,M),b,I).pipe((0,Se.U)(ce=>!0===ce?Y:{...R})):(0,q.of)(Y)}function F(D,b,I){if(""===b.path)return"full"===b.pathMatch&&(D.hasChildren()||I.length>0)?{...R}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const V=(b.matcher||St)(I,D,b);if(!V)return{...R};const Y={};zn(V.posParams,(Ce,Ze)=>{Y[Ze]=Ce.path});const ce=V.consumed.length>0?{...Y,...V.consumed[V.consumed.length-1].parameters}:Y;return{matched:!0,consumedSegments:V.consumed,remainingSegments:I.slice(V.consumed.length),parameters:ce,positionalParamSegments:V.posParams??{}}}function X(D,b,I,M,V="corrected"){if(I.length>0&&function pt(D,b,I){return I.some(M=>Yn(D,b,M)&&tr(M)!==Ht)}(D,I,M)){const ce=new fe(b,function Qe(D,b,I,M){const V={};V[Ht]=M,M._sourceSegment=D,M._segmentIndexShift=b.length;for(const Y of I)if(""===Y.path&&tr(Y)!==Ht){const ce=new fe([],{});ce._sourceSegment=D,ce._segmentIndexShift=b.length,V[tr(Y)]=ce}return V}(D,b,M,new fe(I,D.children)));return ce._sourceSegment=D,ce._segmentIndexShift=b.length,{segmentGroup:ce,slicedSegments:[]}}if(0===I.length&&function nn(D,b,I){return I.some(M=>Yn(D,b,M))}(D,I,M)){const ce=new fe(D.segments,function Ee(D,b,I,M,V,Y){const ce={};for(const Ce of M)if(Yn(D,I,Ce)&&!V[tr(Ce)]){const Ze=new fe([],{});Ze._sourceSegment=D,Ze._segmentIndexShift="legacy"===Y?D.segments.length:b.length,ce[tr(Ce)]=Ze}return{...V,...ce}}(D,b,I,M,D.children,V));return ce._sourceSegment=D,ce._segmentIndexShift=b.length,{segmentGroup:ce,slicedSegments:I}}const Y=new fe(D.segments,D.children);return Y._sourceSegment=D,Y._segmentIndexShift=b.length,{segmentGroup:Y,slicedSegments:I}}function Yn(D,b,I){return(!(D.hasChildren()||b.length>0)||"full"!==I.pathMatch)&&""===I.path}function Ar(D,b,I,M){return!!(tr(D)===M||M!==Ht&&Yn(b,I,D))&&("**"===D.path||F(b,D,I).matched)}function _r(D,b,I){return 0===b.length&&!D.children[I]}const nr=!1;class bi{constructor(b){this.segmentGroup=b||null}}class kr{constructor(b){this.urlTree=b}}function Gr(D){return Ge(new bi(D))}function ko(D){return Ge(new kr(D))}class Bs{constructor(b,I,M,V,Y){this.injector=b,this.configLoader=I,this.urlSerializer=M,this.urlTree=V,this.config=Y,this.allowRedirects=!0}apply(){const b=X(this.urlTree.root,[],[],this.config).segmentGroup,I=new fe(b.segments,b.children);return this.expandSegmentGroup(this.injector,this.config,I,Ht).pipe((0,Se.U)(Y=>this.createUrlTree(un(Y),this.urlTree.queryParams,this.urlTree.fragment))).pipe(sn(Y=>{if(Y instanceof kr)return this.allowRedirects=!1,this.match(Y.urlTree);throw Y instanceof bi?this.noMatchError(Y):Y}))}match(b){return this.expandSegmentGroup(this.injector,this.config,b.root,Ht).pipe((0,Se.U)(V=>this.createUrlTree(un(V),b.queryParams,b.fragment))).pipe(sn(V=>{throw V instanceof bi?this.noMatchError(V):V}))}noMatchError(b){return new _.vHH(4002,nr)}createUrlTree(b,I,M){const V=Pn(b);return new xe(V,I,M)}expandSegmentGroup(b,I,M,V){return 0===M.segments.length&&M.hasChildren()?this.expandChildren(b,I,M).pipe((0,Se.U)(Y=>new fe([],Y))):this.expandSegment(b,M,I,M.segments,V,!0)}expandChildren(b,I,M){const V=[];for(const Y of Object.keys(M.children))"primary"===Y?V.unshift(Y):V.push(Y);return(0,Z.D)(V).pipe((0,lt.b)(Y=>{const ce=M.children[Y],Ce=ks(I,Y);return this.expandSegmentGroup(b,Ce,ce,Y).pipe((0,Se.U)(Ze=>({segment:Ze,outlet:Y})))}),(0,en.R)((Y,ce)=>(Y[ce.outlet]=ce.segment,Y),{}),mn())}expandSegment(b,I,M,V,Y,ce){return(0,Z.D)(M).pipe((0,lt.b)(Ce=>this.expandSegmentAgainstRoute(b,I,M,Ce,V,Y,ce).pipe(sn(Ft=>{if(Ft instanceof bi)return(0,q.of)(null);throw Ft}))),(0,Zt.P)(Ce=>!!Ce),sn((Ce,Ze)=>{if(ki(Ce))return _r(I,V,Y)?(0,q.of)(new fe([],{})):Gr(I);throw Ce}))}expandSegmentAgainstRoute(b,I,M,V,Y,ce,Ce){return Ar(V,I,Y,ce)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(b,I,V,Y,ce):Ce&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,I,M,V,Y,ce):Gr(I):Gr(I)}expandSegmentAgainstRouteUsingRedirect(b,I,M,V,Y,ce){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,M,V,ce):this.expandRegularSegmentAgainstRouteUsingRedirect(b,I,M,V,Y,ce)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,I,M,V){const Y=this.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?ko(Y):this.lineralizeSegments(M,Y).pipe((0,Ut.z)(ce=>{const Ce=new fe(ce,{});return this.expandSegment(b,Ce,I,ce,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,I,M,V,Y,ce){const{matched:Ce,consumedSegments:Ze,remainingSegments:Ft,positionalParamSegments:gn}=F(I,V,Y);if(!Ce)return Gr(I);const Nt=this.applyRedirectCommands(Ze,V.redirectTo,gn);return V.redirectTo.startsWith("/")?ko(Nt):this.lineralizeSegments(V,Nt).pipe((0,Ut.z)(fr=>this.expandSegment(b,I,M,fr.concat(Ft),ce,!1)))}matchSegmentAgainstRoute(b,I,M,V,Y){return"**"===M.path?(b=xr(M,b),M.loadChildren?(M._loadedRoutes?(0,q.of)({routes:M._loadedRoutes,injector:M._loadedInjector}):this.configLoader.loadChildren(b,M)).pipe((0,Se.U)(Ce=>(M._loadedRoutes=Ce.routes,M._loadedInjector=Ce.injector,new fe(V,{})))):(0,q.of)(new fe(V,{}))):z(I,M,V,b).pipe((0,Be.w)(({matched:ce,consumedSegments:Ce,remainingSegments:Ze})=>ce?this.getChildConfig(b=M._injector??b,M,V).pipe((0,Ut.z)(gn=>{const Nt=gn.injector??b,fr=gn.routes,{segmentGroup:Li,slicedSegments:Ci}=X(I,Ce,Ze,fr),Ts=new fe(Li.segments,Li.children);if(0===Ci.length&&Ts.hasChildren())return this.expandChildren(Nt,fr,Ts).pipe((0,Se.U)(jr=>new fe(Ce,jr)));if(0===fr.length&&0===Ci.length)return(0,q.of)(new fe(Ce,{}));const Fr=tr(M)===Y;return this.expandSegment(Nt,Ts,fr,Ci,Fr?Ht:Y,!0).pipe((0,Se.U)(Ji=>new fe(Ce.concat(Ji.segments),Ji.children)))})):Gr(I)))}getChildConfig(b,I,M){return I.children?(0,q.of)({routes:I.children,injector:b}):I.loadChildren?void 0!==I._loadedRoutes?(0,q.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function du(D,b,I,M){const V=b.canLoad;if(void 0===V||0===V.length)return(0,q.of)(!0);const Y=V.map(ce=>{const Ce=_o(ce,D);return Bn(function j(D){return D&&vo(D.canLoad)}(Ce)?Ce.canLoad(b,I):D.runInContext(()=>Ce(b,I)))});return(0,q.of)(Y).pipe(Gi(),Sa())}(b,I,M).pipe((0,Ut.z)(V=>V?this.configLoader.loadChildren(b,I).pipe((0,Qt.b)(Y=>{I._loadedRoutes=Y.routes,I._loadedInjector=Y.injector})):function si(D){return Ge($r(nr,3))}())):(0,q.of)({routes:[],injector:b})}lineralizeSegments(b,I){let M=[],V=I.root;for(;;){if(M=M.concat(V.segments),0===V.numberOfChildren)return(0,q.of)(M);if(V.numberOfChildren>1||!V.children[Ht])return Ge(new _.vHH(4e3,nr));V=V.children[Ht]}}applyRedirectCommands(b,I,M){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),b,M)}applyRedirectCreateUrlTree(b,I,M,V){const Y=this.createSegmentGroup(b,I.root,M,V);return new xe(Y,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(b,I){const M={};return zn(b,(V,Y)=>{if("string"==typeof V&&V.startsWith(":")){const Ce=V.substring(1);M[Y]=I[Ce]}else M[Y]=V}),M}createSegmentGroup(b,I,M,V){const Y=this.createSegments(b,I.segments,M,V);let ce={};return zn(I.children,(Ce,Ze)=>{ce[Ze]=this.createSegmentGroup(b,Ce,M,V)}),new fe(Y,ce)}createSegments(b,I,M,V){return I.map(Y=>Y.path.startsWith(":")?this.findPosParam(b,Y,V):this.findOrReturn(Y,M))}findPosParam(b,I,M){const V=M[I.path.substring(1)];if(!V)throw new _.vHH(4001,nr);return V}findOrReturn(b,I){let M=0;for(const V of I){if(V.path===b.path)return I.splice(M),V;M++}return b}}class ma{}class ya{constructor(b,I,M,V,Y,ce,Ce,Ze){this.injector=b,this.rootComponentType=I,this.config=M,this.urlTree=V,this.url=Y,this.paramsInheritanceStrategy=ce,this.relativeLinkResolution=Ce,this.urlSerializer=Ze}recognize(){const b=X(this.urlTree.root,[],[],this.config.filter(I=>void 0===I.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,b,Ht).pipe((0,Se.U)(I=>{if(null===I)return null;const M=new ji([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ht,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new Pr(M,I),Y=new yo(this.url,V);return this.inheritParamsAndData(Y._root),Y}))}inheritParamsAndData(b){const I=b.value,M=Cs(I,this.paramsInheritanceStrategy);I.params=Object.freeze(M.params),I.data=Object.freeze(M.data),b.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(b,I,M,V){return 0===M.segments.length&&M.hasChildren()?this.processChildren(b,I,M):this.processSegment(b,I,M,M.segments,V)}processChildren(b,I,M){return(0,Z.D)(Object.keys(M.children)).pipe((0,lt.b)(V=>{const Y=M.children[V],ce=ks(I,V);return this.processSegmentGroup(b,ce,Y,V)}),(0,en.R)((V,Y)=>V&&Y?(V.push(...Y),V):null),function ci(D,b=!1){return(0,P.e)((I,M)=>{let V=0;I.subscribe((0,it.x)(M,Y=>{const ce=D(Y,V++);(ce||b)&&M.next(Y),!ce&&M.complete()}))})}(V=>null!==V),(0,yn.d)(null),mn(),(0,Se.U)(V=>{if(null===V)return null;const Y=tu(V);return function Ba(D){D.sort((b,I)=>b.value.outlet===Ht?-1:I.value.outlet===Ht?1:b.value.outlet.localeCompare(I.value.outlet))}(Y),Y}))}processSegment(b,I,M,V,Y){return(0,Z.D)(I).pipe((0,lt.b)(ce=>this.processSegmentAgainstRoute(ce._injector??b,ce,M,V,Y)),(0,Zt.P)(ce=>!!ce),sn(ce=>{if(ki(ce))return _r(M,V,Y)?(0,q.of)([]):(0,q.of)(null);throw ce}))}processSegmentAgainstRoute(b,I,M,V,Y){if(I.redirectTo||!Ar(I,M,V,Y))return(0,q.of)(null);let ce;if("**"===I.path){const Ce=V.length>0?ur(V).parameters:{},Ze=Fi(M)+V.length,Ft=new ji(V,Ce,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ja(I),tr(I),I.component??I._loadedComponent??null,I,qo(M),Ze,qr(I),Ze);ce=(0,q.of)({snapshot:Ft,consumedSegments:[],remainingSegments:[]})}else ce=z(M,I,V,b).pipe((0,Se.U)(({matched:Ce,consumedSegments:Ze,remainingSegments:Ft,parameters:gn})=>{if(!Ce)return null;const Nt=Fi(M)+Ze.length;return{snapshot:new ji(Ze,gn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ja(I),tr(I),I.component??I._loadedComponent??null,I,qo(M),Nt,qr(I),Nt),consumedSegments:Ze,remainingSegments:Ft}}));return ce.pipe((0,Be.w)(Ce=>{if(null===Ce)return(0,q.of)(null);const{snapshot:Ze,consumedSegments:Ft,remainingSegments:gn}=Ce;b=I._injector??b;const Nt=I._loadedInjector??b,fr=function Wu(D){return D.children?D.children:D.loadChildren?D._loadedRoutes:[]}(I),{segmentGroup:Li,slicedSegments:Ci}=X(M,Ft,gn,fr.filter(Fr=>void 0===Fr.redirectTo),this.relativeLinkResolution);if(0===Ci.length&&Li.hasChildren())return this.processChildren(Nt,fr,Li).pipe((0,Se.U)(Fr=>null===Fr?null:[new Pr(Ze,Fr)]));if(0===fr.length&&0===Ci.length)return(0,q.of)([new Pr(Ze,[])]);const Ts=tr(I)===Y;return this.processSegment(Nt,fr,Li,Ci,Ts?Ht:Y).pipe((0,Se.U)(Fr=>null===Fr?null:[new Pr(Ze,Fr)]))}))}}function _a(D){const b=D.value.routeConfig;return b&&""===b.path&&void 0===b.redirectTo}function tu(D){const b=[],I=new Set;for(const M of D){if(!_a(M)){b.push(M);continue}const V=b.find(Y=>M.value.routeConfig===Y.value.routeConfig);void 0!==V?(V.children.push(...M.children),I.add(V)):b.push(M)}for(const M of I){const V=tu(M.children);b.push(new Pr(M.value,V))}return b.filter(M=>!I.has(M))}function qo(D){let b=D;for(;b._sourceSegment;)b=b._sourceSegment;return b}function Fi(D){let b=D,I=b._segmentIndexShift??0;for(;b._sourceSegment;)b=b._sourceSegment,I+=b._segmentIndexShift??0;return I-1}function ja(D){return D.data||{}}function qr(D){return D.resolve||{}}function ru(D){return"string"==typeof D.title||null===D.title}function gi(D){return(0,Be.w)(b=>{const I=D(b);return I?(0,Z.D)(I).pipe((0,Se.U)(()=>b)):(0,q.of)(b)})}let Zi=(()=>{class D{buildTitle(I){let M,V=I.root;for(;void 0!==V;)M=this.getResolvedTitleForRoute(V)??M,V=V.children.find(Y=>Y.outlet===Ht);return M}getResolvedTitleForRoute(I){return I.data[pr]}}return D.\u0275fac=function(I){return new(I||D)},D.\u0275prov=_.Yz7({token:D,factory:function(){return(0,_.f3M)(Ha)},providedIn:"root"}),D})(),Ha=(()=>{class D extends Zi{constructor(I){super(),this.title=I}updateTitle(I){const M=this.buildTitle(I);void 0!==M&&this.title.setTitle(M)}}return D.\u0275fac=function(I){return new(I||D)(_.LFG(Zr.Dx))},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class Eo{}class $a extends class $s{shouldDetach(b){return!1}store(b,I){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,I){return b.routeConfig===I.routeConfig}}{}const Ot=new _.OlP("",{providedIn:"root",factory:()=>({})}),Fo=new _.OlP("ROUTES");let Io=(()=>{class D{constructor(I,M){this.injector=I,this.compiler=M,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,q.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const M=Bn(I.loadComponent()).pipe((0,Qt.b)(Y=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=Y}),wn(()=>{this.componentLoaders.delete(I)})),V=new oe(M,()=>new Re.x).pipe(ve());return this.componentLoaders.set(I,V),V}loadChildren(I,M){if(this.childrenLoaders.get(M))return this.childrenLoaders.get(M);if(M._loadedRoutes)return(0,q.of)({routes:M._loadedRoutes,injector:M._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(M);const Y=this.loadModuleFactoryOrRoutes(M.loadChildren).pipe((0,Se.U)(Ce=>{this.onLoadEndListener&&this.onLoadEndListener(M);let Ze,Ft,gn=!1;Array.isArray(Ce)?Ft=Ce:(Ze=Ce.create(I).injector,Ft=_i(Ze.get(Fo,[],_.XFs.Self|_.XFs.Optional)));return{routes:Ft.map(Po),injector:Ze}}),wn(()=>{this.childrenLoaders.delete(M)})),ce=new oe(Y,()=>new Re.x).pipe(ve());return this.childrenLoaders.set(M,ce),ce}loadModuleFactoryOrRoutes(I){return Bn(I()).pipe((0,Ut.z)(M=>M instanceof _.YKP||Array.isArray(M)?(0,q.of)(M):(0,Z.D)(this.compiler.compileModuleAsync(M))))}}return D.\u0275fac=function(I){return new(I||D)(_.LFG(_.zs3),_.LFG(_.Sil))},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class cn{}class Un{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,I){return b}}function Gt(D){throw D}function ot(D,b,I){return b.parse("/")}const xt={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ti={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function zu(){const D=(0,_.f3M)(Pt),b=(0,_.f3M)(hr),I=(0,_.f3M)(Te.Ye),M=(0,_.f3M)(_.zs3),V=(0,_.f3M)(_.Sil),Y=(0,_.f3M)(Fo,{optional:!0})??[],ce=(0,_.f3M)(Ot,{optional:!0})??{},Ce=(0,_.f3M)(Ha),Ze=(0,_.f3M)(Zi,{optional:!0}),Ft=(0,_.f3M)(cn,{optional:!0}),gn=(0,_.f3M)(Eo,{optional:!0}),Nt=new Yi(null,D,b,I,M,V,_i(Y));return Ft&&(Nt.urlHandlingStrategy=Ft),gn&&(Nt.routeReuseStrategy=gn),Nt.titleStrategy=Ze??Ce,function Ea(D,b){D.errorHandler&&(b.errorHandler=D.errorHandler),D.malformedUriErrorHandler&&(b.malformedUriErrorHandler=D.malformedUriErrorHandler),D.onSameUrlNavigation&&(b.onSameUrlNavigation=D.onSameUrlNavigation),D.paramsInheritanceStrategy&&(b.paramsInheritanceStrategy=D.paramsInheritanceStrategy),D.relativeLinkResolution&&(b.relativeLinkResolution=D.relativeLinkResolution),D.urlUpdateStrategy&&(b.urlUpdateStrategy=D.urlUpdateStrategy),D.canceledNavigationResolution&&(b.canceledNavigationResolution=D.canceledNavigationResolution)}(ce,Nt),Nt}let Yi=(()=>{class D{constructor(I,M,V,Y,ce,Ce,Ze){this.rootComponentType=I,this.urlSerializer=M,this.rootContexts=V,this.location=Y,this.config=Ze,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Re.x,this.errorHandler=Gt,this.malformedUriErrorHandler=ot,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,q.of)(void 0),this.urlHandlingStrategy=new Un,this.routeReuseStrategy=new $a,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ce.get(Io),this.configLoader.onLoadEndListener=fr=>this.triggerEvent(new vt(fr)),this.configLoader.onLoadStartListener=fr=>this.triggerEvent(new rt(fr)),this.ngModule=ce.get(_.h0i),this.console=ce.get(_.c2e);const Nt=ce.get(_.R0b);this.isNgZoneEnabled=Nt instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(Ze),this.currentUrlTree=function on(){return new xe(new fe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=hi(this.currentUrlTree,this.rootComponentType),this.transitions=new J({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(I){const M=this.events;return I.pipe((0,kt.h)(V=>0!==V.id),(0,Se.U)(V=>({...V,extractedUrl:this.urlHandlingStrategy.extract(V.rawUrl)})),(0,Be.w)(V=>{let Y=!1,ce=!1;return(0,q.of)(V).pipe((0,Qt.b)(Ce=>{this.currentNavigation={id:Ce.id,initialUrl:Ce.rawUrl,extractedUrl:Ce.extractedUrl,trigger:Ce.source,extras:Ce.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Be.w)(Ce=>{const Ze=this.browserUrlTree.toString(),Ft=!this.navigated||Ce.extractedUrl.toString()!==Ze||Ze!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ft)&&this.urlHandlingStrategy.shouldProcessUrl(Ce.rawUrl))return Yo(Ce.source)&&(this.browserUrlTree=Ce.extractedUrl),(0,q.of)(Ce).pipe((0,Be.w)(Nt=>{const fr=this.transitions.getValue();return M.next(new xo(Nt.id,this.serializeUrl(Nt.extractedUrl),Nt.source,Nt.restoredState)),fr!==this.transitions.getValue()?Mt.E:Promise.resolve(Nt)}),function js(D,b,I,M){return(0,Be.w)(V=>function wo(D,b,I,M,V){return new Bs(D,b,I,M,V).apply()}(D,b,I,V.extractedUrl,M).pipe((0,Se.U)(Y=>({...V,urlAfterRedirects:Y}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qt.b)(Nt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Nt.urlAfterRedirects},V.urlAfterRedirects=Nt.urlAfterRedirects}),function nu(D,b,I,M,V,Y){return(0,Ut.z)(ce=>function Ko(D,b,I,M,V,Y,ce="emptyOnly",Ce="legacy"){return new ya(D,b,I,M,V,ce,Ce,Y).recognize().pipe((0,Be.w)(Ze=>null===Ze?function Wr(D){return new Le.y(b=>b.error(D))}(new ma):(0,q.of)(Ze)))}(D,b,I,ce.urlAfterRedirects,M.serialize(ce.urlAfterRedirects),M,V,Y).pipe((0,Se.U)(Ce=>({...ce,targetSnapshot:Ce}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qt.b)(Nt=>{if(V.targetSnapshot=Nt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Nt.extras.skipLocationChange){const Li=this.urlHandlingStrategy.merge(Nt.urlAfterRedirects,Nt.rawUrl);this.setBrowserUrl(Li,Nt)}this.browserUrlTree=Nt.urlAfterRedirects}const fr=new Mo(Nt.id,this.serializeUrl(Nt.extractedUrl),this.serializeUrl(Nt.urlAfterRedirects),Nt.targetSnapshot);M.next(fr)}));if(Ft&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:fr,extractedUrl:Li,source:Ci,restoredState:Ts,extras:Fr}=Ce,ea=new xo(fr,this.serializeUrl(Li),Ci,Ts);M.next(ea);const Ji=hi(Li,this.rootComponentType).snapshot;return V={...Ce,targetSnapshot:Ji,urlAfterRedirects:Li,extras:{...Fr,skipLocationChange:!1,replaceUrl:!1}},(0,q.of)(V)}return this.rawUrlTree=Ce.rawUrl,Ce.resolve(null),Mt.E}),(0,Qt.b)(Ce=>{const Ze=new vi(Ce.id,this.serializeUrl(Ce.extractedUrl),this.serializeUrl(Ce.urlAfterRedirects),Ce.targetSnapshot);this.triggerEvent(Ze)}),(0,Se.U)(Ce=>V={...Ce,guards:_s(Ce.targetSnapshot,Ce.currentSnapshot,this.rootContexts)}),function Vs(D,b){return(0,Ut.z)(I=>{const{targetSnapshot:M,currentSnapshot:V,guards:{canActivateChecks:Y,canDeactivateChecks:ce}}=I;return 0===ce.length&&0===Y.length?(0,q.of)({...I,guardsResult:!0}):function Qs(D,b,I,M){return(0,Z.D)(D).pipe((0,Ut.z)(V=>function Xa(D,b,I,M,V){const Y=b&&b.routeConfig?b.routeConfig.canDeactivate:null;if(!Y||0===Y.length)return(0,q.of)(!0);const ce=Y.map(Ce=>{const Ze=Ys(b)??V,Ft=_o(Ce,Ze);return Bn(function ne(D){return D&&vo(D.canDeactivate)}(Ft)?Ft.canDeactivate(D,b,I,M):Ze.runInContext(()=>Ft(D,b,I,M))).pipe((0,Zt.P)())});return(0,q.of)(ce).pipe(Gi())}(V.component,V.route,I,b,M)),(0,Zt.P)(V=>!0!==V,!0))}(ce,M,V,D).pipe((0,Ut.z)(Ce=>Ce&&function zo(D){return"boolean"==typeof D}(Ce)?function Us(D,b,I,M){return(0,Z.D)(b).pipe((0,lt.b)(V=>(0,nt.z)(function pi(D,b){return null!==D&&b&&b(new At(D)),(0,q.of)(!0)}(V.route.parent,M),function pa(D,b){return null!==D&&b&&b(new Kn(D)),(0,q.of)(!0)}(V.route,M),function Ja(D,b,I){const M=b[b.length-1],Y=b.slice(0,b.length-1).reverse().map(ce=>function pn(D){const b=D.routeConfig?D.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:D,guards:b}:null}(ce)).filter(ce=>null!==ce).map(ce=>Bt(()=>{const Ce=ce.guards.map(Ze=>{const Ft=Ys(ce.node)??I,gn=_o(Ze,Ft);return Bn(function O(D){return D&&vo(D.canActivateChild)}(gn)?gn.canActivateChild(M,D):Ft.runInContext(()=>gn(M,D))).pipe((0,Zt.P)())});return(0,q.of)(Ce).pipe(Gi())}));return(0,q.of)(Y).pipe(Gi())}(D,V.path,I),function ga(D,b,I){const M=b.routeConfig?b.routeConfig.canActivate:null;if(!M||0===M.length)return(0,q.of)(!0);const V=M.map(Y=>Bt(()=>{const ce=Ys(b)??I,Ce=_o(Y,ce);return Bn(function L(D){return D&&vo(D.canActivate)}(Ce)?Ce.canActivate(b,D):ce.runInContext(()=>Ce(b,D))).pipe((0,Zt.P)())}));return(0,q.of)(V).pipe(Gi())}(D,V.route,I))),(0,Zt.P)(V=>!0!==V,!0))}(M,Y,D,b):(0,q.of)(Ce)),(0,Se.U)(Ce=>({...I,guardsResult:Ce})))})}(this.ngModule.injector,Ce=>this.triggerEvent(Ce)),(0,Qt.b)(Ce=>{if(V.guardsResult=Ce.guardsResult,ri(Ce.guardsResult))throw Zs(0,Ce.guardsResult);const Ze=new Fe(Ce.id,this.serializeUrl(Ce.extractedUrl),this.serializeUrl(Ce.urlAfterRedirects),Ce.targetSnapshot,!!Ce.guardsResult);this.triggerEvent(Ze)}),(0,kt.h)(Ce=>!!Ce.guardsResult||(this.restoreHistory(Ce),this.cancelNavigationTransition(Ce,"",3),!1)),gi(Ce=>{if(Ce.guards.canActivateChecks.length)return(0,q.of)(Ce).pipe((0,Qt.b)(Ze=>{const Ft=new ke(Ze.id,this.serializeUrl(Ze.extractedUrl),this.serializeUrl(Ze.urlAfterRedirects),Ze.targetSnapshot);this.triggerEvent(Ft)}),(0,Be.w)(Ze=>{let Ft=!1;return(0,q.of)(Ze).pipe(function fu(D,b){return(0,Ut.z)(I=>{const{targetSnapshot:M,guards:{canActivateChecks:V}}=I;if(!V.length)return(0,q.of)(I);let Y=0;return(0,Z.D)(V).pipe((0,lt.b)(ce=>function Er(D,b,I,M){const V=D.routeConfig,Y=D._resolve;return void 0!==V?.title&&!ru(V)&&(Y[pr]=V.title),function Hs(D,b,I,M){const V=function Au(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===V.length)return(0,q.of)({});const Y={};return(0,Z.D)(V).pipe((0,Ut.z)(ce=>function va(D,b,I,M){const V=Ys(b)??M,Y=_o(D,V);return Bn(Y.resolve?Y.resolve(b,I):V.runInContext(()=>Y(b,I)))}(D[ce],b,I,M).pipe((0,Zt.P)(),(0,Qt.b)(Ce=>{Y[ce]=Ce}))),tn(1),function Dr(D){return(0,Se.U)(()=>D)}(Y),sn(ce=>ki(ce)?Mt.E:Ge(ce)))}(Y,D,b,M).pipe((0,Se.U)(ce=>(D._resolvedData=ce,D.data=Cs(D,I).resolve,V&&ru(V)&&(D.data[pr]=V.title),null)))}(ce.route,M,D,b)),(0,Qt.b)(()=>Y++),tn(1),(0,Ut.z)(ce=>Y===V.length?(0,q.of)(I):Mt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qt.b)({next:()=>Ft=!0,complete:()=>{Ft||(this.restoreHistory(Ze),this.cancelNavigationTransition(Ze,"",2))}}))}),(0,Qt.b)(Ze=>{const Ft=new We(Ze.id,this.serializeUrl(Ze.extractedUrl),this.serializeUrl(Ze.urlAfterRedirects),Ze.targetSnapshot);this.triggerEvent(Ft)}))}),gi(Ce=>{const Ze=Ft=>{const gn=[];Ft.routeConfig?.loadComponent&&!Ft.routeConfig._loadedComponent&&gn.push(this.configLoader.loadComponent(Ft.routeConfig).pipe((0,Qt.b)(Nt=>{Ft.component=Nt}),(0,Se.U)(()=>{})));for(const Nt of Ft.children)gn.push(...Ze(Nt));return gn};return Ke(Ze(Ce.targetSnapshot.root)).pipe((0,yn.d)(),(0,Ct.q)(1))}),gi(()=>this.afterPreactivation()),(0,Se.U)(Ce=>{const Ze=function Pi(D,b,I){const M=Ri(D,b._root,I?I._root:void 0);return new Wo(M,b)}(this.routeReuseStrategy,Ce.targetSnapshot,Ce.currentRouterState);return V={...Ce,targetRouterState:Ze}}),(0,Qt.b)(Ce=>{this.currentUrlTree=Ce.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ce.urlAfterRedirects,Ce.rawUrl),this.routerState=Ce.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ce.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ce),this.browserUrlTree=Ce.urlAfterRedirects)}),((D,b,I)=>(0,Se.U)(M=>(new It(b,M.targetRouterState,M.currentRouterState,I).activate(D),M)))(this.rootContexts,this.routeReuseStrategy,Ce=>this.triggerEvent(Ce)),(0,Qt.b)({next(){Y=!0},complete(){Y=!0}}),wn(()=>{Y||ce||this.cancelNavigationTransition(V,"",1),this.currentNavigation?.id===V.id&&(this.currentNavigation=null)}),sn(Ce=>{if(ce=!0,bs(Ce)){rs(Ce)||(this.navigated=!0,this.restoreHistory(V,!0));const Ze=new qs(V.id,this.serializeUrl(V.extractedUrl),Ce.message,Ce.cancellationCode);if(M.next(Ze),rs(Ce)){const Ft=this.urlHandlingStrategy.merge(Ce.url,this.rawUrlTree),gn={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Yo(V.source)};this.scheduleNavigation(Ft,"imperative",null,gn,{resolve:V.resolve,reject:V.reject,promise:V.promise})}else V.resolve(!1)}else{this.restoreHistory(V,!0);const Ze=new Go(V.id,this.serializeUrl(V.extractedUrl),Ce,V.targetSnapshot??void 0);M.next(Ze);try{V.resolve(this.errorHandler(Ce))}catch(Ft){V.reject(Ft)}}return Mt.E}))}))}resetRootComponentType(I){this.rootComponentType=I,this.routerState.root.component=this.rootComponentType}setTransition(I){this.transitions.next({...this.transitions.value,...I})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const M="popstate"===I.type?"popstate":"hashchange";"popstate"===M&&setTimeout(()=>{const V={replaceUrl:!0},Y=I.state?.navigationId?I.state:null;if(Y){const Ce={...Y};delete Ce.navigationId,delete Ce.\u0275routerPageId,0!==Object.keys(Ce).length&&(V.state=Ce)}const ce=this.parseUrl(I.url);this.scheduleNavigation(ce,M,Y,V)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(I){this.events.next(I)}resetConfig(I){this.config=I.map(Po),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,M={}){const{relativeTo:V,queryParams:Y,fragment:ce,queryParamsHandling:Ce,preserveFragment:Ze}=M,Ft=V||this.routerState.root,gn=Ze?this.currentUrlTree.fragment:ce;let Nt=null;switch(Ce){case"merge":Nt={...this.currentUrlTree.queryParams,...Y};break;case"preserve":Nt=this.currentUrlTree.queryParams;break;default:Nt=Y||null}return null!==Nt&&(Nt=this.removeEmptyProps(Nt)),Rs(Ft,this.currentUrlTree,I,Nt,gn??null)}navigateByUrl(I,M={skipLocationChange:!1}){const V=ri(I)?I:this.parseUrl(I),Y=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(Y,"imperative",null,M)}navigate(I,M={skipLocationChange:!1}){return function xu(D){for(let b=0;b<D.length;b++){if(null==D[b])throw new _.vHH(4008,false)}}(I),this.navigateByUrl(this.createUrlTree(I,M),M)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let M;try{M=this.urlSerializer.parse(I)}catch(V){M=this.malformedUriErrorHandler(V,this.urlSerializer,I)}return M}isActive(I,M){let V;if(V=!0===M?{...xt}:!1===M?{...Ti}:M,ri(I))return dr(this.currentUrlTree,I,V);const Y=this.parseUrl(I);return dr(this.currentUrlTree,Y,V)}removeEmptyProps(I){return Object.keys(I).reduce((M,V)=>{const Y=I[V];return null!=Y&&(M[V]=Y),M},{})}processNavigations(){this.navigations.subscribe(I=>{this.navigated=!0,this.lastSuccessfulId=I.id,this.currentPageId=I.targetPageId,this.events.next(new no(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),I.resolve(!0)},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}scheduleNavigation(I,M,V,Y,ce){if(this.disposed)return Promise.resolve(!1);let Ce,Ze,Ft;ce?(Ce=ce.resolve,Ze=ce.reject,Ft=ce.promise):Ft=new Promise((fr,Li)=>{Ce=fr,Ze=Li});const gn=++this.navigationId;let Nt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(V=this.location.getState()),Nt=V&&V.\u0275routerPageId?V.\u0275routerPageId:Y.replaceUrl||Y.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Nt=0,this.setTransition({id:gn,targetPageId:Nt,source:M,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:I,extras:Y,resolve:Ce,reject:Ze,promise:Ft,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ft.catch(fr=>Promise.reject(fr))}setBrowserUrl(I,M){const V=this.urlSerializer.serialize(I),Y={...M.extras.state,...this.generateNgRouterState(M.id,M.targetPageId)};this.location.isCurrentPathEqualTo(V)||M.extras.replaceUrl?this.location.replaceState(V,"",Y):this.location.go(V,"",Y)}restoreHistory(I,M=!1){if("computed"===this.canceledNavigationResolution){const V=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===V?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===V&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(V)}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(I,M,V){const Y=new qs(I.id,this.serializeUrl(I.extractedUrl),M,V);this.triggerEvent(Y),I.resolve(!1)}generateNgRouterState(I,M){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:M}:{navigationId:I}}}return D.\u0275fac=function(I){_.$Z()},D.\u0275prov=_.Yz7({token:D,factory:function(){return zu()},providedIn:"root"}),D})();function Yo(D){return"imperative"!==D}let xa=(()=>{class D{constructor(I,M,V,Y,ce){this.router=I,this.route=M,this.tabIndexAttribute=V,this.renderer=Y,this.el=ce,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Re.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(I){this._preserveFragment=(0,_.D6c)(I)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(I){this._skipLocationChange=(0,_.D6c)(I)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(I){this._replaceUrl=(0,_.D6c)(I)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(I){if(null!=this.tabIndexAttribute)return;const M=this.renderer,V=this.el.nativeElement;null!==I?M.setAttribute(V,"tabindex",I):M.removeAttribute(V,"tabindex")}ngOnChanges(I){this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(I){return new(I||D)(_.Y36(Yi),_.Y36(xi),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq))},D.\u0275dir=_.lG2({type:D,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(I,M){1&I&&_.NdJ("click",function(){return M.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[_.TTD]}),D})(),Ma=(()=>{class D{constructor(I,M,V){this.router=I,this.route=M,this.locationStrategy=V,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Re.x,this.subscription=I.events.subscribe(Y=>{Y instanceof no&&this.updateTargetUrlAndHref()})}set preserveFragment(I){this._preserveFragment=(0,_.D6c)(I)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(I){this._skipLocationChange=(0,_.D6c)(I)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(I){this._replaceUrl=(0,_.D6c)(I)}get replaceUrl(){return this._replaceUrl}set routerLink(I){this.commands=null!=I?Array.isArray(I)?I:[I]:null}ngOnChanges(I){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(I,M,V,Y,ce){return!!(0!==I||M||V||Y||ce||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(I){return new(I||D)(_.Y36(Yi),_.Y36(xi),_.Y36(Te.S$))},D.\u0275dir=_.lG2({type:D,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(I,M){1&I&&_.NdJ("click",function(Y){return M.onClick(Y.button,Y.ctrlKey,Y.shiftKey,Y.altKey,Y.metaKey)}),2&I&&_.uIk("target",M.target)("href",M.href,_.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[_.TTD]}),D})(),us=(()=>{class D{constructor(I,M,V,Y,ce,Ce){this.router=I,this.element=M,this.renderer=V,this.cdr=Y,this.link=ce,this.linkWithHref=Ce,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new _.vpe,this.routerEventsSubscription=I.events.subscribe(Ze=>{Ze instanceof no&&this.update()})}ngAfterContentInit(){(0,q.of)(this.links.changes,this.linksWithHrefs.changes,(0,q.of)(null)).pipe((0,Vn.J)()).subscribe(I=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const I=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(M=>!!M).map(M=>M.onChanges);this.linkInputChangesSubscription=(0,Z.D)(I).pipe((0,Vn.J)()).subscribe(M=>{this.isActive!==this.isLinkActive(this.router)(M)&&this.update()})}set routerLinkActive(I){const M=Array.isArray(I)?I:I.split(" ");this.classes=M.filter(V=>!!V)}ngOnChanges(I){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const I=this.hasActiveLinks();this.isActive!==I&&(this.isActive=I,this.cdr.markForCheck(),this.classes.forEach(M=>{I?this.renderer.addClass(this.element.nativeElement,M):this.renderer.removeClass(this.element.nativeElement,M)}),I&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(I))})}isLinkActive(I){const M=function Ra(D){return!!D.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return V=>!!V.urlTree&&I.isActive(V.urlTree,M)}hasActiveLinks(){const I=this.isLinkActive(this.router);return this.link&&I(this.link)||this.linkWithHref&&I(this.linkWithHref)||this.links.some(I)||this.linksWithHrefs.some(I)}}return D.\u0275fac=function(I){return new(I||D)(_.Y36(Yi),_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(_.sBO),_.Y36(xa,8),_.Y36(Ma,8))},D.\u0275dir=_.lG2({type:D,selectors:[["","routerLinkActive",""]],contentQueries:function(I,M,V){if(1&I&&(_.Suo(V,xa,5),_.Suo(V,Ma,5)),2&I){let Y;_.iGM(Y=_.CRH())&&(M.links=Y),_.iGM(Y=_.CRH())&&(M.linksWithHrefs=Y)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[_.TTD]}),D})();class Qo{}let Co=(()=>{class D{constructor(I,M,V,Y,ce){this.router=I,this.injector=V,this.preloadingStrategy=Y,this.loader=ce}setUpPreloading(){this.subscription=this.router.events.pipe((0,kt.h)(I=>I instanceof no),(0,lt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,M){const V=[];for(const Y of M){Y.providers&&!Y._injector&&(Y._injector=(0,_.MMx)(Y.providers,I,`Route: ${Y.path}`));const ce=Y._injector??I,Ce=Y._loadedInjector??ce;Y.loadChildren&&!Y._loadedRoutes&&void 0===Y.canLoad||Y.loadComponent&&!Y._loadedComponent?V.push(this.preloadConfig(ce,Y)):(Y.children||Y._loadedRoutes)&&V.push(this.processRoutes(Ce,Y.children??Y._loadedRoutes))}return(0,Z.D)(V).pipe((0,Vn.J)())}preloadConfig(I,M){return this.preloadingStrategy.preload(M,()=>{let V;V=M.loadChildren&&void 0===M.canLoad?this.loader.loadChildren(I,M):(0,q.of)(null);const Y=V.pipe((0,Ut.z)(ce=>null===ce?(0,q.of)(void 0):(M._loadedRoutes=ce.routes,M._loadedInjector=ce.injector,this.processRoutes(ce.injector??I,ce.routes))));if(M.loadComponent&&!M._loadedComponent){const ce=this.loader.loadComponent(M);return(0,Z.D)([Y,ce]).pipe((0,Vn.J)())}return Y})}}return D.\u0275fac=function(I){return new(I||D)(_.LFG(Yi),_.LFG(_.Sil),_.LFG(_.lqb),_.LFG(Qo),_.LFG(Io))},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const Lo=new _.OlP("");let Br=(()=>{class D{constructor(I,M,V={}){this.router=I,this.viewportScroller=M,this.options=V,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},V.scrollPositionRestoration=V.scrollPositionRestoration||"disabled",V.anchorScrolling=V.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(I=>{I instanceof xo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof no&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.router.parseUrl(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(I=>{I instanceof ts&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,M){this.router.triggerEvent(new ts(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return D.\u0275fac=function(I){_.$Z()},D.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac}),D})();function iu(D,b){return{\u0275kind:D,\u0275providers:b}}function Si(D){return[{provide:Fo,multi:!0,useValue:D}]}function Ia(){const D=(0,_.f3M)(_.zs3);return b=>{const I=D.get(_.z2F);if(b!==I.components[0])return;const M=D.get(Yi),V=D.get(Mu);1===D.get(so)&&M.initialNavigation(),D.get(Na,null,_.XFs.Optional)?.setUpPreloading(),D.get(Lo,null,_.XFs.Optional)?.init(),M.resetRootComponentType(I.componentTypes[0]),V.next(),V.complete()}}const Mu=new _.OlP("",{factory:()=>new Re.x}),so=new _.OlP("",{providedIn:"root",factory:()=>1});const Na=new _.OlP("");function Wa(D){return iu(0,[{provide:Na,useExisting:Co},{provide:Qo,useExisting:D}])}const oo=new _.OlP("ROUTER_FORROOT_GUARD"),Zu=[Te.Ye,{provide:Pt,useClass:qt},{provide:Yi,useFactory:zu},hr,{provide:xi,useFactory:function Or(D){return D.routerState.root},deps:[Yi]},Io];function Xs(){return new _.PXZ("Router",Yi)}let Jo=(()=>{class D{constructor(I){}static forRoot(I,M){return{ngModule:D,providers:[Zu,[],Si(I),{provide:oo,useFactory:pu,deps:[[Yi,new _.FiY,new _.tp0]]},{provide:Ot,useValue:M||{}},M?.useHash?{provide:Te.S$,useClass:Te.Do}:{provide:Te.S$,useClass:Te.b0},{provide:Lo,useFactory:()=>{const D=(0,_.f3M)(Yi),b=(0,_.f3M)(Te.EM),I=(0,_.f3M)(Ot);return I.scrollOffset&&b.setOffset(I.scrollOffset),new Br(D,b,I)}},M?.preloadingStrategy?Wa(M.preloadingStrategy).\u0275providers:[],{provide:_.PXZ,multi:!0,useFactory:Xs},M?.initialNavigation?uo(M):[],[{provide:lo,useFactory:Ia},{provide:_.tb,multi:!0,useExisting:lo}]]}}static forChild(I){return{ngModule:D,providers:[Si(I)]}}}return D.\u0275fac=function(I){return new(I||D)(_.LFG(oo,8))},D.\u0275mod=_.oAB({type:D}),D.\u0275inj=_.cJS({imports:[Ps]}),D})();function pu(D){return"guarded"}function uo(D){return["disabled"===D.initialNavigation?iu(3,[{provide:_.ip1,multi:!0,useFactory:()=>{const b=(0,_.f3M)(Yi);return()=>{b.setUpLocationChangeListener()}}},{provide:so,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?iu(2,[{provide:so,useValue:0},{provide:_.ip1,multi:!0,deps:[_.zs3],useFactory:b=>{const I=b.get(Te.V_,Promise.resolve());let M=!1;return()=>I.then(()=>new Promise(Y=>{const ce=b.get(Yi),Ce=b.get(Mu);(function V(Y){b.get(Yi).events.pipe((0,kt.h)(Ce=>Ce instanceof no||Ce instanceof qs||Ce instanceof Go),(0,Se.U)(Ce=>Ce instanceof no||Ce instanceof qs&&(0===Ce.code||1===Ce.code)&&null),(0,kt.h)(Ce=>null!==Ce),(0,Ct.q)(1)).subscribe(()=>{Y()})})(()=>{Y(!0),M=!0}),ce.afterPreactivation=()=>(Y(!0),M||Ce.closed?(0,q.of)(void 0):Ce),ce.initialNavigation()}))}}]).\u0275providers:[]]}const lo=new _.OlP("")},3942:(Kt,qe,H)=>{H.d(qe,{Z:()=>Ke});var _=H(2090),Z=H(4859),q=H(9681),Re=H(1877);class J{constructor(at,nt){this._delegate=at,this.firebase=nt,(0,q._addComponent)(at,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=at.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(at){this._delegate.automaticDataCollectionEnabled=at}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(at=>{this._delegate.checkDestroyed(),at()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,q.deleteApp)(this._delegate)))}_getService(at,nt=q._DEFAULT_ENTRY_NAME){var Ne;this._delegate.checkDestroyed();const Bt=this._delegate.container.getProvider(at);return!Bt.isInitialized()&&"EXPLICIT"===(null===(Ne=Bt.getComponent())||void 0===Ne?void 0:Ne.instantiationMode)&&Bt.initialize(),Bt.getImmediate({identifier:nt})}_removeServiceInstance(at,nt=q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(at).clearInstance(nt)}_addComponent(at){(0,q._addComponent)(this._delegate,at)}_addOrOverwriteComponent(at){(0,q._addOrOverwriteComponent)(this._delegate,at)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Le=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ae=function He(){const zt=function Ve(zt){const at={},nt={__esModule:!0,initializeApp:function mt($e,P={}){const ve=q.initializeApp($e,P);if((0,_.r3)(at,ve.name))return at[ve.name];const oe=new zt(ve,nt);return at[ve.name]=oe,oe},app:Bt,registerVersion:q.registerVersion,setLogLevel:q.setLogLevel,onLog:q.onLog,apps:null,SDK_VERSION:q.SDK_VERSION,INTERNAL:{registerComponent:function Ge($e){const P=$e.name,ve=P.replace("-compat","");if(q._registerComponent($e)&&"PUBLIC"===$e.type){const oe=(Te=Bt())=>{if("function"!=typeof Te[ve])throw Le.create("invalid-app-argument",{appName:P});return Te[ve]()};void 0!==$e.serviceProps&&(0,_.ZB)(oe,$e.serviceProps),nt[ve]=oe,zt.prototype[ve]=function(...Te){return this._getService.bind(this,P).apply(this,$e.multipleInstances?Te:[])}}return"PUBLIC"===$e.type?nt[ve]:null},removeApp:function Ne($e){delete at[$e]},useAsService:function Mt($e,P){return"serverAuth"===P?null:P},modularAPIs:q}};function Bt($e){if(!(0,_.r3)(at,$e=$e||q._DEFAULT_ENTRY_NAME))throw Le.create("no-app",{appName:$e});return at[$e]}return nt.default=nt,Object.defineProperty(nt,"apps",{get:function st(){return Object.keys(at).map($e=>at[$e])}}),Bt.App=zt,nt}(J);return zt.INTERNAL=Object.assign(Object.assign({},zt.INTERNAL),{createFirebaseNamespace:He,extendNamespace:function at(nt){(0,_.ZB)(zt,nt)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),zt}(),ie=new Re.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const zt=self.firebase.SDK_VERSION;zt&&zt.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=ae;!function tt(zt){(0,q.registerVersion)("@firebase/app-compat","0.1.33",zt)}()},9681:(Kt,qe,H)=>{H.r(qe),H.d(qe,{FirebaseError:()=>Re.ZR,SDK_VERSION:()=>Zr,_DEFAULT_ENTRY_NAME:()=>Zt,_addComponent:()=>en,_addOrOverwriteComponent:()=>tn,_apps:()=>Qt,_clearComponents:()=>ci,_components:()=>sn,_getProvider:()=>yn,_registerComponent:()=>Xn,_removeServiceInstance:()=>mn,deleteApp:()=>sr,getApp:()=>pr,getApps:()=>Nn,initializeApp:()=>Ht,onLog:()=>Tn,registerVersion:()=>or,setLogLevel:()=>cr});var _=H(5861),Z=H(4859),q=H(1877),Re=H(2090),J=H(8766);class Me{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(De=>{if(function Le(Ie){return"VERSION"===Ie.getComponent()?.type}(De)){const _t=De.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(De=>De).join(" ")}}const Ve="@firebase/app",ae=new q.Yd("@firebase/app"),Zt="[DEFAULT]",lt={[Ve]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qt=new Map,sn=new Map;function en(Ie,Ae){try{Ie.container.addComponent(Ae)}catch(De){ae.debug(`Component ${Ae.name} failed to register with FirebaseApp ${Ie.name}`,De)}}function tn(Ie,Ae){Ie.container.addOrOverwriteComponent(Ae)}function Xn(Ie){const Ae=Ie.name;if(sn.has(Ae))return ae.debug(`There were multiple attempts to register component ${Ae}.`),!1;sn.set(Ae,Ie);for(const De of Qt.values())en(De,Ie);return!0}function yn(Ie,Ae){const De=Ie.container.getProvider("heartbeat").getImmediate({optional:!0});return De&&De.triggerHeartbeat(),Ie.container.getProvider(Ae)}function mn(Ie,Ae,De=Zt){yn(Ie,Ae).clearInstance(De)}function ci(){sn.clear()}const wn=new Re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vn{constructor(Ae,De,_t){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},De),this._name=De.name,this._automaticDataCollectionEnabled=De.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}const Zr="9.9.4";function Ht(Ie,Ae={}){"object"!=typeof Ae&&(Ae={name:Ae});const De=Object.assign({name:Zt,automaticDataCollectionEnabled:!1},Ae),_t=De.name;if("string"!=typeof _t||!_t)throw wn.create("bad-app-name",{appName:String(_t)});const Pt=Qt.get(_t);if(Pt){if((0,Re.vZ)(Ie,Pt.options)&&(0,Re.vZ)(De,Pt.config))return Pt;throw wn.create("duplicate-app",{appName:_t})}const qt=new Z.H0(_t);for(const Gn of sn.values())qt.addComponent(Gn);const lr=new Vn(Ie,De,qt);return Qt.set(_t,lr),lr}function pr(Ie=Zt){const Ae=Qt.get(Ie);if(!Ae)throw wn.create("no-app",{appName:Ie});return Ae}function Nn(){return Array.from(Qt.values())}function sr(Ie){return St.apply(this,arguments)}function St(){return(St=(0,_.Z)(function*(Ie){const Ae=Ie.name;Qt.has(Ae)&&(Qt.delete(Ae),yield Promise.all(Ie.container.getProviders().map(De=>De.delete())),Ie.isDeleted=!0)})).apply(this,arguments)}function or(Ie,Ae,De){var _t;let Pt=null!==(_t=lt[Ie])&&void 0!==_t?_t:Ie;De&&(Pt+=`-${De}`);const qt=Pt.match(/\s|\//),lr=Ae.match(/\s|\//);if(qt||lr){const Gn=[`Unable to register library "${Pt}" with version "${Ae}":`];return qt&&Gn.push(`library name "${Pt}" contains illegal characters (whitespace or "/")`),qt&&lr&&Gn.push("and"),lr&&Gn.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void ae.warn(Gn.join(" "))}Xn(new Z.wA(`${Pt}-version`,()=>({library:Pt,version:Ae}),"VERSION"))}function Tn(Ie,Ae){if(null!==Ie&&"function"!=typeof Ie)throw wn.create("invalid-log-argument");(0,q.Am)(Ie,Ae)}function cr(Ie){(0,q.Ub)(Ie)}const Yr="firebase-heartbeat-store";let zn=null;function Bn(){return zn||(zn=(0,J.X3)("firebase-heartbeat-database",1,{upgrade:(Ie,Ae)=>{0===Ae&&Ie.createObjectStore(Yr)}}).catch(Ie=>{throw wn.create("idb-open",{originalErrorMessage:Ie.message})})),zn}function on(){return(on=(0,_.Z)(function*(Ie){var Ae;try{return(yield Bn()).transaction(Yr).objectStore(Yr).get(dr(Ie))}catch(De){if(De instanceof Re.ZR)ae.warn(De.message);else{const _t=wn.create("idb-get",{originalErrorMessage:null===(Ae=De)||void 0===Ae?void 0:Ae.message});ae.warn(_t.message)}}})).apply(this,arguments)}function gr(Ie,Ae){return vr.apply(this,arguments)}function vr(){return(vr=(0,_.Z)(function*(Ie,Ae){var De;try{const Pt=(yield Bn()).transaction(Yr,"readwrite");return yield Pt.objectStore(Yr).put(Ae,dr(Ie)),Pt.done}catch(_t){if(_t instanceof Re.ZR)ae.warn(_t.message);else{const Pt=wn.create("idb-set",{originalErrorMessage:null===(De=_t)||void 0===De?void 0:De.message});ae.warn(Pt.message)}}})).apply(this,arguments)}function dr(Ie){return`${Ie.name}!${Ie.options.appId}`}class Qr{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const De=this.container.getProvider("app").getImmediate();this._storage=new jn(De),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var Ae=this;return(0,_.Z)(function*(){const _t=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pt=Zn();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==Pt&&!Ae._heartbeatsCache.heartbeats.some(qt=>qt.date===Pt))return Ae._heartbeatsCache.heartbeats.push({date:Pt,agent:_t}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(qt=>{const lr=new Date(qt.date).valueOf();return Date.now()-lr<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,_.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const De=Zn(),{heartbeatsToSend:_t,unsentEntries:Pt}=function Oi(Ie,Ae=1024){const De=[];let _t=Ie.slice();for(const Pt of Ie){const qt=De.find(lr=>lr.agent===Pt.agent);if(qt){if(qt.dates.push(Pt.date),xe(De)>Ae){qt.dates.pop();break}}else if(De.push({agent:Pt.agent,dates:[Pt.date]}),xe(De)>Ae){De.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:De,unsentEntries:_t}}(Ae._heartbeatsCache.heartbeats),qt=(0,Re.L)(JSON.stringify({version:2,heartbeats:_t}));return Ae._heartbeatsCache.lastSentHeartbeatDate=De,Pt.length>0?(Ae._heartbeatsCache.heartbeats=Pt,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),qt})()}}function Zn(){return(new Date).toISOString().substring(0,10)}class jn{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,Re.hl)()&&(0,Re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,_.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function ln(Ie){return on.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var De=this;return(0,_.Z)(function*(){var _t;if(yield De._canUseIndexedDBPromise){const qt=yield De.read();return gr(De.app,{lastSentHeartbeatDate:null!==(_t=Ae.lastSentHeartbeatDate)&&void 0!==_t?_t:qt.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var De=this;return(0,_.Z)(function*(){var _t;if(yield De._canUseIndexedDBPromise){const qt=yield De.read();return gr(De.app,{lastSentHeartbeatDate:null!==(_t=Ae.lastSentHeartbeatDate)&&void 0!==_t?_t:qt.lastSentHeartbeatDate,heartbeats:[...qt.heartbeats,...Ae.heartbeats]})}})()}}function xe(Ie){return(0,Re.L)(JSON.stringify({version:2,heartbeats:Ie})).length}!function fe(Ie){Xn(new Z.wA("platform-logger",Ae=>new Me(Ae),"PRIVATE")),Xn(new Z.wA("heartbeat",Ae=>new Qr(Ae),"PRIVATE")),or(Ve,"0.7.32",Ie),or(Ve,"0.7.32","esm2017"),or("fire-js","")}("")},4859:(Kt,qe,H)=>{H.d(qe,{H0:()=>Ve,wA:()=>q,zt:()=>J});var _=H(5861),Z=H(2090);class q{constructor(ae,ie,me){this.name=ae,this.instanceFactory=ie,this.type=me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ae){return this.instantiationMode=ae,this}setMultipleInstances(ae){return this.multipleInstances=ae,this}setServiceProps(ae){return this.serviceProps=ae,this}setInstanceCreatedCallback(ae){return this.onInstanceCreated=ae,this}}const Re="[DEFAULT]";class J{constructor(ae,ie){this.name=ae,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ae){const ie=this.normalizeInstanceIdentifier(ae);if(!this.instancesDeferred.has(ie)){const me=new Z.BH;if(this.instancesDeferred.set(ie,me),this.isInitialized(ie)||this.shouldAutoInitialize())try{const it=this.getOrInitializeService({instanceIdentifier:ie});it&&me.resolve(it)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(ae){var ie;const me=this.normalizeInstanceIdentifier(ae?.identifier),it=null!==(ie=ae?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(me)&&!this.shouldAutoInitialize()){if(it)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:me})}catch(tt){if(it)return null;throw tt}}getComponent(){return this.component}setComponent(ae){if(ae.name!==this.name)throw Error(`Mismatching Component ${ae.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ae,this.shouldAutoInitialize()){if(function Le(He){return"EAGER"===He.instantiationMode}(ae))try{this.getOrInitializeService({instanceIdentifier:Re})}catch{}for(const[ie,me]of this.instancesDeferred.entries()){const it=this.normalizeInstanceIdentifier(ie);try{const tt=this.getOrInitializeService({instanceIdentifier:it});me.resolve(tt)}catch{}}}}clearInstance(ae=Re){this.instancesDeferred.delete(ae),this.instancesOptions.delete(ae),this.instances.delete(ae)}delete(){var ae=this;return(0,_.Z)(function*(){const ie=Array.from(ae.instances.values());yield Promise.all([...ie.filter(me=>"INTERNAL"in me).map(me=>me.INTERNAL.delete()),...ie.filter(me=>"_delete"in me).map(me=>me._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ae=Re){return this.instances.has(ae)}getOptions(ae=Re){return this.instancesOptions.get(ae)||{}}initialize(ae={}){const{options:ie={}}=ae,me=this.normalizeInstanceIdentifier(ae.instanceIdentifier);if(this.isInitialized(me))throw Error(`${this.name}(${me}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const it=this.getOrInitializeService({instanceIdentifier:me,options:ie});for(const[tt,Ke]of this.instancesDeferred.entries())me===this.normalizeInstanceIdentifier(tt)&&Ke.resolve(it);return it}onInit(ae,ie){var me;const it=this.normalizeInstanceIdentifier(ie),tt=null!==(me=this.onInitCallbacks.get(it))&&void 0!==me?me:new Set;tt.add(ae),this.onInitCallbacks.set(it,tt);const Ke=this.instances.get(it);return Ke&&ae(Ke,it),()=>{tt.delete(ae)}}invokeOnInitCallbacks(ae,ie){const me=this.onInitCallbacks.get(ie);if(me)for(const it of me)try{it(ae,ie)}catch{}}getOrInitializeService({instanceIdentifier:ae,options:ie={}}){let me=this.instances.get(ae);if(!me&&this.component&&(me=this.component.instanceFactory(this.container,{instanceIdentifier:(He=ae,He===Re?void 0:He),options:ie}),this.instances.set(ae,me),this.instancesOptions.set(ae,ie),this.invokeOnInitCallbacks(me,ae),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ae,me)}catch{}var He;return me||null}normalizeInstanceIdentifier(ae=Re){return this.component?this.component.multipleInstances?ae:Re:ae}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ve{constructor(ae){this.name=ae,this.providers=new Map}addComponent(ae){const ie=this.getProvider(ae.name);if(ie.isComponentSet())throw new Error(`Component ${ae.name} has already been registered with ${this.name}`);ie.setComponent(ae)}addOrOverwriteComponent(ae){this.getProvider(ae.name).isComponentSet()&&this.providers.delete(ae.name),this.addComponent(ae)}getProvider(ae){if(this.providers.has(ae))return this.providers.get(ae);const ie=new J(ae,this);return this.providers.set(ae,ie),ie}getProviders(){return Array.from(this.providers.values())}}},1877:(Kt,qe,H)=>{H.d(qe,{Am:()=>He,Ub:()=>Ve,Yd:()=>Le,in:()=>Z});const _=[];var Z=(()=>{return(ae=Z||(Z={}))[ae.DEBUG=0]="DEBUG",ae[ae.VERBOSE=1]="VERBOSE",ae[ae.INFO=2]="INFO",ae[ae.WARN=3]="WARN",ae[ae.ERROR=4]="ERROR",ae[ae.SILENT=5]="SILENT",Z;var ae})();const q={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},Re=Z.INFO,J={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},Me=(ae,ie,...me)=>{if(ie<ae.logLevel)return;const it=(new Date).toISOString(),tt=J[ie];if(!tt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[tt](`[${it}]  ${ae.name}:`,...me)};class Le{constructor(ie){this.name=ie,this._logLevel=Re,this._logHandler=Me,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in Z))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?q[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...ie),this._logHandler(this,Z.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...ie),this._logHandler(this,Z.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...ie),this._logHandler(this,Z.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...ie),this._logHandler(this,Z.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...ie),this._logHandler(this,Z.ERROR,...ie)}}function Ve(ae){_.forEach(ie=>{ie.setLogLevel(ae)})}function He(ae,ie){for(const me of _){let it=null;ie&&ie.level&&(it=q[ie.level]),me.userLogHandler=null===ae?null:(tt,Ke,...zt)=>{const at=zt.map(nt=>{if(null==nt)return null;if("string"==typeof nt)return nt;if("number"==typeof nt||"boolean"==typeof nt)return nt.toString();if(nt instanceof Error)return nt.message;try{return JSON.stringify(nt)}catch{return null}}).filter(nt=>nt).join(" ");Ke>=(it??tt.logLevel)&&ae({level:Z[Ke].toLowerCase(),message:at,args:zt,type:tt.name})}}}},8766:(Kt,qe,H)=>{H.d(qe,{Lj:()=>mt,X3:()=>Bt});var _=H(5861);let q,Re;const Le=new WeakMap,Ve=new WeakMap,He=new WeakMap,ae=new WeakMap,ie=new WeakMap;let tt={get(P,ve,oe){if(P instanceof IDBTransaction){if("done"===ve)return Ve.get(P);if("objectStoreNames"===ve)return P.objectStoreNames||He.get(P);if("store"===ve)return oe.objectStoreNames[1]?void 0:oe.objectStore(oe.objectStoreNames[0])}return nt(P[ve])},set:(P,ve,oe)=>(P[ve]=oe,!0),has:(P,ve)=>P instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in P};function at(P){return"function"==typeof P?function zt(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Me(){return Re||(Re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...ve){return P.apply(Ne(this),ve),nt(Le.get(this))}:function(...ve){return nt(P.apply(Ne(this),ve))}:function(ve,...oe){const Te=P.call(Ne(this),ve,...oe);return He.set(Te,ve.sort?ve.sort():[ve]),nt(Te)}}(P):(P instanceof IDBTransaction&&function it(P){if(Ve.has(P))return;const ve=new Promise((oe,Te)=>{const Se=()=>{P.removeEventListener("complete",Be),P.removeEventListener("error",Ct),P.removeEventListener("abort",Ct)},Be=()=>{oe(),Se()},Ct=()=>{Te(P.error||new DOMException("AbortError","AbortError")),Se()};P.addEventListener("complete",Be),P.addEventListener("error",Ct),P.addEventListener("abort",Ct)});Ve.set(P,ve)}(P),((P,ve)=>ve.some(oe=>P instanceof oe))(P,function J(){return q||(q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,tt):P)}function nt(P){if(P instanceof IDBRequest)return function me(P){const ve=new Promise((oe,Te)=>{const Se=()=>{P.removeEventListener("success",Be),P.removeEventListener("error",Ct)},Be=()=>{oe(nt(P.result)),Se()},Ct=()=>{Te(P.error),Se()};P.addEventListener("success",Be),P.addEventListener("error",Ct)});return ve.then(oe=>{oe instanceof IDBCursor&&Le.set(oe,P)}).catch(()=>{}),ie.set(ve,P),ve}(P);if(ae.has(P))return ae.get(P);const ve=at(P);return ve!==P&&(ae.set(P,ve),ie.set(ve,P)),ve}const Ne=P=>ie.get(P);function Bt(P,ve,{blocked:oe,upgrade:Te,blocking:Se,terminated:Be}={}){const Ct=indexedDB.open(P,ve),Rt=nt(Ct);return Te&&Ct.addEventListener("upgradeneeded",kt=>{Te(nt(Ct.result),kt.oldVersion,kt.newVersion,nt(Ct.transaction))}),oe&&Ct.addEventListener("blocked",()=>oe()),Rt.then(kt=>{Be&&kt.addEventListener("close",()=>Be()),Se&&kt.addEventListener("versionchange",()=>Se())}).catch(()=>{}),Rt}function mt(P,{blocked:ve}={}){const oe=indexedDB.deleteDatabase(P);return ve&&oe.addEventListener("blocked",()=>ve()),nt(oe).then(()=>{})}const st=["get","getKey","getAll","getAllKeys","count"],Ge=["put","add","delete","clear"],Mt=new Map;function $e(P,ve){if(!(P instanceof IDBDatabase)||ve in P||"string"!=typeof ve)return;if(Mt.get(ve))return Mt.get(ve);const oe=ve.replace(/FromIndex$/,""),Te=ve!==oe,Se=Ge.includes(oe);if(!(oe in(Te?IDBIndex:IDBObjectStore).prototype)||!Se&&!st.includes(oe))return;const Be=function(){var Ct=(0,_.Z)(function*(Rt,...kt){const Ut=this.transaction(Rt,Se?"readwrite":"readonly");let Zt=Ut.store;return Te&&(Zt=Zt.index(kt.shift())),(yield Promise.all([Zt[oe](...kt),Se&&Ut.done]))[0]});return function(kt){return Ct.apply(this,arguments)}}();return Mt.set(ve,Be),Be}!function Ke(P){tt=P(tt)}(P=>({...P,get:(ve,oe,Te)=>$e(ve,oe)||P.get(ve,oe,Te),has:(ve,oe)=>!!$e(ve,oe)||P.has(ve,oe)}))},5861:(Kt,qe,H)=>{function _(q,Re,J,Me,Le,Ve,He){try{var ae=q[Ve](He),ie=ae.value}catch(me){return void J(me)}ae.done?Re(ie):Promise.resolve(ie).then(Me,Le)}function Z(q){return function(){var Re=this,J=arguments;return new Promise(function(Me,Le){var Ve=q.apply(Re,J);function He(ie){_(Ve,Me,Le,He,ae,"next",ie)}function ae(ie){_(Ve,Me,Le,He,ae,"throw",ie)}He(void 0)})}}H.d(qe,{Z:()=>Z})}},Kt=>{Kt(Kt.s=6757)}]);